<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-08-17 Tue 08:18 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2021.08.10.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2021.08.24.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of August 10 to 17, 2021.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">http-multipart-formdata v3.0.1 released</a></li>
<li><a href="#2">Call for participation: ML Family Workshop 2021</a></li>
<li><a href="#3">Coq-of-ocaml to translate OCaml to Coq</a></li>
<li><a href="#org6c1b08b">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">http-multipart-formdata v3.0.1 released</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-http-multipart-formdata-v3-0-1-released/8261/2">https://discuss.ocaml.org/t/ann-http-multipart-formdata-v3-0-1-released/8261/2</a>
</p>
</div>

<div id="outline-container-orgbc75ab7" class="outline-3">
<h3 id="orgbc75ab7">Continuing the thread from last week, Hannes Mehnert asked</h3>
<div class="outline-text-3" id="text-orgbc75ab7">
<p>
Thanks for your work on that. I'm curious about the different "multipart" libraries now
available for OCaml &#x2013; anyone has a brief comparison of them?
</p>

<ul class="org-ul">
<li><a href="https://github.com/lemaetech/http-multipart-formdata">http-multipart-formdata</a> as announced above</li>
<li><a href="https://github.com/dinosaure/multipart_form/">multipart_form</a> by @dinosaure</li>
<li><a href="https://github.com/cryptosense/multipart-form-data">multipart-form-data</a> by cryptosense</li>
</ul>

<p>
Are there functional differences? Correctness? Performance? Or just a matter of style and
co-development?
</p>
</div>
</div>


<div id="outline-container-orgbc347fe" class="outline-3">
<h3 id="orgbc347fe">Bikal Lem replied</h3>
<div class="outline-text-3" id="text-orgbc347fe">
<p>
One obvious difference among the three is <code>http-multipart-formdata</code> doesn't depend on any
IO/Promise libraries, such as lwt or async. so you may find it easier to integrate in your
project.
</p>

<p>
<code>mulitpart-form-data</code> exposes a callback based streaming api, whereas http-multipart-formdata
exposes a non-callback, non-blocking based API streaming api.
</p>

<p>
The API surface of <code>http-multipart-formdata</code> is kept as low as possible, primarily 3 API
calls - <code>boundary, reader</code> and <code>read</code> call.
</p>

<p>
The dependency list of <code>http-multipart-formdata</code> is the thinnest. This may or may not be an
issue depending on your aesthetics. However, relatively/comparatively the less your
dependencies, the easier it is to integrate the lib with other OCaml libs and environments
such as various OSes.
</p>
</div>
</div>


<div id="outline-container-orga1e81a7" class="outline-3">
<h3 id="orga1e81a7">Bikal Lem added</h3>
<div class="outline-text-3" id="text-orga1e81a7">
<p>
I should also add <code>http-multipart-formdata</code> has been implemented with zero-copy streaming and
minimal allocation in mind.
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Call for participation: ML Family Workshop 2021</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2021-08/msg00005.html">https://sympa.inria.fr/sympa/arc/caml-list/2021-08/msg00005.html</a>
</p>
</div>

<div id="outline-container-org34b7629" class="outline-3">
<h3 id="org34b7629">Jonathan Protzenko announced</h3>
<div class="outline-text-3" id="text-org34b7629">
<p>
We are happy to announce that the ML Family Workshop is back for its
2021 edition, which we will be held online on Thursday August 26th, in
conjunction with ICFP 2021. We invite you to subscribe to, and attend
the workshop, in addition to the main ICFP conference.
</p>

<p>
We are thrilled to announce that Don Syme will give this year's keynote:
"Narratives and Lessons from The Early History of F#". Please join us!
</p>

<p>
The program features 14 exciting submissions, including 4 short talks.
The workshop will be held online in the 6pm-3am time band (Seoul Time).
Talks will be pre-recorded and uploaded online for those who cannot attend.
</p>

<ul class="org-ul">
<li>Program: <a href="https://icfp21.sigplan.org/home/mlfamilyworkshop-2021#program">https://icfp21.sigplan.org/home/mlfamilyworkshop-2021#program</a></li>
<li>Keynote: <a href="https://icfp21.sigplan.org/details/mlfamilyworkshop-2021-papers/15/Keynote-Narratives-and-Lessons-from-The-Early-History-of-F">https://icfp21.sigplan.org/details/mlfamilyworkshop-2021-papers/15/Keynote-Narratives-and-Lessons-from-The-Early-History-of-F</a>-</li>
<li>ICFP home: <a href="http://icfp21.sigplan.org/home">http://icfp21.sigplan.org/home</a></li>
</ul>
</div>

<div id="outline-container-org116cd14" class="outline-4">
<h4 id="org116cd14">Program committee</h4>
<div class="outline-text-4" id="text-org116cd14">
<ul class="org-ul">
<li>Danel Ahman (University of Ljubljana)</li>
<li>Robert Atkey (University of Strathclyde)</li>
<li>Frédéric Bour (Tarides)</li>
<li>Ezgi Çiçek (Facebook London)</li>
<li>Youyou Cong (Tokyo Institute of Technology)</li>
<li>Richard A. Eisenberg (Tweag I/O)</li>
<li>Martin Elsman (University of Copenhagen, Denmark)</li>
<li>Ohad Kammar (University of Edinburgh)</li>
<li>Naoki Kobayashi (University of Tokyo, Japan)</li>
<li>Benoît Montagu (Inria)</li>
<li>Jonathan Protzenko (Microsoft Research) (Chair)</li>
<li>Kristina Sojakova (INRIA Paris)</li>
<li>Don Syme (Microsoft)</li>
<li>Matías Toro (University of Chile)</li>
<li>Katsuhiro Ueno (Tohoku University)</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Coq-of-ocaml to translate OCaml to Coq</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/coq-of-ocaml-to-translate-ocaml-to-coq/8288/1">https://discuss.ocaml.org/t/coq-of-ocaml-to-translate-ocaml-to-coq/8288/1</a>
</p>
</div>

<div id="outline-container-org68dcbec" class="outline-3">
<h3 id="org68dcbec">Guillaume Claret announced</h3>
<div class="outline-text-3" id="text-org68dcbec">
<p>
I am pleased to present the <a href="https://clarus.github.io/coq-of-ocaml/">coq-of-ocaml</a> project,
to translate a subset of OCaml to the <a href="https://coq.inria.fr/">Coq</a> proof assistant. The aim
is to do formal verification on OCaml programs. The idea is to generate a Coq translation as
close as possible to the original code in terms of intent but using the Coq syntax. As a
short example, if we take the following OCaml code and run <code>coq-of-ocaml</code>:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">'a tree</span> =
| <span style="color: #000000; background-color: #ffffff;">Leaf</span> <span style="color: #a020f0;">of</span> 'a
| <span style="color: #000000; background-color: #ffffff;">Node</span> <span style="color: #a020f0;">of</span> 'a tree * 'a tree

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">sum</span> <span style="color: #a0522d;">tree</span> =
  <span style="color: #a020f0;">match</span> tree <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">Leaf</span> n -&gt; n
  | <span style="color: #000000; background-color: #ffffff;">Node</span> (tree1, tree2) -&gt; sum tree1 + sum tree2
</pre>
</div>
<p>
we get the following Coq file:
</p>
<div class="org-src-container">
<pre class="src src-coq">Require Import CoqOfOCaml.CoqOfOCaml.
Require Import CoqOfOCaml.Settings.

Inductive tree (a : Set) : Set :=
| Leaf : a -&gt; tree a
| Node : tree a -&gt; tree a -&gt; tree a.

Arguments Leaf {_}.
Arguments Node {_}.

Fixpoint sum (tree : tree int) : int :=
  match tree with
  | Leaf n =&gt; n
  | Node tree1 tree2 =&gt; Z.add (sum tree1) (sum tree2)
  end.
</pre>
</div>

<p>
We support the following OCaml features:
</p>
<ul class="org-ul">
<li>the core of OCaml (functions, let bindings, pattern-matching,&#x2026;)</li>
<li>type definitions (records, inductive types, synonyms, mutual types)</li>
<li>monadic programs</li>
<li>modules as namespaces</li>
<li>modules as polymorphic records (signatures, functors, first-class modules)</li>
<li>multiple-file projects (thanks to Merlin)</li>
<li>both <code>.ml</code> and <code>.mli</code> files</li>
<li>existential types (we use impredicative sets option in Coq)</li>
</ul>

<p>
We also have some support for the GADTs, the polymorphic variants, and the extensible types.
We are in particular working on having an axiom-free translation of the GADTs to Coq. We do
not support:
</p>
<ul class="org-ul">
<li>side-effects outside of a monad (references, exceptions, &#x2026;);</li>
<li>object-oriented programming;</li>
<li>various combinations of OCaml features for which <code>coq-of-ocaml</code> should generate a warning.</li>
</ul>

<p>
Our main example and use case is the
<a href="https://nomadic-labs.gitlab.io/coq-tezos-of-ocaml/">coq-tezos-of-ocaml</a> project. This
contains a translation of most of the <a href="https://gitlab.com/tezos/tezos/-/tree/master/src/proto_alpha/lib_protocol">economic
protocol</a> of the
<a href="https://tezos.com/">Tezos</a> blockchain (around 30.000 lines of OCaml translated to 40.000
lines of Coq). For example, we verify the comparison functions defined in
<a href="https://gitlab.com/tezos/tezos/-/blob/master/src/proto_alpha/lib_protocol/script_comparable.ml">src/proto_alpha/lib_protocol/script_comparable.ml</a>
with
<a href="https://nomadic-labs.gitlab.io/coq-tezos-of-ocaml/docs/proofs/script_comparable">src/Proto_alpha/Proofs/Script_comparable.v</a>.
</p>

<p>
We are looking for the application to other projects too.
</p>

<p>
We think the best way to use <code>coq-of-ocaml</code> is to continue developing in OCaml and run
<code>coq-of-ocaml</code> to keep a synchronized translation in Coq. Having a working Coq translation
(as compiling in Coq) forces us to avoid some OCaml constructs. We believe these constructs
would probably be hard to verify anyway. Then, on the Coq side, we can verify some important
or easy to catch properties. If there is a regression in the OCaml code, re-running
<code>coq-of-ocaml</code> should make the proofs break.
</p>
</div>
</div>
</div>




<div id="outline-container-org6c1b08b" class="outline-2">
<h2 id="org6c1b08b">Old CWN</h2>
<div class="outline-text-2" id="text-org6c1b08b">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org715ad01">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
