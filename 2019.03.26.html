<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-03-26 Tue 16:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2019.03.19.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2019.04.02.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of March 19 to 26, 2019.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">textrazor 0.1</a></li>
<li><a href="#2">'Rails on OCaml'</a></li>
<li><a href="#3">Bucklescript 5.0 released</a></li>
<li><a href="#4">Tablecloth - a new standard library for OCaml and ReasonML</a></li>
<li><a href="#5">Easy_logging 0.2</a></li>
<li><a href="#6">OCaml meetup in SF on Tuesday 3/26</a></li>
<li><a href="#7">Yojson 2.0.0 plans</a></li>
<li><a href="#8">iso639 - language codes</a></li>
<li><a href="#9">Other OCaml News</a></li>
<li><a href="#org43b44ca">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgcb62b01" class="outline-2">
<h2 id="1">textrazor 0.1</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-textrazor-0-1/3527/1">https://discuss.ocaml.org/t/ann-textrazor-0-1/3527/1</a>
</p>
</div>

<div id="outline-container-org568bad6" class="outline-3">
<h3 id="org568bad6">Richard Degenne announced</h3>
<div class="outline-text-3" id="text-org568bad6">
<p>
I am very proud to announce my very first OCaml package, in the form of <code>textrazor</code>, an OCaml wrapper for the <a href="https://www.textrazor.com/">TextRazor</a> API.
</p>

<p>
<a href="https://github.com/Richard-Degenne/ocaml-textrazor/">https://github.com/Richard-Degenne/ocaml-textrazor/</a>
</p>

<p>
This first release supports:
</p>

<ul class="org-ul">
<li>The main analysis endpoint, with most options and sensible defaults built-in;</li>
<li>The account endpoint.</li>
</ul>

<p>
I am sure that a lot can be done to improve the code. Please feel free to comment, open issues or even submit pull requests about anything if you feel like it. :)
</p>

<p>
I've set up a (non-exhaustive) roadmap of features I will be working on in the coming days. Once again, contributions of any kind are most welcome.
</p>

<p>
<a href="https://github.com/Richard-Degenne/ocaml-textrazor/projects/1">https://github.com/Richard-Degenne/ocaml-textrazor/projects/1</a>
</p>
</div>
</div>
</div>




<div id="outline-container-orgf80c7ae" class="outline-2">
<h2 id="2">'Rails on OCaml'</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/rails-on-ocaml/3537/1">https://discuss.ocaml.org/t/rails-on-ocaml/3537/1</a>
</p>
</div>

<div id="outline-container-org180f20c" class="outline-3">
<h3 id="org180f20c">Yawar Amin said</h3>
<div class="outline-text-3" id="text-org180f20c">
<p>
I'd like to discuss @jasim 's <a href="https://protoship.io/blog/rails-on-ocaml/">post</a> a bit. It's a great conversation starter but it got me thinking that we need to actually look at how such a framework would <span class="underline">look and feel</span> from the user's (i.e. the web dev's) perspective. And whenever I think of web dev, the pattern I keep coming back to is the tried-and-true MVC. And I really like how Phoenix has done it, so I keep wanting to borrow some ideas from there. So to me, here's what a nice project layout might look like (this is native so all module names are disambiguated by dune):
</p>

<pre class="example">
dune-project
README.md
src/
  dune
  model/
    dune
    User.re
  service/
    dune
    User.re
  web/
    controller/
      dune
      User.re
    dune
    middleware/
      ...
    Server.re
    template/
      not-found.mustache.html
      not-found.mustache.json
</pre>

<p>
And here are a couple of example usages from this imaginary project: <a href="https://gist.github.com/yawaramin/f0a24f1b01b193dd6d251e5e43be65e9">https://gist.github.com/yawaramin/f0a24f1b01b193dd6d251e5e43be65e9</a>
</p>

<p>
So in the above snippet, the main app is set up in <code>src/web/Server.re</code>. What I wanted here was a really minimalistic but also extensible way to set up routes and middlewares. And to me the way that makes the most sense to handle routing in OCaml is pattern-matching (kudos to the ReasonReact team for coming up with that simple and elegant design). So the <code>Server</code> module is the heart of the app, but this being OCaml, there's no magic involved–the route handlers are just functions from routes and requests to (promises of) responses.
</p>

<p>
Requests should contain things like the headers, query params, cookies, session, flash, body, etc.
</p>

<p>
Responses should be constructed programmatically (using <code>ReWeb.Response.{make,makeAsync}</code>) or from ocaml-mustache templates (see <code>template/</code> subdirectory). The response constructor function should take optional arguments for status, headers, cookies, etc. with appropriate defaults.
</p>

<p>
Middleware should be functions that take a response and return a promise of <span class="underline">request</span> (which might be a <span class="underline">cancelled</span> request); in this way they are composeable (much like Elixir's plugs).
</p>

<p>
I haven't touched on data access here; to be honest I'm not very familiar with the OCaml database libraries at the moment, but I am leaning towards Caqti since it seems to be active, and supports the popular OSS DBs as well as Lwt.
</p>

<p>
Scaffolding would be great to have and it would be great if dune or opam would let us do that (e.g. <code>opam new my-app --scaffold reweb</code>), but in the meantime we can probably get away with maintaining example starter projects which people can copy to start with.
</p>

<p>
Lots of this is off the top of my head but what I'm trying to do here is uncover an <span class="underline">ergonomic</span> design for a web framework, based on learnings from recent successful frameworks. I think a large part of it would be just giving users a 'blessed stack' of libraries to start with, so they don't have to go hunting throughout the ecosystem and don't have to figure out and set up a project structure from scratch (where does the router go? where do the controllers go? where do I put the tests?). And so on.
</p>

<p>
P.S. the pattern-matching routers look <span class="underline">really</span> nice in OCaml syntax.
</p>
</div>
</div>


<div id="outline-container-org303740c" class="outline-3">
<h3 id="org303740c">RogerT asked and Yawar Amin replied</h3>
<div class="outline-text-3" id="text-org303740c">
<p>
&gt; Is it the only pattern? In fact, what are all the possible patterns?
</p>

<p>
Well, for example Eliom has a service-handler pattern for creating endpoints: <a href="https://ocsigen.org/eliom/6.6/manual/server-services">https://ocsigen.org/eliom/6.6/manual/server-services</a>
</p>

<p>
There is <a href="https://github.com/inhabitedtype/ocaml-webmachine">ocaml-webmachine</a> which treats endpoints as resources that are exposed according to a state machine.
</p>

<p>
There's <a href="https://github.com/mirage/ocaml-cohttp">Cohttp</a> which treats the server as a single function that gets run by the event loop. It's up to users to define abstractions on top of that.
</p>

<p>
So I think there is no shortage of approaches to web servers in OCaml.
</p>
</div>
</div>


<div id="outline-container-orgd9e5d53" class="outline-3">
<h3 id="orgd9e5d53">Gabriel Radanne then said</h3>
<div class="outline-text-3" id="text-orgd9e5d53">
<p>
&gt; Well, for example Eliom has a service-handler pattern for creating endpoints:
</p>

<p>
Note that Eliom contains several pieces:
</p>
<ul class="org-ul">
<li>The <b>web framework</b> indeed promotes this service-handler pattern, although that is fairly lightweight and flexible (and you can basically treat it like cohttp and add your abstraction on top, if you feel like it)</li>
<li>The <b>language</b>, on the other hand, is almost completely model-agnostic, it only cares about making sure data-transfers between client and servers are well typed, sound, and as easy to do as possible.</li>
</ul>

<p>
So far, the language and the framework are not as separate as I would like, but it's certainly on my todo-list to make all this more modular.
</p>
</div>
</div>


<div id="outline-container-org69f7afd" class="outline-3">
<h3 id="org69f7afd">Jasim A Basheer said</h3>
<div class="outline-text-3" id="text-org69f7afd">
<p>
Thanks @yawaramin for framing this nicely and continuing the conversation.
</p>

<p>
In my mind I wanted to design an <span class="underline">ideal</span> framework, yet somehow avoid the <a href="https://en.wikipedia.org/wiki/Second-system_effect">second-system effect</a> by basing the design on actual application needs. And so in service to this idealism I have wanted to build a web application in Haskell and borrow the best ideas they have to offer. I think it might never come to pass, so if there are people who know how the Haskell ecosystem approaches this, that'd be great to hear.
</p>

<p>
Since we have the opportunity to do something from scratch, it might be worth thinking what a futuristic framework should look like. Otherwise we'll have to play catch-up with mature alternatives, repeating their mistakes, and not having anything new and radically better to offer to the world. Working on that kind of a project might not inspire the kind of passion it takes to bring something like this into production.
</p>

<p>
I think dhh's approach to Rails is worth emulating - <a href="https://dhh.dk/posts/6-why-theres-no-rails-inc">framework must be extracted, not envisioned</a>. So what kind of web applications is Rails ideally suited for, and what kinds does it make it difficult and unwieldy? And how can we have the best of all worlds?
</p>

<p>
Rails is built as a vehicle for <a href="https://basecamp.com">Basecamp</a>, which is a project management software. The major operations are create, read, update, and delete of database records. It is filled with forms, and a simple request-response cycle works well for most of them. The closer the application you're building is to a Basecamp, the more affordances Rails gives you. But if you're building say a WhatsApp clone with Rails, you're going against the grain of the system.
</p>
</div>

<div id="outline-container-org7e11659" class="outline-4">
<h4 id="org7e11659">ORM</h4>
<div class="outline-text-4" id="text-org7e11659">
<p>
Since most operations are CRUD, Rails gives significant developer comfort when it comes to database operations, and that is thanks to its ORM. It gives a lazy interface to construct queries - they are first class values - and gets executed only at the last possible moment. Rails follows the ActiveRecord pattern and I prefer it over having to construct SQL statements for mundane stuff. We can always drop down to raw SQL when needed, but for simple reads and updates, I've found ActiveRecord to be more ergonomic.
</p>

<p>
But would a simple layering like <a href="https://github.com/mirage/orm">mirage/orm</a> be fine, or are Typed ORMs like <a href="http://pgocaml.forge.ocamlcore.org/">pgocaml</a>, which extracts database schema info in compile time and makes types out of them, worth looking into? Haskell has multiple such implementations and I hope they have converged on some Do's and Don'ts there.
</p>
</div>
</div>

<div id="outline-container-org631c509" class="outline-4">
<h4 id="org631c509">Database Migrations</h4>
<div class="outline-text-4" id="text-org631c509">
<p>
I think Phoenix, Rails, Django, and even Java with <a href="https://flywaydb.org/">Flyway</a> have all converged over an identical pattern for database migrations and there is no wheel to be reinvented here.
</p>
</div>
</div>

<div id="outline-container-org7b68fca" class="outline-4">
<h4 id="org7b68fca">Streaming</h4>
<div class="outline-text-4" id="text-org7b68fca">
<p>
Rails support streaming by treating the response object as an enumerator. This allows us to build pages that can immediately start sending data back to the client without having to wait till the whole page is built.
</p>
</div>
</div>

<div id="outline-container-org63cf068" class="outline-4">
<h4 id="org63cf068">Concurrency, Evented vs Threaded vs Multi-process</h4>
<div class="outline-text-4" id="text-org63cf068">
<p>
My understanding is quite hazy on this. What is it going to be? I know I don't want every single one of my database call to be a callback, like we're forced to do in Node, which is now papered over by async/await. But is it possible to build non-evented servers on which a WhatsApp can be built?
</p>
</div>
</div>

<div id="outline-container-org8abe4af" class="outline-4">
<h4 id="org8abe4af">Background Jobs</h4>
<div class="outline-text-4" id="text-org8abe4af">
<p>
Do we serialize background jobs outside the application - like in Sidekiq, which stores everything in Redis? Or is it possible to spawn off new processes like in Erlang? How do we scale processes or jobs across multiple servers? How about observability?
</p>
</div>
</div>

<div id="outline-container-org90d68be" class="outline-4">
<h4 id="org90d68be">Templating</h4>
<div class="outline-text-4" id="text-org90d68be">
<p>
Conventional  string-interpolation with partials is much less ergonomic than writing reusable components and dealing with them as HTML tags like in JSX.  It should be possible to use the same code to render pages both on the server and the client &#x2013; React+JSX server-side rendering does this really well.
</p>
</div>
</div>

<div id="outline-container-orgf5db77a" class="outline-4">
<h4 id="orgf5db77a">Client-side code</h4>
<div class="outline-text-4" id="text-orgf5db77a">
<p>
Ocsigen seems to allow the ability to write functions that execute on both the client and the server transparently, while allowing context-dependent behavior when necessary. It takes care of maintaining and transferring state to and fro between server and client, eliminating the need to write custom endpoints. I've tried pursuing the documentation and found it difficult to understand, happy to be corrected.
</p>

<p>
In my experience the majority of client-side code need to be present only on the browser, and treating the code paths separately is clearer to understand. What we need however is a better way to allow data to be passed around, which the next section addresses.
</p>
</div>
</div>

<div id="outline-container-org1cdd038" class="outline-4">
<h4 id="org1cdd038">Client-side data</h4>
<div class="outline-text-4" id="text-org1cdd038">
<p>
Rich web applications require hundreds of JSON endpoints with varying levels of granularity. GraphQL attempts to solve this by creating a declarative API, which express the schema of the data needed by each client request. Interesting waters there.
</p>

<p>
These are a set of questions I had in my mind when I wrote that post. They are not terribly well thought out, but I'm hoping those with more clarity can chime in.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-org148f9a1" class="outline-2">
<h2 id="3">Bucklescript 5.0 released</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/bucklescript-5-0-released/3540/1">https://discuss.ocaml.org/t/bucklescript-5-0-released/3540/1</a>
</p>
</div>

<div id="outline-container-org4fa972a" class="outline-3">
<h3 id="org4fa972a">Hongbo Zhang announced</h3>
<div class="outline-text-3" id="text-org4fa972a">
<p>
See <a href="https://bucklescript.github.io/blog/">https://bucklescript.github.io/blog/</a> for more details.
The cool thing is that you can try it out within 20s everywhere using cloud service like <a href="https://c9.io/">https://c9.io/</a> <br />
<code>npm i -g bs-platform &amp;&amp; bsb -init test &amp;&amp; cd test &amp;&amp; bsb</code>
</p>
</div>
</div>
</div>




<div id="outline-container-org395ca21" class="outline-2">
<h2 id="4">Tablecloth - a new standard library for OCaml and ReasonML</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/tablecloth-a-new-standard-library-for-ocaml-and-reasonml/3528/1">https://discuss.ocaml.org/t/tablecloth-a-new-standard-library-for-ocaml-and-reasonml/3528/1</a>
</p>
</div>

<div id="outline-container-orgd4b8887" class="outline-3">
<h3 id="orgd4b8887">Paul Biggar announced</h3>
<div class="outline-text-3" id="text-orgd4b8887">
<p>
Hey folks, I've been working on a standard library for OCaml and ReasonML, which has the same API in both. This is to help us with code reuse between our OCaml backend and our ReasonML frontend.
</p>

<p>
It's called <a href="https://github.com/darklang/tablecloth">tablecloth</a>, and we wrote up an announcement <a href="https://medium.com/darklang/tablecloth-a-new-standard-library-for-ocaml-reasonml-d29a73a557b1">here</a>.
</p>

<p>
Would love to folks contributing back to it - if you're interested there's a long list of ways to help.
</p>
</div>
</div>
</div>




<div id="outline-container-org73fbe05" class="outline-2">
<h2 id="5">Easy_logging 0.2</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/easy-logging-0-2/3551/1">https://discuss.ocaml.org/t/easy-logging-0-2/3551/1</a>
</p>
</div>

<div id="outline-container-org4970a13" class="outline-3">
<h3 id="org4970a13">Sapristi announced</h3>
<div class="outline-text-3" id="text-org4970a13">
<p>
feeling that there was some lack of logging librairies for OCaml (apart from the Logs module, which was a bit too complicated to use for me), I wrote a (hopefully) both easy to use and yet powerful logging library, taking inspiration from the excellent Python logging package.
</p>

<p>
Some defaults are provided that allow logging to the stdout and/or files, but it is also possible to redefine you own handlers.
</p>

<p>
<a href="https://github.com/sapristi/easy_logging">Sources</a> and <a href="https://sapristi.github.io/easy_logging/easy_logging/">Documentation</a> are provided.
</p>

<p>
Any comment or suggestion would be appreciated.
</p>
</div>
</div>


<div id="outline-container-orgfdb52ba" class="outline-3">
<h3 id="orgfdb52ba">Christian Lindig asked and Sapristi replied</h3>
<div class="outline-text-3" id="text-orgfdb52ba">
<blockquote>
<p>
I believe support for printf-style strings for creating log messages would be useful. Formatting strings even when they are not used because of the log priority can introduce a performance concern, though.
</p>
</blockquote>

<p>
I think I will eventually add support for format strings, but for now you can use the logging methods that take a lazy string as an input, for example
</p>

<div class="org-src-container">
<pre class="src src-ocaml">logging<span style="color: #a52a2a;">#</span>ldebug <span style="color: #a52a2a;">(</span> <span style="color: #a020f0;">lazy</span> <span style="color: #a52a2a;">(</span><span style="color: #228b22;">Printf.</span>sprintf <span style="color: #8b2252;">"%s"</span> mystring<span style="color: #a52a2a;">))</span>
</pre>
</div>

<p>
see <a href="https://sapristi.github.io/easy_logging/easy_logging/Easy_logging/Logging/class-logger/index.html#lazy-logging-methods">lazy logging methods</a>.
</p>
</div>
</div>


<div id="outline-container-org1ffc80d" class="outline-3">
<h3 id="org1ffc80d">Kevin Ji asked</h3>
<div class="outline-text-3" id="text-org1ffc80d">
<p>
How does this compare to <a href="https://ocaml.janestreet.com/ocaml-core/latest/doc/async_unix/Async_unix/Log/index.html">Async's <code>Log</code> module</a>, which is generally used as follows:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #228b22;">Log.Global.</span>info <span style="color: #8b2252;">"Message %d"</span> count
<span style="color: #228b22;">Log.Global.</span>warn_s <span style="color: #483d8b; background-color: #ebebeb;">[%message</span> <span style="color: #8b2252;">"Issue connecting to db"</span> <span style="color: #a52a2a;">(</span>db <span style="color: #a52a2a;">:</span><span style="color: #228b22;"> string</span><span style="color: #a52a2a;">)</span><span style="color: #483d8b; background-color: #ebebeb;">]</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgeebc73e" class="outline-3">
<h3 id="orgeebc73e">Sapristi then replied</h3>
<div class="outline-text-3" id="text-orgeebc73e">
<p>
I have never used Async, so I didn't know about that module. It seems quite close to what I had in mind, and provides most of what easy_logging does, and much more.
</p>

<p>
Instead of instantiating modules (like Log.Global) as so called logging singletons, Easy_logging instantiates logger objects:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Easy_logging</span>
logger <span style="color: #a52a2a;">=</span> <span style="color: #228b22;">Logging.</span>make_logger <span style="color: #8b2252;">"my_logger"</span> <span style="color: #a52a2a;">(</span><span style="color: #000000; background-color: #ffffff;">Some</span> <span style="color: #000000; background-color: #ffffff;">Debug</span><span style="color: #a52a2a;">)</span> <span style="color: #a52a2a;">[</span><span style="color: #000000; background-color: #ffffff;">Cli</span> <span style="color: #000000; background-color: #ffffff;">Debug</span><span style="color: #a52a2a;">]</span><span style="color: #ff4500;">;;</span>
logger<span style="color: #a52a2a;">#</span>info <span style="color: #8b2252;">"log_message"</span><span style="color: #ff4500;">;;</span>
</pre>
</div>

<p>
This is by design, since logger objects are registered and stored at creation (in a Logging module), to be able to modify the log level all logging singletons at runtime (see <a href="https://sapristi.github.io/easy_logging/easy_logging/index.html#logging">Logging module</a> and <a href="https://sapristi.github.io/easy_logging/easy_logging/examples.html#dyn_logger">example</a>).
(Maybe I'll switch to modules instead of classes as logging singletons, using first-class modules to registration, but for now it's a bit easier for me to go with objects).
</p>

<p>
The second difference is that a Logging module can be created by a functor over a module of Handlers (things to write to stdout/files/etc), making it easy to define the handlers according to your needs (although Async's log defaults seems quite enough).
</p>

<p>
Anyway Async's Logging will be a great source of inspiration for me, thanks for pointing it out !
</p>
</div>
</div>
</div>




<div id="outline-container-org1fa2f95" class="outline-2">
<h2 id="6">OCaml meetup in SF on Tuesday 3/26</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-meetup-in-sf-on-tuesday-3-26/3561/1">https://discuss.ocaml.org/t/ocaml-meetup-in-sf-on-tuesday-3-26/3561/1</a>
</p>
</div>

<div id="outline-container-org57b0974" class="outline-3">
<h3 id="org57b0974">Brandon Kase announced</h3>
<div class="outline-text-3" id="text-org57b0974">
<p>
Hey all! We’re hosting an OCaml/ReasonML meetup in SF on Tuesday night (3/26) at 6:30PM. We’ll have food, drinks, and some really interesting talks:
</p>

<p>
Ben — Shipping a mobile game in ReasonML is not as hard as one might think. This talk will go over our demo-driven approach to developing this game, the small technical difficulties one might encounter and the tough non-technical ones.
</p>

<p>
Nathan — GADTs (or Generalized Algebraic Data Types) may sound scary at first, but they can be an approachable and useful programming tool, especially for designing good APIs. In this talk, we will go over some examples of how GADTs can be applied to make neater, easier to use programming interfaces.
</p>

<p>
We’ll also have plenty of time to chat, eat, and hang out. People of all backgrounds / skill levels are welcome, please just RSVP below so we know how much food to get!
</p>

<p>
<a href="https://www.meetup.com/sv-ocaml/events/259940442/">https://www.meetup.com/sv-ocaml/events/259940442/</a>
</p>
</div>
</div>
</div>




<div id="outline-container-orgbbef7ed" class="outline-2">
<h2 id="7">Yojson 2.0.0 plans</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/yojson-2-0-0-plans/3263/34">https://discuss.ocaml.org/t/yojson-2-0-0-plans/3263/34</a>
</p>
</div>

<div id="outline-container-orgb4c93b8" class="outline-3">
<h3 id="orgb4c93b8">Deep in this thread, Stephen Bleazard said</h3>
<div class="outline-text-3" id="text-orgb4c93b8">
<p>
On a slightly different topic. I think we should re-factor ppx_deriving_yojson into a library independent core and json library dependent part. Then we can create ppx_deriving_jsonm etc without developing the whole ppx deriver.  From what I have seen this should be pretty staight forward. What do people think?
</p>
</div>
</div>


<div id="outline-container-org55cee9b" class="outline-3">
<h3 id="org55cee9b">Anders Fugmann replied</h3>
<div class="outline-text-3" id="text-org55cee9b">
<p>
I've actually created a library[1] which does exactly that; a ppx for general type extraction + <b>drivers</b> which contains the specific serialization code.  Its mostly feature complete (only inline records and gadt's are not supported yet).
</p>

<p>
Currently, the library provides drivers for json (yojson, ezjsonm), yaml, msgpack and xml serialization and allows for users to easily create their own.
</p>

<p>
It supports the same features as ppx_deriving_yojson (incl @key, @name and @default attribute handling) + a few more type constructs (e.g nonrec types), so it can be used as a plugin replacement for ppx_deriving_json [2].
</p>

<p>
/Anders
</p>

<p>
[1] <a href="https://github.com/andersfugmann/ppx_protocol_conv">https://github.com/andersfugmann/ppx_protocol_conv</a> <br />
[2] The generated json output only differs on ADT type constructors without arguments which are serialized to strings, whereas ppx_deriving_yojson serializes these to singleton lists.
</p>
</div>
</div>
</div>




<div id="outline-container-orga854760" class="outline-2">
<h2 id="8">iso639 - language codes</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-iso639-language-codes/3565/1">https://discuss.ocaml.org/t/ann-iso639-language-codes/3565/1</a>
</p>
</div>

<div id="outline-container-org4602846" class="outline-3">
<h3 id="org4602846">Petter A. Urkedal announced</h3>
<div class="outline-text-3" id="text-org4602846">
<p>
This is a new package which provides types which enumerate human languages and language groups according to the ISO-369 standard.  The standard has different parts depending on whether one is dealing with individual and macro languages or groups and families of languages, whether one uses two- or three-letter codes, and some historic quirks.  See <a href="https://github.com/paurkedal/ocaml-iso639">the project page</a> and the <a href="https://paurkedal.github.io/ocaml-iso639/iso639/Iso639/index.html">API reference</a> for further details.
</p>

<p>
This library is rather mundane, but I think it can help software dealing with multiple languages to make sure a language code is valid, and to make sure different language codes for the same language maps to the same language.  I think the API is more or less in a final form unless there are usability issues which need to be addressed.
</p>
</div>
</div>
</div>




<div id="outline-container-orgb6f3493" class="outline-2">
<h2 id="9">Other OCaml News</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orge7e0246" class="outline-3">
<h3 id="orge7e0246">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-orge7e0246">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="https://mirage.io/blog/MSA01">MirageOS security advisory 01: netchannel 1.10.0</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org43b44ca" class="outline-2">
<h2 id="org43b44ca">Old CWN</h2>
<div class="outline-text-2" id="text-org43b44ca">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
