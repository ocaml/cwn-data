<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-11-18 Tue 14:59 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'JavaScript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2025.11.11.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2025.11.25.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of November 11 to 18, 2025.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">opam 2.5.0~beta1</a></li>
<li><a href="#2">Announcing the first release of Alice, a radical OCaml build system</a></li>
<li><a href="#3">First release of ppx_deriving_jsont</a></li>
<li><a href="#4">crypt 2.0 - unix crypt function</a></li>
<li><a href="#5">Artisanal Coding Is Dead, Long Live Artisanal Coding!</a></li>
<li><a href="#6">Moonpool 0.10, and a blogpost about Moonpool at Imandra</a></li>
<li><a href="#7">libdrm - OCaml bindings for Linux mode setting, etc</a></li>
<li><a href="#8">New release of visitors</a></li>
<li><a href="#9">MirageOS on Unikraft</a></li>
<li><a href="#org0522531">Old CWN</a></li>
</ul>
</div>
</div>
<div id="outline-container-1" class="outline-2">
<h2 id="1">opam 2.5.0~beta1</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-2-5-0-beta1/17469/1">https://discuss.ocaml.org/t/ann-opam-2-5-0-beta1/17469/1</a>
</p>
</div>
<div id="outline-container-org98288eb" class="outline-3">
<h3 id="org98288eb">Kate announced</h3>
<div class="outline-text-3" id="text-org98288eb">
<p>
Hi everyone,
</p>

<p>
We are happy to announce the first beta release of opam 2.5.0.
</p>

<p>
This version is a beta, we invite users to test it to spot previously unnoticed bugs as we head towards the stable release.
</p>
</div>
<div id="outline-container-org75fe78f" class="outline-4">
<h4 id="org75fe78f">Changes</h4>
<div class="outline-text-4" id="text-org75fe78f">
<ul class="org-ul">
<li>:red_apple: Allow the macOS sandbox to write in the <code>/var/folders/</code> and <code>/var/db/mds/</code> directories as it is required by some of macOS core tools (<a href="https://github.com/ocaml/opam/issues/4389">#4389</a>, <a href="https://github.com/ocaml/opam/issues/6460">#6460</a>)</li>

<li>Stop <code>opam switch create --dry-run</code> from creating any directory. <b>Thanks to @hannes for this contribution.</b> (<a href="https://github.com/ocaml/opam/issues/5918">#5918</a>)</li>

<li>:ocean: A couple more changes were made and minor regressions were fixed</li>
</ul>


<p>
:open_book: You can read our <a href="https://opam.ocaml.org/blog/opam-2-5-0-beta1/">blog post</a> for more information about these changes and more, and for even more details you can take a look at the <a href="https://github.com/ocaml/opam/releases/tag/2.5.0-beta1">release note</a> or the <a href="https://github.com/ocaml/opam/blob/2.5.0-beta1/CHANGES">changelog</a>.
</p>
</div>
</div>
<div id="outline-container-org11825cd" class="outline-4">
<h4 id="org11825cd">Try it!</h4>
<div class="outline-text-4" id="text-org11825cd">
<p>
The upgrade instructions are unchanged:
</p>

<p>
For Unix systems
</p>
<pre class="example" id="org4ab0a12">
bash -c "sh &lt;(curl -fsSL https://opam.ocaml.org/install.sh) --version 2.5.0~beta1"
</pre>
<p>
or from PowerShell for Windows systems
</p>
<pre class="example" id="org58aaedd">
Invoke-Expression "&amp; { $(Invoke-RestMethod https://opam.ocaml.org/install.ps1) } -Version 2.5.0~beta1"
</pre>
<p>
Please report any issues to the <a href="https://github.com/ocaml/opam/issues">bug-tracker</a>.
</p>

<p>
Happy hacking,
&lt;&gt; &lt;&gt; The opam team &lt;&gt; &lt;&gt; :camel:
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="2">Announcing the first release of Alice, a radical OCaml build system</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/announcing-the-first-release-of-alice-a-radical-ocaml-build-system/17472/1">https://discuss.ocaml.org/t/announcing-the-first-release-of-alice-a-radical-ocaml-build-system/17472/1</a>
</p>
</div>
<div id="outline-container-orgd34a04a" class="outline-3">
<h3 id="orgd34a04a">Steve Sherratt announced</h3>
<div class="outline-text-3" id="text-orgd34a04a">
<p>
I’m pleased to announce the initial release of <a href="https://github.com/alicecaml/alice">Alice</a>, a radical, experimental OCaml build system, package manager, and environment manager for <a href="https://www.alicecaml.org/porting-alice-to-windows/">Windows</a>, macOS, and Linux. Its goal is to allow anyone to program in OCaml with as little friction as possible.
</p>

<p>
To build your first program with Alice, run:
</p>
<pre class="example" id="orga66582f">
$ alice tools install   # Skip this if you already have an OCaml compiler!
$ alice new hello
$ cd hello
$ alice run
 Compiling hello v0.1.0
   Running hello/build/packages/hello-0.1.0/debug/executable/hello

Hello, World!
</pre>

<p>
The UI is heavily inspired by Cargo.
</p>

<p>
An important distinction between Alice's and Opam's packaging philosophies is that in Alice, <span class="underline">the OCaml compiler and development tools are not packages</span>. The <code>alice tools install</code> command will install a pre-compiled (<a href="https://www.youtube.com/watch?v=5JDSUCx-tPw">relocatable!</a>) OCaml compiler, a compatible <code>ocamllsp</code>, and <code>ocamlformat</code> user-wide, similar to how <code>rustup</code> installs the Rust compiler and LSP server. This lets you go from zero to OCaml really fast because you don't have to build the compiler from source. This speedup is particularly noticeable on Windows where building the compiler can take upwards of 10 minutes.
</p>

<p>
Alice supports building packages with dependencies on other packages, but currently only local packages are supported, and it can only build <span class="underline">Alice</span> packages, not Opam packages. See an example <a href="https://github.com/alicecaml/alice?tab=readme-ov-file#tutorial">here</a>. I'll probably add Opam compatibility in the future.
</p>

<p>
It's still early days and <a href="https://github.com/alicecaml/alice?tab=readme-ov-file#disclaimers">a lot</a> is missing before Alice could feasibly be used for real projects.
</p>

<p>
If you want to try it out anyway, install the <code>alice</code> Opam package, the <code>github:alicecaml/alice</code> Nix flake, or run the interactive install script:
</p>
<pre class="example" id="orgb866bbd">
curl -fsSL https://alicecaml.org/install.sh | sh
</pre>
<p>
More details about installing Alice are <a href="https://www.alicecaml.org/install/">here</a>.
</p>

<p>
If you want read more, check out the <a href="https://www.alicecaml.org/blog/">blog</a>.
</p>
</div>
</div>
</div>
<div id="outline-container-3" class="outline-2">
<h2 id="3">First release of ppx_deriving_jsont</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-first-release-of-ppx-deriving-jsont/17478/1">https://discuss.ocaml.org/t/ann-first-release-of-ppx-deriving-jsont/17478/1</a>
</p>
</div>
<div id="outline-container-org7af6069" class="outline-3">
<h3 id="org7af6069">vds announced</h3>
<div class="outline-text-3" id="text-org7af6069">
<p>
I am happy to announce the first release of <a href="https://github.com/voodoos/ppx_deriving_jsont"><code>ppx_deriving_jsont</code></a>.
</p>

<p>
As the name implies, it is a tool that automates some of the burden inherent to writing Jsont descriptions. <a href="https://erratique.ch/software/jsont">Jsont</a> is a fairly novel library for declarative JSON data manipulation, created by @dbuenzli.
</p>

<p>
This ppx can manage most of the basic types, tuples, variants and records, but still lacks a lot of features and control. It is also quite bad at error reporting. The current roadmap, which highlights existing and missing features can be found in <a href="https://github.com/voodoos/ppx_deriving_jsont?tab=readme-ov-file#deriving-jsont">the project’s readme</a> along with many examples. I focused on generating readable and reusable code, close to the <a href="https://erratique.ch/software/jsont/doc/cookbook.html">cookbook</a> illustrations.
</p>

<p>
Note that Jsont offers much finer control and many more features than what that you can achieve using this crude ppx. Please take some time to read about all of its intricacies:
</p>

<ul class="org-ul">
<li>In the official <a href="https://erratique.ch/software/jsont/doc/">documentation</a> and <a href="https://erratique.ch/software/jsont/doc/cookbook.html">cookbook</a></li>
<li>In Daniel’s <a href="https://discuss.ocaml.org/t/ann-jsont-0-1-0-declarative-json-data-manipulation-for-ocaml/15702">introductory post</a> here on discuss.</li>
</ul>

<p>
When precision and good error handling are required, such as when interacting with external json sources, thoughtfully crafted descriptions should still be considered. But I do believe this ppx to be very useful for bootstrapping, prototyping or when both the encoders and decoders are entirely under the app’s control. I wrote it to that intent and already use it in several personal projects. I hope you will find it useful too! (and not too non-sensical :slightly_smiling_face:)
</p>
</div>
</div>
</div>
<div id="outline-container-4" class="outline-2">
<h2 id="4">crypt 2.0 - unix crypt function</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-crypt-2-0-unix-crypt-function/17485/1">https://discuss.ocaml.org/t/ann-crypt-2-0-unix-crypt-function/17485/1</a>
</p>
</div>
<div id="outline-container-org66bc29e" class="outline-3">
<h3 id="org66bc29e">Mikhail announced</h3>
<div class="outline-text-3" id="text-org66bc29e">
<p>
Hi there!
</p>

<p>
I'm happy to announce the release of a new major version (i.e., 2.0) of the <a href="https://github.com/vbmithr/ocaml-crypt">crypt</a> library (bindings to the [Unix crypt](<a href="https://en.wikipedia.org/wiki/Crypt_(Unix)">https://en.wikipedia.org/wiki/Crypt_(Unix)</a>) function). The previous version, 1.3, was outdated, since the last commit was six years ago. This version does not support correct compilation on various Unix platforms (Linux, FreeBSD, macOS), and uses deprecated tools. However, the new version addresses these issues: it supports Linux, FreeBSD and macOS, uses modern tools, has safe C stubs, provides excellent documentation, and features an idiomatic high-level wrapper.
</p>
</div>
<div id="outline-container-org01834fb" class="outline-4">
<h4 id="org01834fb">Installation</h4>
<div class="outline-text-4" id="text-org01834fb">
<p>
by OPAM package manager:
</p>
<pre class="example" id="orge711f60">
$ opam install crypt.2.0  
</pre>
</div>
</div>
<div id="outline-container-org5c60beb" class="outline-4">
<h4 id="org5c60beb">Example of usage</h4>
<div class="outline-text-4" id="text-org5c60beb">
<div class="org-src-container">
<pre class="src src-ocaml"><code># #require <span style="color: #ca3400;">"crypt"</span><span style="color: #9f0d0f;">;;</span>

# <span style="color: #557400; font-weight: bold;">Crypt.</span>crypt <span style="color: #444fcf; font-weight: bold;">~salt</span>:<span style="color: #ca3400;">"GUBv0xjJ"</span> <span style="color: #ca3400;">"hello"</span><span style="color: #9f0d0f;">;;</span>
- : string = <span style="color: #ca3400;">"GUpsIDCLVu8AY"</span>

# <span style="color: #557400; font-weight: bold;">Crypt.</span>crypt <span style="color: #444fcf; font-weight: bold;">~derivation</span>:<span style="color: #242521;">Md5</span> <span style="color: #444fcf; font-weight: bold;">~salt</span>:<span style="color: #ca3400;">"GUBv0xjJ"</span> <span style="color: #ca3400;">"hello"</span><span style="color: #9f0d0f;">;;</span>
- : string = <span style="color: #ca3400;">"$1$GUBv0xjJ$rQSvX8r6cT7H/NItzzVNQ/"</span>
</code></pre>
</div>
<p>
If you don't provide any salt, a new salt will be generated every time the function is called.
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><code># <span style="color: #557400; font-weight: bold;">Crypt.</span>crypt <span style="color: #ca3400;">"hello"</span><span style="color: #9f0d0f;">;;</span>
- : string = <span style="color: #ca3400;">"QwD.wi5nLT/0s"</span>

# <span style="color: #557400; font-weight: bold;">Crypt.</span>crypt <span style="color: #ca3400;">"hello"</span><span style="color: #9f0d0f;">;;</span>
- : string = <span style="color: #ca3400;">"MYM.5hv5Lk2Mg"</span>
</code></pre>
</div>
<p>
But for a deterministic generation, you should use one salt that you can generate using the <code>Crypt.Salt</code> module or another external module.
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><code># <span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">salt</span> = <span style="color: #557400; font-weight: bold;">Crypt.Salt.</span>gen_base64 9<span style="color: #9f0d0f;">;;</span>
<span style="color: #242521; font-weight: bold;">val</span> <span style="color: #a7601f;">salt</span> : string = <span style="color: #ca3400;">"dHiPl3q99"</span>

# <span style="color: #557400; font-weight: bold;">Crypt.</span>crypt ~salt <span style="color: #ca3400;">"hello"</span><span style="color: #9f0d0f;">;;</span>
- : string = <span style="color: #ca3400;">"dHDdeFGUWcGyQ"</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orge9d65d3" class="outline-4">
<h4 id="orge9d65d3">P.S.</h4>
<div class="outline-text-4" id="text-orge9d65d3">
<p>
Project that uses <code>crypt</code>:
</p>
<ul class="org-ul">
<li>Recently I wrote <a href="https://github.com/dx3mod/tinylogin">toy implementation of <code>login</code> utility written in OCaml</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-5" class="outline-2">
<h2 id="5">Artisanal Coding Is Dead, Long Live Artisanal Coding!</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/artisanal-coding-is-dead-long-live-artisanal-coding/17487/1">https://discuss.ocaml.org/t/artisanal-coding-is-dead-long-live-artisanal-coding/17487/1</a>
</p>
</div>
<div id="outline-container-org2aa6ab0" class="outline-3">
<h3 id="org2aa6ab0">Joel Reymont announced</h3>
<div class="outline-text-3" id="text-org2aa6ab0">
<p>
I wrote <a href="https://joel.id/artisanal-coding-is-dead-long-live-artisanal-coding">a blog post</a> about adding command history browsing and editing, as well as tab completion, to <code>ocamldebug</code>, without typing a single line of code. I challenge you to review the PR for fun and to try to find holes in it!
</p>

<p>
I’m going to add DWARF debugging information to OCaml next. I think it’s <a href="https://x.com/joelreymont/status/1988948903593402437?s=20">almost ready to go</a> but needs double and triple checking. Commits look like this
</p>

<pre class="example" id="org28d66df">
Date:   Thu Nov 13 14:55:24 2025 +0200


Add DWARF tests for basic functionality

Add minimal tests to verify DWARF emission works correctly with -g flag.
Tests compile OCaml programs with debugging enabled and verify correct
execution.
</pre>

<p>
and
</p>

<pre class="example" id="orgb45a369">
Date:   Thu Nov 13 14:54:30 2025 +0200

Implement DWARF v4 debugging support for OCaml

Add complete DWARF version 4 debugging information generation for OCaml
native code. The implementation generates debug info for functions, types,
and line numbers, enabling debugger support for OCaml programs.

Key components:
- Low-level DWARF primitives (tags, attributes, forms, encodings)
- Debug Information Entries (DIE) construction
- Line number program generation
- String table management with offset tracking
- Code address tracking and relocation
- Integration with OCaml compilation pipeline
- Configuration flags to enable/disable DWARF emission

The implementation follows the DWARF 4 specification and generates
valid debug sections (.debug_info, .debug_line, .debug_str, .debug_abbrev)
that can be consumed by standard debuggers like gdb and lldb.
</pre>
</div>
</div>
</div>
<div id="outline-container-6" class="outline-2">
<h2 id="6">Moonpool 0.10, and a blogpost about Moonpool at Imandra</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-moonpool-0-10-and-a-blogpost-about-moonpool-at-imandra/17493/1">https://discuss.ocaml.org/t/ann-moonpool-0-10-and-a-blogpost-about-moonpool-at-imandra/17493/1</a>
</p>
</div>
<div id="outline-container-org1c1e29c" class="outline-3">
<h3 id="org1c1e29c">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-org1c1e29c">
<p>
Good morning,
</p>

<p>
A couple of news about Moonpool. Moonpool is a concurrency and parallelism library that provides a <code>Runner.t</code> abstraction, implemented mostly by thread pools, as a way to run lightweight tasks possibly on multiple cores.
</p>

<p>
First, I just wrote a blog post about <a href="https://docs.imandra.ai/imandrax/blog/2025-11-12-moonpool-in-imandrax/index.html">our use of Moonpool</a> at Imandra. The post discusses our experience with using Moonpool and some lessons learned over time.
</p>

<p>
Secondly, Moonpool 0.10 was just released. It contains a few bugfixes, and removes some deprecated modules. It also removes <code>moonpool.fib</code> (fibers with structured concurrency) as they have turned out, over the years, to be somewhat hard to use properly (they assume the existence of a parent fiber, making code highly context-dependent). Lightweight thread-safe futures (based on Picos') with per-future local-storage are still there and serve mostly the same purpose. The release and change notes can be found <a href="https://github.com/c-cube/moonpool/releases/tag/v0.10">here</a>.
</p>
</div>
</div>
</div>
<div id="outline-container-7" class="outline-2">
<h2 id="7">libdrm - OCaml bindings for Linux mode setting, etc</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-libdrm-ocaml-bindings-for-linux-mode-setting-etc/17497/1">https://discuss.ocaml.org/t/ann-libdrm-ocaml-bindings-for-linux-mode-setting-etc/17497/1</a>
</p>
</div>
<div id="outline-container-org899888f" class="outline-3">
<h3 id="org899888f">Thomas Leonard announced</h3>
<div class="outline-text-3" id="text-org899888f">
<p>
I'm pleased to announce the first release of <a href="https://github.com/talex5/libdrm-ocaml">libdrm-ocaml</a> (OCaml bindings for the libdrm C library).
</p>

<p>
libdrm is used by applications such as Wayland compositors to control the physical graphics hardware.
</p>

<p>
For example, you can use the library to enumerate graphics devices:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code>utop # <span style="color: #557400; font-weight: bold;">Drm.Device.</span>list ()<span style="color: #9f0d0f;">;;</span>
- : <span style="color: #557400; font-weight: bold;">Drm.Device.Info.</span>t list =
[{primary_node = <span style="color: #242521;">Some</span> <span style="color: #ca3400;">"/dev/dri/card0"</span>;
  render_node = <span style="color: #242521;">Some</span> <span style="color: #ca3400;">"/dev/dri/renderD128"</span>;
  info = <span style="color: #242521;">PCI</span> {bus = {domain = 0; bus = 1; dev = 0; func = 0};
              dev = {vendor_id = 0x1002;
                     device_id = 0x67ff;
                     subvendor_id = 0x1458;
                     subdevice_id = 0x230b;
                     revision_id = 0xff}}}]

utop # <span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">dev</span> = <span style="color: #557400; font-weight: bold;">Unix.</span>openfile <span style="color: #ca3400;">"/dev/dri/card0"</span> [<span style="color: #242521;">O_CLOEXEC</span>; <span style="color: #242521;">O_RDWR</span>] 0<span style="color: #9f0d0f;">;;</span>

utop # <span style="color: #557400; font-weight: bold;">Drm.Device.Version.</span>get dev<span style="color: #9f0d0f;">;;</span>
- : <span style="color: #557400; font-weight: bold;">Drm.Device.Version.</span>t =
{version = 3.61.0; name = <span style="color: #ca3400;">"amdgpu"</span>; date = <span style="color: #ca3400;">"0"</span>; desc = <span style="color: #ca3400;">"AMD GPU"</span>}
</code></pre>
</div>

<p>
Here's an excerpt configuring a hardware plane to present a framebuffer on a CRT controller:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code>plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>fb_id } &lt;- <span style="color: #242521;">Some</span> fb;
<span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">Source region on frame-buffer:</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>src_x } &lt;- <span style="color: #557400; font-weight: bold;">Drm.Ufixed.</span>of_int 0;
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>src_y } &lt;- <span style="color: #557400; font-weight: bold;">Drm.Ufixed.</span>of_int 0;
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>src_w } &lt;- <span style="color: #557400; font-weight: bold;">Drm.Ufixed.</span>of_int (fst size);
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>src_h } &lt;- <span style="color: #557400; font-weight: bold;">Drm.Ufixed.</span>of_int (snd size);
<span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">Destination region on CRTC:</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>crtc_x } &lt;- 0;
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>crtc_y } &lt;- 0;
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>crtc_w } &lt;- fst size;
plane.<span style="color: #9f0d0f;">%</span>{ <span style="color: #557400; font-weight: bold;">K.Plane.</span>crtc_h } &lt;- snd size;
</code></pre>
</div>

<p>
For a proper tutorial, see <a href="https://roscidus.com/blog/blog/2025/11/16/libdrm-ocaml/">Linux mode setting, from the comfort of OCaml</a>.
</p>
</div>
</div>
</div>
<div id="outline-container-8" class="outline-2">
<h2 id="8">New release of visitors</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-release-of-visitors/17499/1">https://discuss.ocaml.org/t/ann-new-release-of-visitors/17499/1</a>
</p>
</div>
<div id="outline-container-org7655bc0" class="outline-3">
<h3 id="org7655bc0">François Pottier announced</h3>
<div class="outline-text-3" id="text-org7655bc0">
<p>
I am pleased to announce a new release of <code>visitors</code>, a tool that automatically generates visitor classes for algebraic data types.
</p>

<p>
The new features of this release are as follows:
</p>

<ul class="org-ul">
<li><code>visitors</code> now decorates every generated method with a type annotation. This can help understand the generated code. More importantly, this enables type-directed disambiguation, so <code>visitors</code> now supports situations where two distinct types have a field or a data constructor by the same name. (Reported by Guillaume Boisseau. Contributed by Sacha Élie-Ayoun.)</li>

<li>Install a new executable command, <code>visitors_preprocess</code>, to preprocess an OCaml source file and see the result.</li>

<li>Update <code>Makefile.preprocess</code> to use <code>visitors_preprocess</code>.</li>

<li>Require <code>ppxlib</code> version 0.37.0 or newer.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-9" class="outline-2">
<h2 id="9">MirageOS on Unikraft</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/mirageos-on-unikraft/16975/2">https://discuss.ocaml.org/t/mirageos-on-unikraft/16975/2</a>
</p>
</div>
<div id="outline-container-orgf974071" class="outline-3">
<h3 id="orgf974071">Continuing this thread, shym announced</h3>
<div class="outline-text-3" id="text-orgf974071">
<p>
Just a short update to let you know that OCaml/Unikraft 1.1.0 <a href="https://github.com/ocaml/opam-repository/pull/28750">has been released</a> with support for OCaml 5.4 and Unikraft 0.20.0.
</p>

<p>
Happy hacking!
</p>
</div>
</div>
</div>
<div id="outline-container-org0522531" class="outline-2">
<h2 id="org0522531">Old CWN</h2>
<div class="outline-text-2" id="text-org0522531">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe to the <a href="https://sympa.inria.fr/sympa/info/caml-list">caml-list</a>.
</p>

<div class="authorname" id="orgd9df304">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
