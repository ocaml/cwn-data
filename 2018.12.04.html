<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-12-04 Tue 10:57 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2018.11.27.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2018.12.11.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of November 27 to December 04, 2018.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">First release of <code>Curve_sampling</code></a></li>
<li><a href="#2">A WebAssembly backend for OCaml</a></li>
<li><a href="#3">ANN: AWS Lambda Custom Runtime for OCaml</a></li>
<li><a href="#4">Build-/Installation-Tools - not enogh of them?</a></li>
<li><a href="#5">containers 2.4</a></li>
<li><a href="#6">Wanted: new maintainer for yojson</a></li>
<li><a href="#7">Interesting OCaml Articles</a></li>
<li><a href="#8">Next OUPS meetup December 11th 2018</a></li>
<li><a href="#9">Dune 1.6.0</a></li>
<li><a href="#10">Ocaml Github Pull Requests</a></li>
<li><a href="#11">Other OCaml News</a></li>
<li><a href="#org8608e3b">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-org519cd8c" class="outline-2">
<h2 id="1"><a id="org519cd8c"></a>First release of <code>Curve_sampling</code></h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-first-release-of-curve-sampling/2970/1">https://discuss.ocaml.org/t/ann-first-release-of-curve-sampling/2970/1</a>
</p>
</div>

<div id="outline-container-orgcd94017" class="outline-3">
<h3 id="orgcd94017">Christophe announced</h3>
<div class="outline-text-3" id="text-orgcd94017">
<p>
It is my pleasure to announce the first r<a href="https://github.com/ocaml/opam-repository/pull/13060">elease of the package <code>curve-sampling</code></a> which provides adaptive sampling of functions (and more generally parametric curves) so they can be represented graphically with a minimal number of evaluations.  <a href="https://github.com/Chris00/ocaml-curve-sampling"><code>Curve_sampling</code></a> takes the viewpoint that the evaluation function may be costly, so one specifies the number of evaluations one wants.  For example, a representation of x ↦ x sin(1/x) with 227 evaluations gives (rendered with Gnuplot but <code>Curve_sampling</code> is independent of a rendering engine):
<img src="https://discourse-cdn-sjc2.com/standard11/uploads/ocaml/original/2X/0/00b28c02e09b078c3f02189d2f91c96bb64094d7.png" alt="00b28c02e09b078c3f02189d2f91c96bb64094d7.png" />
</p>

<p>
The chosen evaluation points are displayed on the following graph:
<img src="https://discourse-cdn-sjc2.com/standard11/uploads/ocaml/original/2X/1/14d53bed52dd3e2d4b531d4a52f0069d0734a4bd.png" alt="14d53bed52dd3e2d4b531d4a52f0069d0734a4bd.png" />
</p>

<p>
As a comparison, here is the graph produced by Mathematica for the same function (which uses a different procedure which does not allow to limit the number of evaluations, only the recursion depth, here 5, yielding to the evaluation at 227 points):
<img src="https://discourse-cdn-sjc2.com/standard11/uploads/ocaml/original/2X/5/591067fb2eb769c4b7a4970a46f80d4dcab94ddb.png" alt="591067fb2eb769c4b7a4970a46f80d4dcab94ddb.png" />
</p>

<p>
With 389 evaluations (recursion depth of 6 for Mathematica), the graphs become:
<img src="https://discourse-cdn-sjc2.com/standard11/uploads/ocaml/original/2X/8/844aa2b5bb58427c3fe65dae3e1b056999e49f35.png" alt="844aa2b5bb58427c3fe65dae3e1b056999e49f35.png" />
<img src="https://discourse-cdn-sjc2.com/standard11/uploads/ocaml/original/2X/9/9ed4e1ef0a5bcba81113ebfd8047b4999b241472.png" alt="9ed4e1ef0a5bcba81113ebfd8047b4999b241472.png" />
and
<img src="https://discourse-cdn-sjc2.com/standard11/uploads/ocaml/original/2X/f/f5a97020bf28240e50bf0a2b031a3c38cc613055.png" alt="f5a97020bf28240e50bf0a2b031a3c38cc613055.png" />
</p>

<p>
Enjoy the library and, if you have functions that are not sampled well with the current algorithm, do not hesitate to <a href="https://github.com/Chris00/ocaml-curve-sampling/issues">fill an issue</a>.
</p>
</div>
</div>


<div id="outline-container-org384da43" class="outline-3">
<h3 id="org384da43">n4323 asked and Christophe replied</h3>
<div class="outline-text-3" id="text-org384da43">
<blockquote>
<p>
is there a way to feed the sampled points to matplotlib, for example?
</p>
</blockquote>

<p>
There is <code>Curve_sampling.to_file</code> that saves the data to a file as lines of <code>x y</code> with blank lines when the curve needs to be interrupted.  It can certainly be read from Python.  Another possibility would be to use <a href="https://github.com/zshipko/ocaml-py">py</a> to import the data without using a file — there is <code>Curve_sampling.to_list</code> to get it from the sampling but additional exports may be added (a <code>Seq</code> export is available on OCaml ≥ 4.07).  If you try that latter route, let me know.
</p>
</div>
</div>
</div>




<div id="outline-container-org0b5ff9c" class="outline-2">
<h2 id="2"><a id="org0b5ff9c"></a>A WebAssembly backend for OCaml</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/a-webassembly-backend-for-ocaml/2898/4">https://discuss.ocaml.org/t/a-webassembly-backend-for-ocaml/2898/4</a>
</p>
</div>

<div id="outline-container-orgb51a9de" class="outline-3">
<h3 id="orgb51a9de">Continuing this thread, Sander announced</h3>
<div class="outline-text-3" id="text-orgb51a9de">
<p>
Second article is here: <a href="https://medium.com/@sanderspies/the-road-to-webassembly-gc-for-ocaml-bd44dc7f9a9d">https://medium.com/@sanderspies/the-road-to-webassembly-gc-for-ocaml-bd44dc7f9a9d</a> (slightly rushed).
</p>
</div>
</div>
</div>




<div id="outline-container-org1de6a9e" class="outline-2">
<h2 id="3"><a id="org1de6a9e"></a>ANN: AWS Lambda Custom Runtime for OCaml</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-aws-lambda-custom-runtime-for-ocaml/2991/1">https://discuss.ocaml.org/t/ann-aws-lambda-custom-runtime-for-ocaml/2991/1</a>
</p>
</div>

<div id="outline-container-orgc9f7382" class="outline-3">
<h3 id="orgc9f7382">Antonio Nuno Monteiro announced</h3>
<div class="outline-text-3" id="text-orgc9f7382">
<p>
Last Thursday at re:Invent, AWS announced the ability to run custom runtimes in AWS Lambda (<a href="https://docs.aws.amazon.com/lambda/latest/dg/runtimes-custom.html">blog post</a>).
</p>

<p>
Today I have the pleasure of announcing an OCaml custom runtime for AWS Lambda that, while in its early stages, already works quite well.
</p>

<p>
I haven't made a release yet, but if you wanna try it out you can head over to the <a href="https://github.com/anmonteiro/aws-lambda-ocaml-runtime">GitHub repo</a> and ping me directly if you have any questions.
</p>
</div>
</div>
</div>




<div id="outline-container-orgd11cecf" class="outline-2">
<h2 id="4"><a id="orgd11cecf"></a>Build-/Installation-Tools - not enogh of them?</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2018-11/msg00082.html">https://sympa.inria.fr/sympa/arc/caml-list/2018-11/msg00082.html</a>
</p>
</div>

<div id="outline-container-orga5e4e7d" class="outline-3">
<h3 id="orga5e4e7d">Continuing this thread, Louis Gesbert said</h3>
<div class="outline-text-3" id="text-orga5e4e7d">
<p>
Thanks all for this input. While working on the intrinsics and details of the tools, it's easy to lose the big picture, and the very important point of view of the newcomers.
</p>

<p>
So first, as the main developper of opam 2.0, I'd like to say that we have been putting a lot of work in it, and a large part of the effort was to improve for convenience, and the many use-cases that weren't supported before — including, but not limited to, reproducible build environments, and project-local sandboxes, a.k.a. switches.
</p>

<p>
The documentation, however, is severly lacking at the moment on all these new features, and the preferred and simplest ways to accomplish all the basic tasks. For all asking about the detailed formats, we have a fairly complete manual [1], and the API should be fairly well documented [2], but indeed, it's way too detailed to be the first documentation you would get to.
</p>

<p>
Let me assure you however that everything is slowly getting into place for an easier approach for everyone. I'll go below through the "typical workflow" you propose, checking what is here or not, but let's first focus on the users rather than the developers:
</p>

<ul class="org-ul">
<li>installing ocaml:
indeed, if not easily available for your system, the easiest is to install opam, then just run <code>opam init</code>. (Yes, we should be explicit in the doc that <span class="underline">this</span> is the command that will install the compiler)</li>

<li>installing a given package, and assuming opam is installed and initialised:

<ul class="org-ul">
<li>if in the repository, just one <code>opam install</code> command should be all you need</li>

<li>otherwise, if your source is available somewhere and contains an opam package definition file, <code>opam pin URL</code> is everything you need (URL pointing to an archive, or a git repository, etc.). We could merge this use-case into <code>opam install</code> for better discoverability.</li>

<li>if not and/or you want to build the project manually from a clone, the support has been much improved in opam 2, so that you can for example document specific pinned dependencies, or a "locked" development state (see opam-lock [3] to do that automatically). Then e.g. <code>opam switch create . --locked</code> will recreate a local switch with the exact same development configuration, and install the project in it. <code>opam install . --locked</code> also works, if you don't want the local sandbox.</li>
</ul></li>

<li>it has been mentionned already in this thread, but the <code>opam bundle</code> plugin can make distribution easier by including the whole OCaml + opam + package environment in a single, self-building self-extracting archive. At the cost of rebuilding everything on installation. A new release is pending [4]. Yes, it's yet another tool, but with its straight-forward interface and everyting explained in its 100-lines, included manpage, I find the criticism uncalled for. Not a silver bullet by any means, but it fits some use-cases.</li>
</ul>

<p>
As for using wrapping Makefiles, they are nice for simple build-system calls, and I like them if only to document the entry-point, but shouldn't IMHO mess with the packaging system. Note also that the main purpose of <code>opam</code> files is actually to document the building commands of any project, taking into account all OS specificities, and in an easily understandable format. I personally find that having clear and simple build instructions arout the top of the README is enough.
</p>

<p>
Once properly documented from the opam side (huh), I expect project maintainers to be able to put simple setup + installation instructions at the top of their READMEs, so that users who don't care about OCaml or opam just need to copy-paste them to get the environment setup and the project compiled. As far as I understand it now, this is where the problem really stands. To avoid having to look anything up or learning about exotic build system, this is the best compromise IMHO.
</p>

<p>
I'd also like to point out that this is not specific to OCaml, and I believe all language package managers / build systems suffer from these issues: I for one struggle every time I have to use something building with NPM, and they don't generally provide Makefiles. Of course, with a tool as popular as NPM, the problem is less visible because you have to go through it anyway. So we do need to improve documentation and simplify basic workflows as much as possible, but expecting people to work with OCaml without learning any of the tooling is unrealistic (unless they stick to an online IDE or e.g. Learn-OCaml, and even that is tooling in some form).
</p>


<p>
Let me now go through your "typical workflow":
</p>

<p>
&gt; cd some-ocaml-proj<br />
&gt; opam install # Switches compiler if necessary and installs and locally<br />
&gt; caches package dependencies
</p>

<p>
You can do this with <code>opam switch create .</code>
Since "if necessary" is pretty subjective, just run <code>opam install .</code> if you prefer to share the environment with other projects.
</p>

<p>
&gt; opam build
</p>

<p>
<code>opam install .</code>
</p>

<p>
&gt; opam run # Automatically builds if necessary
</p>

<p>
there is no package←→executable bijection, so I don't see how this would work? (same as for OS-level packages)
see below, but this might be <code>dune exec &lt;command&gt;</code>
</p>

<p>
&gt; opam test # Ditto
</p>

<p>
indeed here we enter the domain where the separation between build system and packaging system can hurt. You can run <code>opam install . --with-test</code>, but probably want <code>dune runtest</code> instead.
</p>

<p>
&gt; opam package # Ditto; &#x2013;upload option can immediately upload to opam
</p>

<p>
at this point you must already have a package definition available ? Or do you mean creating a release archive ?
If your source is hosted on Github, you only need to push a tag and run <code>opam publish</code> (you otherwise need to provide an URL for the source archive and that's it).
</p>

<p>
&gt; opam doc # Builds documentation with ocamldoc or whatever<br />
&gt; opam login -u user -p password
</p>

<p>
I am not sure what you have in mind here. <code>opam publish</code> will go through Oauth authentification with Github for submitting your new package.
</p>



<p>
As one last note, let me mention that we are right now discussing:
</p>
<ul class="org-ul">
<li>better integration of opam and dune</li>
<li>integration of system dependency handling ("depexts") into opam</li>
</ul>


<p>
Hope this helps, feedback and questions welcome.
</p>

<p>
Louis Gesbert — OCamlPro
</p>


<p>
[1] <a href="https://opam.ocaml.org/doc/Manual.html">https://opam.ocaml.org/doc/Manual.html</a><br />
[2] <a href="https://opam.ocaml.org/doc/api/index.html">https://opam.ocaml.org/doc/api/index.html</a><br />
[3] <a href="https://github.com/AltGr/opam-lock">https://github.com/AltGr/opam-lock</a><br />
[4] <a href="https://github.com/ocaml/opam-repository/pull/13064">https://github.com/ocaml/opam-repository/pull/13064</a>
</p>
</div>
</div>


<div id="outline-container-orgfecd32b" class="outline-3">
<h3 id="orgfecd32b">John F Carr asked and Louis Gesbert replied</h3>
<div class="outline-text-3" id="text-orgfecd32b">
<p>
&gt; I have a related request.  I am not a trusting person.  I do not like "curl | sudo sh" type installation methods.
</p>

<p>
You're not the only one :)
Some notes on opam's security model:
</p>

<ul class="org-ul">
<li>opam 2.0 uses, by default <code>bubblewrap</code> [1] on Linux and <code>sandbox-exec</code> on OSX to ensure that package scripts:
<ul class="org-ul">
<li>don't make any network access</li>
<li>don't interact with other processes</li>
<li>don't write outside of their build dir, /tmp, and (in the case of install) the switch prefix (excl. opam files)</li>
</ul></li>

<li>this is done using simple wrapper scripts [2] and some default hooks configuration in ~/.opam/config, so if you know about built-in sandboxing engines for other OSes, it is fairly easy to experiment with them, and a contribution would be very welcome.</li>

<li>while I expect this to be reasonably secure, it's intended first and foremost to avoid dramatic errors, not to protect against malicious repositories</li>

<li>package scripts are protected but <b><b>not any use made by the users of the programs or libraries that were installed through opam</b></b>. In other words, building should be safe, but there is no guarantee about what the result of the build will do: that is not restrained by opam in any way</li>

<li>the effort to provide end-to-end package signatures in the repository [3] is still ongoing. Cheers to Hannes Mehnert for the awesome work he has already done here. Most of the work should be done, but then we need to integrate all that, and there is a lot of work on the tooling so that it won't add to much burden on users and repository maintainers (this commonly results in most disabling the security features, which is as good has having no security features to begin with).</li>

<li>we do advertise <code>curl | sh</code> on the installation page as the easiest entry point, but the script is quite trivial and only uses root to copy to your prefix; it's very easy to fetch the binary by hand from Github if you prefer not to run it, and of course, you can also build from source using the bootstrap scripts.</li>
</ul>

<p>
&gt; If a package has 'rm -rf $BUILD/', or equivalent ocaml code, are its ill
&gt; effects confined when BUILD is unset?
</p>

<p>
yes, that's the whole point of the sandboxing that was introduced in 2.0
</p>

<p>
&gt; Can the build process grab screenshots from the background?
</p>

<p>
not sure. Probably not on Linux since we use a different process space, but maybe on OSX. In anycase, since network access is blocked in both cases, that wouldn't do much harm.
</p>

<p>
&gt; One reason I like make is, if the Makefile is simple you know what it's going to do.
</p>

<p>
I would object that opam package definition files (<code>opam</code> or <code>foo.opam</code>) should be at least as straightforward to read even if you have never seen the syntax, are less error-prone, and are generally much shorter. Just look for the "build:" and "install:" parts. But I agree you need to know first to look at them, and since they are generally an indirection to some build-system (<code>make</code>, <code>dune</code>, <code>topkg</code>&#x2026;), you would just start digging&#x2026;
</p>

<p>
&gt; Also, the xkcd on standards seems relevant: <a href="https://xkcd.com/927/">https://xkcd.com/927/</a>
</p>

<p>
We have <span class="underline">actually</span> been converging as of late, though.
</p>


<p>
Best,
Louis Gesbert — OCamlPro
</p>



<p>
[1] <a href="https://github.com/projectatomic/bubblewrap">https://github.com/projectatomic/bubblewrap</a><br />
[2] <a href="https://github.com/ocaml/opam/blob/master/src/state/shellscripts/bwrap.sh">https://github.com/ocaml/opam/blob/master/src/state/shellscripts/bwrap.sh</a>
and <a href="https://github.com/ocaml/opam/blob/master/src/state/shellscripts/sandbox_exec.sh">https://github.com/ocaml/opam/blob/master/src/state/shellscripts/sandbox_exec.sh</a><br />
[3] <a href="https://github.com/hannesm/conex">https://github.com/hannesm/conex</a>
</p>
</div>
</div>


<div id="outline-container-org1d26cbd" class="outline-3">
<h3 id="org1d26cbd">Louis Roché then said</h3>
<div class="outline-text-3" id="text-org1d26cbd">
<p>
Shameless plug, I tried to document basic opam usage for people who have
experience with npm. It turns ok it can also be an introduction to total
newcomers. Hope it can help some people.
<a href="https://khady.info/opam-npm.html">https://khady.info/opam-npm.html</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org4192a3a" class="outline-2">
<h2 id="5"><a id="org4192a3a"></a>containers 2.4</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-containers-2-4/2985/1">https://discuss.ocaml.org/t/ann-containers-2-4/2985/1</a>
</p>
</div>

<div id="outline-container-org0f06c73" class="outline-3">
<h3 id="org0f06c73">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-org0f06c73">
<p>
I have the pleasure to announce that containers 2.4 was just released and has been merged into opam. Highlights include more labelled modules, migration to dune and opam2, a few new combinators, and some bugfixes. Thanks to all the contributors and issue reporters!
</p>

<p>
Full release <a href="https://github.com/c-cube/ocaml-containers/releases/tag/2.4">here</a>.
</p>
</div>
</div>
</div>




<div id="outline-container-orgcbbfc48" class="outline-2">
<h2 id="6"><a id="orgcbbfc48"></a>Wanted: new maintainer for yojson</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/wanted-new-maintainer-for-yojson/2966/1">https://discuss.ocaml.org/t/wanted-new-maintainer-for-yojson/2966/1</a>
</p>
</div>

<div id="outline-container-orgb8a3e15" class="outline-3">
<h3 id="orgb8a3e15">Martin Jambon announced</h3>
<div class="outline-text-3" id="text-orgb8a3e15">
<p>
We're looking for a new lead maintainer for <a href="https://github.com/ocaml-community/yojson">yojson</a>, ideally with the support of their employer who can use the opportunity to give back to the community and attract talent. Yojson is a direct dependency of 89 opam packages.
</p>

<p>
I created yojson in 2010 to replace <a href="https://mjambon.github.io/mjambon2016/json-wheel.html">json-wheel</a> as part of an effort to improve the performance of serialization code derived from type definitions. This was done at the time by <a href="https://mjambon.github.io/mjambon2016/json-static.html">json-static</a>, a camlp4-based syntax extension. Specifically, yojson exports efficient functions for parsing and printing json elements directly without going through an AST, unlike its predecessor. This allows a type-driven code generator like json-static's replacement <a href="https://github.com/mjambon/atd">atdgen</a> to produce efficient parsing and printing code. In addition to this, yojson also provides a json AST like json-wheel used to. This AST can be manipulated directly and widely used by people who haven't found out about atdgen or haven't figured out how to set it up. It can also be genuinely useful as a last resort for <a href="https://atd.readthedocs.io/en/latest/atdgen.html#field-adapter-ocaml">handling untypable json data where needed</a>.
</p>

<p>
Yojson is stable and requires light maintenance, typically less than one day per month. It's up to the new maintainers to decide where they want to take the project in terms of new features, documentation, and community involvement.
</p>
</div>
</div>
</div>




<div id="outline-container-org9761b6a" class="outline-2">
<h2 id="7"><a id="org9761b6a"></a>Interesting OCaml Articles</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/interesting-ocaml-articles/1867/34">https://discuss.ocaml.org/t/interesting-ocaml-articles/1867/34</a>
</p>
</div>

<div id="outline-container-org246a57f" class="outline-3">
<h3 id="org246a57f">Yotam Barnoy announced</h3>
<div class="outline-text-3" id="text-org246a57f">
<p>
Some ICFP 2018 OCaml videos are up:
</p>

<p>
Winning on Windows: <a href="https://www.youtube.com/watch?v=1DAuSSljLFI">https://www.youtube.com/watch?v=1DAuSSljLFI</a><br />
Wall (vector graphics): <a href="https://www.youtube.com/watch?v=bQB8kBkHxjk">https://www.youtube.com/watch?v=bQB8kBkHxjk</a><br />
Safely mixing OCaml and Rust: <a href="https://www.youtube.com/watch?v=UXfcENNM_ts">https://www.youtube.com/watch?v=UXfcENNM_ts</a><br />
Merlin: A language server for OCaml: <a href="https://www.youtube.com/watch?v=VjLL9We1Fxc">https://www.youtube.com/watch?v=VjLL9We1Fxc</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org5ce4d50" class="outline-2">
<h2 id="8"><a id="org5ce4d50"></a>Next OUPS meetup December 11th 2018</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2018-12/msg00011.html">https://sympa.inria.fr/sympa/arc/caml-list/2018-12/msg00011.html</a>
</p>
</div>

<div id="outline-container-orgc20e0db" class="outline-3">
<h3 id="orgc20e0db">Bruno Bernardo announced</h3>
<div class="outline-text-3" id="text-orgc20e0db">
<p>
The next OUPS meetup will take place on Tuesday, December 11, 7pm at IRILL
on the Jussieu campus. As usual, we will have a few talks, followed by
pizzas and drinks.
</p>

<p>
The talks will be the following:
</p>

<ul class="org-ul">
<li>Pierre Chambart, FLambda, <a href="https://caml.inria.fr/pub/docs/manual-ocaml/flambda.html">https://caml.inria.fr/pub/docs/manual-ocaml/flambda.html</a></li>
<li>Romain Calascibetta, OCaml-git, <a href="https://github.com/dinosaure/ocaml-git">https://github.com/dinosaure/ocaml-git</a>.</li>
</ul>

<p>
Please do note that we are always in demand of talk <b>proposals</b> for future
meetups.
</p>

<p>
To register, or for more information, go here:
<a href="https://www.meetup.com/ocaml-paris/events/256921398">https://www.meetup.com/ocaml-paris/events/256921398</a>
</p>

<p>
<b>Registration is required! Access is not guaranteed after 7pm if
you're not registered.</b> (It also helps us to order the right amount of
food.)
</p>

<p>
Access map:<br />
IRILL - Université Pierre et Marie Curie (Paris VI)<br />
Barre 15-16 1er étage<br />
4 Place Jussieu<br />
75005 Paris<br />
<a href="https://www.irill.org/pages/access.html">https://www.irill.org/pages/access.html</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org8758d9f" class="outline-2">
<h2 id="9"><a id="org8758d9f"></a>Dune 1.6.0</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-1-6-0/3003/1">https://discuss.ocaml.org/t/ann-dune-1-6-0/3003/1</a>
</p>
</div>

<div id="outline-container-orgd38a088" class="outline-3">
<h3 id="orgd38a088">Rudi Grinberg announced</h3>
<div class="outline-text-3" id="text-orgd38a088">
<p>
The dune team is pleased to announce the release of Dune 1.6.0. This release does not contain any notable features or bug fixes that need to be specifically pointed out. Nevertheless, I expect that this will be a quality of life improvement to power users who have experienced dune's sharper corners.
</p>

<p>
Happy hacking!
</p>
</div>

<div id="outline-container-org28852a7" class="outline-4">
<h4 id="org28852a7">1.6.0 (29/11/2018)</h4>
<div class="outline-text-4" id="text-org28852a7">
<ul class="org-ul">
<li>Expand variables in <code>install</code> stanzas (#1354, @mseri)</li>

<li>Add predicate language support for specifying sub directories. This allows the
use globs, set operations, and special values in specifying the sub
directories used for the build. For example: <code>(dirs :standard \ lib*)</code> will
use all directories except those that start with <code>lib</code>. (#1517, #1568,
@rgrinberg)</li>

<li>Add <code>binaries</code> field to the <code>(env ..)</code> stanza. This field sets and overrides
binaries for rules defined in a directory. (#1521, @rgrinberg)</li>

<li>Fix a crash caused by using an extension in a project without
dune-project file (#1535, fix #1529, @diml)</li>

<li>Allow <code>%{bin:..}</code>, <code>%{exe:..}</code>, and other static expansions in the <code>deps</code>
field. (#1155, fix #1531, @rgrinberg)</li>

<li>Fix bad interaction between on-demand ppx rewriters and using multiple build
contexts (#1545, @diml)</li>

<li>Fix handling of installed .dune files when the backend is declared via a
<code>dune</code> file (#1551, fixes #1549, @diml)</li>

<li>Add a <code>--stats</code> command line option to record resource usage (#1543, @diml)</li>

<li>Fix <code>dune build @doc</code> deleting <code>highlight.pack.js</code> on rebuilds, after the
first build (#1557, @aantron).</li>

<li>Allow targets to be directories, which Dune will treat opaquely
(#1547, @jordwalke)</li>

<li>Support for OCaml 4.08: <code>List.t</code> is now provided by OCaml (#1561, @ejgallego)</li>

<li>Exclude the local esy directory (<code>_esy</code>) from the list of watched directories
(#1578, @andreypopp)</li>

<li>Fix the output of <code>dune external-lib-deps</code> (#1594, @diml)</li>

<li>Introduce <code>data_only_dirs</code> to replace <code>ignored_subdirs</code>. <code>ignored_subdirs</code> is
deprecated since 1.6. (#1590, @rgrinberg)</li>

<li>Add <code>dune external-lib-deps --sexp --unstable-by-dir</code> so that the output can
be easily processed by a machine (#1599, @diml)</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-orge973413" class="outline-2">
<h2 id="10"><a id="orge973413"></a>Ocaml Github Pull Requests</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-org24053c1" class="outline-3">
<h3 id="org24053c1">Gabriel Scherer and the editor compiled this list</h3>
<div class="outline-text-3" id="text-org24053c1">
<p>
Here is a sneak peek at some potential future features of the Ocaml
compiler, discussed by their implementers in these Github Pull Requests.
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/pull/2139">Use autoconf to generate the compiler's configuration script</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2143">Optimize some local functions</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2145">deprecate the mutability of Gc.control record fields</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2165">Decide unboxing of let-bound expressions based on their Cmm translation + unbox across static handlers</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2168">Avoid page table lookup in Hashtbl.hash with no-naked-pointers</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2169">Document ocaml.local attribute on functions</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2170">Provide let operators in the standard library</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2172">Windows - Stdlib: Format function always uses LF newlines</a></li>
<li><a href="https://github.com/ocaml/ocaml/pull/2179">Add clz and popcnt intrinsics</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-orga5a670b" class="outline-2">
<h2 id="11"><a id="orga5a670b"></a>Other OCaml News</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-org62fe808" class="outline-3">
<h3 id="org62fe808">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-org62fe808">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="https://jobs.github.com/positions/8a0c59af-41c6-4294-99dd-96b1382ef29e">Site Reliability Engineer (SRE II)</a></li>
<li><a href="https://jobs.github.com/positions/b3273d35-2233-416a-a6ed-39dedae6147f">Software Engineer II (Programming Languages)</a></li>
<li><a href="https://jobs.github.com/positions/62ce5832-2062-4fef-84f9-21dedb48b1ec">Software Engineer (Front-End Engineer II)</a></li>
<li><a href="http://frama-c.com/index.html">Frama-C 18.0 (Argon) is out. Download ithere.</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org8608e3b" class="outline-2">
<h2 id="org8608e3b">Old CWN</h2>
<div class="outline-text-2" id="text-org8608e3b">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
