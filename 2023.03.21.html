<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-03-21 Tue 11:06 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2023.03.14.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2023.03.28.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of March 14 to 21, 2023.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Js_of_ocaml 5.1</a></li>
<li><a href="#2">Petrol 1.2.0 release - Postgres Support + User-extensible types</a></li>
<li><a href="#3">Docfd: TUI fuzzy document finder 0.2.3</a></li>
<li><a href="#4">OCamlot - Activitypub server written in OCaml</a></li>
<li><a href="#5">new versions of VS Code extensions Alcotest and Expect and Inline tests, now on Open VSX too</a></li>
<li><a href="#6">Autofonce, a modern runner for GNU Autotests suites</a></li>
<li><a href="#7">Release of piece_rope 0.9.0</a></li>
<li><a href="#org57c094b">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Js_of_ocaml 5.1</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-js-of-ocaml-5-1/11662/1">https://discuss.ocaml.org/t/ann-js-of-ocaml-5-1/11662/1</a>
</p>
</div>

<div id="outline-container-orgb41c407" class="outline-3">
<h3 id="orgb41c407">Hhugo announced</h3>
<div class="outline-text-3" id="text-orgb41c407">
<p>
Iâ€™m pleased to announce the release of js_of_ocaml 5.1. It should soon be able available in opam.
</p>

<p>
Js_of_ocaml is a compiler from OCaml bytecode to JavaScript. It makes it
possible to run pure OCaml programs in JavaScript environment like browsers and
Node.js.
</p>

<p>
This release includes many significant changes. Here are some of the notable ones:
</p>
<ul class="org-ul">
<li>Js_of_ocaml now understands most <code>es6</code> features (but <code>import</code> and <code>export</code>)</li>
<li>JavaScript files generated by js_of_ocaml are now UTF-8 encoded.</li>
<li>Change the memory representation of OCaml strings to use JS ones. String still represent sequences of bytes and only contains codepoints in the range  <code>[0-255]</code>.</li>
<li>Improved support for OCaml 5 effects, performing partial CPS transformation to significantly improve perfs (see <a href="http://ocsigen.org/js_of_ocaml/5.1.0/manual/performances">http://ocsigen.org/js_of_ocaml/5.1.0/manual/performances</a>)</li>
<li>Various improvements to  make the compiler faster.</li>
<li>Separate compilation only link compilation units that are needed, similar to <code>ocamlc</code>, and generate much smaller js files</li>
</ul>

<p>
See the <a href="https://github.com/ocsigen/js_of_ocaml/blob/master/CHANGES.md">Changelog</a> for other changes.
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Petrol 1.2.0 release - Postgres Support + User-extensible types</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-petrol-1-2-0-release-postgres-support-user-extensible-types/11691/1">https://discuss.ocaml.org/t/ann-petrol-1-2-0-release-postgres-support-user-extensible-types/11691/1</a>
</p>
</div>

<div id="outline-container-org2d81ed3" class="outline-3">
<h3 id="org2d81ed3">Kiran Gopinathan announced</h3>
<div class="outline-text-3" id="text-org2d81ed3">
<p>
I&rsquo;m pleased to announce the latest release of Petrol - <a href="https://github.com/Gopiandcode/petrol">A high level typed SQL API for
OCaml</a> (in the process of being published to opam).
</p>

<p>
This latest release is exciting as it now adds Postgresql support (previously Petrol only supported Sqlite3).
</p>

<p>
Petrol makes using SQL from OCaml a breeze:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Petrol</span>
<span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Petrol.Sqlite3</span>

<span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">define a new schema</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">schema</span> = <span style="color: #444fcf;">StaticSchema.</span>init ()

<span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">declare a table</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">example_table</span>, <span style="color: #444fcf;">Expr.</span>[<span style="color: #007a9f;">name</span>; <span style="color: #007a9f;">age</span>] =
    <span style="color: #444fcf;">StaticSchema.</span>declare_table schema <span style="color: #00824f;">~name</span>:<span style="color: #ca3400;">"example"</span>
    <span style="color: #444fcf;">Schema.</span>[
        field <span style="color: #ca3400;">"name"</span> <span style="color: #00824f;">~ty</span>:<span style="color: #444fcf;">Type.</span>text;
        field <span style="color: #ca3400;">"age"</span> <span style="color: #00824f;">~ty</span>:<span style="color: #444fcf;">Type.</span>int
    ]
</pre>
</div>
<p>
and here&rsquo;s how you write queries:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">create a query</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a7601f;">insert_person</span> <span style="color: #00824f;">~name</span>:<span style="color: #007a9f;">n</span> <span style="color: #00824f;">~age</span>:<span style="color: #007a9f;">a</span> <span style="color: #007a9f;">db</span> =
    <span style="color: #444fcf;">Query.</span>insert <span style="color: #00824f;">~table</span>:example_table
        <span style="color: #00824f;">~values</span>:<span style="color: #444fcf;">Expr.</span>[
            name := s n;
            age := i a
         ]
    <span style="color: #a52a2a;">|&gt;</span> <span style="color: #444fcf;">Request.</span>make_zero
    <span style="color: #a52a2a;">|&gt;</span> <span style="color: #444fcf;">Petrol.</span>exec db
</pre>
</div>
<p>
Petrol compiles down to Caqti queries under the hood, and comes with a nifty migration system built-in, so you can
seamlesly update your database tables without disrupting end users:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">declare a table with a migration for a new [age] column in version 1.2.0</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">t</span>, <span style="color: #444fcf;">Expr.</span>[<span style="color: #007a9f;">id</span>;<span style="color: #007a9f;">age</span>;<span style="color: #007a9f;">url</span>] =
   <span style="color: #444fcf;">VersionedSchema.</span>declare_table db <span style="color: #00824f;">~name</span>:<span style="color: #ca3400;">"person"</span>
     <span style="color: #444fcf;">Schema.</span>[
       field <span style="color: #00824f;">~constraints</span>:[primary_key <span style="color: #00824f;">~name</span>:<span style="color: #ca3400;">"bookmark_id"</span> ()] <span style="color: #ca3400;">"id"</span> <span style="color: #00824f;">~ty</span>:<span style="color: #444fcf;">Type.</span>int;
       field <span style="color: #ca3400;">"age"</span> <span style="color: #00824f;">~ty</span>:<span style="color: #444fcf;">Type.</span>int;
       field <span style="color: #ca3400;">"url"</span> <span style="color: #00824f;">~ty</span>:<span style="color: #444fcf;">Type.</span>text;
     ]
     <span style="color: #00824f;">~migrations</span>:[v_1_2_0, [
       <span style="color: #444fcf;">Caqti_request.Infix.</span>(<span style="color: #444fcf;">Caqti_type.</span>unit -&gt;. <span style="color: #444fcf;">Caqti_type.</span>unit)
         <span style="color: #ca3400;">{sql|ALTER TABLE person ADD COLUMN age INTEGER DEFAULT 1000|sql}</span>
     ]]
</pre>
</div>

<p>
This and more is explained in the documentation, along with a nifty quick-starter guide:
<a href="https://gopiandcode.github.io/petrol/petrol/index.html">https://gopiandcode.github.io/petrol/petrol/index.html</a>
</p>

<p>
I&rsquo;ve spent some time tuning the documentation to make it easy to pick up!
</p>

<p>
You may also want to check out the tests to see it in action:
<a href="https://github.com/Gopiandcode/petrol/tree/master/test">https://github.com/Gopiandcode/petrol/tree/master/test</a>
</p>

<p>
Previous discussion:
<a href="https://discuss.ocaml.org/t/ann-petrol-1-0-0-a-high-level-typed-sql-api-for-ocaml-designed-to-go-fast/11166">https://discuss.ocaml.org/t/ann-petrol-1-0-0-a-high-level-typed-sql-api-for-ocaml-designed-to-go-fast/11166</a>
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Docfd: TUI fuzzy document finder 0.2.3</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-docfd-tui-fuzzy-document-finder-0-2-3/11698/1">https://discuss.ocaml.org/t/ann-docfd-tui-fuzzy-document-finder-0-2-3/11698/1</a>
</p>
</div>

<div id="outline-container-org44b1c94" class="outline-3">
<h3 id="org44b1c94">Darren announced</h3>
<div class="outline-text-3" id="text-org44b1c94">
<p>
I&rsquo;m happy to share Docfd, an interactive TUI tool finding the text file you need quickly.
</p>

<ul class="org-ul">
<li><a href="https://github.com/darrenldl/docfd">Repo</a></li>
<li><a href="https://github.com/darrenldl/docfd/releases/tag/0.2.3">Statically linked binary</a></li>
</ul>

<p>
(Will submit to opam when time frees up a bit.)
</p>
</div>

<div id="outline-container-org7a3e8ec" class="outline-4">
<h4 id="org7a3e8ec">Screenshots and interface</h4>
<div class="outline-text-4" id="text-org7a3e8ec">
<p>
Searching <code>left is</code> in the repo root
</p>


<div id="org64e594f" class="figure">
<p><img src="https://global.discourse-cdn.com/business7/uploads/ocaml/original/2X/9/9afad805f2b647c9229116b7b7648105bcb84a9e.png" alt="9afad805f2b647c9229116b7b7648105bcb84a9e.png" />
</p>
</div>

<p>
Searching <code>[github]</code> in the repo root
</p>


<div id="org4a3b0e2" class="figure">
<p><img src="https://global.discourse-cdn.com/business7/uploads/ocaml/original/2X/9/9623d259c89bbaaf5feb109a42faf7e1dde6010f.png" alt="9623d259c89bbaaf5feb109a42faf7e1dde6010f.png" />
</p>
</div>

<p>
The TUI is divided into three sections:
</p>
<ul class="org-ul">
<li>Left is the list of documents which satisfy the search constraints</li>
<li>Top right is the preview of the document</li>
<li>Bottom right is the ranked content search result list</li>
<li>Bottom bar is the search interface</li>
</ul>
</div>
</div>

<div id="outline-container-org61a66af" class="outline-4">
<h4 id="org61a66af">Controls</h4>
<div class="outline-text-4" id="text-org61a66af">
<p>
Docfd operates in modes, the initial mode is <code>NAVIGATION</code> mode
</p>

<p>
<code>NAVIGATION</code> mode
</p>
<ul class="org-ul">
<li>Scroll down the document list
<ul class="org-ul">
<li><code>j</code> or down arrow</li>
<li>Scroll down with mouse wheel when hovering above the area</li>
</ul></li>
<li>Scroll up the document list
<ul class="org-ul">
<li><code>k</code> or up arrow</li>
<li>Scroll up with mouse wheel when hovering above the area</li>
</ul></li>
<li>Scroll down the content search result list
<ul class="org-ul">
<li><code>Shift~+~j</code> or ~Shift~+Down arrow</li>
<li>Scroll down with mouse wheel when hovering above the area</li>
</ul></li>
<li>Scroll up the document list
<ul class="org-ul">
<li><code>Shift~+~k</code> or ~Shift~+Up arrow</li>
<li>Scroll up with mouse wheel when hovering above the area</li>
</ul></li>
<li>Open document
<ul class="org-ul">
<li><code>Enter</code>
<ul class="org-ul">
<li>Docfd tries to use <code>$VISUAL</code> first, if that fails then Docfd tries <code>$EDITOR</code></li>
</ul></li>
</ul></li>
<li>Switch to <code>CONTENT SEARCH</code> mode
<ul class="org-ul">
<li><code>/</code></li>
</ul></li>
<li>Exit Docfd
<ul class="org-ul">
<li><code>q</code> or <code>Ctrl+c</code></li>
</ul></li>
</ul>

<p>
<code>CONTENT SEARCH</code> mode
</p>
<ul class="org-ul">
<li>Content search field is active in this mode</li>
<li><code>Enter</code> to confirm search constraints and exit search mode</li>
</ul>
</div>
</div>

<div id="outline-container-org86aec5b" class="outline-4">
<h4 id="org86aec5b">Limitations</h4>
<div class="outline-text-4" id="text-org86aec5b">
<ul class="org-ul">
<li>Docfd is focused on typical desktop use, so simplicity of components is often favoured over strict performance
<ul class="org-ul">
<li>That being said, the in-memory index and search should still be performant enough</li>
</ul></li>
<li>No on-disk index is built</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">OCamlot - Activitypub server written in OCaml</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocamlot-activitypub-server-written-in-ocaml/11699/1">https://discuss.ocaml.org/t/ann-ocamlot-activitypub-server-written-in-ocaml/11699/1</a>
</p>
</div>

<div id="outline-container-org3f1ccf9" class="outline-3">
<h3 id="org3f1ccf9">Kiran Gopinathan announced</h3>
<div class="outline-text-3" id="text-org3f1ccf9">
<p>
I&rsquo;m pleased to announce the release of a project that I&rsquo;ve been working on, on-and-off for a while now: an
activitypub server in OCaml &#x2014; OCamlot.
</p>

<p>
<a href="https://github.com/Gopiandcode/ocamlot">https://github.com/Gopiandcode/ocamlot</a>
</p>

<p>
It&rsquo;s wildly incomplete, and currently only the bare-bones minimum to be a considered an activitypub server, but
it&rsquo;s coming along nicely.
</p>

<p>
Currently it supports:
</p>

<ul class="org-ul">
<li>profiles, custom profile pictures, about</li>
<li>likes, reposts</li>
<li>replies</li>
</ul>

<p>
and that&rsquo;s all.
</p>

<p>
Some screenshots:
</p>

<ul class="org-ul">
<li>Feed
<img src="https://global.discourse-cdn.com/business7/uploads/ocaml/optimized/2X/6/65e8cbb291c93f6bb1592e7aba861a09879559a9_2_1034x484.png" alt="65e8cbb291c93f6bb1592e7aba861a09879559a9_2_1034x484.png" /></li>
<li>Writing replies:
<img src="https://global.discourse-cdn.com/business7/uploads/ocaml/optimized/2X/b/be50c1293ab9fd424c10b5855a0ab0402695e56c_2_1034x430.png" alt="be50c1293ab9fd424c10b5855a0ab0402695e56c_2_1034x430.png" /></li>
<li>Listing users:
<img src="https://global.discourse-cdn.com/business7/uploads/ocaml/optimized/2X/8/861c06d96320d80df7cdfce33825ab3dd911a7c8_2_1034x214.png" alt="861c06d96320d80df7cdfce33825ab3dd911a7c8_2_1034x214.png" /></li>
<li>Profile page:
<img src="https://global.discourse-cdn.com/business7/uploads/ocaml/optimized/2X/c/ca5d18579af38d44c57fb2d1a813ca5ca5ac85c3_2_1034x386.png" alt="ca5d18579af38d44c57fb2d1a813ca5ca5ac85c3_2_1034x386.png" /></li>
<li>Post replies
<img src="https://global.discourse-cdn.com/business7/uploads/ocaml/optimized/2X/0/079f47b31fd8f54bf3d4fc1943662fb44355af19_2_1034x398.png" alt="079f47b31fd8f54bf3d4fc1943662fb44355af19_2_1034x398.png" /></li>
</ul>

<p>
Now, the things that this community would care about:
</p>

<ul class="org-ul">
<li>The server is implemented using dream: <a href="https://github.com/Gopiandcode/ocamlot/blob/master/lib/server/server.ml">https://github.com/Gopiandcode/ocamlot/blob/master/lib/server/server.ml</a></li>
<li>The underlying database is Postgres (or Sqlite), accessed from OCaml using Caqti + <a href="https://discuss.ocaml.org/t/ann-petrol-1-2-0-release-postgres-support-user-extensible-types/11691">Petrol</a>: <a href="https://github.com/Gopiandcode/ocamlot/blob/master/lib/database/tables.ml">https://github.com/Gopiandcode/ocamlot/blob/master/lib/database/tables.ml</a></li>
<li>Ingesting and producing activitypub entities is done using the decoders library: <a href="https://github.com/Gopiandcode/ocamlot/blob/master/lib/activitypub/types.ml">https://github.com/Gopiandcode/ocamlot/blob/master/lib/activitypub/types.ml</a></li>
<li>Rendering is all done server-side using tyxml: <a href="https://github.com/Gopiandcode/ocamlot/tree/master/lib/view">https://github.com/Gopiandcode/ocamlot/tree/master/lib/view</a></li>
</ul>

<p>
Seeing as there has been some interest in this community recently about activitypub integration in OCaml, I figured
this might be interesting.
</p>

<p>
I have an instance running on over at <a href="https://ocamlot.xyz">https://ocamlot.xyz</a> &#x2013; as a warning, I&rsquo;ve done most of my testing locally
using pleroma, so there may be some slight issues interacting with other server implementations at the moment.
</p>

<p>
Also would be happy to field any questions regarding navigating the activitypub spec as well. I plan to write up my
experiences somewhere at some point in the future.
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">new versions of VS Code extensions Alcotest and Expect and Inline tests, now on Open VSX too</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-versions-of-vs-code-extensions-alcotest-and-expect-inline-tests-now-on-open-vsx-too/11700/1">https://discuss.ocaml.org/t/ann-new-versions-of-vs-code-extensions-alcotest-and-expect-inline-tests-now-on-open-vsx-too/11700/1</a>
</p>
</div>

<div id="outline-container-org256ab80" class="outline-3">
<h3 id="org256ab80">Roland Csaszar announced</h3>
<div class="outline-text-3" id="text-org256ab80">
<p>
I&rsquo;ve just updated both VS Code testing extensions, as of now they are available at the Open VSX Registry too.
</p>

<p>
Bugfixes:
The Opam environment of the project&rsquo;s root is used, so the Dune executable in the sandbox of the project directory
is used by default if such a sandbox exists. Otherwise the environment of the current Opam switch.
If Dune does not work (a call of <code>dune --version</code> fails), an error message box is displayed.
</p>
</div>

<div id="outline-container-org23c0ce0" class="outline-4">
<h4 id="org23c0ce0">Expect &amp; Inline PPX</h4>
<div class="outline-text-4" id="text-org23c0ce0">
<ul class="org-ul">
<li><a href="https://marketplace.visualstudio.com/items?itemName=release-candidate.vscode-ocaml-expect-inline">VS Marketplace</a></li>
<li><a href="https://open-vsx.org/extension/Release-Candidate/vscode-ocaml-expect-inline">Open VSX</a></li>
<li><a href="https://github.com/Release-Candidate/vscode-ocaml-expect-inline">GitHub</a></li>
</ul>
</div>
</div>

<div id="outline-container-org549ed7d" class="outline-4">
<h4 id="org549ed7d">Alcotest &amp; Inline Alcotest</h4>
<div class="outline-text-4" id="text-org549ed7d">
<ul class="org-ul">
<li><a href="https://marketplace.visualstudio.com/items?itemName=release-candidate.vscode-ocaml-alcotest-test-adapter">VS Marketplace</a></li>
<li><a href="https://open-vsx.org/extension/Release-Candidate/vscode-ocaml-alcotest-test-adapter">Open VSX</a></li>
<li><a href="https://github.com/Release-Candidate/vscode-ocaml-alcotest-test-adapter">GitHub</a></li>
</ul>
</div>
</div>

<div id="outline-container-org306a6a0" class="outline-4">
<h4 id="org306a6a0">Changelog</h4>
<div class="outline-text-4" id="text-org306a6a0">
<ul class="org-ul">
<li>Add error message window if <code>dune</code> does not work in a workspace.</li>
</ul>
</div>

<ul class="org-ul">
<li><a id="org715f3e8"></a>Bugfixes<br />
<div class="outline-text-5" id="text-org715f3e8">
<ul class="org-ul">
<li>Use the current Opam environment to be able to use local executables like <code>dune</code>.</li>
</ul>
</div>
</li>

<li><a id="org64454cd"></a>Internal Changes<br />
<div class="outline-text-5" id="text-org64454cd">
<ul class="org-ul">
<li>Add tests to check the parsing of <code>opam env</code>.</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">Autofonce, a modern runner for GNU Autotests suites</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/autofonce-a-modern-runner-for-gnu-autotests-suites/11727/1">https://discuss.ocaml.org/t/autofonce-a-modern-runner-for-gnu-autotests-suites/11727/1</a>
</p>
</div>

<div id="outline-container-orgfbd83c6" class="outline-3">
<h3 id="orgfbd83c6">Fabrice Le Fessant announced</h3>
<div class="outline-text-3" id="text-orgfbd83c6">
<p>
I am not sure it might be helpful to the OCaml community, as we already have well integrated test frameworks, but
here is a tool I wrote in OCaml to work with GNU projects: <code>autofonce</code> is a modern runner for testsuites created
for the GNU Autoconf tools.
</p>

<p>
Compared to Autoconf tools, its main features are:
</p>
<ul class="org-ul">
<li>improved terminal output</li>
<li>automatic parallel execution</li>
<li>promotion of tests results to fix tests</li>
<li>extended syntax</li>
<li>filtering by keywords, numbers and ranges</li>
<li>execution from any project directory</li>
</ul>

<p>
A typical Autoconf test looks like:
</p>
<pre class="example" id="orgc458bb6">
# Start of a test, and the name that will be displayed
AT_SETUP([Example test])

# can be used to select tests to run:
AT_KEYWORDS([example test autofonce])

# create a file ~file~ with its content
AT_DATA([file], [
content of file
on multiple lines
])

# call some command, check its exit code, stdout, stderr
AT_CHECK([cat file], [0], [stdout of my command], [stderr of my command])
# you can do more, ignore some results, run more tests in case of failure, etc.

# end of the test
AT_CLEANUP
</pre>

<p>
I personally like the syntax better than the one of <code>cram</code> tests, though there is some weird escaping issues with
brackets (see the section in the doc).
</p>

<p>
Compatibility with Autoconf is only partial, as it uses a grammar interpretation of what should actually be <code>m4</code>
macros, but it was good enough to run the full GnuCOBOL testsuite after a few fixes (that actually improved the
testsuite).
</p>

<p>
The package is on Opam, but sources, documentation and static binaries are available from Github:
</p>

<p>
<a href="https://github.com/ocamlpro/autofonce">https://github.com/ocamlpro/autofonce</a>
</p>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">Release of piece_rope 0.9.0</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-release-of-piece-rope-0-9-0/11734/1">https://discuss.ocaml.org/t/ann-release-of-piece-rope-0-9-0/11734/1</a>
</p>
</div>

<div id="outline-container-orgcaedf5d" class="outline-3">
<h3 id="orgcaedf5d">Humza Shahid announced</h3>
<div class="outline-text-3" id="text-orgcaedf5d">
<p>
I&rsquo;m not sure how useful this is to others, but I published my first open source package to opam which can be used
by anyone interested in it.
</p>

<p>
It is the same data structure used for editing text in VS Code [1] and AbiWord [2], with a few modifications to make it
persistent and functional.
</p>

<p>
It provides some nice features on top which include:
</p>

<ul class="org-ul">
<li>Serialising and deserialising the structure to a file for persistent undo/redo.</li>
<li>Translating between offsets of different Unicode encodings (UTF-8, UTF-16 and UTF-32) for interaction with external systems and languages.</li>
<li>There is a computationally expensive function to rebuild the structure, optimising it for memory usage and performance. (The idea was to use this in a GUI app when the user is inactive and rebuilding in that case - the core structure is fast but the perfectionist in me wanted it to be as fast and lean in memory as possible.)</li>
</ul>

<p>
There are some similar packages others may find useful like Zed which are a more battle-tested implementation of a
similar-but-not-quite-the-same data structure as this is a new implementation.
</p>

<p>
Feel free to comment or open issues for any bugs you find during usage. Hopefully someone else out there will find
this useful too.
</p>

<ul class="org-ul">
<li>[1] <a href="https://code.visualstudio.com/blogs/2018/03/23/text-buffer-reimplementation">https://code.visualstudio.com/blogs/2018/03/23/text-buffer-reimplementation</a></li>
<li>[2] <a href="http://e98cuenc.free.fr/wordprocessor/piecetable.html">http://e98cuenc.free.fr/wordprocessor/piecetable.html</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org57c094b" class="outline-2">
<h2 id="org57c094b">Old CWN</h2>
<div class="outline-text-2" id="text-org57c094b">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I&rsquo;ll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org1d45f5d">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>