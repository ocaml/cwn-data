<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-07-10 Tue 08:39 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2018.07.03.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2018.07.17.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of July 03 to 10, 2018.
</p>

<p>
For people receiving this by email, I'm trying to send it as a multipart/alternative email with the text and html version. Please let me know if there is an issue.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">Sightings of OCaml around the Web</a></li>
<li><a href="#2">Looking for OCaml developers for a Tezos based Decentralised Betting Exchange!</a></li>
<li><a href="#3">Dune 1.0.0 is coming soon, what about jbuilder projects?</a></li>
<li><a href="#4">New release of craml, a tool to test command line applications</a></li>
<li><a href="#5">How to read/understand function signature with GADT?</a></li>
<li><a href="#6">Format module from the Standard Library</a></li>
<li><a href="#7">First release of mastodon-archive-viewer (0.1)</a></li>
<li><a href="#8">Other OCaml News</a></li>
<li><a href="#org16971b6">Old CWN</a></li>
</ul>
</div>
</div>


<hr />

<div id="outline-container-orgb0f1596" class="outline-2">
<h2 id="1"><a id="orgb0f1596"></a>Sightings of OCaml around the Web</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/sightings-of-ocaml-around-the-web/1867/23">https://discuss.ocaml.org/t/sightings-of-ocaml-around-the-web/1867/23</a>
</p>
</div>

<div id="outline-container-orgd0e7a89" class="outline-3">
<h3 id="orgd0e7a89">Yotam Barnoy announced</h3>
<div class="outline-text-3" id="text-orgd0e7a89">
<p>
Here's a must-read article on the dev team's <a href="https://blog.janestreet.com/plans-for-ocaml-408/">Plans for OCaml 4.08</a> by @lpw25 . If you're a long-time user, you'll really enjoy this.
</p>

<p>
Also, I'll just mention that <a href="https://ocamlverse.github.io/">OCamlverse</a> has had
quite a few updates recently. If you haven't checked it out yet, please do &#x2013;
everyone can request and receive automatic contribution rights, so if there's
something you want to fix up/contribute to, you're welcome to do so.
</p>




<hr />
</div>
</div>
</div>

<div id="outline-container-orgb6644dc" class="outline-2">
<h2 id="2"><a id="orgb6644dc"></a>Looking for OCaml developers for a Tezos based Decentralised Betting Exchange!</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/looking-for-ocaml-developers-for-a-tezos-based-decentralised-betting-exchange/2236/1">https://discuss.ocaml.org/t/looking-for-ocaml-developers-for-a-tezos-based-decentralised-betting-exchange/2236/1</a>
</p>
</div>

<div id="outline-container-org54aa5fb" class="outline-3">
<h3 id="org54aa5fb">Suraj Tirupati announced</h3>
<div class="outline-text-3" id="text-org54aa5fb">
<p>
My team and I are working on a decentralised betting exchange called BettingWin - <a href="https://www.bettingwin.online">https://www.bettingwin.online</a>
</p>

<p>
We want to create a platform through which users can place bets in a
decentralised environment; bettors bet, market makers create markets and
reporters report events. It's still in development and we are looking to work
with some new developers.
</p>

<p>
We are currently looking to expand our team and bring on some developers to
complete paid tasks or become a permanent member of the team depending on our
compatibility :) We are really interested in working with smart, insightful
developers who are familiar with OCaml and have experience with programming
smart contracts. Also, any developers with an interest in Tezos are very welcome
as that is the blockchain we are using.
</p>

<p>
We can arrange Skype calls to discuss things in detail. Please contact me at suraj@bettingwin.online 
</p>




<hr />
</div>
</div>
</div>

<div id="outline-container-org06ecd9f" class="outline-2">
<h2 id="3"><a id="org06ecd9f"></a>Dune 1.0.0 is coming soon, what about jbuilder projects?</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/dune-1-0-0-is-coming-soon-what-about-jbuilder-projects/2237/1">https://discuss.ocaml.org/t/dune-1-0-0-is-coming-soon-what-about-jbuilder-projects/2237/1</a>
</p>
</div>

<div id="outline-container-org5646cc8" class="outline-3">
<h3 id="org5646cc8">Jérémie Dimino announced</h3>
<div class="outline-text-3" id="text-org5646cc8">
<p>
The 1.0.0 release of dune is planned for next week. It will be the first release of jbuilder as dune, so what to expect for existing jbuilder projects?
</p>

<p>
The good news is that dune is fully backward compatible with jbuilder. The <code>dune</code> package in opam will install both <code>dune</code> and <code>jbuilder</code> binaries and both will be usable on existing jbuilder projects.
</p>

<p>
We do want to stop supporting jbuilder projects eventually, so the plan is to
continue to support the <code>jbuilder</code> binary and <code>jbuild</code> files for another year. 6
months from now dune will start displaying warnings when using the <code>jbuilder</code>
binary or <code>jbuild</code> files. A more detailied [migration plan][mp] is available in
the manual. In particular it contains a precise list of things to do to migrate
a jbuilder project to a dune project.
</p>

<p>
We hope that the new features in Dune 1.0.0 and subsequent releases will be enough of an incentive for users to eagerly switch to Dune :)
</p>
</div>

<div id="outline-container-org261e072" class="outline-4">
<h4 id="org261e072">Important changes in Dune</h4>
<div class="outline-text-4" id="text-org261e072">
<p>
This section is not an exhaustive list of changes, but it describes the important changes to expect when switching from <code>jbuilder</code> to <code>dune</code>.
</p>
</div>

<ul class="org-ul">
<li><a id="orgf2da95c"></a>Versioning and configuration files<br />
<div class="outline-text-5" id="text-orgf2da95c">
<p>
A big part of the work in Dune 1.0.0 was getting the versioning story right.
With jbuilder it was hard for us to make the language evolve without breaking
the build of existing projects. Dune can handle that gracefully and in the
future it will be much easier to introduce breaking changes.
</p>

<p>
The versioning of all dune files in a project is controlled via a single
<code>dune-project</code> file at the root of the project. This file contains the version
of the dune language and extensions used in the project.
</p>

<p>
While this file is required in order to ensure compatibility with future
versions of Dune, it is not required to write one by hand every time you start a
new project or want to do a quick experiment. Dune will create and edit this
file for you as needed, so simply start by creating a <code>dune</code> file (the new
<code>jbuild</code> files) and dune will take care of the rest.
</p>

<p>
Note that the syntax inside <code>dune</code>, <code>dune-project</code>, &#x2026; files is slightly
different from the one inside <code>jbuild</code> files. In particular the language
requires fewer parentheses and the syntax of variables changed from <code>${...}</code> to
<code>%{...}</code> to avoid issues with shell commands. This is detailed in the [migration
plan][mp] as well.
</p>
</div>
</li>

<li><a id="org3f8c295"></a>Build profiles and default settings<br />
<div class="outline-text-5" id="text-org3f8c295">
<p>
Up to now <code>jbuilder</code> supported a <code>--dev</code> option in order to enable stricter
flags. There have been several changes regarding this. First of all you are now
able to define as many build profiles as you want: <code>dev</code>, <code>release</code>, <code>perf</code>, &#x2026;
These can be selected either via the <code>--profile</code> command line option or via the
<code>dune-workspace</code> file. You are also able to define what the default compilation
flags mean for each profile via an [env stanza][env].
</p>

<p>
Another important change is that the default build profile for the <code>dune</code> binary
is <code>dev</code> rather than <code>release</code>. We found that most of the time developpers want
the development mode by default. Please remember to add <code>"-p" name</code> to all
invocations of <code>dune</code> in opam files! This is now even more important than before
in order to ensure the release profile is selected for opam builds.
</p>
</div>
</li>

<li><a id="org1748bae"></a>Default target<br />
<div class="outline-text-5" id="text-org1748bae">
<p>
Dune allows to configure what happens when you run <code>dune build</code> without any specific targets. This is done via the introduction of a [default alias][defal].
</p>
</div>
</li>

<li><a id="org32a4932"></a>More parellelism by default<br />
<div class="outline-text-5" id="text-org32a4932">
<p>
If you had <code>(jobs N)</code> in you <code>~/.config/dune/config</code> file, you can remove it.
Dune now automatically sets the number of jobs that can be run in parallel to
the number of processing units available. The previous default was 4. For opam
files, you should remember to add <code>"-j" jobs</code> in order to let opam decide.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgb751d3e" class="outline-4">
<h4 id="orgb751d3e">Future of Dune</h4>
<div class="outline-text-4" id="text-orgb751d3e">
<p>
Now that we have a good versioning story and with the new testing tools that are
emerging, I'm hoping that at some point we will be able to declare that the
master of Dune is stable. At this point opam releases will just become a monthly
or even weekly formality. This should make the experience nicer for both
developers and users of Dune.
</p>

<p>
[mp]:    <a href="https://dune.readthedocs.io/en/latest/migration.html">https://dune.readthedocs.io/en/latest/migration.html</a><br />
[env]:   <a href="https://dune.readthedocs.io/en/latest/dune-files.html#env">https://dune.readthedocs.io/en/latest/dune-files.html#env</a><br />
[defal]: <a href="https://dune.readthedocs.io/en/latest/usage.html#default-alias">https://dune.readthedocs.io/en/latest/usage.html#default-alias</a>
</p>
</div>
</div>
</div>


<div id="outline-container-org2eb3900" class="outline-3">
<h3 id="org2eb3900">Jérémie Dimino then added</h3>
<div class="outline-text-3" id="text-org2eb3900">
<p>
One thing I forgot to mention: if you have a <code>~/.config/dune/config</code> file, you
need to add the following line at the beginning of this file: <code>(lang dune 1.0)</code>.
This line is the one we use in every configuration file that is versionned and
versioning the <code>~/.config/dune/config</code> file seemed natural. The <code>jbuilder</code>
binary doesn't require it for backward compatibility reasons, but the <code>dune</code>
binary does.
</p>




<hr />
</div>
</div>
</div>

<div id="outline-container-org53a57ea" class="outline-2">
<h2 id="4"><a id="org53a57ea"></a>New release of craml, a tool to test command line applications</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-release-of-craml-a-tool-to-test-command-line-applications/2241/1">https://discuss.ocaml.org/t/ann-new-release-of-craml-a-tool-to-test-command-line-applications/2241/1</a>
</p>
</div>

<div id="outline-container-orgcd9420d" class="outline-3">
<h3 id="orgcd9420d">Thomas Gazagnaire announced</h3>
<div class="outline-text-3" id="text-orgcd9420d">
<p>
I am happy to announce the first release of <a href="https://github.com/realworldocaml/craml">craml</a>, a toool for testing command-line applications.
</p>

<p>
To install it:
</p>

<div class="org-src-container">
<pre class="src src-shell">opam install craml
</pre>
</div>

<p>
The tool is already used by <a href="https://github.com/realworldocaml/book/blob/master/examples/code/json/build_github_atd.sh">real-world OCaml v2</a> to test shell script examples and <a href="https://github.com/ocaml/merlin/blob/master/tests/type-expr/test.t">by merlin</a>. Feedback is alway welcome, so feel free to open new issues on the tracker to discuss about new features.
</p>

<p>
Here is a copy of the README, with a more complete description of the project:
</p>

<p>
&#x2014;
</p>
</div>

<div id="outline-container-org72d95cc" class="outline-4">
<h4 id="org72d95cc">craml: a tool for testing command-line applications</h4>
<div class="outline-text-4" id="text-org72d95cc">
<p>
CRAM is a is functional testing framework for command line applications. <code>craml</code> is freely inspired by the <a href="https://bitheap.org/cram/">Python tool</a>, which was itself based on Mercurial's <a href="https://www.selenic.com/blog/?p=663">unified test format</a>.
</p>

<p>
<code>craml</code> is released as a single binary (called <code>craml</code>) and supports the following syntax:
</p>

<ul class="org-ul">
<li>Lines beginning with two spaces, a dollar sign, and a space are  <b>commands</b> and will be run in the shell.</li>
<li>Multi-lines commands end by <code>\</code> and continue with two spaces and  a <code>&gt;</code> sign on the next line:</li>
</ul>
<div class="org-src-container">
<pre class="src src-shell">$ &lt;line1&gt; <span style="color: #8b2252;">\</span>
&gt; &lt;line2&gt; <span style="color: #8b2252;">\</span>
&gt; &lt;line3&gt;
</pre>
</div>
<ul class="org-ul">
<li>Lines beginning with two spaces are considered command <b>output</b>.</li>
<li>Command outputs can contains <b>ellipsis</b>: <code>...</code>. These will match any possible outputs (on zero, one or multiple lines).</li>
<li>Lines starting by <code>&lt;--</code> are command <b>pre-conditions</b>; they will determine the conditions where the command is run. Currently, only non-deterministic modes are supported as pre-conditions (see below).</li>
<li>Lines starting by <code>--&gt;</code> are command <b>post-conditions</b>. Currently, only exit codes are supported as post-conditions (see below).</li>
<li>Anything else is a comment. It is not possible to put comments in the middle of an output as it is not clear what should be done to them when the output changes.</li>
</ul>

<p>
To run the tests described in a <code>&lt;file&gt;</code>, use <code>craml &lt;file&gt;</code>. This will run all
the commands in sequence and will generated <code>&lt;file&gt;.corrected</code> if one of the
output do not match the expected command outputs.
</p>
</div>

<ul class="org-ul">
<li><a id="org2f30c4a"></a>Non-deterministic Outputs<br />
<div class="outline-text-5" id="text-org2f30c4a">
<p>
<code>craml</code> supports non-deterministic outputs:
</p>

<div class="org-src-container">
<pre class="src src-shell">&lt;-- non-deterministic
  $ &lt;command&gt;
  &lt;output&gt;
</pre>
</div>

<p>
In that case, <code>craml &lt;file&gt;</code> will run the command but will not generate
<code>&lt;file&gt;.corrected</code> if the new output differs from the one described in the file.
Use <code>craml --non-deterministic &lt;file&gt;</code> to come back to the default behaviour.
</p>
</div>
</li>

<li><a id="orgee61fa3"></a>Non-deterministic Commands<br />
<div class="outline-text-5" id="text-orgee61fa3">
<p>
<code>craml</code> supports non-deterministic outputs:
</p>

<div class="org-src-container">
<pre class="src src-shell">&lt;-- non-deterministic [skip]
  $ &lt;command&gt;
  &lt;output&gt;
</pre>
</div>

<p>
In that case, <code>craml &lt;file&gt;</code> will <b>not</b> run the command. Use <code>craml --non-deterministic &lt;file&gt;</code> to come back to the default behaviour.
</p>
</div>
</li>

<li><a id="orgcdd2c6b"></a>Exit Codes<br />
<div class="outline-text-5" id="text-orgcdd2c6b">
<p>
<code>craml</code> tests exit codes:
</p>

<div class="org-src-container">
<pre class="src src-shell">  $ &lt;command&gt;
  &lt;output&gt;
--&gt; exit 10
</pre>
</div>

<p>
If <code>&lt;command&gt;</code> does not exit with code 10, then <code>craml &lt;file&gt;</code> will generate <code>&lt;file&gt;.corrected</code> with the right exit code. Note that <code>@@ exit 0</code> will not be displayed.
</p>
</div>
</li>
</ul>
</div>
</div>


<div id="outline-container-orgeebf893" class="outline-3">
<h3 id="orgeebf893">Perry E. Metzger said and Daniel Bünzli replied</h3>
<div class="outline-text-3" id="text-orgeebf893">
<p>
&gt; Just a small request: I note that the README, which many users will never see on installing from opam,
</p>

<p>
Also note that an <code>odig readme craml</code> will do.
</p>




<hr />
</div>
</div>
</div>

<div id="outline-container-org33c92d9" class="outline-2">
<h2 id="5"><a id="org33c92d9"></a>How to read/understand function signature with GADT?</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/how-to-read-understand-function-signature-with-gadt/2250/1">https://discuss.ocaml.org/t/how-to-read-understand-function-signature-with-gadt/2250/1</a>
</p>
</div>

<div id="outline-container-org2fc8803" class="outline-3">
<h3 id="org2fc8803">Volodymyr Melnyk asked</h3>
<div class="outline-text-3" id="text-org2fc8803">
<p>
For example, given the code:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #a0522d;">eval</span> <span style="color: #a52a2a;">:</span> <span style="color: #a020f0;">type</span><span style="color: #228b22;"> a . a term </span><span style="color: #a52a2a;">-&gt;</span><span style="color: #228b22;"> a </span><span style="color: #a52a2a;">=</span> <span style="color: #a52a2a;">...</span>
</pre>
</div>

<p>
How to read/understand this part: <code>type a . a term -&gt; a</code>? What does the dot here mean? Why should we define type <code>a</code> in the function's signature?
</p>
</div>
</div>


<div id="outline-container-org3dd90d0" class="outline-3">
<h3 id="org3dd90d0">octachron</h3>
<div class="outline-text-3" id="text-org3dd90d0">
<p>
There is two things going on simultaneously here. The first is that GADTs can only add equation to abstract types in a pattern matching. For instance, let's consider the toy example
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">a</span> <span style="color: #a52a2a;">=</span> <span style="color: #000000; background-color: #ffffff;">Tag_a</span>
<span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">b</span> <span style="color: #a52a2a;">=</span> <span style="color: #000000; background-color: #ffffff;">Tag_b</span>
<span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">_</span> t <span style="color: #a52a2a;">=</span>
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">A</span><span style="color: #a52a2a;">:</span> a t
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">B</span><span style="color: #a52a2a;">:</span> b t
</pre>
</div>

<p>
then 
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">to_string</span> <span style="color: #a52a2a;">=</span> <span style="color: #a020f0;">function</span>
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">A</span> <span style="color: #a52a2a;">-&gt;</span> <span style="color: #8b2252;">"a"</span>
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">B</span> <span style="color: #a52a2a;">-&gt;</span> <span style="color: #8b2252;">"b"</span>
</pre>
</div>
<p>
yields a type error
</p>
<pre class="example">
&gt; Error: This pattern matches values of type b t
       but a pattern was expected which matches values of type a t
       Type b is not compatible with type a
</pre>

<p>
because the type of the argument was inferred to <code>a t</code> in the first branch of the pattern matching.
</p>

<p>
The solution is to make the type phantom parameter of <code>t</code> a locally abstract type in <code>to_string</code>. 
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">to_string</span><span style="color: #a0522d;"> </span><span style="color: #a52a2a;">(</span><span style="color: #a020f0;">type</span><span style="color: #a0522d;"> </span><span style="color: #228b22;">t</span><span style="color: #a52a2a;">)</span><span style="color: #a0522d;"> </span><span style="color: #a52a2a;">(</span><span style="color: #a0522d;">x</span><span style="color: #a52a2a;">:</span><span style="color: #228b22;"> t</span><span style="color: #a52a2a;">)</span> <span style="color: #a52a2a;">=</span> <span style="color: #a020f0;">match</span> x <span style="color: #a020f0;">with</span>
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">A</span> <span style="color: #a52a2a;">-&gt;</span> <span style="color: #8b2252;">"a"</span>
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">B</span> <span style="color: #a52a2a;">-&gt;</span> <span style="color: #8b2252;">"b"</span>
</pre>
</div>
<p>
The notation <code>(type t)</code> introduces a local abstract type named <code>t</code>, since the type is abstract, it can be refined to different types in  the branches of the pattern matching.
</p>

<p>
The second point is that recursive function involving GADTs often needs to be recursive polymorphic.
For instance, with a toy langage,
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">_</span> term  <span style="color: #a52a2a;">=</span>
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Bool</span> <span style="color: #a52a2a;">:</span> bool <span style="color: #a52a2a;">-&gt;</span> bool term
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Int</span> <span style="color: #a52a2a;">:</span> int <span style="color: #a52a2a;">-&gt;</span> int term
  <span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">If</span> <span style="color: #a52a2a;">:</span> bool term <span style="color: #a52a2a;">*</span> 'a term <span style="color: #a52a2a;">*</span> 'a term <span style="color: #a52a2a;">-&gt;</span> 'a term
</pre>
</div>
<p>
an eval function would look like
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">eval</span><span style="color: #a0522d;"> </span><span style="color: #a52a2a;">(</span><span style="color: #a020f0;">type</span><span style="color: #a0522d;"> </span><span style="color: #228b22;">t</span><span style="color: #a52a2a;">)</span><span style="color: #a0522d;"> </span><span style="color: #a52a2a;">(</span><span style="color: #a0522d;">x</span><span style="color: #a52a2a;">:</span><span style="color: #228b22;">t term</span><span style="color: #a52a2a;">):</span> t <span style="color: #a52a2a;">=</span> <span style="color: #a020f0;">match</span> x <span style="color: #a020f0;">with</span>
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Bool</span> b <span style="color: #a52a2a;">-&gt;</span> b
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Int</span> x <span style="color: #a52a2a;">-&gt;</span> x
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">If</span> <span style="color: #a52a2a;">(</span>cond<span style="color: #a52a2a;">,</span>then'<span style="color: #a52a2a;">,</span>else'<span style="color: #a52a2a;">)</span> <span style="color: #a52a2a;">-&gt;</span> <span style="color: #a020f0;">if</span> eval cond <span style="color: #a020f0;">then</span> eval then' <span style="color: #a020f0;">else</span> eval else'
</pre>
</div>
<p>
but in the <code>If</code> branch <code>eval</code> is called with an argument of a different types, which result in a type error 
</p>

<pre class="example">
&gt; Error: This expression has type t term but an expression was expected of type
         bool term
</pre>

<p>
on the first call with a different value for the <code>term</code> type parameter.
The  long-winded solution here is to add an explicit polymorphic annotation and then introduce
locally abstract types
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">eval</span><span style="color: #a52a2a;">:</span> <span style="color: #228b22;">'t. 't term </span><span style="color: #a52a2a;">-&gt;</span><span style="color: #228b22;"> 't </span><span style="color: #a52a2a;">=</span> <span style="color: #a020f0;">fun</span> <span style="color: #a52a2a;">(</span><span style="color: #a020f0;">type</span> <span style="color: #228b22;">t</span><span style="color: #a52a2a;">)</span> <span style="color: #a52a2a;">(</span>x<span style="color: #a52a2a;">:</span><span style="color: #228b22;"> t term</span><span style="color: #a52a2a;">):</span> t <span style="color: #a52a2a;">-&gt;</span> <span style="color: #a020f0;">match</span> x <span style="color: #a020f0;">with</span>
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Bool</span> b <span style="color: #a52a2a;">-&gt;</span> b
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Int</span> x <span style="color: #a52a2a;">-&gt;</span> x
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">If</span> <span style="color: #a52a2a;">(</span>cond<span style="color: #a52a2a;">,</span>then'<span style="color: #a52a2a;">,</span>else'<span style="color: #a52a2a;">)</span> <span style="color: #a52a2a;">-&gt;</span> <span style="color: #a020f0;">if</span> eval cond <span style="color: #a020f0;">then</span> eval then' <span style="color: #a020f0;">else</span> eval else'
</pre>
</div>
<p>
Since this is a bit of a mouthful, there is shorter variant that directly combines explicit polymorphic annotation with locally abstract types:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">eval</span><span style="color: #a52a2a;">:</span> <span style="color: #a020f0;">type</span><span style="color: #228b22;"> t. t term </span><span style="color: #a52a2a;">-&gt;</span><span style="color: #228b22;"> t </span><span style="color: #a52a2a;">=</span> <span style="color: #a020f0;">function</span>
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Bool</span> b <span style="color: #a52a2a;">-&gt;</span> b
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">Int</span> x <span style="color: #a52a2a;">-&gt;</span> x
<span style="color: #a52a2a;">|</span> <span style="color: #000000; background-color: #ffffff;">If</span> <span style="color: #a52a2a;">(</span>cond<span style="color: #a52a2a;">,</span>then'<span style="color: #a52a2a;">,</span>else'<span style="color: #a52a2a;">)</span> <span style="color: #a52a2a;">-&gt;</span> <span style="color: #a020f0;">if</span> eval cond <span style="color: #a020f0;">then</span> eval then' <span style="color: #a020f0;">else</span> eval else'
</pre>
</div>
<p>
Here <code>type t. … ~ declares ~t</code> as both a locally abstract types and makes it explicitly polymorphic.
</p>




<hr />
</div>
</div>
</div>

<div id="outline-container-orgc93c93f" class="outline-2">
<h2 id="6"><a id="orgc93c93f"></a>Format module from the Standard Library</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/format-module-from-the-standard-library/2254/1">https://discuss.ocaml.org/t/format-module-from-the-standard-library/2254/1</a>
</p>
</div>

<div id="outline-container-org0e41b04" class="outline-3">
<h3 id="org0e41b04">cloudyhug asked</h3>
<div class="outline-text-3" id="text-org0e41b04">
<p>
Hello everyone. Does any of you know where I can find a decent tutorial for the
OCaml Format module ? I cannot figure out how to use it, and the few things I
have found are the documentation and the official tutorial, which are explicit
but not clear at all. I have spent the last 30 minutes trying to understand it,
in vain.
</p>
</div>
</div>


<div id="outline-container-org8ee3c40" class="outline-3">
<h3 id="org8ee3c40">Gabriel Radanne replied</h3>
<div class="outline-text-3" id="text-org8ee3c40">
<p>
I would recommend reading this blog post: <a href="https://cedeela.fr/format-all-the-data-structures.html">https://cedeela.fr/format-all-the-data-structures.html</a>
</p>

<p>
For understanding boxes, see <a href="https://ocaml.org/learn/tutorials/format.html">https://ocaml.org/learn/tutorials/format.html</a>
</p>
</div>
</div>


<div id="outline-container-org711e06d" class="outline-3">
<h3 id="org711e06d">Martin Jambon also replied</h3>
<div class="outline-text-3" id="text-org711e06d">
<p>
If that's an option for you, I'd suggest using
<a href="https://github.com/mjambon/easy-format">easy-format</a>. There's a <a href="https://mjambon.github.io/mjambon2016/easy_format_example.html">complete
example here</a>
with various ways to format the same thing.
</p>




<hr />
</div>
</div>
</div>

<div id="outline-container-org3be9ef5" class="outline-2">
<h2 id="7"><a id="org3be9ef5"></a>First release of mastodon-archive-viewer (0.1)</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-first-release-of-mastodon-archive-viewer-0-1/2257/1">https://discuss.ocaml.org/t/ann-first-release-of-mastodon-archive-viewer-0-1/2257/1</a>
</p>
</div>

<div id="outline-container-org0235f80" class="outline-3">
<h3 id="org0235f80">Kate announced</h3>
<div class="outline-text-3" id="text-org0235f80">
<p>
<a href="https://joinmastodon.org/">Mastodon</a> is a decentralized social network similar to Twitter.
</p>

<p>
One of its many features is to allow people to get their archive as a way to
save their posts history in case one server is seized, crashed, or temporary
down. It is also useful in case you want to delete an old account but still want
to keep its archive.
</p>

<p>
Here I present you
<a href="https://github.com/kit-ty-kate/mastodon-archive-viewer">mastodon-archive-viewer</a>
which is a tool that takes a mastodon archive, previously exported, downloaded
and extracted and gives you an offline web view of it.
</p>

<p>
If you want to give it a try, mastodon-archive-viewer is now available on opam, and comes with a filter system to view only parts of your archive.
</p>
<div class="org-src-container">
<pre class="src src-shell">opam install mastodon-archive-viewer
<span style="color: #483d8b;">cd</span> &lt;archive-directory-previously-extracted&gt;
mastodon-archive-viewer outbox.json &gt; archive.html
</pre>
</div>

<p>
For the moment this tool is in an early stage of development so don't hesitate to report bugs or feature requires on the issues tracker.
</p>

<p>
Happy tooting!
</p>

<p>
PS: if you are interested in using Mastodon, perhaps a legit choice of instance might be <a href="https://functional.cafe">functional.cafe</a>, for example :slight_smile:
</p>




<hr />
</div>
</div>
</div>

<div id="outline-container-orgada09e9" class="outline-2">
<h2 id="8"><a id="orgada09e9"></a>Other OCaml News</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org5ffe230" class="outline-3">
<h3 id="org5ffe230">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-org5ffe230">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="https://coq.inria.fr/news/146.html">Coq 8.8.1 is out</a></li>
</ul>




<hr />
</div>
</div>
</div>

<div id="outline-container-org16971b6" class="outline-2">
<h2 id="org16971b6">Old CWN</h2>
<div class="outline-text-2" id="text-org16971b6">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>
<hr />
<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
