<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-02-11 Tue 09:44 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2020.02.04.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2020.02.18.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of February 04 to 11, 2020.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">OCaml 4.10.0, first release candidate</a></li>
<li><a href="#2">Luv — cross-platform concurrent I/O: a binding to libuv</a></li>
<li><a href="#3">Musings on extended pattern-matching syntaxes</a></li>
<li><a href="#orgf07c298">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgab27cba" class="outline-2">
<h2 id="1">OCaml 4.10.0, first release candidate</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-4-10-0-first-release-candidate/5137/1">https://discuss.ocaml.org/t/ocaml-4-10-0-first-release-candidate/5137/1</a>
</p>
</div>

<div id="outline-container-orgc7da351" class="outline-3">
<h3 id="orgc7da351">octachron announced</h3>
<div class="outline-text-3" id="text-orgc7da351">
<p>
The release of OCaml version 4.10.0 is imminent. We have
created a release candidate that you can test.
</p>

<p>
The source code is available at these addresses:
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/archive/4.10.0+rc1.tar.gz">https://github.com/ocaml/ocaml/archive/4.10.0+rc1.tar.gz</a></li>
<li><a href="https://caml.inria.fr/pub/distrib/ocaml-4.10/ocaml-4.10.0+rc1.tar.gz">https://caml.inria.fr/pub/distrib/ocaml-4.10/ocaml-4.10.0+rc1.tar.gz</a></li>
</ul>

<p>
The compiler can also be installed as an OPAM switch with one of the
following commands.
</p>
<div class="org-src-container">
<pre class="src src-shell">opam switch create ocaml-variants.4.10.0+rc1 --repositories=default,<span style="color: #a0522d;">beta</span>=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>
</div>
<p>
or
</p>
<div class="org-src-container">
<pre class="src src-shell">opam switch create ocaml-variants.4.10.0+rc1+&lt;VARIANT&gt; --repositories=default,<span style="color: #a0522d;">beta</span>=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>
</div>
<p>
where you replace &lt;VARIANT&gt; with one of these:
</p>
<ul class="org-ul">
<li>afl</li>
<li>flambda</li>
<li>fp</li>
<li>fp+flambda</li>
</ul>

<p>
We want to know about any bugs. Please report them here:
 <a href="https://github.com/ocaml/ocaml/issues">https://github.com/ocaml/ocaml/issues</a>
</p>

<p>
If every goes well, the full release should follow in the next
two or three weeks.
</p>

<p>
<b>OCaml 4.10.0 changes</b>
</p>
</div>

<div id="outline-container-org0f71e6c" class="outline-4">
<h4 id="org0f71e6c">Language features</h4>
<div class="outline-text-4" id="text-org0f71e6c">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/7757">#7757</a>, <a href="https://github.com/ocaml/ocaml/issues/1726">#1726</a>: multi-indices for extended indexing operators: <code>a.%{0;1;2}</code> desugars to <code>( .%{ ;.. } ) a [|0;1;2|]</code> (Florian Angeletti, review by Gabriel Radanne)</li>

<li><b>breaking change</b> <a href="https://github.com/ocaml/ocaml/issues/1859">#1859</a>, <a href="https://github.com/ocaml/ocaml/issues/9117">#9117</a>: enforce safe (immutable) strings by removing the -unsafe-string option by default. This can be overridden by a configure-time option (available since 4.04 in 2016): &#x2013;disable-force-safe-string since 4.08, -no-force-safe-since between 4.07 and 4.04. In the force-safe-string mode (now the default), the return type of the String_val macro in C stubs is <code>const char*</code> instead of <code>char*</code>. This change may break C FFI code. (Kate Deplaix)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/6662">#6662</a>, <a href="https://github.com/ocaml/ocaml/issues/8908">#8908</a>: allow writing "module _ = E" to ignore module expressions (Thomas Refis, review by Gabriel Radanne)</li>
</ul>
</div>
</div>

<div id="outline-container-orgf44dd7b" class="outline-4">
<h4 id="orgf44dd7b">Runtime system</h4>
<div class="outline-text-4" id="text-orgf44dd7b">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/8809">#8809</a>: Add a best-fit allocator for the major heap; still experimental, it should be much better than current allocation policies (first-fit and next-fit) for programs with large heaps, reducing both GC cost and memory usage. This new best-fit is not (yet) the default; set it explicitly with OCAMLRUNPARAM="a=2" (or Gc.set from the program). You may also want to increase the <code>space_overhead</code> parameter of the GC (a percentage, 80 by default), for example OCAMLRUNPARAM="o=85", for optimal speed. (Damien Doligez, review by Stephen Dolan, Jacques-Henri Jourdan, Xavier Leroy, Leo White)</li>

<li><p>
<b>breaking change</b> <a href="https://github.com/ocaml/ocaml/issues/8713">#8713</a>, <a href="https://github.com/ocaml/ocaml/issues/8940">#8940</a>, <a href="https://github.com/ocaml/ocaml/issues/9115">#9115</a>, <a href="https://github.com/ocaml/ocaml/issues/9143">#9143</a>, <a href="https://github.com/ocaml/ocaml/issues/9202">#9202</a>, <a href="https://github.com/ocaml/ocaml/issues/9251">#9251</a>: Introduce a state table in the runtime to contain the global variables. (The Multicore runtime will have one such state for each domain.)
</p>

<p>
This changes the status of some internal variables of the OCaml runtime; in many cases the header file originally defining the internal variable provides a compatibility macro with the old name, but programs re-defining those variables by hand need to be fixed.
</p>

<p>
(KC Sivaramakrishnan and Stephen Dolan, compatibility hacking by David Allsopp, Florian Angeletti, Kate Deplaix, Jacques Garrigue, Guillaume Munch-Maccagnoni and Nicolás Ojeda Bär, review by David Allsopp, Alain Frisch, Nicolas Ojeda Bar, Gabriel Scherer, Damien Doligez, and Guillaume Munch-Maccagnoni)
</p></li>

<li><a href="https://github.com/ocaml/ocaml/issues/8993">#8993</a>: New C functions caml_process_pending_actions{,_exn} in caml/signals.h, intended for executing all pending actions inside long-running C functions (requested minor and major collections, signal handlers, finalisers, and memprof callbacks). The function caml_process_pending_actions_exn returns any exception arising during their execution, allowing resources to be cleaned-up before re-raising. (Guillaume Munch-Maccagnoni, review by Jacques-Henri Jourdan, Stephen Dolan, and Gabriel Scherer)</li>

<li><b>breaking change</b> <a href="https://github.com/ocaml/ocaml/issues/8691">#8691</a>, <a href="https://github.com/ocaml/ocaml/issues/8897">#8897</a>, <a href="https://github.com/ocaml/ocaml/issues/9027">#9027</a>: Allocation functions are now guaranteed not to trigger any OCaml callback when called from C. In long-running C functions, this can be replaced with calls to caml_process_pending_actions at safe points. Side effect of this change: in bytecode mode, polling for asynchronous callbacks is performed at every minor heap allocation, in addition to function calls and loops as in previous OCaml releases. (Jacques-Henri Jourdan, review by Stephen Dolan, Gabriel Scherer and Guillaume Munch-Maccagnoni)</li>

<li><b>breaking change</b> <a href="https://github.com/ocaml/ocaml/issues/9037">#9037</a>: caml_check_urgent_gc is now guaranteed not to trigger any finaliser. In long-running C functions, this can be replaced with calls to caml_process_pending_actions at safe points. (Guillaume Munch-Maccagnoni, review by Jacques-Henri Jourdan and Stephen Dolan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8619">#8619</a>: Ensure Gc.minor_words remains accurate after a GC. (Stephen Dolan, Xavier Leroy and David Allsopp, review by Xavier Leroy and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8667">#8667</a>: Limit GC credit to 1.0 (Leo White, review by Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8670">#8670</a>: Fix stack overflow detection with systhreads (Stephen Dolan, review by Xavier Leroy, Anil Madhavapeddy, Gabriel Scherer, Frédéric Bour and Guillaume Munch-Maccagnoni)</li>

<li><b>breaking change</b> <a href="https://github.com/ocaml/ocaml/issues/8711">#8711</a>: The major GC hooks are no longer allowed to interact with the OCaml heap. (Jacques-Henri Jourdan, review by Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8630">#8630</a>: Use abort() instead of exit(2) in caml_fatal_error, and add the new hook caml_fatal_error_hook. (Jacques-Henri Jourdan, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8641">#8641</a>: Better call stacks when a C call is involved in byte code mode (Jacques-Henri Jourdan, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8634">#8634</a>, <a href="https://github.com/ocaml/ocaml/issues/8668">#8668</a>, <a href="https://github.com/ocaml/ocaml/issues/8684">#8684</a>, <a href="https://github.com/ocaml/ocaml/issues/9103">#9103</a> (originally <a href="https://github.com/ocaml/ocaml/issues/847">#847</a>): Statistical memory profiling. In OCaml 4.10, support for allocations in the minor heap in native mode is not available, and callbacks for promotions and deallocations are not available. Hence, there is not any public API for this feature yet. (Jacques-Henri Jourdan, review by Stephen Dolan, Gabriel Scherer and Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9268">#9268</a>, <a href="https://github.com/ocaml/ocaml/issues/9271">#9271</a>: Fix bytecode backtrace generation with large integers present. (Stephen Dolan and Mark Shinwell, review by Gabriel Scherer and Jacques-Henri Jourdan)</li>
</ul>
</div>
</div>

<div id="outline-container-org6ed5feb" class="outline-4">
<h4 id="org6ed5feb">Standard library</h4>
<div class="outline-text-4" id="text-org6ed5feb">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/8760">#8760</a>: List.concat_map : ('a -&gt; 'b list) -&gt; 'a list -&gt; 'b list (Gabriel Scherer, review by Daniel Bünzli and Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8832">#8832</a>: List.find_map : ('a -&gt; 'b option) -&gt; 'a list -&gt; 'b option (Gabriel Scherer, review by Jeremy Yallop, Nicolás Ojeda Bär and Daniel Bünzli)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/7672">#7672</a>, <a href="https://github.com/ocaml/ocaml/issues/1492">#1492</a>: Add <code>Filename.quote_command</code> to produce properly-quoted commands for execution by Sys.command. (Xavier Leroy, review by David Allsopp and Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8971">#8971</a>: Add <code>Filename.null</code>, the conventional name of the "null" device. (Nicolás Ojeda Bär, review by Xavier Leroy and Alain Frisch)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8651">#8651</a>: add '%#F' modifier in printf to output OCaml float constants in hexadecimal (Pierre Roux, review by Gabriel Scherer and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8657">#8657</a>: Optimization in [Array.make] when initializing with unboxed or young values. (Jacques-Henri Jourdan, review by Gabriel Scherer and Stephen Dolan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8716">#8716</a>: Optimize [Array.fill] and [Hashtbl.clear] with a new runtime primitive (Alain Frisch, review by David Allsopp, Stephen Dolan and Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8530">#8530</a>: List.sort: avoid duplicate work by chop (Guillaume Munch-Maccagnoni, review by David Allsopp, Damien Doligez and Gabriel Scherer)</li>
</ul>
</div>
</div>

<div id="outline-container-orgd22e9a2" class="outline-4">
<h4 id="orgd22e9a2">Other libraries</h4>
<div class="outline-text-4" id="text-orgd22e9a2">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/1939">#1939</a>, <a href="https://github.com/ocaml/ocaml/issues/2023">#2023</a>: Implement Unix.truncate and Unix.ftruncate on Windows. (Florent Monnier and Nicolás Ojeda Bär, review by David Allsopp)</li>
</ul>
</div>
</div>

<div id="outline-container-org35bf273" class="outline-4">
<h4 id="org35bf273">Code generation and optimizations</h4>
<div class="outline-text-4" id="text-org35bf273">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/8806">#8806</a>: Add an [@@immediate64] attribute for types that are known to be immediate only on 64 bit platforms (Jérémie Dimino, review by Vladimir Keleshev)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9028">#9028</a>, <a href="https://github.com/ocaml/ocaml/issues/9032">#9032</a>: Fix miscompilation by no longer assuming that untag_int (tag_int x) = x in Cmmgen; the compilation of <code>(n lsl 1) + 1</code>, for example, would be incorrect if evaluated with a large value for <code>n</code>. (Stephen Dolan, review by Vincent Laviron and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8672">#8672</a>: Optimise Switch code generation on booleans. (Stephen Dolan, review by Pierre Chambart)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8990">#8990</a>: amd64: Emit 32bit registers for Iconst_int when we can (Xavier Clerc, Tom Kelly and Mark Shinwell, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/2322">#2322</a>: Add pseudo-instruction <code>Ladjust_trap_depth</code> to replace dummy Lpushtrap generated in linearize (Greta Yorsh and Vincent Laviron, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8707">#8707</a>: Simplif: more regular treatment of Tupled and Curried functions (Gabriel Scherer, review by Leo White and Alain Frisch)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8526">#8526</a>: Add compile-time option -function-sections in ocamlopt to emit each function in a separate named text section on supported targets. (Greta Yorsh, review by Pierre Chambart)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/2321">#2321</a>: Eliminate dead ICatch handlers (Greta Yorsh, review by Pierre Chambart and Vincent Laviron)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8919">#8919</a>: lift mutable lets along with immutable ones (Leo White, review by Pierre Chambart)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8909">#8909</a>: Graph coloring register allocator: the weights put on preference edges should not be divided by 2 in branches of conditional constructs, because it is not good for performance and because it leads to ignoring preference edges with 0 weight. (Eric Stavarache, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9006">#9006</a>: int32 code generation improvements (Stephen Dolan, designed with Greta Yorsh, review by Xavier Clerc, Xavier Leroy and Alain Frisch)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9041">#9041</a>: amd64: Avoid stall in sqrtsd by clearing destination. (Stephen Dolan, with thanks to Andrew Hunter, Will Hasenplaugh, Spiros Eliopoulos and Brian Nigito. Review by Xavier Leroy)</li>
</ul>
</div>
</div>

<div id="outline-container-org11f6e74" class="outline-4">
<h4 id="org11f6e74">Manual and documentation</h4>
<div class="outline-text-4" id="text-org11f6e74">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/8718">#8718</a>, <a href="https://github.com/ocaml/ocaml/issues/9089">#9089</a>: syntactic highlighting for code examples in the manual (Florian Angeletti, report by Anton Kochkov, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9101">#9101</a>: add links to section anchor before the section title, make the name of those anchor explicits. (Florian Angeletti, review by Daniel Bünzli, Sébastien Hinderer, and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9257">#9257</a>, cautionary guidelines for using the internal runtime API without too much updating pain. (Florian Angeletti, review by Daniel Bünzli, Guillaume Munch-Maccagnoni and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8950">#8950</a>: move local opens in pattern out of the extension chapter (Florian Angeletti, review and suggestion by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9088">#9088</a>, <a href="https://github.com/ocaml/ocaml/issues/9097">#9097</a>: fix operator character classes (Florian Angeletti, review by Gabriel Scherer, report by Clément Busschaert)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9169">#9169</a>: better documentation for the best-fit allocation policy (Gabriel Scherer, review by Guillaume Munch-Maccagnoni and Florian Angeletti)</li>
</ul>
</div>
</div>

<div id="outline-container-org1813e38" class="outline-4">
<h4 id="org1813e38">Compiler user-interface and warnings</h4>
<div class="outline-text-4" id="text-org1813e38">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/8833">#8833</a>: Hint for (type) redefinitions in toplevel session (Florian Angeletti, review by Gabriel Scherer)</li>

<li><p>
<a href="https://github.com/ocaml/ocaml/issues/2127">#2127</a>, <a href="https://github.com/ocaml/ocaml/issues/9185">#9185</a>: Refactor lookup functions. Included observable changes:
</p>
<ul class="org-ul">
<li>makes the location of usage warnings and alerts for constructors more precise</li>
<li>don't warn about a constructor never being used to build values when it has been defined as private</li>
</ul>
<p>
(Leo White, Hugo Heuzard review by Thomas Refis, Florian Angeletti)
</p></li>

<li><a href="https://github.com/ocaml/ocaml/issues/8702">#8702</a>, <a href="https://github.com/ocaml/ocaml/issues/8777">#8777</a>: improved error messages for fixed row polymorphic variants (Florian Angeletti, report by Leo White, review by Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8844">#8844</a>: Printing faulty constructors, inline records fields and their types during type mismatches. Also slightly changed other type mismatches error output. (Mekhrubon Turaev, review by Florian Angeletti, Leo White)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8885">#8885</a>: Warn about unused local modules (Thomas Refis, review by Alain Frisch)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8872">#8872</a>: Add ocamlc option "-output-complete-exe" to build a self-contained binary for bytecode programs, containing the runtime and C stubs. (Stéphane Glondu, Nicolás Ojeda Bär, review by Jérémie Dimino and Daniel Bünzli)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8874">#8874</a>: add tests for typechecking error messages and pack them into pretty-printing boxes. (Oxana Kostikova, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8891">#8891</a>: Warn about unused functor parameters (Thomas Refis, review by Gabriel Radanne)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8903">#8903</a>: Improve errors for first-class modules (Leo White, review by Jacques Garrigue)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8914">#8914</a>: clarify the warning on unboxable types used in external primitives (61) (Gabriel Scherer, review by Florian Angeletti, report on the Discourse forum)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9046">#9046</a>: disable warning 30 by default This outdated warning complained on label/constructor name conflicts within a mutually-recursive type declarations; there is now no need to complain thanks to type-based disambiguation. (Gabriel Scherer)</li>
</ul>
</div>
</div>

<div id="outline-container-org977a41c" class="outline-4">
<h4 id="org977a41c">Tools</h4>
<div class="outline-text-4" id="text-org977a41c">
<ul class="org-ul">
<li><b>breaking change</b> <a href="https://github.com/ocaml/ocaml/issues/6792">#6792</a>, <a href="https://github.com/ocaml/ocaml/issues/8654">#8654</a> ocamldebug now supports programs using Dynlink. This changes ocamldebug messages, which may break compatibility with older emacs modes. (Whitequark and Jacques-Henri Jourdan, review by Gabriel Scherer and Xavier Clerc)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8621">#8621</a>: Make ocamlyacc a Windows Unicode application (David Allsopp, review by Nicolás Ojeda Bär)</li>

<li><b>breaking change</b> <a href="https://github.com/ocaml/ocaml/issues/8834">#8834</a>, <code>ocaml</code>: adhere to the XDG base directory specification to locate an <code>.ocamlinit</code> file. Reads an <code>$XDG_CONFIG_HOME/ocaml/init.ml</code> file before trying to lookup <code>~/.ocamlinit</code>. On Windows the behaviour is unchanged. (Daniel C. Bünzli, review by David Allsopp, Armaël Guéneau and Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9113">#9113</a>: ocamldoc: fix the rendering of multi-line code blocks in the 'man' backend. (Gabriel Scherer, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9127">#9127</a>, <a href="https://github.com/ocaml/ocaml/issues/9130">#9130</a>: ocamldoc: fix the formatting of closing brace in record types. (David Allsopp, report by San Vu Ngoc)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9181">#9181</a>: make objinfo work on Cygwin and look for the caml_plugin_header symbol in both the static and the dynamic symbol tables. (Sébastien Hinderer, review by Gabriel Scherer and David Allsopp)</li>
</ul>
</div>
</div>

<div id="outline-container-org9274550" class="outline-4">
<h4 id="org9274550">Build system</h4>
<div class="outline-text-4" id="text-org9274550">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/8840">#8840</a>: use ocaml{c,opt}.opt when available to build internal tools On my machine this reduces parallel-build times from 3m30s to 2m50s. (Gabriel Scherer, review by Xavier Leroy and Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8650">#8650</a>: ensure that "make" variables are defined before use; revise generation of config/util.ml to better quote special characters (Xavier Leroy, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8690">#8690</a>, <a href="https://github.com/ocaml/ocaml/issues/8696">#8696</a>: avoid rebuilding the world when files containing primitives change. (Stephen Dolan, review by Gabriel Scherer, Sébastien Hinderer and Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8835">#8835</a>: new configure option &#x2013;disable-stdlib-manpages to disable building and installation of the library manpages. (David Allsopp, review by Florian Angeletti and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8837">#8837</a>: build manpages using ocamldoc.opt when available cuts the manpages build time from 14s to 4s (Gabriel Scherer, review by David Allsopp and Sébastien Hinderer, report by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8843">#8843</a>, <a href="https://github.com/ocaml/ocaml/issues/8841">#8841</a>: fix use of off_t on 32-bit systems. (Stephen Dolan, report by Richard Jones, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8947">#8947</a>, <a href="https://github.com/ocaml/ocaml/issues/9134">#9134</a>: fix/improve support for the BFD library (Sébastien Hinderer, review by Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8951">#8951</a>: let make's default target build the compiler (Sébastien Hinderer, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8995">#8995</a>: allow developers to specify frequently-used configure options in Git (ocaml.configure option) and a directory for host-specific, shareable config.cache files (ocaml.configure-cache option). See HACKING.adoc for further details. (David Allsopp, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9136">#9136</a>: Don't propagate Cygwin-style prefix from configure to Makefile.config on Windows ports. (David Allsopp, review by Sébastien Hinderer)</li>
</ul>
</div>
</div>

<div id="outline-container-orgd8f2ab2" class="outline-4">
<h4 id="orgd8f2ab2">Internal/compiler-libs changes</h4>
<div class="outline-text-4" id="text-orgd8f2ab2">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/8828">#8828</a>: Added abstractions for variants, records, constructors, fields and extension constructor types mismatch. (Mekhrubon Turaev, review by Florian Angeletti, Leo White and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/7927">#7927</a>, <a href="https://github.com/ocaml/ocaml/issues/8527">#8527</a>: Replace long tuples into records in typeclass.ml (Ulugbek Abdullaev, review by David Allsopp and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/1963">#1963</a>: split cmmgen into generic Cmm helpers and clambda transformations (Vincent Laviron, review by Mark Shinwell)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/1901">#1901</a>: Fix lexing of character literals in comments (Pieter Goetschalckx, review by Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/1932">#1932</a>: Allow octal escape sequences and identifiers containing apostrophes in ocamlyacc actions and comments. (Pieter Goetschalckx, review by Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/2288">#2288</a>: Move middle end code from [Asmgen] to [Clambda_middle_end] and [Flambda_middle_end].  Run [Un_anf] from the middle end, not [Cmmgen]. (Mark Shinwell, review by Pierre Chambart)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8692">#8692</a>: Remove Misc.may_map and similar (Leo White, review by Gabriel Scherer and Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8677">#8677</a>: Use unsigned comparisons in amd64 and i386 emitter of Lcondbranch3. (Greta Yorsh, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8766">#8766</a>: Parmatch: introduce a type for simplified pattern heads (Gabriel Scherer and Thomas Refis, review by Stephen Dolan and Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8774">#8774</a>: New implementation of Env.make_copy_of_types (Alain Frisch, review by Thomas Refis, Leo White and Jacques Garrigue)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/7924">#7924</a>: Use a variant instead of an int in Bad_variance exception (Rian Douglas, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8890">#8890</a>: in -dtimings output, show time spent in C linker clearly (Valentin Gatien-Baron)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8910">#8910</a>, <a href="https://github.com/ocaml/ocaml/issues/8911">#8911</a>: minor improvements to the printing of module types (Gabriel Scherer, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8913">#8913</a>: ocamltest: improve 'promote' implementation to take skipped lines/bytes into account (Gabriel Scherer, review by Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8908">#8908</a>: Use an option instead of a string for module names ("_" becomes None), and a dedicated type for functor parameters: "()" maps to "Unit" (instead of "*"). (Thomas Refis, review by Gabriel Radanne)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8928">#8928</a>: Move contains_calls and num_stack_slots from Proc to Mach.fundecl (Greta Yorsh, review by Florian Angeletti and Vincent Laviron)</li>

<li><p>
<a href="https://github.com/ocaml/ocaml/issues/8959">#8959</a>, <a href="https://github.com/ocaml/ocaml/issues/8960">#8960</a>, <a href="https://github.com/ocaml/ocaml/issues/8968">#8968</a>, <a href="https://github.com/ocaml/ocaml/issues/9023">#9023</a>: minor refactorings in the typing of patterns:
</p>
<ul class="org-ul">
<li>refactor the {let,pat}_bound_idents* functions</li>
<li>minor bugfix in type_pat</li>
<li>refactor the generic pattern-traversal functions in Typecore and Typedtree</li>
<li>restrict the use of Need_backtrack</li>
</ul>
<p>
(Gabriel Scherer and Florian Angeletti, review by Thomas Refis and Gabriel Scherer)
</p></li>

<li><a href="https://github.com/ocaml/ocaml/issues/9030">#9030</a>: clarify and document the parameter space of type_pat (Gabriel Scherer and Florian Angeletti and Jacques Garrigue, review by Florian Angeletti and Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8975">#8975</a>: "ocamltests" files are no longer required or used by "ocamltest". Instead, any text file in the testsuite directory containing a valid "TEST" block will be automatically included in the testsuite. (Nicolás Ojeda Bär, review by Gabriel Scherer and Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8992">#8992</a>: share argument implementations between executables (Florian Angeletti, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9015">#9015</a>: fix fatal error in pprint_ast (<a href="https://github.com/ocaml/ocaml/issues/8789">#8789</a>) (Damien Doligez, review by &#x2026;)</li>
</ul>
</div>
</div>

<div id="outline-container-orgf7f8449" class="outline-4">
<h4 id="orgf7f8449">Bug fixes</h4>
<div class="outline-text-4" id="text-orgf7f8449">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/5673">#5673</a>, <a href="https://github.com/ocaml/ocaml/issues/7636">#7636</a>: unused type variable causes generalization error (Jacques Garrigue and Leo White, review by Leo White, reports by Jean-Louis Giavitto and Christophe Raffalli)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/6922">#6922</a>, <a href="https://github.com/ocaml/ocaml/issues/8955">#8955</a>: Fix regression with -principal type inference for inherited methods, allowing to compile ocamldoc with -principal (Jacques Garrigue, review by Leo White)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/7925">#7925</a>, <a href="https://github.com/ocaml/ocaml/issues/8611">#8611</a>: fix error highlighting for exceptionally long toplevel phrases (Kyle Miller, reported by Armaël Guéneau, review by Armaël Guéneau and Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8622">#8622</a>: Don't generate #! headers over 127 characters. (David Allsopp, review by Xavier Leroy and Stephen Dolan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8715">#8715</a>: minor bugfixes in CamlinternalFormat; removes the unused and misleading function CamlinternalFormat.string_of_formatting_gen (Gabriel Scherer and Florian Angeletti, review by Florian Angeletti and Gabriel Radanne)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8792">#8792</a>, <a href="https://github.com/ocaml/ocaml/issues/9018">#9018</a>: Possible (latent) bug in Ctype.normalize_type removed incrimined Btype.log_type, replaced by Btype.set_type (Jacques Garrigue, report by Alain Frisch, review by Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8856">#8856</a>, <a href="https://github.com/ocaml/ocaml/issues/8860">#8860</a>: avoid stackoverflow when printing cyclic type expressions in some error submessages. (Florian Angeletti, report by Mekhrubon Turaev, review by Leo White)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8875">#8875</a>: fix missing newlines in the output from MSVC invocation. (Nicolás Ojeda Bär, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8921">#8921</a>, <a href="https://github.com/ocaml/ocaml/issues/8924">#8924</a>: Fix stack overflow with Flambda (Vincent Laviron, review by Pierre Chambart and Leo White, report by Aleksandr Kuzmenko)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8892">#8892</a>, <a href="https://github.com/ocaml/ocaml/issues/8895">#8895</a>: fix the definition of Is_young when CAML_INTERNALS is not defined. (David Allsopp, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8896">#8896</a>: deprecate addr typedef in misc.h (David Allsopp, suggestion by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/8981">#8981</a>: Fix check for incompatible -c and -o options. (Greta Yorsh, review by Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9019">#9019</a>, <a href="https://github.com/ocaml/ocaml/issues/9154">#9154</a>: Unsound exhaustivity of GADTs from incomplete unification Also fixes bug found by Thomas Refis in <a href="https://github.com/ocaml/ocaml/issues/9012">#9012</a> (Jacques Garrigue, report and review by Leo White, Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9031">#9031</a>: Unregister Windows stack overflow handler while shutting the runtime down. (Dmitry Bely, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9051">#9051</a>: fix unregistered local root in win32unix/select.c (could result in <code>select</code> returning file_descr-like values which weren't in the original sets) and correct initialisation of some blocks allocated with caml_alloc_small. (David Allsopp, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9073">#9073</a>, <a href="https://github.com/ocaml/ocaml/issues/9120">#9120</a>: fix incorrect GC ratio multiplier when allocating custom blocks with caml_alloc_custom_mem in runtime/custom.c (Markus Mottl, review by Gabriel Scherer and Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9209">#9209</a>, <a href="https://github.com/ocaml/ocaml/issues/9212">#9212</a>: fix a development-version regression caused by <a href="https://github.com/ocaml/ocaml/issues/2288">#2288</a> (Kate Deplaix and David Allsopp, review by Sébastien Hinderer and Gabriel Scherer )</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9218">#9218</a>, <a href="https://github.com/ocaml/ocaml/issues/9269">#9269</a>: avoid a rare wrong module name error with "-annot" and inline records. (Florian Angeletti, review by Gabriel Scherer, report by Kate Deplaix)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9261">#9261</a>: Fix a soundness bug in Rec_check, new in 4.10 (from <a href="https://github.com/ocaml/ocaml/issues/8908">#8908</a>) (Vincent Laviron, review by Jeremy Yallop and Gabriel Scherer)</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-orgf12053a" class="outline-2">
<h2 id="2">Luv — cross-platform concurrent I/O: a binding to libuv</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/luv-cross-platform-concurrent-i-o-a-binding-to-libuv/5145/1">https://discuss.ocaml.org/t/luv-cross-platform-concurrent-i-o-a-binding-to-libuv/5145/1</a>
</p>
</div>

<div id="outline-container-orgd713e25" class="outline-3">
<h3 id="orgd713e25">Anton Bachin announced</h3>
<div class="outline-text-3" id="text-orgd713e25">
<p>
I am pleased to announce the first release of <a href="https://github.com/aantron/luv"><b><b>Luv</b></b></a>, a binding to <a href="http://github.com/libuv/libuv">libuv</a>. libuv is the
cross-platform C library inside Node.js that does I/O, wraps system calls, and drives Node's main loop.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> () =
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">timer</span> = <span style="color: #228b22;">Luv.Timer.</span>init () <span style="color: #a52a2a;">|&gt;</span> <span style="color: #228b22;">Stdlib.Result.</span>get_ok <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #483d8b;">ignore</span> (<span style="color: #228b22;">Luv.Timer.</span>start timer 1000 (<span style="color: #a020f0;">fun</span> () -&gt;
    print_endline <span style="color: #8b2252;">"Hello, world!"</span>));

  print_endline <span style="color: #8b2252;">"Waiting..."</span>;
  <span style="color: #483d8b;">ignore</span> (<span style="color: #228b22;">Luv.Loop.</span>run ())
</pre>
</div>

<p>
<a href="https://github.com/aantron/luv">https://github.com/aantron/luv</a>
</p>

<p>
Luv exposes sockets, files, subprocesses, FS events, and many other OS APIs. Indeed, Luv is an independent
alternative to the standard <a href="https://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html"><code>Unix</code></a>, and does not depend on <code>Unix</code>. The easiest way to get an idea of all that
is available is to quickly scroll through the <a href="https://aantron.github.io/luv/luv/index.html#api-reference">list of modules in the API docs</a>.
</p>

<p>
You are invited to glance through all of Luv's documentation:
</p>

<ul class="org-ul">
<li><a href="https://github.com/aantron/luv">Project page</a></li>
<li><a href="https://aantron.github.io/luv/">User guide</a></li>
<li><a href="https://aantron.github.io/luv/luv/index.html#api-reference">API reference</a></li>
<li><a href="https://github.com/aantron/luv/tree/master/example">Examples</a>, which are discussed in the guide&#x2026;</li>
<li>&#x2026;and the <a href="http://docs.libuv.org/en/v1.x/">documentation of libuv</a></li>
</ul>

<p>
libuv is focused primarily on <a href="https://aantron.github.io/luv/basics.html#event-loops">event-driven programming</a>, which makes it similar to Async or Lwt. However, it
does not offer a promise data type — the API is written in terms of callbacks.
</p>

<p>
libuv also supports <a href="https://aantron.github.io/luv/threads.html">multithreading</a> and <a href="https://aantron.github.io/luv/processes.html">multiprocessing</a>. In particular, libuv allows running
multiple event loops in multiple threads, which makes it a ready candidate for use with a multicore runtime.
</p>

<p>
A major advantage of libuv is that, because it is a core module of Node, it is <a href="https://github.com/libuv/libuv/blob/master/MAINTAINERS.md#readme">well-maintained</a>
and supports <a href="https://github.com/libuv/libuv/blob/master/SUPPORTED_PLATFORMS.md#readme">many platforms</a>. Luv inherits these properties.
</p>

<p>
Luv uses <a href="https://github.com/ocamllabs/ocaml-ctypes">ctypes</a> to greatly minimize the amount of C code in the repo. A thorough <a href="https://github.com/aantron/luv/tree/master/test">test suite</a> checks
return values, I/O effects, and interaction with the OCaml garbage collector and threading runtime. Luv vendors libuv
to avoid version conflicts, and, when you install Luv, it automatically builds its internal libuv.
</p>

<p>
One of the main goals of Luv is to be easy to integrate into larger projects. For example, there may be an
experimental version of Lwt based on it. To that end, Luv is as unopinionated as possible. It sticks closely to the
libuv API, making no unnecessary design decisions, and deviating only where changes are necessary to integrate with
OCaml, or where libuv has an awkward API due to the limitations of C.
</p>

<p>
And with all that&#x2026; Happy systems programming :)
</p>
</div>
</div>
</div>




<div id="outline-container-orgadb432b" class="outline-2">
<h2 id="3">Musings on extended pattern-matching syntaxes</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/musings-on-extended-pattern-matching-syntaxes/3600/57">https://discuss.ocaml.org/t/musings-on-extended-pattern-matching-syntaxes/3600/57</a>
</p>
</div>

<div id="outline-container-orgd36ef3c" class="outline-3">
<h3 id="orgd36ef3c">Continuing this old thread, Alexander Bashkirov announced</h3>
<div class="outline-text-3" id="text-orgd36ef3c">
<p>
We reviewed this thread quite carefully along with features of other languages and summed up the results
<a href="https://github.com/bash-spbu/ways-of-pattern-matching-extending-overview">here</a>.
</p>

<p>
We also started an <a href="https://github.com/ocaml/RFCs/pull/12">active patterns RFC discussion</a>.
</p>
</div>
</div>
</div>




<div id="outline-container-orgf07c298" class="outline-2">
<h2 id="orgf07c298">Old CWN</h2>
<div class="outline-text-2" id="text-orgf07c298">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
