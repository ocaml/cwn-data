<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-10-22 Tue 14:38 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2024.10.15.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2024.10.29.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of October 15 to 22, 2024.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">opam 2.3.0~beta1</a></li>
<li><a href="#2">Dune dev meeting</a></li>
<li><a href="#3">Wildcard expansion on Windows</a></li>
<li><a href="#4">OCamlformat and GitHub actions</a></li>
<li><a href="#5">New vs. Old OCaml Academic Users Page Survey</a></li>
<li><a href="#6">New vs. Old OCaml Industrial Users Page</a></li>
<li><a href="#7">Eliom 11 and Ocsigen Start 7</a></li>
<li><a href="#8">Other OCaml News</a></li>
<li><a href="#orgfec4e49">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">opam 2.3.0~beta1</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-2-3-0-beta1/15450/1">https://discuss.ocaml.org/t/ann-opam-2-3-0-beta1/15450/1</a>
</p>
</div>

<div id="outline-container-orgec4c3e6" class="outline-3">
<h3 id="orgec4c3e6">Kate announced</h3>
<div class="outline-text-3" id="text-orgec4c3e6">
<p>
We're happy to announce the first beta release of opam 2.3.0.
</p>

<p>
As we're closing on the final release of opam 2.3.0, we'd be happy for people to test this beta and report any regression.
</p>
</div>

<div id="outline-container-org71778a0" class="outline-4">
<h4 id="org71778a0">What's new?</h4>
<div class="outline-text-4" id="text-org71778a0">
<p>
This release consists mostly in regression fixes compared to 2.3.0~alpha1:
</p>

<ul class="org-ul">
<li>Fix a regression where pinning a local source repository containing initialized git submodules would cause a failure when fetching the package. (<a href="https://github.com/ocaml/opam/issues/5809">#5809</a>)</li>
<li>Fix a regression which would make opam crash on platforms such as OpenBSD. (<a href="https://github.com/ocaml/opam/issues/6215">#6215</a>)</li>
<li>Fix the internal cache of installed packages, which was storing the wrong version of the opam file after a build failure. (<a href="https://github.com/ocaml/opam/pull/6213">#6213</a>)</li>
<li>Fix a regression in lint W59 with local urls that are not archives. (<a href="https://github.com/ocaml/opam/issues/6218">#6218</a>)</li>
</ul>

<p>
A couple of other improvements were made and bugs were fixed.
:open_book: You can read our <a href="https://opam.ocaml.org/blog/opam-2-3-0-beta1/">blog post</a> for more information about these changes and more, and for even more details you can take a look at the <a href="https://github.com/ocaml/opam/releases/tag/2.3.0-beta1">release note</a> or the <a href="https://github.com/ocaml/opam/blob/2.3.0-beta1/CHANGES">changelog</a>.
</p>
</div>
</div>

<div id="outline-container-orgb8f54c7" class="outline-4">
<h4 id="orgb8f54c7">Try it!</h4>
<div class="outline-text-4" id="text-orgb8f54c7">
<p>
The upgrade instructions are pretty much the same:
</p>

<p>
For Unix systems
</p>
<pre class="example" id="orgdf82ff0">
bash -c "sh &lt;(curl -fsSL https://opam.ocaml.org/install.sh) --version 2.3.0~beta1"
</pre>
<p>
or from PowerShell for Windows systems
</p>
<pre class="example" id="org65ef1fa">
Invoke-Expression "&amp; { $(Invoke-RestMethod https://opam.ocaml.org/install.ps1) } -Version 2.3.0~beta1"
</pre>

<p>
Please report any issues to <a href="https://github.com/ocaml/opam/issues">the bug-tracker</a>.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Dune dev meeting</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-dev-meeting/14994/14">https://discuss.ocaml.org/t/ann-dune-dev-meeting/14994/14</a>
</p>
</div>

<div id="outline-container-orgb1ba689" class="outline-3">
<h3 id="orgb1ba689">Steve Sherratt announced</h3>
<div class="outline-text-3" id="text-orgb1ba689">
<p>
Notes from today's dune-dev meeting are <a href="https://github.com/ocaml/dune/wiki/dev-meeting-2024-10-16">here</a>
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Wildcard expansion on Windows</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/wildcard-expansion-on-windows/15461/1">https://discuss.ocaml.org/t/wildcard-expansion-on-windows/15461/1</a>
</p>
</div>

<div id="outline-container-orge6ba7c6" class="outline-3">
<h3 id="orge6ba7c6">Benjamin Sigonneau announced</h3>
<div class="outline-text-3" id="text-orge6ba7c6">
<p>
While implementing a small CLI tool, I ran into a somehow undocumented feature of the Ocaml compiler: it automatically expands wildcards before doing anything else. Which proved to be a problem.
</p>

<p>
This post serves three different goals:
</p>

<ul class="org-ul">
<li>give some visibility, in case someone else run into this issue in the future</li>
<li>expose a possible workaround</li>
<li>ask the community if there is a better way™ to solve this</li>
</ul>
</div>

<div id="outline-container-org935c860" class="outline-4">
<h4 id="org935c860">Context</h4>
<div class="outline-text-4" id="text-org935c860">
<p>
My tool uses <code>Cmdliner</code> for CLI args processing, and needs to handle basic wildcard processing for one of its options, eg. it should handle <code>mytool.exe -x *.ml</code>.
</p>

<p>
This would get expanded to <code>mytool.exe -x a.ml b.ml c.ml</code> which Cmdliner cannot handle. Under any common Unix shell, this is not a problem: we just have to escape the star character with eg. <code>mytool.exe -x \*.ml</code>, have mytool handle the expansion itself and we're all set. So far, so good.
</p>

<p>
Then came Windows. Whatever I would do, it seemed like there was no way of preventing that wildcard to be expanded. I learned that on Windows, the calling program was responsible for dealing with wildcards, not the shell. After some digging, the root cause of this behaviour was found in the ocaml runtime itself, in <a href="https://github.com/ocaml/ocaml/blob/a07799fceac25e2b2b81f3d2bab64d87ad5cec8d/runtime/main.c#L32"><code>runtime/main.c</code></a>:
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #444fcf;">int</span> <span style="color: #a7601f;">main_os</span>(<span style="color: #444fcf;">int</span> <span style="color: #007a9f;">argc</span>, <span style="color: #444fcf;">char_os</span> **<span style="color: #007a9f;">argv</span>)
{
<span style="color: #9f0d0f;">#ifdef</span> _WIN32
  <span style="color: #8f6f4a; font-style: italic;">/* </span><span style="color: #8f6f4a; font-style: italic;">Expand wildcards and diversions in command line</span><span style="color: #8f6f4a; font-style: italic;"> */</span>
  caml_expand_command_line(&amp;argc, &amp;argv);
<span style="color: #9f0d0f;">#endif</span>

<span style="color: #8f6f4a; font-style: italic;">/* </span><span style="color: #8f6f4a; font-style: italic;">[...]</span><span style="color: #8f6f4a; font-style: italic;"> */</span>
}
</pre>
</div>

<p>
After a bit of history digging, it turns out this behaviour dates back from the very early stages of the Ocaml compiler, see <a href="https://github.com/ocaml/ocaml/commit/4426de9a130b4abef0f417b3a396a3aed70528c2">this commit</a> by Xavier Leroy from&#x2026; 1996!
</p>
</div>
</div>

<div id="outline-container-orgadcf58d" class="outline-4">
<h4 id="orgadcf58d">Workaround</h4>
<div class="outline-text-4" id="text-orgadcf58d">
<p>
The <code>runtime/main.c</code> file gives a hint on how to work around this:
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #8f6f4a; font-style: italic;">/* </span><span style="color: #8f6f4a; font-style: italic;">Main entry point (can be overridden by a user-provided main()</span>
<span style="color: #8f6f4a; font-style: italic;">   function that calls caml_main() later).</span><span style="color: #8f6f4a; font-style: italic;"> */</span>
</pre>
</div>

<p>
So the most elegant workaround I could find was to create a copy of the <code>main.c</code> file inside the source tree of mytool and comment out the call to <code>caml_expand_command_line</code>. Then it was a matter of compiling and linking everything altogether. I use <code>dune</code> to compile <code>mytool.exe</code>, and after a lot of trial-and-error, I found out it could handle this very easily with the <code>foreign_stubs</code> stanza:
</p>

<pre class="example" id="orga5ba67d">
(executable
 (name mytool)
 (foreign_stubs (language c) (names main))
 ; ...
)
</pre>
</div>
</div>

<div id="outline-container-orgcb7d1fa" class="outline-4">
<h4 id="orgcb7d1fa">Minimal working example</h4>
<div class="outline-text-4" id="text-orgcb7d1fa">
<p>
I opened a Github repository containing a minimal project featuring a custom entry point so that command-line arguments expansion does not happen on Windows.
</p>

<p>
See: <a href="https://github.com/benji-sb/ocaml-windows-argv">https://github.com/benji-sb/ocaml-windows-argv</a>
</p>
</div>
</div>

<div id="outline-container-org60a7592" class="outline-4">
<h4 id="org60a7592">Open Questions</h4>
<div class="outline-text-4" id="text-org60a7592">
<ul class="org-ul">
<li>The root cause of this issue was introduced almost 30 years ago. How come no one on the Internets seem to have run into a similar issue?</li>
<li>Why was this behaviour introduced in the first place? I suspect it may have make it easier to setup a Windows toolchain back then, but that's just wild speculation.</li>
<li>Is this behaviour still needed, or could we get rid of it?</li>
<li>Should this be more wildly documented, and if so, where? The ocaml compiler docs and the dune docs could probably benefit from a small paragraph on how to override the default entry point.</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">OCamlformat and GitHub actions</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocamlformat-and-github-actions/15464/1">https://discuss.ocaml.org/t/ocamlformat-and-github-actions/15464/1</a>
</p>
</div>

<div id="outline-container-org9f306e6" class="outline-3">
<h3 id="org9f306e6">Hannes Mehnert announced</h3>
<div class="outline-text-3" id="text-org9f306e6">
<p>
a small announcement for those using OCamlformat in their projects: if you find the burden on external contributors very high, and always express "please run ocamlformat on your PR" &#x2013; we've been in the same boat.
</p>

<p>
We developed a GitHub action which automatically runs OCamlformat and pushes that on the PR. No need for contributors to remember running OCamlformat, no need for "OCaml-CI" to fail since ocamlformat run diverges.
</p>

<p>
If you're interested, take a look at <a href="https://github.com/robur-coop/mollymawk/blob/main/.github/workflows/format.yml">https://github.com/robur-coop/mollymawk/blob/main/.github/workflows/format.yml</a> &#x2013; please note that we use <code>find . -name \*ml -maxdepth 1</code> &#x2013; depending on your project you may be able to run <code>dune bu @fmt --auto</code> (or need a slightly different <code>find</code> to look deeper or also for mli files).
</p>

<p>
Happy to share this action which turned out to be tremendously useful for some of our projects.
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">New vs. Old OCaml Academic Users Page Survey</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/new-vs-old-ocaml-academic-users-page-survey/15484/1">https://discuss.ocaml.org/t/new-vs-old-ocaml-academic-users-page-survey/15484/1</a>
</p>
</div>

<div id="outline-container-org7679383" class="outline-3">
<h3 id="org7679383">Claire Vandenberghe announced</h3>
<div class="outline-text-3" id="text-org7679383">
<p>
We've recently <b>redesigned the OCaml Academic Users page</b> and would love to <b>get your feedback</b> to ensure it’s as helpful as possible. You can view both versions here:
</p>

<ul class="org-ul">
<li>New page:<a href="https://ocaml.org/academic-users"> ocaml.org/academic-users</a></li>
<li>Old page:<a href="https://staging.ocaml.org/academic-users"> staging.ocaml.org/academic-users</a></li>
</ul>

<p>
As a teacher, student expert or beginner developer using OCaml, we’d greatly appreciate your insights! Participate in the survey here: <a href="https://survey">https://docs.google.com/forms/d/e/1FAIpQLSfc9qPR16deJ6VeVmXGXPVO4e3wZ9ZVIYiWrS4f1RZsqcXxwQ/viewform?usp=sf_link</a>  or we can discuss this topic below :)
</p>

<p>
Do you find the new page more useful and relevant for your academic needs compared to the old one? If so, why?
</p>

<p>
Is there any information missing or anything you’d suggest improving on the new page?
</p>

<p>
Your feedback is incredibly valuable to us as we work to improve the experience for the OCaml community.
</p>

<p>
Thank you in advance!
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">New vs. Old OCaml Industrial Users Page</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/new-vs-old-ocaml-industrial-users-page/15485/1">https://discuss.ocaml.org/t/new-vs-old-ocaml-industrial-users-page/15485/1</a>
</p>
</div>

<div id="outline-container-org361f5ef" class="outline-3">
<h3 id="org361f5ef">Claire Vandenberghe announced</h3>
<div class="outline-text-3" id="text-org361f5ef">
<p>
We've recently redesigned the <b>OCaml Industrial Users pages</b> and would love to get <b>your feedback</b> to ensure it’s as helpful as possible. You can view both versions here:
</p>

<ul class="org-ul">
<li>New: <a href="https://ocaml.org/industrial-users">https://ocaml.org/industrial-users</a></li>
<li>Old: <a href="https://staging.ocaml.org/industrial-users">https://staging.ocaml.org/industrial-users</a></li>
</ul>

<p>
As an expert or beginner developer using OCaml, we’d greatly appreciate your insights! You can also participate to the survey here: <a href="https://forms.gle/C7czFt36m7bx4fLt8">https://forms.gle/C7czFt36m7bx4fLt8</a> or we can discuss this topic below :)
</p>

<p>
Do you find the new page more useful and relevant for industrial needs compared to the old one? If so, why?
</p>

<p>
Is there any information missing or anything you’d suggest improving on the new page?
</p>

<p>
Your feedback is incredibly valuable to us as we work to improve the experience for the OCaml community.
</p>

<p>
Thank you in advance!
</p>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">Eliom 11 and Ocsigen Start 7</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-eliom-11-and-ocsigen-start-7/15487/1">https://discuss.ocaml.org/t/ann-eliom-11-and-ocsigen-start-7/15487/1</a>
</p>
</div>

<div id="outline-container-org5deda24" class="outline-3">
<h3 id="org5deda24">Vincent Balat announced</h3>
<div class="outline-text-3" id="text-org5deda24">
<p>
Eliom 11 and Ocsigen Start 7 have been released a few weeks ago.
These versions follow the recent release of Ocsigen Server 6 and leverage its new configuration API to make it easier to use it as a library, without a configuration file.
</p>

<p>
Here is an example of a simple OCaml app generating a Web page from server side (and serving static pages from directory <code>"local/var/www/mysite"</code>):
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a7601f;">f</span> <span style="color: #007a9f;">_</span> () =
  <span style="color: #444fcf;">Lwt.</span>return
    <span style="color: #444fcf;">Eliom_content.Html.F.</span>(html (head (title (txt <span style="color: #ca3400;">""</span>)) <span style="color: #242521; background-color: #fcf7ef;">[]</span>)
                               (body [h1 [txt <span style="color: #ca3400;">"Hello"</span>]]))

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">myservice</span> =
  <span style="color: #444fcf;">Eliom_service.</span>create
    <span style="color: #00824f;">~path</span>:(<span style="color: #444fcf;">Eliom_service.</span><span style="color: #242521; background-color: #fcf7ef;">Path</span> <span style="color: #242521; background-color: #fcf7ef;">[]</span>)
    <span style="color: #00824f;">~meth</span>:(<span style="color: #444fcf;">Eliom_service.</span><span style="color: #242521; background-color: #fcf7ef;">Get</span> <span style="color: #444fcf;">Eliom_parameter.</span>any)
    ()

<span style="color: #000000; font-weight: bold;">let</span> () = <span style="color: #444fcf;">Eliom_registration.Html.</span>register <span style="color: #00824f;">~service</span>:myservice f

<span style="color: #000000; font-weight: bold;">let</span> () = <span style="color: #444fcf;">Ocsigen_server.</span>start 
    [ <span style="color: #444fcf;">Ocsigen_server.</span>host
       [ <span style="color: #444fcf;">Staticmod.</span>run <span style="color: #00824f;">~dir</span>:<span style="color: #ca3400;">"local/var/www/mysite"</span> ()
       ; <span style="color: #444fcf;">Eliom.</span>run () ] ]
</pre>
</div>

<p>
To use it, just install Eliom and your favorite version of Ocipersist, then create a new Dune project:
</p>
<pre class="example" id="orga713130">
opam install ocsipersist-sqlite-config eliom
dune init project mysite
</pre>

<p>
Put the code above in file <code>bin/mysite.ml</code>
</p>

<p>
Update file <code>bin/dune</code>:
</p>
<pre class="example" id="orgf6bee31">
(executable
 (public_name mysite)
 (name main)
 (libraries
  ocsigenserver
  ocsigenserver.ext.staticmod
  ocsipersist-sqlite
  eliom.server))
</pre>

<p>
Build and execute:
</p>
<pre class="example" id="orgf27d3d8">
dune exec mysite
</pre>

<p>
Open URL <code>http://localhost:8080/</code>.
</p>


<p>
Ocsigen Start's application template has been updated to support both the use as an executable or as a library (lynked dynamically from the server's config file).
</p>

<p>
Links:
</p>
<ul class="org-ul">
<li><a href="https://ocsigen.org/">Ocsigen</a></li>
<li><a href="https://github.com/ocsigen">Github</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-8" class="outline-2">
<h2 id="8">Other OCaml News</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org35a484f" class="outline-3">
<h3 id="org35a484f">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-org35a484f">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="https://blog.janestreet.com/developer-education-at-jane-street-index/">Developer education at Jane Street</a></li>
<li><a href="https://tarides.com/blog/2024-10-16-dune-developer-preview-installing-the-ocaml-compiler-with-dune-package-management">Dune Developer Preview: Installing The OCaml Compiler With Dune Package Management</a></li>
<li><a href="https://ocaml.org/events">Upcoming OCaml Events</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-orgfec4e49" class="outline-2">
<h2 id="orgfec4e49">Old CWN</h2>
<div class="outline-text-2" id="text-orgfec4e49">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe to the <a href="https://sympa.inria.fr/sympa/info/caml-list">caml-list</a>.
</p>

<div class="authorname" id="org3959538">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
