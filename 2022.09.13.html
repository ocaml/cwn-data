<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-09-13 Tue 10:34 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2022.09.06.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2022.09.20.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of September 06 to 13, 2022.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Caqti 1.9.0 and Plans for 2.0.0</a></li>
<li><a href="#2">Outreachy summer &rsquo;22 closing commemoration session on 23rd Sept</a></li>
<li><a href="#3">MirageOS for B2B SaaS</a></li>
<li><a href="#4">Tuareg and Caml modes for Emacs: what are the differences?</a></li>
<li><a href="#5">Engineer position at Imandra (Austin TX/UK)</a></li>
<li><a href="#6">Acme plumbing rules for OCaml</a></li>
<li><a href="#7">Other OCaml News</a></li>
<li><a href="#org09bb814">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Caqti 1.9.0 and Plans for 2.0.0</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-caqti-1-9-0-and-plans-for-2-0-0/10448/1">https://discuss.ocaml.org/t/ann-caqti-1-9-0-and-plans-for-2-0-0/10448/1</a>
</p>
</div>

<div id="outline-container-org0420b36" class="outline-3">
<h3 id="org0420b36">Petter A. Urkedal announced</h3>
<div class="outline-text-3" id="text-org0420b36">
<p>
First I would like to announce the 1.9.0 minor release, see the release notes below for details.
</p>

<p>
There is also ongoing work in the <a href="https://github.com/paurkedal/ocaml-caqti/tree/caqti2">caqti2 branch</a> targeted for
the next major release.  If someone have an opinion on directions, we can discuss it here, or in the issue tracker
(<a href="https://github.com/paurkedal/ocaml-caqti/issues/90">meta-issue</a>), see my brief notes below.
</p>

<p>
I will attend parts of the ICFP 2022 virtually next week so there may be time to discuss over audio.
</p>
</div>

<div id="outline-container-org21d9c18" class="outline-4">
<h4 id="org21d9c18">Release Notes for 1.9.0</h4>
<div class="outline-text-4" id="text-org21d9c18">
<p>
New features:
</p>

<ul class="org-ul">
<li>Allow unquoted semicolons in query strings in the new API.  There are
corner cases where it is needed, as reported in issue #87, and a parser
which rejects semicolons are still available for loading schema files
statement by statement.</li>

<li>Add support for MySQL and MariaDB configuration files, as a solution to
issue #86.</li>

<li>Add a limit to the number of times a database connection is reused when
pooling connections (#94).  Thanks to Peter Mondlock for investigating
resource usage server side motivating this addition.</li>

<li>Provide access to the raw SQLite3 connection handle for the purpose of
defining custom functions (#56).</li>
</ul>

<p>
Fixes:
</p>

<ul class="org-ul">
<li>Add missing dune dependency on unix (GPR#85 by David Allsopp).</li>

<li>Documentation fixes (GPR#82, GPR#83, GPR#84 by Reynir Bj√∂rnsson,
GPR#88 by Jonathan Duarte, and GPR#92 by Jim Tittsler).</li>
</ul>

<p>
Deprecations:
</p>

<ul class="org-ul">
<li><code>Caqti_type.field</code> was deprecated in favour of <code>Caqti_type.Field.t</code>.</li>
</ul>

<p>
Other:
</p>

<ul class="org-ul">
<li>Replace deprecated core_kernel dependency with core.</li>
</ul>
</div>
</div>

<div id="outline-container-org2ff78b6" class="outline-4">
<h4 id="org2ff78b6">Notes on 2.0.0 Development</h4>
<div class="outline-text-4" id="text-org2ff78b6">
<p>
The main addition is pgx and mirage support.  It is already functional, but not very useful for production, since it
lacks TLS.  The trick here is that PostgreSQL uses STARTTLS, so we can&rsquo;t use conduit-lwt as-is.
</p>

<p>
Another thing in progress, but unpublished, is <a href="https://github.com/paurkedal/ocaml-caqti/issues/89">per-connection configuration</a>.  Up till now, configuration has only been
possible through the connection URL or behind-the-scene via C libraries (now also for MariaDB).  However, this will
no longer be practical for delivering CA certificates to pgx.  Two design issues which you may have an opinion
about:
</p>

<ul class="org-ul">
<li>Driver specific options can be defined in the <code>caqti</code> package or in <code>caqti-driver-*</code> packages. In the former case, the configuration can be manipulated without depending on specific drivers, but the downside is that we will pull in dependencies on <code>x509</code>, <code>domain-name</code>, <code>ipaddr</code> and possibly <code>tls</code> and <code>sexplib0</code>.</li>
<li>My current sketch provides sexp-serialisation, a choice mainly motivated by the availability of such serialization for client configuration of <code>tls</code>, but I hope to find a more generic solution which allows easy embedding of Caqti configuration in application configuration independent of which format is used.</li>
</ul>

<p>
An example of how an sexp-formatted configuration might look like:
</p>
<pre class="example" id="org2ca5369">
(connection
 (pool
  (max-use-count 20)
  (max-idle-size 10))
 (driver postgresql)
 (endpoints
  (inet pg1.example.org)
  (inet pg2.example.org))
 (target-session-attrs read-write))
</pre>
<p>
where the <code>(pool ...)</code> clause is driver-indepnedent and the <code>(driver ...)</code> clause determines which DB-specific
options are valid. In the current draft, order does not matter despite this dependency.
</p>

<p>
(I could also mention plans of wrapping modules, but this will be done first as a forward-compatible module in
parallel to the current modules preferably at the beginning of a major release cycle.  The reason I haven&rsquo;t written
that main <code>Caqti</code> module yet, is that I would like to take the opportunity to tidy up the namespace to make it
easier for newcomers to discover the main entry points.)
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Outreachy summer &rsquo;22 closing commemoration session on 23rd Sept</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/outreachy-summer-22-closing-commemoration-session-on-23rd-sept/10450/1">https://discuss.ocaml.org/t/outreachy-summer-22-closing-commemoration-session-on-23rd-sept/10450/1</a>
</p>
</div>

<div id="outline-container-org8d35dd9" class="outline-3">
<h3 id="org8d35dd9">Moazzam Moriani announced</h3>
<div class="outline-text-3" id="text-org8d35dd9">
<p>
I, along with Jay, were the two <a href="https://www.outreachy.org/">Outreachy</a> interns working with the OCaml :camel:
community  this summer. I worked on <a href="https://github.com/ocaml-bench/sandmark">Multicore Applications</a> and Jay on
<a href="https://github.com/geocaml/ocaml-topojson">TopoJSON</a>. Our internship, of course, was only made possible because
@sudha and @patricoferris generously chose to volunteer to mentor us&#x2013;as our respective mentors&#x2013;throughout the
summer. We are grateful to the both of them :heart:.
</p>

<p>
Our three-month long Outreachy internship just ended relatively recently and, personally, I have really enjoyed
working on my project and learning OCaml. So much so that Jay and I would like to share our experiences with the
rest of the community. :sparkles:
</p>

<p>
To carry forward a tradition established by the <a href="https://discuss.ocaml.org/t/friday-03-04-intern-presentations-open-attendance/9429">previous Outreachy
cohort</a>, we will host a virtual
session that will consist of two short presentations from the both of us followed by a Q&amp;A. The session will be on
Friday 23rd September 2-3pm CET.
</p>

<p>
It is open to whoever wishes to join. A recording will be shared later online as well.
</p>

<p>
We hope you will join us! :raised_hands:
</p>
</div>
</div>


<div id="outline-container-org7c8842b" class="outline-3">
<h3 id="org7c8842b">Marcus Rohrmoser asked and Moazzam Moriani replied</h3>
<div class="outline-text-3" id="text-org7c8842b">
<blockquote>
<p>
I suppose you mean CEST i.e. 2022-09-23T14:00:00+02:00/PT1H
</p>
</blockquote>

<p>
Yes I do. Thank you for pointing it out.
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">MirageOS for B2B SaaS</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/mirageos-for-b2b-saas/10454/1">https://discuss.ocaml.org/t/mirageos-for-b2b-saas/10454/1</a>
</p>
</div>

<div id="outline-container-org47d959e" class="outline-3">
<h3 id="org47d959e">Volodymyr Melnyk asked</h3>
<div class="outline-text-3" id="text-org47d959e">
<p>
I have an idea to build a SaaS for corporate blogging (like Medium, but for companies) and I want to try MirageOS as
a total platform for services. I have no production experience with OCaml (only Golang, JS, Ruby) and have no
experience with MirageOS and unikernels (only Docker, Linux, and a little bit k8s), but I&rsquo;m very interested in both.
Could you please help me to clarify possible issues with such an approach?
</p>

<p>
Also I&rsquo;m interested about a hosting for MirageOS services. I don&rsquo;t like containers and k8s stuff and I prefer
dedicated and virtual servers instead of cloud stuff because I have no resources to pay up to 5x more for hosting.
</p>

<p>
Thank you for your help!
</p>
</div>
</div>


<div id="outline-container-org3544f85" class="outline-3">
<h3 id="org3544f85">Calascibetta Romain replied</h3>
<div class="outline-text-3" id="text-org3544f85">
<p>
Thank you for your interest in MirageOS. MirageOS is first and foremost a framework for creating an application
(such as a blog) for several targets. One of these targets is <a href="https://github.com/Solo5/solo5/">Solo5</a> which allows
to create an entire system which includes everything necessary for OCaml (its runtime). Thus, one can deploy a
MirageOS application on:
</p>
<ul class="org-ul">
<li>KVM (with the target <code>hvt</code>)</li>
<li><a href="https://xenproject.org/">Xen</a></li>
<li>or produce a simple executable taking advantage of <a href="https://code.google.com/archive/p/seccompsandbox/wikis/overview.wiki">seccomp</a> (and thus finely controlling access to the executable).</li>
<li>we can also mention the experimental target for <a href="https://github.com/dinosaure/gilbraltar/">Raspberry Pi 4</a></li>
</ul>

<p>
The objective of MirageOS is to make the choice of targets transparent to the application. This means that for a
given application, deploying for KVM or Xen should not be an upstream choice (which would govern the development of
the application) but the last of the choices which can, of course, be left to third party users.
</p>

<p>
This reverses the development logic of an application thanks to abstraction mechanisms (specific to OCaml) (the
<a href="https://ocaml.org/docs/functors">functors</a>) that allow to get rid of any specialisation to a given system (Solo5,
Unix, Raspberry Pi, etc.).
</p>

<p>
This is of course the theory and in practice, it works quite well :) .
</p>

<p>
To take the example of the blog, you can see <a href="https://hannes.nqsb.io/">Hannes&rsquo; blog</a> or <a href="https://blog.osau.re">mine</a>
which runs on MirageOS (KVM). The latter have a similar architecture: a unikernel managing TLS certificates and
redirecting HTTP connections to unikernels on a local network (<a href="https://github.com/roburio/tlstunnel">tlstunnel</a> or
<a href="https://github.com/dinosaure/contruno">contruno</a>) and a unikernel (<a href="https://github.com/roburio/unipi">unipi</a>) that
only transmits what appears in a Git repository via the HTTP protocol (http/1.1 and h2).
</p>

<p>
Deployment depends of course on what you have. Regarding KVM, you can follow the tutorials
<a href="https://robur.coop/Projects/Reproducible_builds">here</a> (quite general) and
<a href="https://blog.osau.re/articles/blog_requiem.html">there</a>. You can deploy your unikernels on Google Cloud with this
(probably a bit old) <a href="https://github.com/aantron/dream/tree/master/example/w-mirage">tutorial</a>. Finally, a
deployment with seccomp is possible, it is a simple executable.
</p>

<p>
Of course, most of these unikernels are already available for download <a href="https://builds.robur.coop/">here</a> thanks to
the excellent work of <a href="https://robur.io/">robur.io</a>. It is ensured that the generated image is reproducible
regardless of the context.
</p>

<p>
There is of course a whole series of unikernels made by the community that you can mainly find on GitHub. We can
talk about several services like <a href="https://github.com/roburio/dns-primary-git">DNS</a> or
<a href="https://mirage.io/blog/2022-04-01-Mr-MIME">emails</a>.
</p>

<p>
I would like to specify that all this is still experimental. We are gradually reaching the stage where our
unikernels are used in production domains, but it still requires a lot of work and a lot of skills for such a small
team :) . Of course, we are open to everyone&rsquo;s participation and we are especially here to help newcomers.
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Tuareg and Caml modes for Emacs: what are the differences?</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/tuareg-and-caml-modes-for-emacs-what-are-the-differences/10285/12">https://discuss.ocaml.org/t/tuareg-and-caml-modes-for-emacs-what-are-the-differences/10285/12</a>
</p>
</div>

<div id="outline-container-org3d5c9e4" class="outline-3">
<h3 id="org3d5c9e4">Deep in this thread, Tim McGilchrist announced</h3>
<div class="outline-text-3" id="text-org3d5c9e4">
<p>
I wrote up a longer form version of my setup at <a href="https://lambdafoo.com/posts/2022-09-07-ocaml-with-emacs-2022.html">https://lambdafoo.com/posts/2022-09-07-ocaml-with-emacs-2022.html</a>
There are still some bits I am not happy with but I have been using it daily.
Also @bbatsov wrote his version at <a href="https://batsov.com/articles/2022/08/23/setting-up-emacs-for-ocaml-development/">https://batsov.com/articles/2022/08/23/setting-up-emacs-for-ocaml-development/</a>
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">Engineer position at Imandra (Austin TX/UK)</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/engineer-position-at-imandra-austin-tx-uk/10465/1">https://discuss.ocaml.org/t/engineer-position-at-imandra-austin-tx-uk/10465/1</a>
</p>
</div>

<div id="outline-container-org48f1339" class="outline-3">
<h3 id="org48f1339">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-org48f1339">
<p>
<a href="https://imandra.ai/">Imandra</a> is looking for a full time engineer in the UK or in Austin, Texas.
</p>

<p>
The job offers can be found <a href="https://apply.workable.com/imandra/">here</a>.Imandra is an AI startup developing a
cloud-native automated reasoning engine for analysis of algorithms and data. Whether you&rsquo;re writing mission-critical
code or need to understand the countless complex decisions that a system may make, use Imandra to ensure the
algorithms you create are safe, explainable and fair. OCaml is the main language used at Imandra.
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">Acme plumbing rules for OCaml</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/acme-plumbing-rules-for-ocaml/10467/1">https://discuss.ocaml.org/t/acme-plumbing-rules-for-ocaml/10467/1</a>
</p>
</div>

<div id="outline-container-orgdd444bb" class="outline-3">
<h3 id="orgdd444bb">David A. Arroyo announced</h3>
<div class="outline-text-3" id="text-orgdd444bb">
<p>
I am sure that the intersection of OCaml users and <a href="https://acme.cat-v.org/">Acme</a> users is small, but I have reason
to believe it is a non-zero set :) . For those of you using this spartan editor, here are some plumbing rules that I
use that allow me to right-click on error messages returned by the OCaml compilers, and jump to the referenced
location in acme:
</p>

<pre class="example" id="org3374e94">
# example: in file "foo/bar.ml", line 155, characters 30-62
type	is	text
data	matches	'.*[Ff]ile "([^"]+)", line ([0-9]+), characters ([0-9]+)-([0-9]+).*'$nl'?'
arg	isfile	$1
data	set	$file
attr	add	addr=$2-#0+#$3,$2-#0+#$4
plumb	to	edit
plumb	client	$editor

# example: File "tests/dune", line 2, characters 7-22:
type	is	text
data	matches	'.*[Ff]ile "([^"]+)", lines ([0-9]+)-([0-9]+).*'$nl'?'
arg	isfile	$1
data	set	$file
attr	add	addr=$2,$3
plumb	to	edit
plumb	client	$editor
</pre>

<p>
It could probably be extended to search <code>~/.opam</code> so you could plumb errors in files outside of your project, but I
do not use opam, so I haven&rsquo;t needed to do it.
</p>

<p>
Here is a short demo of its use: <a href="https://youtu.be/Evl-N0oNNd0">https://youtu.be/Evl-N0oNNd0</a>
</p>

<p>
It&rsquo;s not in OCaml, but I also wrote <a href="https://github.com/droyo/acme-autoformat">https://github.com/droyo/acme-autoformat</a> and put an <code>OcamlFmt</code> script in
acme&rsquo;s $PATH like so:
</p>

<pre class="example" id="org0fedda4">
#!/bin/sh
exec /usr/local/bin/acme-autoformat -r '\.mli?$' \
	-- ocamlformat --name='{{.Basename}}' --enable-outside-detected-project -
</pre>

<p>
This calls <code>ocamlformat</code> whenever I Put an .ml[i] file. This is probably obviated by combining acme-lsp and
ocaml-lsp, but these two bits work well enough that I haven&rsquo;t felt a need to pursue it.
</p>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">Other OCaml News</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org6bfd6d2" class="outline-3">
<h3 id="org6bfd6d2">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-org6bfd6d2">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="https://tarides.com/blog/2022-09-06-tarides-sponsors-girls-can-code">Tarides Sponsors Girls Can Code</a></li>
<li><a href="https://blog.janestreet.com/graduate-research-fellowship/">Introducing the Jane Street Graduate Research Fellowship</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org09bb814" class="outline-2">
<h2 id="org09bb814">Old CWN</h2>
<div class="outline-text-2" id="text-org09bb814">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I&rsquo;ll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org642e8af">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
