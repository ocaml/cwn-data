                          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                           OCAML WEEKLY NEWS
                          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”


[Previous Week] [Up] [Next Week]

Hello

Here is the latest OCaml Weekly News, for the week of April 05 to 12,
2022.

Table of Contents
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

LexiFi is hiring!
DÃ©veloppeur principal Ã  plein temps d'Alt-Ergo chez OCamlPro
Using an external JavaScript file in js_of_ocaml
diskuvbox: small set of cross-platform CLI tools
Old CWN


[Previous Week] <https://alan.petitepomme.net/cwn/2022.04.05.html>

[Up] <https://alan.petitepomme.net/cwn/index.html>

[Next Week] <https://alan.petitepomme.net/cwn/2022.04.19.html>


LexiFi is hiring!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Archive:
  <https://discuss.ocaml.org/t/job-fulltime-internship-paris-lexifi-is-hiring/9648/1>


Alain Frisch announced
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  ğŸ“¢ [LexiFi] is hiring!

  âœ”ï¸ Software Engineer (full-time): <https://lnkd.in/evhkxTg>

  âœ”ï¸ Software Development Internship: <https://lnkd.in/gb-bdDA9>

  LexiFi is a software editor, based in Paris. We have been happily
  using OCaml ğŸª for more than 20 years in our entire software stack,
  from backend components to UI (web & native) front-end, and we
  contribute back to the OCaml community (check out our blog post :
  <https://www.lexifi.com/blog/ocaml/ocaml-open-source/>)

  Don't hesitate to contact me directly if you want to learn more about
  the positions before applying!


[LexiFi] <https://www.lexifi.com>


DÃ©veloppeur principal Ã  plein temps d'Alt-Ergo chez OCamlPro
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Archive:
  <https://discuss.ocaml.org/t/job-fulltime-paris-developpeur-principal-a-plein-temps-dalt-ergo-chez-ocamlpro/9660/1>


Fabrice Le Fessant announced
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Alt-Ergo est l'un des solveurs SMT les plus efficaces pour la
  vÃ©rification formelle de code. Il est ainsi utilisÃ© derriÃ¨re des
  ateliers tels que Why3, Frama-C et Spark. Initialement dÃ©veloppÃ© par
  Sylvain Conchon au LRI, il est aujourd'hui maintenu par OCamlPro,
  grÃ¢ce aux financements du Club Alt-Ergo (AdaCore, Trust-in-Soft,
  ThalÃ¨s, MERCE, CEA List), Ã  des contrats bilatÃ©raux d'Ã©volution et Ã 
  des projets collaboratifs.

  OCamlPro souhaite aujourd'hui recruter un dÃ©veloppeur principal Ã 
  temps plein pour Alt-Ergo, pour complÃ©ter son Ã©quipe mÃ©thodes
  formelles et accÃ©lÃ©rer l'Ã©volution d'Alt-Ergo.  Disposant d'une
  expÃ©rience dans les mÃ©thodes formelles, ses missions seront :

  â€¢ de dÃ©couvrir le projet Alt-Ergo et tous ses composants (prouveur,
    interface graphique, etc.) et d'en comprendre le fonctionnement Ã 
    travers l'exploration du code et la lecture d'articles
    scientifiques;
  â€¢ d'Ã©laborer la roadmap de maintenance Ã©volutive d'Alt-Ergo, en
    collaboration avec les membres du Club Alt-Ergo, et de proposer des
    amÃ©liorations qui pourront Ãªtre financÃ©es au travers de contrats
    bilatÃ©raux ou de projets collaboratifs;
  â€¢ de participer avec l'Ã©quipe Ã  la maintenance corrective d'Alt-Ergo
    et de fournir du support aux membres du Club Alt-Ergo;
  â€¢ de participer Ã  l'encadrement de stages et de thÃ¨ses CIFRE autour
    d'Alt-Ergo et des solveurs SMT en gÃ©nÃ©ral;
  â€¢ de suivre l'actualitÃ© des solveurs SMTs et des travaux scientifiques
    connexes, et de maintenir des collaborations avec les experts
    acadÃ©miques du domaine;

  IntÃ©grÃ© au sein de l'Ã©quipe MÃ©thodes Formelles d'OCamlPro, il
  bÃ©nÃ©ficiera de leur expÃ©rience et leur fera bÃ©nÃ©ficier de son
  expertise croissante dans l'utilisation d'Alt-Ergo. Outre la
  maintenance d'Alt-Ergo, l'Ã©quipe MÃ©thodes Formelles d'OCamlPro
  participe Ã  diverses activitÃ©s:

  â€¢ DÃ©veloppement d'outils open-source pour les mÃ©thodes formelles, tels
    que Dolmen, Matla, etc.
  â€¢ Expertises sur WhyML, TLA, Coq, et autres langages de spÃ©cification
    et de vÃ©rification;
  â€¢ Certification de logiciels pour les CritÃ¨res Communs (EAL6 et plus)
  â€¢ SpÃ©cification et vÃ©rification formelle de smart contracts (Solidity,
    etc.)

  Les bureaux d'OCamlPro sont dans le 14Ã¨me arrondissement de Paris
  (AlÃ©sia). L'entreprise est connue pour son Ã©quipe sympathique, son
  excellence technique, sa productivitÃ©, ses valeurs et son Ã©thique.

  Si ce poste vous intÃ©resse, n'hÃ©sitez pas Ã  envoyer votre CV Ã :

  contact@ocamlpro.com

  Pour plus d'informations sur OCamlPro:

  <https://www.ocamlpro.com/>

  Pour plus d'informations sur Alt-Ergo:

  <https://alt-ergo.ocamlpro.com/>

  Pour plus d'informations sur le Club Alt-Ergo:

  <https://www.ocamlpro.com/club-alt-ergo>


Using an external JavaScript file in js_of_ocaml
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Archive:
  <https://discuss.ocaml.org/t/using-an-external-javascript-file-in-js-of-ocaml/9661/1>


John Whitington asked
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  I am a beginner at both Javascript and `js_of_ocaml', so I may be
  mixing up all sorts of mistakes and misconceptions here.

  I have compiled up an existing project, my command line PDF tools,
  using `js_of_ocaml', and all is well:

  â”Œâ”€â”€â”€â”€
  â”‚ $ node cpdf.js -info hello.pdf
  â”‚ Encryption: Not encrypted
  â”‚ Permissions:
  â”‚ Linearized: false
  â”‚ Version: 1.1
  â”‚ Pages: 1
  â””â”€â”€â”€â”€

  Like magic! But I had to comment out the parts of my code which use
  external C code of course - that is zlib and some encryption
  primitives. So now I wish to bind javascript libraries for those. I am
  experimenting with a simple library of my own, first, which is given
  on the command line to `js_of_ocaml' as `foomod.js':

  â”Œâ”€â”€â”€â”€
  â”‚ foo = 42;
  â””â”€â”€â”€â”€

  I can get to this global variable easily from OCaml:

  â”Œâ”€â”€â”€â”€
  â”‚ let foo = Js.Unsafe.global##.foo
  â””â”€â”€â”€â”€

  But now I want to do things better, and I change `foomod.js' to:

  â”Œâ”€â”€â”€â”€
  â”‚ exports.foo = 42;
  â””â”€â”€â”€â”€

  How can I get to that? Giving `foomod.js' on the `js_of_ocaml' command
  line includes the contents of `foomod.js' in some way, but does not
  contain the string `foomod', so I'm not sure how to get to the
  foomod's variables and functions. How to I access them? In the node
  REPL, I can simply do:

  â”Œâ”€â”€â”€â”€
  â”‚ > foomod = require('./foomod.js');
  â”‚ { foo; 42 }
  â”‚ > foomod.foo;
  â”‚ 42
  â””â”€â”€â”€â”€

  I have read the `js_of_ocaml' help page on how to bind JS modules:

  <https://ocsigen.org/js_of_ocaml/latest/manual/bindings>

  I imagine if I could get over this hump, all the rest of the
  information I need will be there.


NicolÃ¡s Ojeda BÃ¤r replied
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Not exactly what you asked, but if you just want to provide a JS
  version of some C primitive

  â”Œâ”€â”€â”€â”€
  â”‚ external foo : unit -> int = "caml_foo"
  â””â”€â”€â”€â”€

  you can do this by writing the following in your `.js' file:

  â”Œâ”€â”€â”€â”€
  â”‚ //Provides: caml_foo
  â”‚ function caml_foo() {
  â”‚   return 42;
  â”‚ }
  â””â”€â”€â”€â”€

  Then `js_of_ocaml' will automatically replace calls to the external
  function by a call to its JS implementation.

  This is the same mechanism used by `js_of_ocaml' to implement its own
  JS version of the OCaml runtime, see eg

  <https://github.com/ocsigen/js_of_ocaml/blob/3850a67b1cb00cfd2ee4399cf1e2948062884b92/runtime/bigarray.js#L328-L335>


diskuvbox: small set of cross-platform CLI tools
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Archive:
  <https://discuss.ocaml.org/t/ann-diskuvbox-small-set-of-cross-platform-cli-tools/9663/1>


jbeckford announced
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  *TLDR*:
  â”Œâ”€â”€â”€â”€
  â”‚ $ opam update
  â”‚ $ opam install diskuvbox
  â”‚ 
  â”‚ $ diskuvbox copy-dir --mode 755 src1/ src2/ dest/
  â”‚ $ diskuvbox copy-file --mode 400 src/a dest/b
  â”‚ $ diskuvbox copy-file-into src1/a src2/b dest/
  â”‚ $ diskuvbox touch-file x/y/z
  â”‚ 
  â”‚ $ diskuvbox find-up . _build
  â”‚ Z:/source/_build
  â”‚ 
  â”‚ $ diskuvbox tree --max-depth 2 --encoding=UTF-8 .
  â”‚ .
  â”‚ â”œâ”€â”€ CHANGES.md
  â”‚ â”œâ”€â”€ README.md
  â”‚ â”œâ”€â”€ _build/
  â”‚ â”‚   â”œâ”€â”€ default/
  â”‚ â”‚   â”œâ”€â”€ install/
  â”‚ â”‚   â””â”€â”€ log
  â””â”€â”€â”€â”€

  *Problem*: When writing cram tests, Dune rules and Opam build steps,
  often we default to using GNU binaries (`/usr/bin/*') available on
  Linux (ex. `/usr/bin/cp -R'). Unfortunately these commands rarely work
  on Windows, and as a consequence Windows OCaml developers are forced
  to maintain Cygwin or MSYS2 installations to get GNU tooling.

  *Solution*: Provide some of the same functionality for Windows and
  macOS that the GNU binaries in `/usr/bin/*' do in Linux.

  `diskuvbox' is a single binary that today provides an analog for a
  very small number of binaries that I have needed in the Diskuv Windows
  OCaml distribution. It is liberally licensed under Apache v2.0. *With
  your PRs it could emulate much more!*

  `diskuvbox' has CI testing for Windows, macOS and Linux. Usage and
  help are available in the diskuvbox README:
  <https://github.com/diskuv/diskuvbox#diskuv-box>

  *`diskuvbox' also has a OCaml library, but consider the API unstable
   until version 1.0.*

  Alternatives:
  â€¢ There are some shell scripting tools like [shexp] and [feather] that
    give you POSIX pipes in OCaml-friendly syntax. I feel these
    complement Diskuv Box.
  â€¢ Dune exposes `(copy)' to copy a file in Dune rules; theoretically
    more operations could be added.

  Internally `diskuvbox' is a wrapper on the excellent [bos - Basic OS
  interaction] library.


[shexp] <https://github.com/janestreet/shexp>

[feather] <https://github.com/charlesetc/feather>

[bos - Basic OS interaction]
<https://erratique.ch/software/bos/doc/Bos/index.html>

Acknowledgements
â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œ

  The first implementations of Diskuv Box were implemented with the
  assistance of the [OCaml Software Foundation (OCSF)], a sub-foundation
  of the [INRIA Foundation].

  Two OCaml libraries ([bos] and [cmdliner]) are essential to Diskuv
  Box; these libraries were created by [Daniel BÃ¼nzli] (@dbuenzli) .


[OCaml Software Foundation (OCSF)] <http://ocaml-sf.org>

[INRIA Foundation] <https://www.inria.fr>

[bos] <https://erratique.ch/software/bos>

[cmdliner] <https://erratique.ch/software/cmdliner>

[Daniel BÃ¼nzli] <https://erratique.ch/profile>


Examples
â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œ

  The following are examples that have been condensed from the
  [diskuvbox README.md] â€¦


[diskuvbox README.md] <https://github.com/diskuv/diskuvbox#diskuv-box>

Using in Dune cram tests
â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„

  â”Œâ”€â”€â”€â”€
  â”‚ $ install -d a/b/c/d/e/f
  â”‚ $ install -d a/b2/c2/d2/e2/f2
  â”‚ $ install -d a/b2/c3/d3/e3/f3
  â”‚ $ install -d a/b2/c3/d4/e4/f4
  â”‚ $ install -d a/b2/c3/d4/e5/f5
  â”‚ $ install -d a/b2/c3/d4/e5/f6
  â”‚ $ touch a/b/x
  â”‚ $ touch a/b/c/y
  â”‚ $ touch a/b/c/d/z
  â”‚ 
  â”‚ $ diskuvbox tree a --max-depth 10 --encoding UTF-8
  â”‚ a
  â”‚ â”œâ”€â”€ b/
  â”‚ â”‚   â”œâ”€â”€ c/
  â”‚ â”‚   â”‚   â”œâ”€â”€ d/
  â”‚ â”‚   â”‚   â”‚   â”œâ”€â”€ e/
  â”‚ â”‚   â”‚   â”‚   â”‚   â””â”€â”€ f/
  â”‚ â”‚   â”‚   â”‚   â””â”€â”€ z
  â”‚ â”‚   â”‚   â””â”€â”€ y
  â”‚ â”‚   â””â”€â”€ x
  â”‚ â””â”€â”€ b2/
  â”‚     â”œâ”€â”€ c2/
  â”‚     â”‚   â””â”€â”€ d2/
  â”‚     â”‚       â””â”€â”€ e2/
  â”‚     â”‚           â””â”€â”€ f2/
  â”‚     â””â”€â”€ c3/
  â”‚         â”œâ”€â”€ d3/
  â”‚         â”‚   â””â”€â”€ e3/
  â”‚         â”‚       â””â”€â”€ f3/
  â”‚         â””â”€â”€ d4/
  â”‚             â”œâ”€â”€ e4/
  â”‚             â”‚   â””â”€â”€ f4/
  â”‚             â””â”€â”€ e5/
  â”‚                 â”œâ”€â”€ f5/
  â”‚                 â””â”€â”€ f6/
  â””â”€â”€â”€â”€


Using in Opam `build' steps
â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„

  â”Œâ”€â”€â”€â”€
  â”‚ build: [
  â”‚   ["diskuvbox" "copy-file-into" "assets/icon.png" "assets/public.gpg" "%{_:share}%"]
  â”‚ ]
  â””â”€â”€â”€â”€


Using in Dune rules
â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„

  â”Œâ”€â”€â”€â”€
  â”‚ (rule
  â”‚  (targets diskuvbox.corrected.ml diskuvbox.corrected.mli)
  â”‚  (deps
  â”‚   (:license %{project_root}/etc/license-header.txt)
  â”‚   (:conf    %{project_root}/etc/headache.conf))
  â”‚  (action
  â”‚   (progn
  â”‚    (run diskuvbox copy-file -m 644 diskuvbox.ml  diskuvbox.corrected.ml)
  â”‚    (run diskuvbox copy-file -m 644 diskuvbox.mli diskuvbox.corrected.mli)
  â”‚    (run headache -h %{license} -c %{conf} %{targets})
  â”‚    (run ocamlformat --inplace --disable-conf-files --enable-outside-detected-project %{targets}))))
  â””â”€â”€â”€â”€


Old CWN
â•â•â•â•â•â•â•

  If you happen to miss a CWN, you can [send me a message] and I'll mail
  it to you, or go take a look at [the archive] or the [RSS feed of the
  archives].

  If you also wish to receive it every week by mail, you may subscribe
  [online].

  [Alan Schmitt]


[send me a message] <mailto:alan.schmitt@polytechnique.org>

[the archive] <https://alan.petitepomme.net/cwn/>

[RSS feed of the archives] <https://alan.petitepomme.net/cwn/cwn.rss>

[online] <http://lists.idyll.org/listinfo/caml-news-weekly/>

[Alan Schmitt] <https://alan.petitepomme.net/>
