<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-08-27 Tue 10:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2024.08.20.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2024.09.03.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of August 20 to 27, 2024.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">DkML 2.1.2 and opam 2.2.0</a></li>
<li><a href="#2">Outreachy Demo Presentation</a></li>
<li><a href="#3">opam 2.2.1</a></li>
<li><a href="#4">Ppxlib dev meetings</a></li>
<li><a href="#5">First release of corosync</a></li>
<li><a href="#6">Other OCaml News</a></li>
<li><a href="#orgb723e31">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">DkML 2.1.2 and opam 2.2.0</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dkml-2-1-2-and-opam-2-2-0/15187/1">https://discuss.ocaml.org/t/ann-dkml-2-1-2-and-opam-2-2-0/15187/1</a>
</p>
</div>

<div id="outline-container-org218e782" class="outline-3">
<h3 id="org218e782">jbeckford announced</h3>
<div class="outline-text-3" id="text-org218e782">
<p>
The major focus of DkML 2.1.2 is shipping it with opam 2.2 and having <i>some</i> coexistence between DkML and opam 2.2 on Windows. You can skip this post if you don't develop on Windows.
</p>

<p>
TLDR: Upgrade with <code>winget upgrade dkml</code>. Use <code>opam-real</code> to use pure opam 2.2 but only <b>after</b> installing Visual Studio 2022 (confer: release notes); example: <code>opam-real switch create 5.2.0+msvc</code>. Use <code>dk Ml.Switch init</code> to create DkML 4.14.2 switch. DkML has better MSVC package support today, while pure opam 2.2 has latest OCaml 5 and is the standard going forward; now you choose both without compromise.
</p>

<p>
Major changes:
</p>
<ul class="org-ul">
<li>Uses opam 2.2.0. You can directly use unmodified opam 2.2 with <code>opam-real switch create 5.2.0+msvc</code>. Or continue to use <code>dk Ml.Switch init</code> (or the deprecated <code>dkml init</code>) to create a DkML 4.14.2 switch which supports more native MSVC Windows packages (for now) but does not have the latest and experimental OCaml language features.</li>
<li>Support Windows SDK 11 (10.0.22621.0) and VC 17.9 and 17.10 (14.39/4x) added to allowed list. This makes it easier to coexist with opam 2.2 which requires Visual Studio 2022, and supports latest GitLab CI with its preinstallation of Visual Studio 2022.</li>
<li>The ocaml/opam-repository tag was advanced to Aug 15, 2024.</li>
<li>You can continue to use <code>dkml.exe</code> and <code>with-dkml.exe</code> but both are deprecated. The new (unified) executable is <code>dk.exe</code>. See "Deprecated Commands" in the release notes.</li>
<li>Once every two weeks DkML news about new versions, errata, uninstalling, etc. will be shown on a webpage. It is triggered from the now deprecated <code>dkml init</code>, the replacement <code>dk Ml.Switch init</code> and the <code>with-dkml</code> proxy commands, and can be disabled with <code>dk Ml.News disable</code>. In particular, use <code>dk Ml.News</code> to show the news if you are experiencing problems with DkML.</li>
<li>The patches to the OCaml compiler are now dual-licensed with OCaml's LGPL 2.1 exception and Apache 2.0. All other source (especially the build scripts) for the DkML compiler is licensed solely with Apache 2.0. This is a follow-up to <a href="https://github.com/ocaml/ocaml/issues/13177">https://github.com/ocaml/ocaml/issues/13177</a>.</li>
<li>The uninstaller/upgrader stops <code>opam</code>, <code>dune</code> and other OCaml processes since, on Windows, in-use executables can't be deleted or updated. This feature is not foolproof yet.</li>
<li>ull release notes are at <a href="https://gitlab.com/dkml/distributions/dkml/-/releases/2.1.2">https://gitlab.com/dkml/distributions/dkml/-/releases/2.1.2</a>.</li>
</ul>

<p>
Enjoy! And thanks to OCSF for supporting Windows in the last couple of gap years.
</p>

<p>
<i>Bug reports: <a href="https://github.com/diskuv/dkml-installer-ocaml/issues">GitHub users</a> or [[<a href="https://gitlab.com/dkml/distributions/dkml">https://gitlab.com/dkml/distributions/dkml</a></i>-<i>issues][GitLab users]].</i>
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Outreachy Demo Presentation</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/outreachy-demo-presentation/15189/1">https://discuss.ocaml.org/t/outreachy-demo-presentation/15189/1</a>
</p>
</div>

<div id="outline-container-orge491048" class="outline-3">
<h3 id="orge491048">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-orge491048">
<p>
It is my pleasure to announce that next Friday [date=2024-08-30 time=13:00:00 timezone="Europe/London"] we will host the Outreachy Demo presentation. We invite all of the OCaml community and beyond to join us in celebrating the hard work of the community's three interns who have been working on:
</p>

<ul class="org-ul">
<li><a href="https://github.com/NathanReb/ocaml-api-watch">ocaml-api-watch</a>: <span class="underline">Libraries and tools to keep watch on you OCaml lib's API changes</span></li>
<li><a href="https://github.com/panglesd/diffcessible">diffcessible</a>: <span class="underline">a terminal based diff viewer with an emphasis on being accessible</span></li>
<li><a href="https://github.com/divyankachaudhari/ocaml-practice-exercises">ocaml-practice-exercises</a>: <span class="underline">Practice exercises for learning OCaml supporting GitHub Codespaces, Replit, and locally with Jupyter Notebook or directly on your machine.</span></li>
</ul>

<p>
We'll post the meeting link closer to the time. Hopefully see you there! :camel:
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">opam 2.2.1</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-2-2-1/15192/1">https://discuss.ocaml.org/t/ann-opam-2-2-1/15192/1</a>
</p>
</div>

<div id="outline-container-orga967ace" class="outline-3">
<h3 id="orga967ace">R. Boujbel announced</h3>
<div class="outline-text-3" id="text-orga967ace">
<p>
We are pleased to announce the release of opam 2.2.1.
</p>

<p>
We've fixed a couple of regressions and would like to encourage users of opam 2.2 to upgrade:
</p>

<ul class="org-ul">
<li>Fix a regression in <code>opam install --deps-only</code> where the direct dependencies were not set as root packages</li>
<li>Fix a regression when fetching git packages where the resulting git repository could lead to unexpected outputs of git commands, by disabling shallow clone by default except when fetching an opam repositories</li>
<li>Mitigate <a href="https://github.com/curl/curl/issues/13845">curl/curl#13845</a> by falling back from <code>--write-out</code> to <code>--fail</code>
if exit code 43 is returned by curl. In particular, this fixes <code>opam init</code> when run from cmd/PowerShell on Windows 11 23H2</li>
</ul>

<p>
You’ll find more information in the <a href="https://opam.ocaml.org/blog/opam-2-2-1">release blog post </a>.
</p>

<p>
To upgrade, simply run for Unix systems
</p>

<pre class="example" id="org7d3df7b">
bash -c "sh &lt;(curl -fsSL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh) --version 2.2.1"
</pre>

<p>
from PowerShell for Windows systems
</p>

<pre class="example" id="org2dee3c0">
Invoke-Expression "&amp; { $(Invoke-RestMethod https://raw.githubusercontent.com/ocaml/opam/master/shell/install.ps1) }"
</pre>
</div>
</div>


<div id="outline-container-org514b499" class="outline-3">
<h3 id="org514b499">David Allsopp then added</h3>
<div class="outline-text-3" id="text-org514b499">
<p>
Windows 11 users are strongly encouraged to upgrade to opam 2.2.1 for the mitigation for curl 8.8.0.
</p>

<p>
opam 2.2.1 is also available via <code>winget</code>, with <code>winget upgrade OCaml.opam</code>. The <code>OCaml.opam</code> winget package downloads the opam
binary from GitHub releases page (thanks to @prometheansacrifice, for contributing the original package!), so installing via winget
is functionally equivalent to using our <code>install.ps1</code> script.
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Ppxlib dev meetings</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ppxlib-dev-meetings/12441/30">https://discuss.ocaml.org/t/ppxlib-dev-meetings/12441/30</a>
</p>
</div>

<div id="outline-container-org99edfbd" class="outline-3">
<h3 id="org99edfbd">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-org99edfbd">
<p>
This week's <a href="https://github.com/ocaml-ppx/ppxlib/wiki/dev-meeting-2024-08-20">meeting notes are available online</a>.
</p>

<p>
Here's a brief TL;DR of some of the main points of discussion.
</p>

<ul class="org-ul">
<li><p>
<b>5.2 AST bump progress</b> is waiting for patches to as many ppxes as possible and for fixes to the migration bug(s) (see next bullet point). If ppx authors wish to try the new ppxlib they can add an opam-overlay which also contains patches to a few existing ppxes:
</p>
<pre class="example" id="orgb0827f3">
$ opam repo add git+https://github.com/patricoferris/opam-ppxlib-repository.git
</pre></li>
<li>Nathan has worked on <b>a better AST printer</b> inspired by the <code>ppx_tools</code> printer and the existing printing functionality of ppxlib. See <a href="https://github.com/ocaml-ppx/ppxlib/pull/517">this PR</a> for more details. This should help better <b>debug AST migration bugs</b>. It makes good use of the AST lift class.</li>
<li>With breakages happening in <code>Ast_helper</code> and <code>Ast_builder</code> it became unclear why <code>Ast_helper</code> exists at all. There's a move to <b>deprecate <code>Ast_helper</code> and promote the use of <code>Ast_builder</code> instead</b>. This should help reduce maintenance costs and API breakages.</li>
<li>We need to <b>consolidate our documentation better</b>. There should be a focus on moving as much documentation to the <code>mld</code> and <code>mli</code> files as possible.</li>
</ul>

<p>
Happy ppxing :camel: !
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">First release of corosync</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-first-release-of-corosync/15199/1">https://discuss.ocaml.org/t/ann-first-release-of-corosync/15199/1</a>
</p>
</div>

<div id="outline-container-org890875a" class="outline-3">
<h3 id="org890875a">Vincnet Liu announced</h3>
<div class="outline-text-3" id="text-org890875a">
<p>
Aug 2024 - I am happy to announce the release of <a href="https://opam.ocaml.org/packages/corosync/">https://opam.ocaml.org/packages/corosync/</a>, a binding to libcorosync. It is not (yet) a complete binding to all the APIs of libcorosync, but the bindings to the following libraries are implemented:
</p>

<ol class="org-ol">
<li>libcmap (in memory stats and config database)</li>
<li>libquorum and libvotequorum (query of quorum states)</li>
<li>libcfg (config reload, etc)</li>
<li>libcpg (closed process group, corosync's model of a cluster)</li>
</ol>

<p>
This project lives on <a href="https://github.com/Vincent-lau/ocaml-corosync">https://github.com/Vincent-lau/ocaml-corosync</a>, and feel free to contact me if you have any questions!
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">Other OCaml News</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org642f7fd" class="outline-3">
<h3 id="org642f7fd">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-org642f7fd">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="https://blog.robur.coop/articles/2024-08-21-OpenVPN-and-MirageVPN.html">MirageVPN and OpenVPN</a></li>
<li><a href="https://tarides.com/blog/2024-08-21-how-tsan-makes-ocaml-better-data-races-caught-and-fixed">How TSan Makes OCaml Better: Data Races Caught and Fixed</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-orgb723e31" class="outline-2">
<h2 id="orgb723e31">Old CWN</h2>
<div class="outline-text-2" id="text-orgb723e31">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe to the <a href="https://sympa.inria.fr/sympa/info/caml-list">caml-list</a>.
</p>

<div class="authorname" id="orgeb8c826">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
