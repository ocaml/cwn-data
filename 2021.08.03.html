<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-08-03 Tue 11:10 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2021.07.27.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2021.08.10.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of July 27 to August 03, 2021.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">OCaml Café: Wed, Aug 4 @ 7pm (U.S. Central)</a></li>
<li><a href="#2">Do You Need <code>ppxlib</code> and <code>ocaml-migrate-parsetree</code> in the Same Project?</a></li>
<li><a href="#3">first release of FASMIFRA (a molecular generator)</a></li>
<li><a href="#4">Become an Outreachy Mentor: support the growth and diversity of the OCaml community</a></li>
<li><a href="#5">Alt-Ergo 2.4.1</a></li>
<li><a href="#6">Set up OCaml v1.1.12</a></li>
<li><a href="#7">Set up OCaml 2.0.0-beta3</a></li>
<li><a href="#8">JSOO build integration with JS front-end project?</a></li>
<li><a href="#9">Multicore OCaml: July 2021</a></li>
<li><a href="#org64e8222">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">OCaml Café: Wed, Aug 4 @ 7pm (U.S. Central)</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-cafe-wed-aug-4-7pm-u-s-central/8169/2">https://discuss.ocaml.org/t/ocaml-cafe-wed-aug-4-7pm-u-s-central/8169/2</a>
</p>
</div>

<div id="outline-container-org7d6cb39" class="outline-3">
<h3 id="org7d6cb39">Michael Bacarella announced</h3>
<div class="outline-text-3" id="text-org7d6cb39">
<p>
Reminder: this is in 2 days!
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Do You Need <code>ppxlib</code> and <code>ocaml-migrate-parsetree</code> in the Same Project?</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/do-you-need-ppxlib-and-ocaml-migrate-parsetree-in-the-same-project/8207/1">https://discuss.ocaml.org/t/do-you-need-ppxlib-and-ocaml-migrate-parsetree-in-the-same-project/8207/1</a>
</p>
</div>

<div id="outline-container-orgffa5f45" class="outline-3">
<h3 id="orgffa5f45">Sonja Heinze announced</h3>
<div class="outline-text-3" id="text-orgffa5f45">
<p>
Hello PPX users (directly or transitively),
</p>

<p>
I'd like to discuss here in this thread if there's still a demand to use <code>ppxlib</code> and
<code>ocaml-migrate-parsetree.1.x</code> (<code>OMP1</code>) in the same project. Yesterday, I posted here on
discuss about the state of the PPX ecosystem and <a href="https://discuss.ocaml.org/t/an-update-on-the-state-of-the-ppx-ecosystem-and-ppxlib-s-transition/8200#part-three-porting-ppxs-to-put-an-end-to-the-split-world-situation-5">pointed out that the public PPX ecosystem
has almost completely shifted to
<code>ppxlib</code></a>.
Still, we'd like to know your perspective on this question. Have you lately run into a
problem due to the incompatibility between <code>ppxlib</code> and <code>OMP1</code>? Did you formerly have such
problems but lately all the PPXs you use have already been ported to <code>ppxlib</code>? These
questions are directed to any OCaml user, so please comment any details on this post and
point out which PPXs were involved. Thanks in advance!
</p>

<p>
The rest of this post gives some more context about why we're asking these questions now in
case folks are interested, but it's not needed for the discussion we'd like to have about the
questions stated above.
</p>
</div>

<div id="outline-container-orgc611b9e" class="outline-4">
<h4 id="orgc611b9e">Some Context</h4>
<div class="outline-text-4" id="text-orgc611b9e">
<p>
The next <code>ppxlib</code> release <code>0.23.0</code> will contain the integration of <code>Astlib</code> and therefore
will drop its dependency on <code>ocaml-migrate-parsetree</code> (<code>OMP</code>). Now we need to decide if to
mark <code>OMP1</code> as a conflict for <code>ppxlib</code> in opam or not.
</p>

<p>
To give more background, the PPX ecosystem is <a href="https://discuss.ocaml.org/t/an-update-on-the-state-of-the-ppx-ecosystem-and-ppxlib-s-transition/8200/1">transitioning to be more
up-to-date</a>.
The three contextually relevant states of this transition are:
</p>
<ol class="org-ol">
<li><code>ppxlib</code> depends on <code>OMP &lt; 2.0.0</code>. The PPX driver is in <code>OMP</code>.</li>
<li><code>ppxlib</code> depends on <code>OMP &gt;= 2.0.0</code>. The PPX driver is in <code>ppxlib</code>.</li>
<li><code>ppxlib</code> doesn't depend on <code>OMP</code> anymore. It uses its internal / the compiler library <code>Astlib</code>. The PPX driver is in <code>ppxlib</code>.</li>
</ol>

<p>
During State 1, you can use <code>ppxlib</code> PPXs and <code>OMP1</code> PPXs in the same project. During State
2, <code>ppxlib</code> opam conflicts with <code>OMP1</code>. During State 3, if we leave everything as-is, you can
install both <code>ppxlib</code> and <code>OMP1</code> for the same project. But also during State 3, you're unable
to use <code>ppxlib</code> PPXs and <code>OMP1</code> PPXs in the same library or executable because if your build
system uses a PPX driver, the PPX driver needs to be unique. Now we need to decide whether to
leave the conflict between <code>ppxlib</code> of State 3 and <code>OMP1</code> at the level of the build system or
to lift it up to the package manager by making <code>OMP1</code> an opam conflict for <code>ppxlib</code>. Both
options have their pros and cons, which have already been somewhat discussed on <a href="https://github.com/ocaml-ppx/ppxlib/pull/255">the
corresponding PR</a>. To sum them up:
</p>
</div>

<div id="outline-container-org63f8998" class="outline-5">
<h5 id="org63f8998">Option 1: not making <code>OMP1</code> a conflict for <code>ppxlib</code></h5>
<div class="outline-text-5" id="text-org63f8998">
<p>
<b>Advantage</b>: You would be able to use <code>ppxlib</code> PPXs and <code>OMP1</code> PPXs in the same project,
but they still can't be used together inside the same library or executable.
</p>

<p>
<b>Disadvantage</b>: If you use several PPXs inside the same library or executable, there's no
direct guarantee that you and your users install compatible versions of the PPXs for the
build system. To guarantee that, you'd have to add certain dependency constraints to your
opam file. We would make sure the way to define those dependency constraints would be well
documented and could be found easily.
</p>
</div>
</div>

<div id="outline-container-org0dc1512" class="outline-5">
<h5 id="org0dc1512">Option 2: making <code>OMP1</code> a conflict for <code>ppxlib</code></h5>
<div class="outline-text-5" id="text-org0dc1512">
<p>
<b>Advantage</b>: Without adding any dependency constraints yourself, opam will ensure that you
and your users don't install both <code>ppxlib</code> and <code>OMP1</code>, only to get an error at build time.
</p>

<p>
<b>Disadvantage</b>: You couldn't use <code>ppxlib</code> PPXs and <code>OMP1</code> PPXs in the same project, not
even separating them at the level of libraries/executables. You also couldn't use an
exectubale based on <code>ppxlib</code> together with a <code>OMP1</code> PPX in the same project. In short: the
situation would stay the same as it is currently during State 2.
</p>

<p>
To make the best decision, we need to know if the possibility to use <code>ppxlib</code> and <code>OMP1</code>
inside the same project, separated by libraries/executables, is still in demand.
</p>
</div>
</div>
</div>
</div>


<div id="outline-container-org8b165b9" class="outline-3">
<h3 id="org8b165b9">Lucas Pluvinage replied</h3>
<div class="outline-text-3" id="text-org8b165b9">
<p>
In a web project I wanted to use <code>graphql-ppx</code>
(<a href="https://github.com/reasonml-community/graphql-ppx">https://github.com/reasonml-community/graphql-ppx</a>) but the last version released on opam
(v1.0.1) was using <code>OMP</code> whereas other parts of the project were using ppxlib.
</p>

<p>
However the compatibility is not a hard requirement for me because more recent versions of
that package (v1.2.2) are actually compatible with ppxlib. The solution for me was to vendor
the project and wait for an upcoming opam release, which has been discussed in a Github
issue.
</p>
</div>
</div>


<div id="outline-container-org0fcd31f" class="outline-3">
<h3 id="org0fcd31f">Sonja Heinze then said</h3>
<div class="outline-text-3" id="text-org0fcd31f">
<p>
By the way, the <code>graphql_ppx</code> version containing the <code>ppxlib</code> port is now also
<a href="https://opam.ocaml.org/packages/graphql_ppx/">released on
opam</a>, so hopefully no one will have to vendor
it again for PPX incompatibility reasons. :)
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">first release of FASMIFRA (a molecular generator)</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-first-release-of-fasmifra-a-molecular-generator/8212/1">https://discuss.ocaml.org/t/ann-first-release-of-fasmifra-a-molecular-generator/8212/1</a>
</p>
</div>

<div id="outline-container-org3a9dada" class="outline-3">
<h3 id="org3a9dada">UnixJunkie announced</h3>
<div class="outline-text-3" id="text-org3a9dada">
<p>
If you are not a computational chemist / chemoinformatician, you will not be
interested by the following.
</p>

<p>
If you are and you are interested by machine-learning for molecular generation,
then be welcome! :slight_smile:
</p>

<p>
FASMIFRA: Fast Molecular Generation by Assembly of (Deep)SMILES Fragments
<a href="https://github.com/UnixJunkie/FASMIFRA">https://github.com/UnixJunkie/FASMIFRA</a>
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Become an Outreachy Mentor: support the growth and diversity of the OCaml community</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/become-an-outreachy-mentor-support-the-growth-and-diversity-of-the-ocaml-community/8213/1">https://discuss.ocaml.org/t/become-an-outreachy-mentor-support-the-growth-and-diversity-of-the-ocaml-community/8213/1</a>
</p>
</div>

<div id="outline-container-orgd0eb886" class="outline-3">
<h3 id="orgd0eb886">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-orgd0eb886">
</div>
<div id="outline-container-org3fb65ea" class="outline-4">
<h4 id="org3fb65ea">What is Outreachy?</h4>
<div class="outline-text-4" id="text-org3fb65ea">
<p>
<a href="https://www.outreachy.org/">Outreachy</a> is an initiative that provides financial support for
remote internships, in open-source communities, to under-represented groups. It provides
interns with the opportunity for their first experience in open-source development.
</p>

<p>
Outreachy promotes diversity and inclusion in the open-source community. It acts as a central
point for organising internships for groups of people who historically have faced systemic
bias in the programming world.
</p>
</div>
</div>

<div id="outline-container-org6643e59" class="outline-4">
<h4 id="org6643e59">Outreachy and OCaml</h4>
<div class="outline-text-4" id="text-org6643e59">
<p>
Following the successful effort from the OCaml Software Foundation last year, this year OCaml
Labs and Tarides joined forces to continue our efforts to bring more new developers into the
OCaml community from diverse backgrounds. We selected three Outreachy interns to work with us
on different OCaml projects.
</p>
</div>

<div id="outline-container-org5f02a8d" class="outline-5">
<h5 id="org5f02a8d">Current OCaml Interns</h5>
<div class="outline-text-5" id="text-org5f02a8d">
<p>
We merged over 75 PRs and resolved over 70 issues during the initial contribution period this
year on the <a href="https://github.com/ocaml/ocaml.org">ocaml/ocaml.org</a> repository! This was the
most activity the repository had seen since 2014. There were so many candidate interns, keen
to join the OCaml community and start developing.
</p>

<p>
This year, we have three interns working with us: Diksha Gupta, Odinaka Joy and Shreya Kumari
Gupta.
</p>
<ul class="org-ul">
<li><b>Diksha Gupta</b> is working on automating and expanding ocaml.org's new and experimental peertube instance for hosting OCaml-related video content.</li>
<li><b>Odinaka Joy</b> is prototyping and building an online package search web application and service.</li>
<li><b>Shreya Kumari Gupta</b> is helping to build and design a new ocaml.org website.</li>
</ul>

<p>
They've all made amazing progress and we can't wait to share more about these projects
towards the end of their internships!
</p>
</div>
</div>
</div>

<div id="outline-container-org6036a94" class="outline-4">
<h4 id="org6036a94">Continuing to grow Outreachy and OCaml</h4>
<div class="outline-text-4" id="text-org6036a94">
<p>
Outreachy programs run every six months, and so even though the current round is still
ongoing, we need to plan how to participate in the forthcoming Winter 2021 round.
</p>

<p>
One of the big bottlenecks in growing the program is having a sufficient supply of projects
and mentors from the OCaml community who are willing to work with the enthusiastic Outreachy
interns to get them started on contributing to our ecosystem. That's the goal of this post &#x2013;
to convince you to sign up!
</p>
</div>
</div>

<div id="outline-container-org8cd8b6d" class="outline-4">
<h4 id="org8cd8b6d">Benefits of being a mentor</h4>
<div class="outline-text-4" id="text-org8cd8b6d">
<p>
Outreachy is an amazing and rewarding experience that:
</p>

<ul class="org-ul">
<li>Increases diversity in the OCaml community.</li>
<li>Attracts more contributers to OCaml or to open-source projects in general.</li>
<li>Improves your project with an additional developer.</li>
<li>Has an enriching experience: work together with people from many different backgrounds and ways of thinking.</li>
<li>Promotes OCaml: When people learn about Outreachy, they often go through the list of communities that are or were signed up in the past. That's a good way for those from under-represented groups to learn about OCaml. It also puts the OCaml community in a good light. We know that this is how some people who now form part of the OCaml community first learned about OCaml and got excited about it.</li>
</ul>
</div>
</div>

<div id="outline-container-org1c35520" class="outline-4">
<h4 id="org1c35520">Expectations of being a mentor</h4>
<div class="outline-text-4" id="text-org1c35520">
</div>
<div id="outline-container-orgf0a5e29" class="outline-5">
<h5 id="orgf0a5e29">* Time commitment</h5>
<div class="outline-text-5" id="text-orgf0a5e29">
<p>
During the three month internship, mentors need to commit to working with the Outreachy
intern for approximately 5 hours per week. During the one month contribution period that
takes place before the internship starts, mentors must help prospective applicants with
issues and PRs which can take anywhere between 1 to 15 hours per week depending on how many
interested applicants there are.
</p>
</div>
</div>

<div id="outline-container-org02430d2" class="outline-5">
<h5 id="org02430d2">* Your open-source repository</h5>
<div class="outline-text-5" id="text-org02430d2">
<p>
Most Outreachy projects that interns work on have a single, main repository that code will
eventually be merged into. It can be any OCaml, open-source repository of code with some form
of issue tracker. For example, this summer we started with the <a href="https://github.com/ocaml/ocaml.org">ocaml.org
repository</a>. The best repositories tend to be those that
are well-maintained, make good use of the issue tracker, and have clear documentation that
describes how to get started.
</p>

<p>
Note that although companies can take part, the open-source project that is part of Outreachy
must be in the public interest. This generally means that OCaml libraries and tools of wider
interest are fine targets for Outreachy contributions, but not OCaml codebases that are
commercial or very specific in nature.
</p>
</div>
</div>

<div id="outline-container-org5829dcb" class="outline-5">
<h5 id="org5829dcb">* Outreachy projects</h5>
<div class="outline-text-5" id="text-org5829dcb">
<p>
<a href="https://www.outreachy.org/docs/community/#project-guidelines">Outreachy defines a good project</a> for an intern as being
well-defined, self-contained, uncontroversial and incremental. When thinking of a suitable
project it is important to bear these conditions in mind.
</p>

<p>
Mentors can support the success of the intern by preparing, in advance, a three-month outline
of the timeline the intern will follow. This timeline divides the project into manageable
chunks that can be completed each week.
</p>
</div>
</div>

<div id="outline-container-orgdb3a67f" class="outline-5">
<h5 id="orgdb3a67f">* Interacting with Outreachy interns</h5>
<div class="outline-text-5" id="text-orgdb3a67f">
<p>
The interns' backgrounds may vary. Some might be experienced developers but most won't
already know OCaml and may have questions concerning the OCaml set-up or the langauge in
general. However, the project doesn't need to be super easy: many interns who started without
100% skill fit have been very successful.
</p>

<p>
Also, for most interns it's the first time contributing to open-source and they've all faced
systemic bias in the past. So it's important to provide a friendly working atmosphere. This
means being patient and making them feel comfortable to ask questions.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc5b28a7" class="outline-4">
<h4 id="orgc5b28a7">Step-by-step process for being a mentor</h4>
<div class="outline-text-4" id="text-orgc5b28a7">
<p>
The Outreachy process from the mentor's perspective, including dates for the coming round is:
</p>


<div id="org44241f9" class="figure">
<p><img src="https://i.imgur.com/cI5GvF7.png" alt="cI5GvF7.png" />
</p>
</div>

<ol class="org-ol">
<li>The Outreachy process starts when the call for <b>mentoring communities sign-up</b> opens. OCaml is already included in the next Outreachy round.</li>

<li>The next step is to <a href="https://www.outreachy.org/communities/cfp/ocaml/"><b>submit Outreachy projects</b></a> to the OCaml community on the Outreachy site. That's the first step that you, as a potential mentor, would need to undertake. We've explained in the section above what a project can look like. At this stage, you also need to mention the skills that interns require to contribute to your project. This year's list of projects with their respective, required skills are <a href="https://www.outreachy.org/outreachy-may-2021-internship-round/">available online</a>. If you set your requirements too low, you might be overwhelmed by the number of applicants to your project; if you set it too high, you might not get any applicants. The section above, <span class="underline">Interacting with Outreachy interns</span> describes the experience level you can expect.</li>

<li>If your project is approved, you should <b>prepare it for the <span class="underline">contribution period</span></b>. At this stage, it's a good to review your contribution documentation and to label some of your project's issues as `good-first-issue` resp. `medium`.</li>

<li>The one month <b><span class="underline">contribution period</span></b> is the time during which Outreachy applicants, who have passed an <span class="underline">initial application</span> process that's validated by the Outreachy organizers, can apply for a defined project by contributing to its repository in the same way that any other first-time contributer would contribute (independently from the internship project). This involves choosing issues, working on them and opening PRs, commenting on issues or opening new ones, and so on. During this stage, you need to start providing guidance and help. In particular, having `good-first-issue`'s is imperative since it allows the participants to become familiar with the code base. You must also have some `medium` sized issues or tasks for participants because it allows you to assess their application with more substantial contributions.</li>

<li>When the contribution period ends, you need to <b>select (an) intern(s)</b> out of the pool of applicants. To help you get an overview, each of them will submit an application consisting of the following two parts: a summary of their contributions to your repository during the contribution period and the <a href="https://www.outreachy.org/docs/applicant/#final-application">final application</a> which includes a timeline for the internship project. The applicants are supposed to work out the timeline together with their mentor(s), so they might ask you for guidance and feedback in advance.</li>

<li>The interns will then be officially announced by Outreachy, and they start working with you a few weeks later, marking the start of their 13-week <b>internship period</b>!</li>
</ol>
</div>
</div>

<div id="outline-container-orgd679861" class="outline-4">
<h4 id="orgd679861">Become a mentor</h4>
<div class="outline-text-4" id="text-orgd679861">
<p>
Mentoring an Outreachy intern is a very enriching experience! So if you have ideas, <a href="https://www.outreachy.org/communities/cfp/ocaml/">submit
your project on the Outreachy website</a>,
under the OCaml community, and apply to be a mentor or co-mentor.
</p>

<p>
We are looking forward to your participation in the next Outreachy round(s) and would love to
hear your ideas (comment on the post)!
</p>

<p>
This post was written by @gs0510, @patricoferris and @pitag with lots of useful input from
@avsm and @susanstocks.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">Alt-Ergo 2.4.1</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-alt-ergo-2-4-1/8217/1">https://discuss.ocaml.org/t/ann-alt-ergo-2-4-1/8217/1</a>
</p>
</div>

<div id="outline-container-org7432f38" class="outline-3">
<h3 id="org7432f38">OCamlPro announced</h3>
<div class="outline-text-3" id="text-org7432f38">
<p>
We are pleased to announce a new release of Alt-Ergo! Alt-Ergo 2.4.1 is now available on our
<a href="https://github.com/OCamlPro/alt-ergo/releases/tag/2.4.1">Github</a>.
</p>

<p>
This release contains some major novelties:
</p>
<ul class="org-ul">
<li>Improvement of term purification</li>
<li>Implementation of a semantic term construction cache</li>
<li>Replacement of Travis-CI by GitHub actions</li>
<li>Improvement of documentation</li>
<li>Unsoundness fixes</li>
</ul>

<p>
Do not hesitate to report bugs, to ask questions, or to give your feedback!
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">Set up OCaml v1.1.12</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-set-up-ocaml-v1-1-12/8223/1">https://discuss.ocaml.org/t/ann-set-up-ocaml-v1-1-12/8223/1</a>
</p>
</div>

<div id="outline-container-org02c99c0" class="outline-3">
<h3 id="org02c99c0">Sora Morimoto announced</h3>
<div class="outline-text-3" id="text-org02c99c0">
</div>
<div id="outline-container-org350f54d" class="outline-4">
<h4 id="org350f54d">Fixed</h4>
<div class="outline-text-4" id="text-org350f54d">
<ul class="org-ul">
<li>Stop installing <code>depext</code> package on macOS runners (opam is now at 2.1.0).</li>
</ul>

<p>
<a href="https://github.com/ocaml/setup-ocaml/releases/tag/v1.1.12">https://github.com/ocaml/setup-ocaml/releases/tag/v1.1.12</a>
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">Set up OCaml 2.0.0-beta3</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-set-up-ocaml-2-0-0-beta3/8224/1">https://discuss.ocaml.org/t/ann-set-up-ocaml-2-0-0-beta3/8224/1</a>
</p>
</div>

<div id="outline-container-org9a1d0e2" class="outline-3">
<h3 id="org9a1d0e2">Sora Morimoto announced</h3>
<div class="outline-text-3" id="text-org9a1d0e2">
</div>
<div id="outline-container-orgadc6a28" class="outline-4">
<h4 id="orgadc6a28">Changed</h4>
<div class="outline-text-4" id="text-orgadc6a28">
<ul class="org-ul">
<li>Use the week number to manage Cygwin cache.</li>
</ul>
</div>
</div>

<div id="outline-container-org1e15664" class="outline-4">
<h4 id="org1e15664">Fixed</h4>
<div class="outline-text-4" id="text-org1e15664">
<ul class="org-ul">
<li>​Set repository priorities correctly for multiple repositories feature.</li>
<li>Lock the version of opam to be installed only to &lt; 2.1 releases until opam 2.2 is released.</li>
</ul>

<p>
<a href="https://github.com/ocaml/setup-ocaml/releases/tag/v2.0.0-beta3">https://github.com/ocaml/setup-ocaml/releases/tag/v2.0.0-beta3</a>
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-8" class="outline-2">
<h2 id="8">JSOO build integration with JS front-end project?</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/jsoo-build-integration-with-js-front-end-project/8226/1">https://discuss.ocaml.org/t/jsoo-build-integration-with-js-front-end-project/8226/1</a>
</p>
</div>

<div id="outline-container-org696f81b" class="outline-3">
<h3 id="org696f81b">currycomb asked</h3>
<div class="outline-text-3" id="text-org696f81b">
<p>
I want to use JSOO to build a JS package that contains core logic that will run in a browser,
presenting a JSON-y API to be consumed by JS front-end code.  This seems like a good way to
use js_of_ocaml: all the complicated JS UI stuff doesn't need to be replicated in OCaml, but
you can still keep your core domain logic there.
</p>

<p>
I've got dune building my .js using JSOO and exposing functions to JS.  If I copy that JS by
hand to my front-end project, it works.  Now I want to be able to:
</p>

<ul class="org-ul">
<li>Expose the output as something that my front-end project can bundle without a manual copying step</li>
<li>Be able to make changes to in a dev environment and see the changes quickly in a browser</li>
</ul>

<p>
To do this with ReScript compiling my core <code>.ml</code> syntax project, I have <code>esbuild</code> running
under a watcher + <code>rescript build -w</code>. I run <code>rescript build -w</code> on my front-end, with the
core project ~npm link~ed in.  Any change I make to either project (core or front-end) shows
up effectively immediately in the browser.
</p>

<p>
Has anybody got advice on how to get a similar setup working with JSOO compiling the core
project in place of ReScript, and JS on the front end?  Ideally on github, but otherwise
hints appreciated!
</p>
</div>
</div>


<div id="outline-container-org7227f06" class="outline-3">
<h3 id="org7227f06">Patrick Ferris replied</h3>
<div class="outline-text-3" id="text-org7227f06">
<p>
I took a stab at implementing something that could maybe be helpful, apologies if I
misinterpreted what you were asking, the repository is
<a href="https://github.com/patricoferris/jsoo-reload-example">jsoo-reload-example</a>. I think the
README explains it quite well, but for completeness I'll add the general idea below.
</p>

<blockquote>
<p>
Expose the output as something that my front-end project can bundle without a manual copying
step
</p>
</blockquote>

<p>
To achieve this I used the a dune rule with a copy action. The dependency is the output of
the jsoo build (<code>main.bc.js</code>) and the target is a new js file (<code>print.js</code>) in my project
directory. It is promoted automatically into that file and so if the jsoo is recompiled, this
copy happens right afterwards. I didn't commit the file but you could.
</p>

<blockquote>
<p>
Be able to make changes to in a dev environment and see the changes quickly in a browser
</p>
</blockquote>

<p>
Now thanks to the previous setup running <code>dune build -w</code> will recompile the jsoo and copy it
over whenver you make a change to files your jsoo project requires.
</p>

<p>
All of the next part may not apply to your use case, but others might find it somewhat
useful. I used the <a href="https://parceljs.org/">parcel</a> bundler (this is the only bundler I know
vaguely how to use) to then take the project and bundle it into a <code>dist</code> directory. Running
<code>parcel watch site/index.html</code> concurrently with <code>dune build -w</code> now sets up a whole pipeline
from making a change to the jsoo to having a fresh, bundled output.
</p>

<p>
The final step for me (and again this probably doesn't apply) was to have live-reloading
server serve the contents of the bundled output. Using
<a href="https://github.com/aantron/dream">dream</a>,
<a href="https://github.com/tmattio/dream-livereload">dream-livereload</a> and
<a href="https://github.com/mirage/irmin-watcher">irmin-watcher</a> (an OCaml library for watching the
filesystem) I was able to achieve this (I'll leave out the details but everything is in the
<code>server</code> directory), so now we have:
</p>

<ol class="org-ol">
<li><code>dune build -w</code> notices a change to the jsoo and recompiles.</li>
<li><code>dune</code> also then copies the jsoo output over to the project directory (in the example called <code>site</code>).</li>
<li>The <code>site</code> directory has now changed triggering <code>parcel</code> to bundle the output to <code>dist</code>.</li>
<li><code>dist</code> has now changed triggering <code>irmin-watcher</code> which using <code>dream</code> and <code>dream-livereload</code> uses websockets to trigger a browser refresh.</li>
</ol>

<p>
That list should also set your expectations for how fast this all should be&#x2026; not blazingly
fast, but sure beats manually copying and restarting things by hand, hope it helps :))
</p>
</div>
</div>
</div>




<div id="outline-container-9" class="outline-2">
<h2 id="9">Multicore OCaml: July 2021</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/multicore-ocaml-july-2021/8232/1">https://discuss.ocaml.org/t/multicore-ocaml-july-2021/8232/1</a>
</p>
</div>

<div id="outline-container-org15b97d2" class="outline-3">
<h3 id="org15b97d2">Anil Madhavapeddy announced</h3>
<div class="outline-text-3" id="text-org15b97d2">
<p>
Welcome to the July 2021 <a href="https://github.com/ocaml-multicore/ocaml-multicore">Multicore
OCaml</a> monthly report! This month's
update along with the <a href="https://discuss.ocaml.org/tag/multicore-monthly">previous updates</a> has
been compiled by me, @ctk21, @kayceesrk and @shakthimaan. As August is usually a period of
downtime in Europe, the next update may be merged with the September one in a couple of
months (but given our geographically diverse nature now, if enough progress happens in August
I'll do an update).
</p>

<p>
The overall status of the multicore efforts are right on track: our contributions to the next
OCaml release have been <a href="https://discuss.ocaml.org/t/ocaml-4-13-0-second-alpha-release/8164">incorporated in
4.13.0~alpha2</a>, and our
focus remains on crushing incompatibilities and bugs to generate domains-only parallelism
patches suitable for upstream review and release.  As a lower priority activity, we continue
to develop the experimental "effects-based" IO stack, which will feature in the upcoming
virtual OCaml Workshop at ICFP in August 2021.
</p>

<p>
The <code>4.12.0+domains</code> trees continue to see a tail of bugs being steadily fixed. After last
month's call, we saw a number of external contributors step up to submit fixes in addition to
the multicore and core OCaml teams. We would like to acknowledge and thank them!
</p>

<ul class="org-ul">
<li>@emillon (Etienne Millon) for running the Jane Street <code>core</code> v0.14 test suite with 4.12.0+domains and sharing the test results (and finding a <a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/624">multicore GC edge case bug</a> while at it).</li>
<li>@Termina1 (Vyacheslav Shebanov) for testing the compilation of <code>batteries</code> 3.30 with Multicore OCaml 4.12.0+domains.</li>
<li>@nbecker (Nils Becker) for reporting on <code>parallel_map</code> and <code>parallel_scan</code> for domainslib.</li>
<li>Filip Koprivec for identifying a memory leak when using <code>flush_all</code> with <code>ocamlc</code> with 4.12.0+domains.</li>
</ul>

<p>
All of these fixes, combined with some big-ticket compatibility changes (listed below) are
getting me pretty close to using 4.12.0+domains as my daily OCaml opam switch of choice. I
encourage you to also give it a try and report (good or bad) results on <a href="https://github.com/ocaml-multicore/ocaml-multicore/issues">the multicore OCaml
tracker</a>.  If these sorts of
problems grab your attention, then <a href="https://segfault.systems/careers.html">Segfault Systems is hiring in
India</a> to work with @kayceesrk and the team there on
multicore OCaml.
</p>

<p>
For benchmarking, the Jupyter notebooks for the Sandmark nightly benchmark runs have  been
updated, and we continue to test the Sandmark builds for the  4.12+ variants and
4.14.0+trunk. Progress has been made to integrate  <code>current-bench</code> OCurrent pipeline with the
Sandmark 2.0 -alpha branch  changes to reproduce the current Sandmark functionality, which
will allow GitHub PRs to be benchmarked systematically before being merged.
</p>

<p>
As always, the Multicore OCaml ongoing and completed tasks are listed first, which are then
followed by the updates from the Ecosystem libraries. The Sandmark nightly build efforts,
benchmarking updates and relevant current-bench tasks are then mentioned. Finally, the update
on the upstream OCaml Safepoints PR is provided for your reference.
</p>
</div>

<div id="outline-container-org66cc9f1" class="outline-4">
<h4 id="org66cc9f1">Multicore OCaml</h4>
<div class="outline-text-4" id="text-org66cc9f1">
</div>
<div id="outline-container-org38fd4a6" class="outline-5">
<h5 id="org38fd4a6">Ongoing</h5>
<div class="outline-text-5" id="text-org38fd4a6">
</div>
<div id="outline-container-org6a3b0af" class="outline-6">
<h6 id="org6a3b0af">CI Compatibility</h6>
<div class="outline-text-6" id="text-org6a3b0af">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/602">ocaml-multicore/ocaml-multicore#602</a>
Inclusion of most of OCaml headers results in requiring pthread
</p>

<p>
The inclusion of multiple nested header files requires <code>pthread</code> and
the <code>decompress</code> testsuite fails.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/607">ocaml-multicore/ocaml-multicore#607</a>
<code>caml_young_end</code> is not a <code>value *</code> anymore
</p>

<p>
An inconsistency observed in the CI where <code>caml_young_end</code> is now a
<code>char *</code> instead of <code>value *</code>.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org4789c56" class="outline-6">
<h6 id="org4789c56">Crashes</h6>
<div class="outline-text-6" id="text-org4789c56">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/608">ocaml-multicore/ocaml-multicore#608</a>
Parmap testsuite crash
</p>

<p>
<code>Parmap</code> is causing a segfault when its testsuite is run against
Multicore OCaml.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/611">ocaml-multicore/ocaml-multicore#611</a>
Crash running Multicore binary under AFL
</p>

<p>
The <code>bun</code> package crashes with Multicore OCaml 4.12+domains, but,
builds fine on 4.12.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgc5b28bd" class="outline-6">
<h6 id="orgc5b28bd">Package Builds</h6>
<div class="outline-text-6" id="text-orgc5b28bd">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/609">ocaml-multicore/ocaml-multicore#609</a>
lablgtk's example segfaults
</p>

<p>
An ongoing effort to compile lablgtk with OCaml and Multicore OCaml.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/624">ocaml-multicore/ocaml-multicore#624</a>
core v0.14: test triggers a segfault in the GC
</p>

<p>
A segfault caused by running <code>core.v0.14</code> test suite with Multicore
OCaml 4.12.0+domains as reported by @emillon.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/625">ocaml-multicore/ocaml-multicore#625</a>
Cannot compile batteries on OCaml Multicore 4.12.0+domains
</p>

<p>
An effort by Vyacheslav Shebanov (@Termina1) to compile
<code>batteries.3.30</code> with Multicore OCaml 4.12.0+domains variant.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgf880d0f" class="outline-6">
<h6 id="orgf880d0f">Upstream</h6>
<div class="outline-text-6" id="text-orgf880d0f">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/573">ocaml-multicore/ocaml-multicore#573</a>
Backport trunk safepoints PR to multicore
</p>

<p>
The Safepoints implementation is being backported to Multicore
OCaml. The initial test results of running Sandmark on a large Xen2
box are shown below:
</p>


<div id="org50cd65d" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/optimized/2X/8/814e446af614fd2bb502af0c3b79be239024a97d_2_916x1000.png" alt="814e446af614fd2bb502af0c3b79be239024a97d_2_916x1000.png" />
</p>
</div>


<div id="orgc1311df" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/optimized/2X/5/5247895927d8e79619e1d6eb4682c2f8218d4ede_2_916x1000.png" alt="5247895927d8e79619e1d6eb4682c2f8218d4ede_2_916x1000.png" />
</p>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/617">ocaml-multicore/ocaml-multicore#617</a>
Some of the compatibility macros are not placed in the same headers as in upstream OCaml
</p>

<p>
The introduction of a compatibility layer for GC statistics need to
be consistent with trunk.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/618">ocaml-multicore/ocaml-multicore#618</a>
Review io.c for thread-safety and add parallel tests
</p>

<p>
The thread-safety fixes in io.c requires a review and additional
tests need to be added for the same.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/623">ocaml-multicore/ocaml-multicore#623</a>
Exposing <code>caml_channel_mutex_*</code> hooks
</p>

<p>
A draft PR to support <code>caml_channel_mutex_*</code> interfaces from trunk
to Multicore OCaml.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orga3a5236" class="outline-6">
<h6 id="orga3a5236">Sundries</h6>
<div class="outline-text-6" id="text-orga3a5236">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/610">ocaml-multicore/ocaml-multicore#610</a>
Add std gnu11 common cflags
</p>

<p>
The configure.ac file has been updated to use <code>-std=gnu11</code> in
<code>common_cflags</code> for both GCC and Clang.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/614">ocaml-multicore/ocaml-multicore#614</a>
Destroy channel mutexes after fork
</p>

<p>
A discussion on resetting and reinitializing mutexes after fork in
the runtime.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/616">ocaml-multicore/ocaml-multicore#616</a>
Expose functions to program with effects
</p>

<p>
A draft PR to enable programmers to write programs that use effects
without explicitly using the effect syntax.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/619">ocaml-multicore/ocaml-multicore#619</a>
Set resource Limit
</p>

<p>
A query to use <code>setrlimit</code> in Multicore OCaml, similiar, to
<code>Core.Unix.RLimit.set</code> from Jane Street's core library.
</p></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org1f782eb" class="outline-5">
<h5 id="org1f782eb">Completed</h5>
<div class="outline-text-5" id="text-org1f782eb">
</div>
<div id="outline-container-orgad7ae88" class="outline-6">
<h6 id="orgad7ae88">Enhancements</h6>
<div class="outline-text-6" id="text-orgad7ae88">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/601">ocaml-multicore/ocaml-multicore#601</a>
Domain better participants
</p>

<p>
The <code>0(n_running_domains)</code> from domain creation and the iterations
<code>0(Max_domains)</code> from STW signalling have been removed.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/605">ocaml-multicore/ocaml-multicore#605</a>
Eventog event for condition wait
</p>

<p>
A new event has been added to indicate when a domain is blocked at
<code>Condition.wait</code>. This is useful for debugging any imbalance in task
distribution in domainslib.
</p>


<div id="orgb3154a0" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/3/3576c6605c9fca962447ce44cd7a5f1c237b6c5e.png" alt="3576c6605c9fca962447ce44cd7a5f1c237b6c5e.png" />
</p>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/615">ocaml-multicore/ocaml-multicore#615</a>
make depend
</p>

<p>
Updated <code>stdlib/.depend</code> to cover the recent developments in stdlib.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/626">ocaml-multicore/ocaml-multicore#626</a>
Add Obj.drop_continuation
</p>

<p>
Added a <code>caml_drop_continuation</code> primitive to <code>runtime/fiber.c</code> to
prevent leaks with leftover continuations.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org07449e9" class="outline-6">
<h6 id="org07449e9">Upstream</h6>
<div class="outline-text-6" id="text-org07449e9">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/584">ocaml-multicore/ocaml-multicore#584</a>
Modernise signal handling
</p>

<p>
The Multicore OCaml signals implementation is now closer to that of
upstream OCaml.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/600">ocaml-multicore/ocaml-multicore#600</a>
Expose a few more GC variables in headers
</p>

<p>
The <code>caml_young_start</code>, <code>caml_young_limit</code> and <code>caml_minor_heap_wsz</code>
variables have now been defined in the runtime.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/612">ocaml-multicore/ocaml-multicore#612</a>
Make intern and extern work with Multicore
</p>

<p>
The upstream changes to intern and extern have now been incorporated
to work with the Multicore OCaml runtime.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org5cb1267" class="outline-6">
<h6 id="org5cb1267">Fixes</h6>
<div class="outline-text-6" id="text-org5cb1267">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/604">ocaml-multicore/ocaml-multicore$604</a>
Fix unguarded <code>caml_skiplist_empty</code> in <code>caml_scan_global_young_roots</code>
</p>

<p>
A patch that fixes a locking bug with global roots observed on a Mac
OS CI with <code>parallel/join.ml</code>.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/621">ocaml-multicore/ocaml-multicore#621</a>
otherlibs: <code>encode_terminal_status</code> does not set all fields
</p>

<p>
A minor fix for the error caused when moved from using
<code>caml_initialize_field</code> to <code>caml_initialize</code> in otherlibs.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/628">ocaml-multicore/ocaml-multicore#628</a>
In link_channel, channel-&gt;prev should be set to NULL
</p>

<p>
A PR to fix the memory leak when using <code>flush_all</code> with <code>ocamlc</code> as
reported by Filip Koprivec.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/629">ocaml-multicore/ocaml-multicore#629</a>
Backtrace last exn is val unit
</p>

<p>
A fix for the crash reported on running core's test suite by
clearing <code>backtrace_last_exn</code> to <code>Val_unit</code> in
<code>runtime/backtrace.c</code>.
</p></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd25ffc0" class="outline-4">
<h4 id="orgd25ffc0">Ecosystem</h4>
<div class="outline-text-4" id="text-orgd25ffc0">
</div>
<div id="outline-container-org8d6d3eb" class="outline-5">
<h5 id="org8d6d3eb">Ongoing</h5>
<div class="outline-text-5" id="text-org8d6d3eb">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-uring/pull/36">ocaml-multicore/ocaml-uring#36</a> Update to cstruct 6.0.1
</p>

<p>
ocaml-uring is now updated to use <code>Cstruct.shiftv</code> with the upgrade
to cstruct.6.0.1.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/issues/37">ocaml-multicore/domainslib#37</a> parallel_map
</p>

<p>
A request by @nbecker to provide a <code>parallel_map</code> function over
arrays having the following signature:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">val</span> <span style="color: #0000ff;">parallel_map</span> : <span style="color: #228b22;">Domainslib.Task.</span>pool -&gt; ('a -&gt; 'b) -&gt; 'a array -&gt; 'b array
</pre>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/issues/38">ocaml-multicore/domainslib#38</a> parallel_scan rejects arrays not larger than pool size
</p>

<p>
An "index out of bounds" exception is thrown for
<code>Task.parallel_scan</code> with arrays not larger than the pool size as
reported by @nbecker.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org691f5b7" class="outline-5">
<h5 id="org691f5b7">Completed</h5>
<div class="outline-text-5" id="text-org691f5b7">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/eventlog-tools/pull/4">ocaml-multicore/eventlog-tools#4</a>
Add <code>domain/condition_wait</code> event
</p>

<p>
The <code>lib/consts.ml</code> file in eventlog-tools now includes the
<code>domain/condition_wait</code> event.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/pull/34">ocaml-multicore/domainslib#34</a>
Fix initial value accounting in <code>parallel_for_reduce</code>
</p>

<p>
The initial value of <code>parallel_for_reduce</code> has been fixed so as to
not be accounted multiple times.
</p></li>
</ul>
</div>

<div id="outline-container-orgd6b9dbd" class="outline-6">
<h6 id="orgd6b9dbd">Eio</h6>
<div class="outline-text-6" id="text-orgd6b9dbd">
<p>
The <code>eio</code> library provides an effects-based parallel IO stack for
Multicore OCaml.
</p>
</div>

<ul class="org-ul">
<li><a id="org5dbe797"></a>Ongoing<br />
<div class="outline-text-7" id="text-org5dbe797">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/68">ocaml-multicore/eio#68</a>
WIP: Add eio_luv backend
</p>

<p>
A work-in-progress to use <code>luv</code> that provides OCaml/Reason bindings
to libuv for a cross-platform backend for eio.
</p></li>
</ul>
</div>
</li>

<li><a id="org937f305"></a>Completed<br />
<div class="outline-text-7" id="text-org937f305">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/62">ocaml-multicore/eio#62</a>
Update to latest MDX to fix exception reporting
</p>

<p>
Dune has been updated to 2.9 along with necessary changes for
exception reporting with MDX.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/63">ocaml-multicore/eio#63</a>
Update README
</p>

<p>
A documentation update specifying the following steps required to
manually pin the effects version of <code>ppxlib</code> and
<code>ocaml-migrate-parsetree</code>.
</p></li>
</ul>

<pre class="example" id="org7447ccb">
  opam switch create 4.12.0+domains+effects
--repositories=multicore=git+https://github.com/ocaml-multicore/multicore-opam.git,default
  opam pin add -yn ppxlib 0.22.0+effect-syntax
  opam pin add -yn ocaml-migrate-parsetree 2.1.0+effect-syntax
</pre>

<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/64">ocaml-multicore/eio#64</a>
Improvements to traceln
</p>

<p>
Enhancements to <code>traceln</code> to make it an Effect along with changes to
trace output and addition of tests.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/65">ocaml-multicore/eio#65</a>
Add Flow.read_methods for optimised reading
</p>

<p>
The addition of <code>read_methods</code> in the <code>Flow</code> module as a faster
alternative to reading into a buffer.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/66">ocaml-multicore/eio#66</a>
Allow cancelling waiting for a semaphore
</p>

<p>
Update to <code>lib_eio/semaphore.ml</code> to allow cancel waiting for a
semaphore.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/67">ocaml-multicore/eio#67</a>
Add more generic exceptions
</p>

<p>
The inclusion of generic exceptions to avoid depending on
backend-specific exceptions. The tests have also been updated.
</p></li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgb2c1f71" class="outline-4">
<h4 id="orgb2c1f71">Benchmarking</h4>
<div class="outline-text-4" id="text-orgb2c1f71">
</div>
<div id="outline-container-org9cb7852" class="outline-5">
<h5 id="org9cb7852">Sandmark Nightly</h5>
<div class="outline-text-5" id="text-org9cb7852">
</div>
<div id="outline-container-orgc78dbd6" class="outline-6">
<h6 id="orgc78dbd6">Ongoing</h6>
<div class="outline-text-6" id="text-orgc78dbd6">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark-nightly/issues/4">ocaml-bench/sandmark-nightly#4</a> Parallel notebook pausetimes graphing for navajo results throws an error
</p>

<p>
The parallel Jupyter notebook for pausetimes throws a ValueError
that needs to be investigated.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark-nightly/issues/5">ocaml-bench/sandmark-nightly#5</a>
Status of disabled benchmarks
</p>

<p>
The <code>alt-ergo</code>, <code>frama-c</code>, and <code>js_of_ocaml</code> benchmark results that
were disabled from the Jupyter notebooks have to be tested with
recent versions of Multicore OCaml.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark-nightly/issues/6">ocaml-bench/sandmark-nightly#6</a>
Parallel scalability number on navajo look odd
</p>

<p>
The parallel performance numbers on the navajo build server for
scalability will need to be reviewed and the experiments repeated
and validated.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark-nightly/issues/7">ocaml-bench/sandmark-nightly#7</a>
Use <code>col_wrap</code> as 3 instead of 5 in the normalised results in parallel notebook
</p>

<p>
For better readability, it is recommended to use col_wrap as 3 in
the normalised results in the parallel notebook.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark-nightly/issues/8">ocaml-bench/sandmark-nightly#8</a>
View results for a set of benchmarks in the nightly notebooks
</p>

<p>
A feature request to filter benchmarks by name or by tags when used
with Jupyter notebooks.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark-nightly/issues/9">ocaml-bench/sandmark-nightly#9</a>
Static HTML pages for the recent results
</p>

<p>
The benchmark results from the most recent build runs should be used
to generate static HTML reports for review and analysis.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgef825e0" class="outline-6">
<h6 id="orgef825e0">Completed</h6>
<div class="outline-text-6" id="text-orgef825e0">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark-nightly/issues/2">ocaml-bench/sandmark-nightly#2</a>
Timestamps are not sorted in the parallel_nightly notebook
</p>

<p>
The listing of timestamps in the drop-down option is now sorted.
</p>


<div id="org1c58a13" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/f/f3270c2d6da395e34fc32ebe3442036a74f104c3.png" alt="f3270c2d6da395e34fc32ebe3442036a74f104c3.png" />
</p>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc220d02" class="outline-5">
<h5 id="orgc220d02">Sandmark</h5>
<div class="outline-text-5" id="text-orgc220d02">
</div>
<div id="outline-container-org22b494f" class="outline-6">
<h6 id="org22b494f">Ongoing</h6>
<div class="outline-text-6" id="text-org22b494f">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/243">ocaml-bench/sandmark#243</a>
Add irmin tree benchmark
</p>

<p>
A request to add the Irmin tree.ml benchmark to Sandmark, including
necessary dependencies and data files.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/245">ocaml-bench/sandmark#245</a>
Add dune.2.9.0
</p>

<p>
An update to dune.2.9.0 in order to build coq with Multicore OCaml
on Sandmark.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/247">ocaml-bench/sandmark#247</a>
Sandmark breaks on OCaml 4.14.0+trunk
</p>

<p>
The Sandmark build for OCaml 4.14.0+trunk needs to be resolved as we
begin upstreaming more Multicore OCaml changes.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/248">ocaml-bench/sandmark#248</a>
coq fails to build
</p>

<p>
The <code>coq</code> package is failing to build with 4.12.0+domains+effects
with Sandmark on navajo server.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org27238c6" class="outline-6">
<h6 id="org27238c6">Completed</h6>
<div class="outline-text-6" id="text-org27238c6">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/233">ocaml-bench/sandmark#233</a>
Update pausetimes_multicore to fit with the latest Multicore changes
</p>

<p>
The Multicore pausetimes have now been updated for the 4.12.0
upstream and 4.12.0 branches which now use the new Common Trace
Format (CTF).
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/235">ocaml-bench/sandmark#235</a>
Update selected benchmarks as a set for baseline benchmark
</p>

<p>
You now have the option to only filter from the user selected
variants in the Jupyter notebooks.
</p>


<div id="org8c48035" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/7/7661e85fc50c9e1b4a6e7e76ca2929d8c4d3c19a.png" alt="7661e85fc50c9e1b4a6e7e76ca2929d8c4d3c19a.png" />
</p>
</div></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/237">ocaml-bench/sandmark#237</a>
Run sandmark_nightly on a larger machine
</p>

<p>
The Sandmark nightly builds now run on a 64+ core machine to benefit
from the improvements to Domainslib.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/240">ocaml-bench/sandmark#240</a>
Add navajo specific parallel config.json file
</p>

<p>
A navajo server-specific run_config.json file has been added to
Sandmark to run Multicore parallel benchmarks.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/242">ocaml-bench/sandmark#242</a>
Add commentary on grammatrix
</p>

<p>
A documentation update for the grammatrix benchmark on customised
task distribution via channels and the use of <code>parallel_for</code>.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/244">ocaml-bench/sandmark#244</a>
Add chrt to pausetimes_multicore wrapper
</p>

<p>
The use of <code>chrt -r 1</code> in paramwrapper is required with
<code>pausetimes_multicore</code> to use the taskset arguments.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/246">ocaml-bench/sandmark#246</a>
Add trunk build to CI
</p>

<p>
The .drone.yml file has now been updated to include 4.14.0+stock
trunk build for the CI.
</p></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org3423cd1" class="outline-5">
<h5 id="org3423cd1">current-bench</h5>
<div class="outline-text-5" id="text-org3423cd1">
</div>
<div id="outline-container-orga065620" class="outline-6">
<h6 id="orga065620">Ongoing</h6>
<div class="outline-text-6" id="text-orga065620">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocurrent/current-bench/issues/117">ocurrent/current-bench#117</a>
Read stderr from the docker container
</p>

<p>
We are able to run Sandmark-2.0 -alpha branch with current-bench
now, and it is useful to view the error output when running with
Docker containers.
</p></li>

<li><p>
<a href="https://github.com/ocurrent/current-bench/issues/146">ocurrent/current-bench#146</a>
Replicate ocaml-bench-server setup
</p>

<p>
A request to dynamically pass the Sandmark benchmark target commands
to current-bench in order to create pipelines.
</p></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org3ee2a14" class="outline-4">
<h4 id="org3ee2a14">OCaml</h4>
<div class="outline-text-4" id="text-org3ee2a14">
</div>
<div id="outline-container-orgd24b549" class="outline-5">
<h5 id="orgd24b549">Completed</h5>
<div class="outline-text-5" id="text-orgd24b549">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml/ocaml/pull/10039">ocaml/ocaml#10039</a>
Safepoints
</p>

<p>
The PR has been cherry-picked on 4.13 and finally merged with
upstream OCaml.
</p></li>
</ul>

<p>
We would like to thank all the OCaml users, developers and contributors in the community for
their valuable time and support to the project. Stay safe and have a great summer if you are
northern hemispherically based!
</p>
</div>
</div>
</div>

<div id="outline-container-orgddc1811" class="outline-4">
<h4 id="orgddc1811">Acronyms</h4>
<div class="outline-text-4" id="text-orgddc1811">
<ul class="org-ul">
<li>AFL: American Fuzzy Lop</li>
<li>CI: Continuous Integration</li>
<li>CTF: Common Trace Format</li>
<li>GC: Garbage Collector</li>
<li>GCC: GNU Compiler Collection</li>
<li>GTK: GIMP ToolKit</li>
<li>HTML: HyperText Markup Language</li>
<li>IO: Input/Output</li>
<li>OPAM: OCaml Package Manager</li>
<li>OS: Operating System</li>
<li>PR: Pull Request</li>
<li>STW: Stop The World</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-org64e8222" class="outline-2">
<h2 id="org64e8222">Old CWN</h2>
<div class="outline-text-2" id="text-org64e8222">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org54c3984">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
