#+OPTIONS: ^:nil
#+OPTIONS: html-postamble:nil
#+OPTIONS: num:nil
#+OPTIONS: toc:nil
#+OPTIONS: author:nil
#+HTML_HEAD: <style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
#+HTML_HEAD: <style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
#+TITLE: OCaml Weekly News
[[https://alan.petitepomme.net/cwn/2025.07.15.html][Previous Week]] [[https://alan.petitepomme.net/cwn/index.html][Up]] [[https://alan.petitepomme.net/cwn/2025.07.29.html][Next Week]]

Hello

Here is the latest OCaml Weekly News, for the week of July 15 to 22, 2025.

#+TOC: headlines 1


* Third outreachy internship blog
:PROPERTIES:
:CUSTOM_ID: 1
:END:
Archive: https://discuss.ocaml.org/t/third-outreachy-internship-blog/16984/1

** Matthew Idungafa announced


Hello everyone, it's the mid-point of my oureachy internship with Dune and here's my third blog [[https://medium.com/@mattidungafa/outreachy-blog-3-think-about-your-audience-ad5f09f4fda3][post]] 

In this article, I talk a bit more about the ocaml ecosystem in general and offer some insights to devs who would want to contribute to the ocaml ecosytem in subsequent internships.
      



* opam 2.4.0 is out!
:PROPERTIES:
:CUSTOM_ID: 2
:END:
Archive: https://discuss.ocaml.org/t/ann-opam-2-4-0-is-out/16989/1

** Kate announced


Hi everyone,

We are extremely happy to announce the release of opam 2.4.0 and encourage all users to upgrade.

*** What’s new? Some highlights:

- :dragon_face: *On ~opam init~ the compiler* chosen for the default switch will *no longer be ~ocaml-system~* ([[https://github.com/ocaml/opam/issues/3509][#3509]])
  This was done because the system compiler (as-is your ocaml installed system wide, e.g. /usr/bin/ocaml) is known to be under-tested and prone to a variety of bugs and configuration issues.
  Removing it from the default compiler allows new-comers a more smooth experience.
  *Note: if you wish to use it anyway, you are always able to do it explicitly using ~opam init --compiler=ocaml-system~*

- :dragon: In the same vein, *~opam switch create [name] <version>~ will not* include compiler packages *flagged with ~avoid-version~ / ~deprecated~* in the generated invariant anymore, unless compiler flagged ~avoid-version~ / ~deprecated~ are the only ones available ([[https://github.com/ocaml/opam/pull/6494][#6494]])
  *Note: if you wish to use ~ocaml-system~, you can simply say it explicitly using ~opam switch create [name] ocaml-system~*

- :yarn: *~opam install --deps-only~ no longer requires unicity of package version* between the *request* and the *installed* packages. In other words, if you have ~pkg.1~ installed, installing the dependencies of ~pkg.2~ no longer removes ~pkg.1~ if the installed packages are compatible. This also allows to install dependencies of conflicting packages when their dependencies are compliant. ([[https://github.com/ocaml/opam/issues/6520][#6520]])

- :camel: GNU *~patch~* and the *~diff~* command are *no longer runtime dependencies*. Instead the OCaml ~patch~ library is used ([[https://github.com/ocaml/opam/issues/6019][#6019]], [[https://github.com/ocaml/opam/issues/6052][#6052]], [[https://github.com/ocaml/opam/issues/3782][#3782]], [[https://github.com/ocaml/setup-ocaml/pull/933][ocaml/setup-ocaml#933]])
  Doing this we've removed some rarely used features of GNU Patch such as the support of [[https://www.gnu.org/software/diffutils/manual/html_node/Example-Context.html][Context diffs]].
  The new implementation only supports [[https://www.gnu.org/software/diffutils/manual/html_node/Example-Unified.html][Unified diffs]] including the [[https://git-scm.com/docs/diff-format][git extended headers]], however file permission changes via said extended headers have no effect.

- :snowflake: Add *Nix support* for *external dependencies (depexts)* by adding support for stateless package managers ([[https://github.com/ocaml/opam/issues/5982][#5982]]). *Thanks to [[https://github.com/RyanGibb][@RyanGibb]] for this contribution*

- :cockroach: *Fix ~opam install <local_dir>~* with and without options like ~--deps-only~ or ~--show-action~ having *unexpected behaviours* ([[https://github.com/ocaml/opam/issues/6248][#6248]], [[https://github.com/ocaml/opam/issues/5567][#5567]]) such as:
  * reporting ~Nothing to do~ despite dependencies or package not being up-to-date
  * asking to install the wrong dependencies

- :window: The prebuilt *Windows binary now includes Cygwin's ~setup-x86_64.exe~* in the binary itself as *fallback* in case ~cygwin.com~ is inaccessible ([[https://github.com/ocaml/opam/issues/6538][#6538]]). Opam will also no longer fail if ~cygwin.com~ is inaccessible when checking for upgrades of ~setup-x86_64.exe~ ([[https://github.com/ocaml/opam/issues/6495][#6495]], [[https://github.com/ocaml/opam/issues/6474][#6474]])

- :ocean: Many more UI additions and improvements, bug fixes, …

:open_book: You can read our [[https://opam.ocaml.org/blog/opam-2-4-0/][blog post]] for the full list of important changes, and for even more details you can take a look at the [[https://github.com/ocaml/opam/releases/tag/2.4.0][release note]] or the [[https://github.com/ocaml/opam/blob/2.4.0/CHANGES][changelog]].

*** Try it!

The upgrade instructions are unchanged:

For Unix systems
#+begin_example
bash -c "sh <(curl -fsSL https://opam.ocaml.org/install.sh) --version 2.4.0"
#+end_example
or from PowerShell for Windows systems
#+begin_example
Invoke-Expression "& { $(Invoke-RestMethod https://opam.ocaml.org/install.ps1) } -Version 2.4.0"
#+end_example
Please report any issues to the [[https://github.com/ocaml/opam/issues][bug-tracker]].

Happy hacking,
<> <> The opam team <> <> :camel:

/I'd also like to personally give a special thanks to the whole haematology department of the NHS Greater Glasgow for making my continued existence and this release – in the state that it is – possible. Fighting cancer is not easy but it is much more bearable with great people <3/
      

** Kate later added


[NOTE] We have had reports of a regression in some cases when using [[https://opam.ocaml.org/doc/Manual.html#opamfield-pin-depends][~pin-depends~]]. We have a fix and we're planning to have 2.4.1 out in a couple days.
      



* x-ocaml, notebooks as a webcomponent
:PROPERTIES:
:CUSTOM_ID: 3
:END:
Archive: https://discuss.ocaml.org/t/ann-x-ocaml-notebooks-as-a-webcomponent/16996/1

** art-w announced


Dear internets,

I would like to share [[https://github.com/art-w/x-ocaml][~x-ocaml~]], a little project to make it easier to share executable OCaml examples on the web. To enable readers to experiment with the code, ~x-ocaml~ integrates the CodeMirror editor with the ~js_of_ocaml-toplevel~ interpreter, Merlin and OCamlformat. You only need to add the following in your html page to use it:

#+begin_src html
<script async
  src="https://cdn.jsdelivr.net/gh/art-w/x-ocaml.js@5/x-ocaml.js"
  src-worker="https://cdn.jsdelivr.net/gh/art-w/x-ocaml.js@5/x-ocaml.worker+effects.js"
></script>
#+end_src

This script will introduce a new HTML tag ~<x-ocaml>~ to present your OCaml code:

#+begin_src html
<x-ocaml>let it = "be"</x-ocaml>
#+end_src

The [[https://art-w.github.io/x-ocaml/][*online demo*]] shows a couple more examples and configuration options. In particular, there is a command-line tool in the [[https://github.com/art-w/x-ocaml][github repo]] to export OCaml libraries and load them into your page:

#+begin_example
$ x-ocaml --effects digestif.ocaml -o digestif.js
# then use <script async src="..." src-worker="..." src-load="digestif.js">
#+end_example

I believe this could be very useful in tutorials or documentation to showcase your favorite OCaml libraries.

While searching how to implement this, I discovered [[https://sketch.sh][sketch.sh]] which had so many good ideas and that we should use a lot more! My hope is that ~x-ocaml~ can provide a similar notebook experience for the rest of the web, by being easy to integrate in static webpages.

Besides the ~js_of_ocaml~ authors and the many OCaml playgrounds that have inspired this project, I would like to address some special thanks to:
- @patricoferris for the [[https://github.com/patricoferris/jsoo-code-mirror][~jsoo-code-mirror~]] bindings, and for the [[https://github.com/patricoferris/xocmd][~xocmd~]] tool to convert markdown files to use ~<x-ocaml>~ tags
- @vds for integrating Merlin with javascript and CodeMirror in [[https://github.com/voodoos/merlin-js][~merlin-js~]]
- @juloo for his assistance on the ocamlformat support
- @kayceesrk for reporting issues and requesting features which have made the tool a lot more robust and versatile! His blogpost [[https://kcsrk.info/ocaml/x-ocaml/blogging/2025/06/20/xocaml/]["Testing x-ocaml, OCaml notebooks as a WebComponent"]] also provides a longer example of what can be done with it (and the limitations you might run into)
      



* Dune dev meeting
:PROPERTIES:
:CUSTOM_ID: 4
:END:
Archive: https://discuss.ocaml.org/t/ann-dune-dev-meeting/14994/33

** Puneeth Chaganti announced


Hi everyone! :camel: 

We will hold our regular Dune dev meeting on *Wednesday, July, 23 at 9:00 CET*. As usual, the session will be one hour long.

Whether you are a maintainer, a regular contributor, a new joiner or just curious, you are welcome to join: these discussions are open! The goal of these meetings is to provide a place to discuss the ongoing work together and synchronize between the Dune developers :smile: 

*** :calendar: Agenda

The agenda is available on the[[https://github.com/ocaml/dune/wiki/dev-meeting-2025-07-23][ meeting dedicated page]]. Feel free to ask if you want to add more items in it.

*** :computer: Links

- Meeting link:[[https://us06web.zoom.us/j/85096877776?pwd=cWNhU1dHQ1ZNSjZuOUZCQ0h2by9Udz09][ zoom]]
- Calendar event:[[https://calendar.google.com/calendar/embed?src=c_5cd698df6784e385b1cdcdc1dbca18c061faa96959a04781566d304dc9ec7319%40group.calendar.google.com][ google calendar]]
- Wiki with information and previous notes: [[https://github.com/ocaml/dune/wiki][dune wiki on GitHub]]
      



* Lwt.6.0.0~alpha (direct-style)
:PROPERTIES:
:CUSTOM_ID: 5
:END:
Archive: https://discuss.ocaml.org/t/ann-lwt-6-0-0-alpha-direct-style/16972/26

** Deep in this thread, Raphaël Proust announced


version ~6.0.0~alpha01~ is now ready (https://github.com/ocaml/opam-repository/pull/28222)

Anyone able to test the release on their existing code, I'd welcome the feedback: does it work? There shouldn't be breakages but then there might. If you are not sure how to test or what to test, don't hesitate to ask (on here or via dm or via discord).
      



* Other OCaml News
:PROPERTIES:
:CUSTOM_ID: 6
:END:
** From the ocaml.org blog


Here are links from many OCaml blogs aggregated at [[https://ocaml.org/blog/][the ocaml.org blog]].

- [[https://ocaml.org/events][Upcoming OCaml Events]]
- [[https://batsov.com/articles/2025/07/19/learning-ocaml-having-fun-with-the-fun-module/][Learning OCaml: Having Fun with the Fun Module]]
- [[https://batsov.com/articles/2025/07/19/learning-ocaml-numerical-type-conversions/][Learning OCaml: Numerical Type Conversions]]
- [[https://anil.recoil.org/notes/cresting-the-ocaml-ai-hump][Cresting the OCaml AI humps]]
- [[https://www.dra27.uk/blog/platform/2025/07/18/where-to-tap.html][Sometimes it’s just knowing where to tap]]
- [[https://www.dra27.uk/blog/platform/2025/07/18/through-a-glass-darkly.html][Into the sunset or into the dawn?]]
- [[https://www.dra27.uk/blog/platform/2025/07/17/fireworks.html][Fireworks and things]]
- [[https://anil.recoil.org/notes/kyutai-streaming-voice-mlx][Using Kyutai's low latency audio models on macOS in one command]]
- [[https://jon.recoil.org/blog/2025/07/odoc-3-live-on-ocaml-org.html][Odoc 3 is live on OCaml.org!]]
      



* Old CWN
:PROPERTIES:
:UNNUMBERED: t
:END:

If you happen to miss a CWN, you can [[mailto:alan.schmitt@polytechnique.org][send me a message]] and I'll mail it to you, or go take a look at [[https://alan.petitepomme.net/cwn/][the archive]] or the [[https://alan.petitepomme.net/cwn/cwn.rss][RSS feed of the archives]].

If you also wish to receive it every week by mail, you may subscribe to the [[https://sympa.inria.fr/sympa/info/caml-list][caml-list]].

#+BEGIN_authorname
[[https://alan.petitepomme.net/][Alan Schmitt]]
#+END_authorname
