<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-06-23 Tue 14:47 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2020.06.16.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2020.06.30.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of June 16 to 23, 2020.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">Alt-Ergo-free 2.2.0 release</a></li>
<li><a href="#2">Ocaml-migrate-parsetree 2.0.0</a></li>
<li><a href="#3">Free culture OCaml book progress</a></li>
<li><a href="#4">OCaml 4.11.0, third alpha release with RISC-V backend</a></li>
<li><a href="#5">Roll your own bubblewrap sandboxing scripts in OCaml</a></li>
<li><a href="#6">Second release of Sek</a></li>
<li><a href="#7">Tools or pointers for control flow analysis of OCaml code?</a></li>
<li><a href="#8">A new build system API in Dune: please send thoughts, ideas and wishes</a></li>
<li><a href="#9">Other OCaml News</a></li>
<li><a href="#org8c3dcba">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-org8508888" class="outline-2">
<h2 id="1"><a id="org8508888"></a>Alt-Ergo-free 2.2.0 release</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-alt-ergo-free-2-2-0-release/5988/1">https://discuss.ocaml.org/t/ann-alt-ergo-free-2-2-0-release/5988/1</a>
</p>
</div>

<div id="outline-container-org32f7b77" class="outline-3">
<h3 id="org32f7b77">Albin Coquereau announced</h3>
<div class="outline-text-3" id="text-org32f7b77">
<p>
As discussed with our users and both our academic and industrial partners in the <a href="https://alt-ergo.ocamlpro.com/#club">Alt-Ergo Users'
Club</a>, we are pleased to announce the new free release of Alt-Ergo.
Alt-Ergo 2.2.0 is now under the Apache license.
The <code>alt-ergo-free</code> package has been updated in the opam repository to this version as well.
</p>

<p>
You can find the source archive, changes and more on the <a href="https://alt-ergo.ocamlpro.com/#releases">Alt-Ergo website</a>.
The main changes are the new SAT solver (from Alt-Ergo 2.1.0) and the experimental support for the SMT-lib standard
(introduced in Alt-Ergo 2.2.0)
</p>
</div>
</div>
</div>




<div id="outline-container-orge90ee6c" class="outline-2">
<h2 id="2"><a id="orge90ee6c"></a>Ocaml-migrate-parsetree 2.0.0</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-migrate-parsetree-2-0-0/5991/1">https://discuss.ocaml.org/t/ocaml-migrate-parsetree-2-0-0/5991/1</a>
</p>
</div>

<div id="outline-container-orgeae3db3" class="outline-3">
<h3 id="orgeae3db3">Jérémie Dimino announced</h3>
<div class="outline-text-3" id="text-orgeae3db3">
<p>
We are preparing a 2.0.0 release of <a href="https://github.com/ocaml-ppx/ocaml-migrate-parsetree/">ocaml-migrate-parsetree</a>. This new major release will simplify the project
to its core purpose, which is to provide migration functions between the various versions of the parsetree types.
Everything else, such as the driver or the per-version copy of various modules from the compiler distribution will go
away. This will have an impact for projects that are currently using these functionalities and this post describes
what we think such projects should do and how we plan to help.
</p>

<p>
The motivation for this change is to simplify ocaml-migrate-parsetree and make it easier to maintain. The core
functionality it provides is valuable and worth maintaining, however right now the project is way too big and
difficult to maintain. Going through compiler upgrades has been unpleasant and difficult. And because of this, bugs
of the segfault kind have accidentally been introduced and detected much later.
</p>

<p>
Once we have dropped everything that doesn't fit in the purpose of the project, what will remain will be pretty
simple, coherent and easy to maintain.
</p>
</div>

<div id="outline-container-org7d620d9" class="outline-4">
<h4 id="org7d620d9">What is the replacement?</h4>
<div class="outline-text-4" id="text-org7d620d9">
<p>
At the moment, ocaml-migrate-parsetree offers one way of writing ppx rewriters. For instance, one might write the
following to create a ppx rewriter with ocaml-migrate-parsetree:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Migrate_parsetree</span>
<span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Ast_404</span>

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">structure</span> = ...
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">signature</span> = ...

<span style="color: #000000; font-weight: bold;">let</span> () =
  <span style="color: #228b22;">Driver.</span>register <span style="color: #008b8b;">~name</span>:<span style="color: #8b2252;">"ppx_cstruct"</span> <span style="color: #228b22;">Versions.</span>ocaml_404
    (<span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">_config</span> <span style="color: #a0522d;">_cookies</span> -&gt; {default_mapper <span style="color: #a020f0;">with</span> structure; signature})
</pre>
</div>

<p>
Following the simplification, the above code will break for at least two reasons:
</p>

<ul class="org-ul">
<li>the <code>Migrate_parsetree.Driver</code> will be gone</li>
<li>the <code>default_mapper</code> and <code>mapper</code> type coming from <code>Ast_404.Ast_mapper</code> will be gone</li>
</ul>

<p>
As a result, ocaml-migrate-parsetree itself will no longer be enough to write ppx rewriters.
</p>

<p>
We recommend that ppx rewriters using the ocaml-migrate-parsetree API switch to <a href="https://github.com/ocaml-ppx/ppxlib/">ppxlib</a>.  The purpose of
ppxlib is to provide a good API for ppx rewriters with in particular a simple and good composition model, so it seems
like a natural choice. Since ppxlib will take a more central place in the ecosystem, we are currently addressing the
more controversial aspects of this library. For instance, we are dropping the dependency on Base.
</p>
</div>
</div>

<div id="outline-container-org6bf7d48" class="outline-4">
<h4 id="org6bf7d48">Organising the transition</h4>
<div class="outline-text-4" id="text-org6bf7d48">
<p>
The following ticket is the meta issue tracking the preparation of the 2.0.0 release:
</p>

<p>
<a href="https://github.com/ocaml-ppx/ocaml-migrate-parsetree/issues/101">https://github.com/ocaml-ppx/ocaml-migrate-parsetree/issues/101</a>
</p>

<p>
To make this transition smoother, we are planning to help with the porting effort. We have prepared <a href="https://github.com/ocaml-ppx/ppxlib/issues?q=is:open+is:issue+label:port-to-ppxlib">a list of ppx
rewriters to port to ppxlib</a>.  This list is not exhaustive and in particular excludes ppx rewriters that have
no reverse dependencies in opam in order to keep this work manageable for us.  In any case, help porting projects to
ppxlib would be very much appreciated.
</p>

<p>
If you would like to help porting a project, please mention on the corresponding ticket from the list that you are
looking at porting this project so that we know someone is working on it. If you would like to port a project that is
not on this list, you should feel free to open a new ticket and mention that you are porting this project. In this
case, please make sure to add the label <code>port-to-ppxlib</code> to the issue.
</p>

<p>
Once we have successfully converted a few projects, we will proceed with the release of ocaml-migrate-parsetree 2.0.0
and a compatible ppxlib release.  At this point, most existing reverse dependencies of ocaml-migrate-parsetree will
be marked as incompatible with ocaml-migrate-parsetree 2.0.0 and we will continue porting existing projects to ppxlib
to gradually make the world compatible with ocaml-migrate-parsetree 2.0.0.
</p>
</div>
</div>

<div id="outline-container-orgf99f1b1" class="outline-4">
<h4 id="orgf99f1b1">Consequences for other ppx libraries</h4>
<div class="outline-text-4" id="text-orgf99f1b1">
</div>
<ul class="org-ul">
<li><a id="org58b490c"></a>ppx_deriving<br />
<div class="outline-text-5" id="text-org58b490c">
<p>
The master of <a href="https://github.com/ocaml-ppx/ppx_deriving">ppx_deriving</a> is now using ppxlib, so there shouldn't be much to do to make ppx_deriving compatible with ocaml-migrate-parsetree 2.0.0.
</p>
</div>
</li>

<li><a id="org8537f4b"></a>ppx_tools_versioned<br />
<div class="outline-text-5" id="text-org8537f4b">
<p>
<a href="https://github.com/ocaml-ppx/ppx_tools_versioned">ppx_tools_versioned</a> will no longer have a reason to exist in this new state of the world and so will stop
being updated.
</p>
</div>
</li>
</ul>
</div>
</div>


<div id="outline-container-orge2542b6" class="outline-3">
<h3 id="orge2542b6">Nicolás Ojeda Bär asked and Jérémie Dimino replied</h3>
<div class="outline-text-3" id="text-orge2542b6">
<blockquote>
<p>
what is the story with dune? Right now, dune “just works” with ppx rewriters based on OMP, what will happen after
the announced evolutions?
</p>
</blockquote>

<p>
OMP won't provide a driver anymore. To write a ppx rewriter that is compatible with Dune, you will have to use
ppxlib. You could also write your own driver, thought I wouldn't recommend doing that; we are trying to reduce the
number of APIs rather that increase it :)
</p>

<blockquote>
<p>
Will the planned updates to ppxlib (getting rid of base, etc.) be done in time for the release of OMP 2.0.0?
</p>
</blockquote>

<p>
Yes. @ceastlund started  working on dropping the Base dependency and since it will be the same group of people doing
the ppxlib and omp changes, we will make sure that there is a new version of ppxlib available on time. We plan to do
things in this order:
</p>

<ul class="org-ul">
<li>prepare OMP2 and an updated ppxlib</li>
<li>add upper bounds to all OMP reverse dependencies in the opam repository</li>
<li>release OMP2</li>
<li>release an updated ppxlib shortly after OMP2 is merged in the opam repository</li>
</ul>

<blockquote>
<p>
Would it be possible to make a minimal version of ppxlib/OMP for those that are willing to write a ppx rewriter
against compiler-libs directly and do not need/want the rest of the library, but still want their rewriters to be
compatible with dune?
</p>
</blockquote>

<p>
Technically yes.  That said, I wouldn't recommend going down this route. Once most of the dependencies of ppxlib have
been dropped and OMP has been simplified, the resulting OMP+ppxlib combo will be pretty lean. If there are aspects of
ppxlib that would prevent people from switching to it, we are happy to consider those.
</p>

<p>
Once we have finished our work on simplifying the ppx ecosystem, I also  expect that the bare ppx API in the compiler
will disappear, so I would definitely not recommend to use it.
</p>

<blockquote>
<p>
Could you say a few words on how the evolution of ppxlib is related to ppx 1?
</p>
</blockquote>

<p>
Sure. The ppx project is part of <a href="https://discuss.ocaml.org/t/the-future-of-ppx/3766">this work</a>. Our plan was to
move to a world like this:
</p>

<ul class="org-ul">
<li>the compiler offers a minimal stable Astlib library, using a dynamic AST</li>
<li>the ppx project is written only against Astlib and not the rest of compiler-libs</li>
<li>ppx has a stable API</li>
<li>ppx rewriters are written against the ppx API</li>
</ul>

<p>
In this world, existing ppx rewriters are compatible with trunk at all times. Moreover, when a new compiler is
released:
</p>

<ul class="org-ul">
<li>existing released ppx rewriters are immediately compatible with the new compiler</li>
<li>one can use existing ppx rewriters and the new features of the language</li>
</ul>

<p>
in other words, you can in theory release a ppx rewriters once and never touch it again. The trade-off is that it
uses a technology that is quite complex and users don't have direct access to the parsetree types.
</p>

<p>
However, we don't expect everyone to switch to this API at once. So we will need a transition period where the
existing APIs are implemented as shims on top of the new ppx API. The more ppx APIs we have to consider and the more
difficult this work will be for us. So one can see this work of simplifying OMP and ppxlib as preparatory work.
</p>

<p>
Now, all of the above was our original plan. We are now considering an alternative plan that would lead to a
technically simpler system that is easier to reason about. The new plan would lead to the following world:
</p>

<ul class="org-ul">
<li>the compiler offers a minimal stable Astlib library, using the OMP technology</li>
<li>ppxlib is written only against Astlib and not the rest of compiler-libs</li>
<li>ppx rewriters are written against ppxlib</li>
</ul>

<p>
In this world, existing ppx rewriters are compatible with trunk at all times. Moreover, when a new compiler is
released:
</p>

<ul class="org-ul">
<li>existing released ppx rewriters are immediately compatible with the new compiler</li>
<li>one cannot use existing ppx rewriters and the new features of the language until:
<ul class="org-ul">
<li>ppxlib has been updated to use the new parsetree types</li>
<li>the subset of ppx rewriters that are broken by this change have been updated as well</li>
</ul></li>
</ul>

<p>
This new plan requires updating potentially many packages after each new compiler release. We know that from a
technical point of view this is relatively easy. In fact, we do that all the time at Jane Street: when we bump the
version of the AST, one single person sit downs and updates all the ppx rewriters at once, which doesn't take very
long. In the open-source world, this was historically impossible, though now that most OCaml projects are using dune
this is becoming more realistic; we can create one big dune workspace with all the ppx rewriters and update them all
at once. That said, there is a social component to this approach since the various packages are owned by various
groups of people and even if one person does all the work, we still need various groups of people to take action to
merge PRs and make new releases. So we plan to try this idea with one or two compiler release. In fact, @NathanReb is
experimenting with this idea as we speak for the 4.10 upgrade of ppxlib. If this all works out well, we'll continue
with this new plan. Otherwise, we'll go back to the original plan.
</p>
</div>
</div>


<div id="outline-container-orgd60a227" class="outline-3">
<h3 id="orgd60a227">Anton Kochkov added</h3>
<div class="outline-text-3" id="text-orgd60a227">
<p>
There is also <a href="https://github.com/ocaml-ppx/ppx_deriving_protobuf/issues/28">ppx_deriving_protobuf #28</a> for porting
to ppxlib.
</p>
</div>
</div>
</div>




<div id="outline-container-org6281fe3" class="outline-2">
<h2 id="3"><a id="org6281fe3"></a>Free culture OCaml book progress</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/free-culture-ocaml-book-progress/5994/1">https://discuss.ocaml.org/t/free-culture-ocaml-book-progress/5994/1</a>
</p>
</div>

<div id="outline-container-orga5aa11f" class="outline-3">
<h3 id="orga5aa11f">Daniil Baturin announced</h3>
<div class="outline-text-3" id="text-orga5aa11f">
<p>
You may (or may not) remember that I've been working on a free culture OCaml book, under "Unreal world OCaml" working
title.
</p>

<p>
Zeroth, it's now named "OCaml from the ground up". I hope that title tells what I want the book to be.
"Unreal world OCaml" clearly wasn't a title it could use forever.
I briefly considered naming it "Elements of OCaml", but the Bourbaki reference is a bit too obscure and it sounds
strange (not that their "Elements of Mathematic" doesn't sound strange to begin with&#x2026;).
</p>

<p>
First, it has a proper home now at <a href="https://ocamlbook.org/">https://ocamlbook.org/</a>
The old <a href="https://ocaml-book.baturin.org">https://ocaml-book.baturin.org</a> URL redirects to it now. It's hosted on Netlify for better availability. From
my quick research, Netlify doesn't do anything obviously evil, but if I missed something, let me know.
</p>

<p>
Second, there's now CI setup, so the live version is going to be in sync with the source.
Examples in "(triple backtick)ocaml" blocks are automatically typechecked (with <code>ocamlc -stop-after typing</code>). These
fail the build if they fail to typecheck.
Intentionally invalid examples should be in "(triple backtick)invalid-ocaml" blocks instead—those are run through
syntax highlighting but excluded from type checking.
</p>

<p>
Content-wise, I've made some improvements to the Records and References chapter.
I'll keep posting progress here in the thread if no one objects.
</p>
</div>
</div>
</div>




<div id="outline-container-orge882d17" class="outline-2">
<h2 id="4"><a id="orge882d17"></a>OCaml 4.11.0, third alpha release with RISC-V backend</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-4-11-0-third-alpha-release-with-risc-v-backend/5997/1">https://discuss.ocaml.org/t/ocaml-4-11-0-third-alpha-release-with-risc-v-backend/5997/1</a>
</p>
</div>

<div id="outline-container-org5a734fe" class="outline-3">
<h3 id="org5a734fe">octachron announced</h3>
<div class="outline-text-3" id="text-org5a734fe">
<p>
A new alpha version of OCaml 4.11.0 has been published.
</p>

<p>
Exceptionally, this third alpha release integrates a new exciting feature: a native-code backend for RISC-V.
Since this new backend cannot affect negatively other architecture, the feature
has been backported to the 4.11 branch.
</p>

<p>
Beyond this important change, the full change list compared to the second alpha
is rather small:
</p>

<ul class="org-ul">
<li><b>new feature</b> <a href="https://github.com/ocaml/ocaml/issues/9440">9440</a>: Add RISC-V RV64G native-code backend. (Nicolás Ojeda Bär, review by Xavier Leroy and Gabriel Scherer)</li>

<li><b>additional fixes</b> <a href="https://github.com/ocaml/ocaml/issues/8920">8920</a>, <a href="https://github.com/ocaml/ocaml/issues/9238">9238</a>, <a href="https://github.com/ocaml/ocaml/issues/9239">9239</a>, <a href="https://github.com/ocaml/ocaml/issues/9254">9254</a>, <a href="https://github.com/ocaml/ocaml/issues/9458">9458</a>: New API for statistical memory profiling in Memprof.Gc. The new version does no longer use ephemerons and allows registering callbacks for promotion and deallocation of memory blocks. The new API no longer gives the block tags to the allocation callback.</li>

<li><a href="https://github.com/ocaml/ocaml/issues/7520">7520</a>, <a href="https://github.com/ocaml/ocaml/issues/9547">9547</a>: Odd behaviour of refutation cases with polymorphic variants (Jacques Garrigue, report by Leo White, reviews by Gabriel Scherer and Leo)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/7741">7741</a>, <a href="https://github.com/ocaml/ocaml/issues/9645">9645</a>: Failure to report escaping type variable (Jacques Garrigue, report by Gabriel Radanne, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9623">9623</a>, <a href="https://github.com/ocaml/ocaml/issues/9642">9642</a>: fix typing environments in Typedecl.transl_with_constraint (Gabriel Scherer, review by Jacques Garrigue and Leo White, report by Hugo Heuzard)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9610">9610</a>: manual, C FFI: naked pointers are deprecated, detail the forward-compatible options for handling out-of-heap pointers. (Xavier Leroy, review by Mark Shinwell, David Allsopp and Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9618">9618</a>: clarify the Format documentation on the margin and maximum indentation limit
(Florian Angeletti, review by Josh Berdine)</li>
</ul>

<p>
We are expecting this third alpha release to be the last alpha release.
</p>

<p>
The compiler can be installed as an OPAM switch with one of the following commands
</p>
<div class="org-src-container">
<pre class="src src-shell">opam switch create ocaml-variants.4.11.0+alpha3 --repositories=default,<span style="color: #a0522d;">beta</span>=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>
</div>
<p>
or
</p>
<div class="org-src-container">
<pre class="src src-shell">opam switch create ocaml-variants.4.11.0+alpha3+&lt;VARIANT&gt; --repositories=default,<span style="color: #a0522d;">beta</span>=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>
</div>
<p>
where &lt;VARIANT&gt; is replaced with one of these: afl, flambda, fp, fp+flambda
</p>

<p>
The source code for the alpha is also available at these addresses:
</p>

<p>
<a href="https://github.com/ocaml/ocaml/archive/4.11.0+alpha3.tar.gz">https://github.com/ocaml/ocaml/archive/4.11.0+alpha3.tar.gz</a> <br />
<a href="https://caml.inria.fr/pub/distrib/ocaml-4.11/ocaml-4.11.0+alpha3.tar.gz">https://caml.inria.fr/pub/distrib/ocaml-4.11/ocaml-4.11.0+alpha3.tar.gz</a>
</p>

<p>
If you find any bugs, please report them here:
 <a href="https://github.com/ocaml/ocaml/issues">https://github.com/ocaml/ocaml/issues</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org4ae639b" class="outline-2">
<h2 id="5"><a id="org4ae639b"></a>Roll your own bubblewrap sandboxing scripts in OCaml</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/roll-your-own-bubblewrap-sandboxing-scripts-in-ocaml/6003/1">https://discuss.ocaml.org/t/roll-your-own-bubblewrap-sandboxing-scripts-in-ocaml/6003/1</a>
</p>
</div>

<div id="outline-container-org9f65b46" class="outline-3">
<h3 id="org9f65b46">Darren announced</h3>
<div class="outline-text-3" id="text-org9f65b46">
<p>
I recently used a small bit of OCaml code to help generate bash scripts for sandboxing programs via bubblewrap and
have found the suite to be fairly useful and saved a fair bit of typing.
</p>

<p>
The repo: <a href="https://github.com/darrenldl/sandboxing">https://github.com/darrenldl/sandboxing</a>
</p>

<p>
<b>Note</b>: This is not a well packaged project right now, and has no versioning. I suggest forking the repo if you
actually plan on using it. Might do proper packaging work at some point, however.
</p>
</div>

<div id="outline-container-orgbc3ade1" class="outline-4">
<h4 id="orgbc3ade1">Syscall filter handling</h4>
<div class="outline-text-4" id="text-orgbc3ade1">
<p>
Seccomp BPF compilation (for syscall filter) can also be handled via the suite in OCaml's side. (If you've seen this
project over at Discord before, then this part is the new addtion that was previously absent)
</p>

<ul class="org-ul">
<li>Context: right now bubblewrap only allows specification of syscall filtering via a compiled BPF file, this is handled by the suite as follows: <code>OCaml code --generates--&gt; C code --generates--&gt; BPF filter</code></li>
</ul>
</div>
</div>

<div id="outline-container-orga94243a" class="outline-4">
<h4 id="orga94243a">Firefox example</h4>
<div class="outline-text-4" id="text-orga94243a">
<p>
Some code for firefox is as follows
</p>
</div>

<ul class="org-ul">
<li><a id="org87d183b"></a>OCaml side<br />
<div class="outline-text-5" id="text-org87d183b">
<p>
Firefox profile specification in <code>bw-script-gen/src/profiles.ml</code>
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">make_firefox_profile</span> ~(<span style="color: #a0522d;">suffix</span> :<span style="color: #228b22;"> string option</span>) :<span style="color: #228b22;"> profile </span>=
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">name</span> = <span style="color: #a020f0;">match</span> suffix <span style="color: #a020f0;">with</span> <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; <span style="color: #8b2252;">"firefox"</span> | <span style="color: #000000; background-color: #ffffff;">Some</span> s -&gt; <span style="color: #8b2252;">"firefox-"</span> <span style="color: #a52a2a;">^</span> s <span style="color: #000000; font-weight: bold;">in</span>
  {
    name;
    cmd = <span style="color: #8b2252;">"/usr/lib/firefox/firefox --ProfileManager"</span>;
    home_jail_dir = <span style="color: #000000; background-color: #ffffff;">Some</span> name;
    syscall_blacklist = default_syscall_blacklist;
    args =
      usr_share_common
      <span style="color: #a52a2a;">@</span> usr_lib_lib64_bin_common
      <span style="color: #a52a2a;">@</span> etc_common
      <span style="color: #a52a2a;">@</span> proc_dev_common
      <span style="color: #a52a2a;">@</span> tmp_run_common
      <span style="color: #a52a2a;">@</span> sound_common
      <span style="color: #a52a2a;">@</span> wayland_common
      <span style="color: #a52a2a;">@</span> dconf_common
      <span style="color: #a52a2a;">@</span> dbus_common
      <span style="color: #a52a2a;">@</span> set_up_jail_home <span style="color: #008b8b;">~tmp</span>:<span style="color: #008b8b;">false</span> ~name
      <span style="color: #a52a2a;">@</span> [
        <span style="color: #000000; background-color: #ffffff;">Bind</span> (<span style="color: #8b2252;">"$HOME/.mozilla"</span>, <span style="color: #000000; background-color: #ffffff;">Some</span> <span style="color: #8b2252;">"/home/jail/.mozilla"</span>);
        <span style="color: #000000; background-color: #ffffff;">Bind</span> (<span style="color: #8b2252;">"$HOME/.cache/mozilla"</span>, <span style="color: #000000; background-color: #ffffff;">Some</span> <span style="color: #8b2252;">"/home/jail/.cache/mozilla"</span>);
        <span style="color: #000000; background-color: #ffffff;">Unsetenv</span> <span style="color: #8b2252;">"DBUS_SESSION_BUS_ADDRESS"</span>;
        <span style="color: #000000; background-color: #ffffff;">Setenv</span> (<span style="color: #8b2252;">"SHELL"</span>, <span style="color: #8b2252;">"/bin/false"</span>);
        <span style="color: #000000; background-color: #ffffff;">Setenv</span> (<span style="color: #8b2252;">"USER"</span>, <span style="color: #8b2252;">"nobody"</span>);
        <span style="color: #000000; background-color: #ffffff;">Setenv</span> (<span style="color: #8b2252;">"LOGNAME"</span>, <span style="color: #8b2252;">"nobody"</span>);
        <span style="color: #000000; background-color: #ffffff;">Setenv</span> (<span style="color: #8b2252;">"MOZ_ENABLE_WAYLAND"</span>, <span style="color: #8b2252;">"1"</span>);
        <span style="color: #000000; background-color: #ffffff;">Hostname</span> <span style="color: #8b2252;">"jail"</span>;
        <span style="color: #000000; background-color: #ffffff;">Unshare_user</span>;
        <span style="color: #000000; background-color: #ffffff;">Unshare_pid</span>;
        <span style="color: #000000; background-color: #ffffff;">Unshare_uts</span>;
        <span style="color: #000000; background-color: #ffffff;">Unshare_ipc</span>;
        <span style="color: #000000; background-color: #ffffff;">Unshare_cgroup</span>;
        <span style="color: #000000; background-color: #ffffff;">New_session</span>;
      ];
  }
</pre>
</div>
</div>
</li>

<li><a id="org0e10505"></a>C code<br />
<div class="outline-text-5" id="text-org0e10505">
<p>
The generated C code for compiling the BPF file can be seen here:
<a href="https://github.com/darrenldl/sandboxing/blob/master/seccomp-bpf/firefox.c">https://github.com/darrenldl/sandboxing/blob/master/seccomp-bpf/firefox.c</a>
</p>
</div>
</li>

<li><a id="org2ceb91f"></a>Bash script<br />
<div class="outline-text-5" id="text-org2ceb91f">
<p>
The generated bash script:
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #b22222;">#</span><span style="color: #b22222;">!/usr/bin/</span><span style="color: #a020f0;">env</span><span style="color: #b22222;"> bash</span>

<span style="color: #483d8b;">set</span> -euxo pipefail

gcc <span style="color: #8b2252;">"$(dirname $0)"</span>/../seccomp-bpf/firefox.c -lseccomp -o <span style="color: #8b2252;">"$(dirname $0)"</span>/../seccomp-bpf/firefox.exe
<span style="color: #8b2252;">"$(dirname $0)"</span>/../seccomp-bpf/firefox.exe
mv firefox_seccomp_filter.bpf <span style="color: #8b2252;">"$(dirname $0)"</span>/../seccomp-bpf

mkdir -p <span style="color: #8b2252;">"$HOME/jails/firefox"</span>
mkdir -p <span style="color: #8b2252;">"$HOME/jails/firefox/Downloads"</span>

bwrap <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/share/X11"</span> <span style="color: #8b2252;">"/usr/share/X11"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/share/icons"</span> <span style="color: #8b2252;">"/usr/share/icons"</span> <span style="color: #8b2252;">\</span>
  --ro-bind-try <span style="color: #8b2252;">"/usr/share/fontconfig"</span> <span style="color: #8b2252;">"/usr/share/fontconfig"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/share/fonts"</span> <span style="color: #8b2252;">"/usr/share/fonts"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/share/mime"</span> <span style="color: #8b2252;">"/usr/share/mime"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/share/ca-certificates"</span> <span style="color: #8b2252;">"/usr/share/ca-certificates"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/share/glib-2.0"</span> <span style="color: #8b2252;">"/usr/share/glib-2.0"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/lib"</span> <span style="color: #8b2252;">"/usr/lib"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/lib64"</span> <span style="color: #8b2252;">"/usr/lib64"</span> <span style="color: #8b2252;">\</span>
  --tmpfs <span style="color: #8b2252;">"/usr/lib/modules"</span> <span style="color: #8b2252;">\</span>
  --tmpfs <span style="color: #8b2252;">"/usr/lib/systemd"</span> <span style="color: #8b2252;">\</span>
  --symlink <span style="color: #8b2252;">"/usr/lib"</span> <span style="color: #8b2252;">"/lib"</span> <span style="color: #8b2252;">\</span>
  --symlink <span style="color: #8b2252;">"/usr/lib64"</span> <span style="color: #8b2252;">"/lib64"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/usr/bin"</span> <span style="color: #8b2252;">"/usr/bin"</span> <span style="color: #8b2252;">\</span>
  --symlink <span style="color: #8b2252;">"/usr/bin"</span> <span style="color: #8b2252;">"/bin"</span> <span style="color: #8b2252;">\</span>
  --symlink <span style="color: #8b2252;">"/usr/bin"</span> <span style="color: #8b2252;">"/sbin"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/etc/fonts"</span> <span style="color: #8b2252;">"/etc/fonts"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/etc/machine-id"</span> <span style="color: #8b2252;">"/etc/machine-id"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/etc/resolv.conf"</span> <span style="color: #8b2252;">"/etc/resolv.conf"</span> <span style="color: #8b2252;">\</span>
  --proc <span style="color: #8b2252;">"/proc"</span> <span style="color: #8b2252;">\</span>
  --dev <span style="color: #8b2252;">"/dev"</span> <span style="color: #8b2252;">\</span>
  --tmpfs <span style="color: #8b2252;">"/tmp"</span> <span style="color: #8b2252;">\</span>
  --tmpfs <span style="color: #8b2252;">"/run"</span> <span style="color: #8b2252;">\</span>
  --ro-bind-try <span style="color: #8b2252;">"/usr/share/gst-plugins-bad"</span> <span style="color: #8b2252;">"/usr/share/gst-plugins-bad"</span> <span style="color: #8b2252;">\</span>
  --ro-bind-try <span style="color: #8b2252;">"/usr/share/gst-plugins-base"</span> <span style="color: #8b2252;">"/usr/share/gst-plugins-base"</span> <span style="color: #8b2252;">\</span>
  --ro-bind-try <span style="color: #8b2252;">"/usr/share/gstreamer-1.0"</span> <span style="color: #8b2252;">"/usr/share/gstreamer-1.0"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/run/user/$UID/pulse"</span> <span style="color: #8b2252;">"/run/user/$UID/pulse"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/run/user/$UID/wayland-0"</span> <span style="color: #8b2252;">"/run/user/$UID/wayland-0"</span> <span style="color: #8b2252;">\</span>
  --setenv <span style="color: #8b2252;">"QT_QPA_PLATFORM"</span> <span style="color: #8b2252;">"wayland"</span> <span style="color: #8b2252;">\</span>
  --bind <span style="color: #8b2252;">"/run/user/$UID/dconf"</span> <span style="color: #8b2252;">"/run/user/$UID/dconf"</span> <span style="color: #8b2252;">\</span>
  --ro-bind <span style="color: #8b2252;">"/run/user/$UID/bus"</span> <span style="color: #8b2252;">"/run/user/$UID/bus"</span> <span style="color: #8b2252;">\</span>
  --bind <span style="color: #8b2252;">"$HOME/jails/firefox"</span> <span style="color: #8b2252;">"/home/jail"</span> <span style="color: #8b2252;">\</span>
  --setenv <span style="color: #8b2252;">"HOME"</span> <span style="color: #8b2252;">"/home/jail"</span> <span style="color: #8b2252;">\</span>
  --bind <span style="color: #8b2252;">"$HOME/.mozilla"</span> <span style="color: #8b2252;">"/home/jail/.mozilla"</span> <span style="color: #8b2252;">\</span>
  --bind <span style="color: #8b2252;">"$HOME/.cache/mozilla"</span> <span style="color: #8b2252;">"/home/jail/.cache/mozilla"</span> <span style="color: #8b2252;">\</span>
  --unsetenv <span style="color: #8b2252;">"DBUS_SESSION_BUS_ADDRESS"</span> <span style="color: #8b2252;">\</span>
  --setenv <span style="color: #8b2252;">"SHELL"</span> <span style="color: #8b2252;">"/bin/false"</span> <span style="color: #8b2252;">\</span>
  --setenv <span style="color: #8b2252;">"USER"</span> <span style="color: #8b2252;">"nobody"</span> <span style="color: #8b2252;">\</span>
  --setenv <span style="color: #8b2252;">"LOGNAME"</span> <span style="color: #8b2252;">"nobody"</span> <span style="color: #8b2252;">\</span>
  --setenv <span style="color: #8b2252;">"MOZ_ENABLE_WAYLAND"</span> <span style="color: #8b2252;">"1"</span> <span style="color: #8b2252;">\</span>
  --hostname <span style="color: #8b2252;">"jail"</span> <span style="color: #8b2252;">\</span>
  --unshare-user <span style="color: #8b2252;">\</span>
  --unshare-pid <span style="color: #8b2252;">\</span>
  --unshare-uts <span style="color: #8b2252;">\</span>
  --unshare-ipc <span style="color: #8b2252;">\</span>
  --unshare-cgroup <span style="color: #8b2252;">\</span>
  --new-session <span style="color: #8b2252;">\</span>
  --seccomp 10 10&lt;<span style="color: #8b2252;">"$(dirname $0)"</span>/../seccomp-bpf/firefox_seccomp_filter.bpf <span style="color: #8b2252;">\</span>
  /usr/lib/firefox/firefox --ProfileManager
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-orga8a52f8" class="outline-2">
<h2 id="6"><a id="orga8a52f8"></a>Second release of Sek</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2020-06/msg00023.html">https://sympa.inria.fr/sympa/arc/caml-list/2020-06/msg00023.html</a>
</p>
</div>

<div id="outline-container-org9825b45" class="outline-3">
<h3 id="org9825b45">François Pottier announced</h3>
<div class="outline-text-3" id="text-org9825b45">
<p>
We are pleased to announce the second release of Sek, an OCaml library that
offers an efficient implementation of sequences.
</p>

<p>
The library offers both ephemeral (mutable) sequences and persistent
(immutable) sequences, and offers constant-time conversions between these
flavors.
</p>

<p>
It supports all of the standard operations on stacks, queues, deques (e.g.
push, pop at either end), catenable sequences (concat, split), and random
access sequences (get, set).
</p>

<p>
The new release makes a large number of additions to the library's API.
The most significant one is the introduction of very efficient iterators
over ephemeral and persistent sequences. A full list of changes appears
below.
</p>

<p>
To install the new version of Sek, just type
</p>

<div class="org-src-container">
<pre class="src src-shell">opam update &amp;&amp; opam install sek.20200618
</pre>
</div>

<p>
The API documentation is online:
</p>

<p>
<a href="http://cambium.inria.fr/~fpottier/sek/doc/sek/Sek/">http://cambium.inria.fr/~fpottier/sek/doc/sek/Sek/</a>
</p>

<p>
Feedback is welcome!
</p>

<p>
Arthur Charguéraud and François Pottier
</p>
</div>

<div id="outline-container-org14632b7" class="outline-4">
<h4 id="org14632b7">2020/06/18</h4>
<div class="outline-text-4" id="text-org14632b7">
<ul class="org-ul">
<li>The time complexity of every operation is now documented as part of its specification.</li>

<li>New submodules <code>E.Iter</code> and <code>P.Iter</code>, which offer very efficient iterators over ephemeral and persistent sequences.</li>

<li>New functions <code>take</code>, <code>drop</code>, <code>sub</code>, <code>iter_segments</code>, <code>to_seq</code>, <code>of_list_segment</code>, <code>of_list</code>, <code>of_seq_segment</code>, <code>of_seq</code>, <code>find</code>, <code>find_opt</code>, <code>find_map</code>, <code>for_all</code>, <code>exists</code>, <code>mem</code>, <code>memq</code>, <code>map</code>, <code>mapi</code>, <code>rev</code>, <code>zip</code>, <code>unzip</code>, <code>filter</code>, <code>filter_map</code>, <code>partition</code>, <code>flatten</code>, <code>flatten_map</code>, <code>iter2</code>, <code>iter2_segments</code>, <code>fold_left2</code>, <code>fold_right2</code>, <code>map2</code>, <code>for_all2</code>, <code>exists2</code>, <code>equal</code>, <code>compare</code>, <code>sort</code>, <code>stable_sort</code>, <code>uniq</code>, <code>merge</code>, in ephemeral and persistent flavors.</li>

<li>New functions <code>E.fill</code> and <code>E.blit</code>.</li>

<li>New function <code>other</code> of type <code>side -&gt; side</code>.</li>

<li>New function <code>opposite</code> of type <code>direction -&gt; direction</code>.</li>

<li>New functor <code>SupplyDefault</code>, which allows supplying a default element once and for all so as to obtain a simpler API. Unfortunately, this requires choosing a fixed type of elements at the same time.</li>

<li>New submodules <code>Emulated.Array</code> and <code>Emulated.List</code>, which can be used as drop-in replacements for OCaml's standard <code>Array</code> and <code>List</code> modules.</li>

<li>New submodule <code>Segment</code>, which offers a few facilities for iterating over array segments.</li>

<li><b>Breaking change:</b> the default behavior of <code>E.copy</code> is now to produce a disjoint sequence in time <code>O(n)</code>. The previous behavior, which exploits sharing and produces a result in time <code>O(K)</code>, is obtained by invoking <code>E.copy ~mode:`Share</code>. The two copying modes have the same observable behavior; they differ only in their performance characteristics.</li>

<li><b>Breaking change:</b> the submodules <code>Queue</code> and <code>Stack</code> are renamed <code>Emulated.Queue</code> and <code>Emulated.Stack</code>. This makes it easier to avoid unintended shadowing of <code>Stdlib.Queue</code>, <code>Stdlib.Stack</code>, etc. It is now safe to use <code>open Sek</code>.</li>

<li><b>Breaking change:</b> the functor <code>Make</code> now takes just one structure as a parameter, instead of several structures. This is more pleasant and should make future evolution easier.</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-org0c379ff" class="outline-2">
<h2 id="7"><a id="org0c379ff"></a>Tools or pointers for control flow analysis of OCaml code?</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/tools-or-pointers-for-control-flow-analysis-of-ocaml-code/3805/4">https://discuss.ocaml.org/t/tools-or-pointers-for-control-flow-analysis-of-ocaml-code/3805/4</a>
</p>
</div>

<div id="outline-container-orgf991f17" class="outline-3">
<h3 id="orgf991f17">Anton Kochkov announced</h3>
<div class="outline-text-3" id="text-orgf991f17">
<p>
Just a heads up - there is a work going on adding OCaml to GitHub Semantic, see the corresponding PRs:
</p>
<ul class="org-ul">
<li><a href="https://github.com/tree-sitter/tree-sitter-ocaml/pull/37">https://github.com/tree-sitter/tree-sitter-ocaml/pull/37</a></li>
<li><a href="https://github.com/tree-sitter/haskell-tree-sitter/pull/283">https://github.com/tree-sitter/haskell-tree-sitter/pull/283</a></li>
</ul>

<p>
Once these are merged, it will be possible to start adding Semantic support itself.
</p>
</div>
</div>
</div>




<div id="outline-container-orgb95f2d4" class="outline-2">
<h2 id="8"><a id="orgb95f2d4"></a>A new build system API in Dune: please send thoughts, ideas and wishes</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/a-new-build-system-api-in-dune-please-send-thoughts-ideas-and-wishes/6012/1">https://discuss.ocaml.org/t/a-new-build-system-api-in-dune-please-send-thoughts-ideas-and-wishes/6012/1</a>
</p>
</div>

<div id="outline-container-org5c1a361" class="outline-3">
<h3 id="org5c1a361">Jérémie Dimino announced</h3>
<div class="outline-text-3" id="text-org5c1a361">
<p>
Do you have ideas about what a good build API should look like? Are there functionalities you always wished a build
system API would give you?
</p>

<p>
If yes, please write your thoughts, ideas or wishes on the following github ticket:
<a href="https://github.com/ocaml/dune/issues/3571">https://github.com/ocaml/dune/issues/3571</a>
</p>

<p>
To give a bit more context, the Dune team is preparing to design a new build system API. This API is what comes in
between the core build system engine and the build rules explaining how to go from .ml files to a final executable.
The main motivation for doing this work now is to help migrating from Jenga to Dune inside Jane Street. However,
eventually we would like to open this API to users, so that everyone can write their own set of build rules outside
of Dune. For this reason, we'd like to open the discussion to the community.
</p>
</div>
</div>
</div>




<div id="outline-container-org0439659" class="outline-2">
<h2 id="9"><a id="org0439659"></a>Other OCaml News</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-org585463b" class="outline-3">
<h3 id="org585463b">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-org585463b">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="https://blog.janestreet.com/really-low-latency-multipliers-and-cryptographic-puzzles/">Really low latency multipliers and cryptographic puzzles</a></li>
<li><a href="http://math.andrej.com/2020/06/22/cur-designing-a-less-devious-proof-assistant/">Every proof assistant: Cur - Designing a less devious proof assistant</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org8c3dcba" class="outline-2">
<h2 id="org8c3dcba">Old CWN</h2>
<div class="outline-text-2" id="text-org8c3dcba">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
