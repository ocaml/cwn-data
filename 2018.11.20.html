<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-11-20 Tue 09:06 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2018.11.13.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2018.11.27.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of November 13 to 20, 2018.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">New release of Menhir (20181113)</a></li>
<li><a href="#2">Modern Standard Library Documentation</a></li>
<li><a href="#3">2-year Postdoc Position on Frama-C/E-ACSL</a></li>
<li><a href="#4">Opam-ci: new distributions available</a></li>
<li><a href="#5">A WebAssembly backend for OCaml</a></li>
<li><a href="#6">Orsetto: structured data interchange languages (preview)</a></li>
<li><a href="#7">Mirage 3.3.0 released</a></li>
<li><a href="#8">Experimenting with a new opam repository release strategy for large libraries</a></li>
<li><a href="#9">Other OCaml News</a></li>
<li><a href="#org8ae14cc">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgb6b1d39" class="outline-2">
<h2 id="1"><a id="orgb6b1d39"></a>New release of Menhir (20181113)</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2018-11/msg00021.html">https://sympa.inria.fr/sympa/arc/caml-list/2018-11/msg00021.html</a>
</p>
</div>

<div id="outline-container-orgffba674" class="outline-3">
<h3 id="orgffba674">François Pottier announced</h3>
<div class="outline-text-3" id="text-orgffba674">
<p>
I would like to announce a new release of Menhir, 20181113. It is
available via opam (opam update &amp;&amp; opam install menhir).
</p>

<p>
<a href="https://gitlab.inria.fr/fpottier/menhir/blob/master/CHANGES.md">https://gitlab.inria.fr/fpottier/menhir/blob/master/CHANGES.md</a>
</p>

<p>
The main change is an experimental <b><b>new syntax</b></b> for rules. The new
syntax is
slightly more pleasant and powerful than the old syntax. The old syntax
remains available; the user chooses between the two syntaxes on a per-rule
basis.
</p>

<p>
This blog post presents a couple demos that use the new syntax:
</p>

<p>
<a href="http://gallium.inria.fr/blog/parser-construction-menhir-appetizers/">http://gallium.inria.fr/blog/parser-construction-menhir-appetizers/</a>
</p>

<p>
For expert users, I have also written a brief a summary of the differences
between the old and new syntaxes:
</p>

<p>
<a href="https://gitlab.inria.fr/fpottier/menhir/blob/master/doc/new-rule-syntax-summary.md">https://gitlab.inria.fr/fpottier/menhir/blob/master/doc/new-rule-syntax-summary.md</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org2653b2b" class="outline-2">
<h2 id="2"><a id="org2653b2b"></a>Modern Standard Library Documentation</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/modern-standard-library-documentation/2880/1">https://discuss.ocaml.org/t/modern-standard-library-documentation/2880/1</a>
</p>
</div>

<div id="outline-container-org0083abc" class="outline-3">
<h3 id="org0083abc">seadynamic8 announced</h3>
<div class="outline-text-3" id="text-org0083abc">
<p>
I'm new to learning OCaml and also new to this forum.
</p>

<p>
I am really enjoying learning OCaml, but there's a lot of quirks and weird things since I feel like a lot of things are in transition right now, but one thing that really bugged me was how outdated the docs on the standard library looked.
</p>

<p>
So I decided to re-theme it.  Here's my interpretation of it, based on Elixir docs:
<a href="https://www.streamingspring.com/ocaml/docs/">https://www.streamingspring.com/ocaml/docs/</a>
</p>

<p>
It has a sidebar to quickly navigate between modules and functions.  Also has a search bar.
</p>

<p>
Its a little heavy right now since all the docs are basically downloaded to front-end, but it works for now.  In the future, I may change it to be served from the server-side.
</p>

<p>
How it works right now is this:
</p>
<ul class="org-ul">
<li>I use <code>lambdasoup</code> to parse the original standard library</li>
<li>I use <code>atd-gen</code> to convert it into json</li>
<li>I use <code>bs-json</code> to read it back in on the front-end. (with a hack for compatibility)</li>
<li>I then use <code>bucklescript-tea</code> to display it.</li>
</ul>

<p>
I feel that I could rearrange the content better, but I'm still a bit confused on certain things and I'm still a bit confused on Functors and more advanced concepts.  I'll get to that a little later.
</p>

<p>
I think that the content itself could be improved, but as I'm a beginner, not really going to be working on that for now.
</p>

<p>
Anyways, I hope it helps some people.
</p>
</div>
</div>
</div>




<div id="outline-container-org7c96d6a" class="outline-2">
<h2 id="3"><a id="org7c96d6a"></a>2-year Postdoc Position on Frama-C/E-ACSL</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2018-11/msg00022.html">https://sympa.inria.fr/sympa/arc/caml-list/2018-11/msg00022.html</a>
</p>
</div>

<div id="outline-container-orgc1f6e14" class="outline-3">
<h3 id="orgc1f6e14">Julien Signoles announced</h3>
<div class="outline-text-3" id="text-orgc1f6e14">
<p>
The Software Reliability and Security Lab at CEA LIST (Paris Saclay,
France) is hiring a 2-year postdoctoral researcher to improve the Frama-C
runtime verification plug-in E-ACSL.
</p>

<p>
Frama-C is an opensource framework providing several analyzers for C code.
The analyzed programs can be annotated by formal specifications written in
the ACSL specification language. E-ACSL is one of the existing Frama-C
analyzers. It converts ACSL annotations into C code in order to verify
their validity at runtime, when the program is being executed.
</p>

<p>
The goal of this postdoctoral position is twofolds: on the one hand, the
postdoctoral researcher shall propose new compilation schemes to support
additional ACSL constructs; on the other hand (s)he shall adapt existing
compilation techniques or define new ones in order to optimize the
generated code for reducing the time overhead and the memory footprint of
the generated program. The work will be guided by and evaluated on case
studies providing by a few of our academic and industrial partners.
</p>

<p>
Knowledge in at least one of the following fields is required:
</p>
<ul class="org-ul">
<li>OCaml programming (at least, functional programming)</li>
<li>C programming</li>
<li>runtime verification</li>
<li>compilation</li>
<li>static analysis</li>
<li>semantics of programming languages</li>
<li>formal specification</li>
</ul>

<p>
A full description of the position is available online:
</p>

<p>
<a href="http://julien.signoles.free.fr/positions/postdoc-eacsl.pdf">http://julien.signoles.free.fr/positions/postdoc-eacsl.pdf</a>
</p>

<p>
Feel free to contact me for additional details,
Julien Signoles
</p>
</div>
</div>
</div>




<div id="outline-container-orgfbd3889" class="outline-2">
<h2 id="4"><a id="orgfbd3889"></a>Opam-ci: new distributions available</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/opam-ci-new-distributions-available/2899/1">https://discuss.ocaml.org/t/opam-ci-new-distributions-available/2899/1</a>
</p>
</div>

<div id="outline-container-org132e6c7" class="outline-3">
<h3 id="org132e6c7">Anil Madhavapeddy announced</h3>
<div class="outline-text-3" id="text-org132e6c7">
<p>
I've pushed a update to the Dockerfile generation on the <a href="https://hub.docker.com/r/ocaml/opam2">ocaml/opam2</a> Docker Hub images to account for newer distributions that have been released. We now build:
</p>

<ul class="org-ul">
<li><code>fedora-29</code> (alias <code>fedora</code>)</li>
<li><code>alpine-3.8</code> (alias <code>alpine</code>)</li>
<li><code>opensuse-15.0</code> (alias <code>opensuse</code>)</li>
<li><code>ubuntu-18.10</code> (alias <code>ubuntu</code>)</li>
</ul>

<p>
We now also publish the development version of the compiler to make for easier testing of trunk, via the <code>4.08</code> tag.
</p>

<p>
The full list can be found on the <a href="https://github.com/ocaml/infrastructure/wiki/Containers">containers infrastructure wiki</a> along with general instructions on how to use the Docker images.
</p>

<p>
The source code that generates these images is in <a href="https://github.com/avsm/ocaml-dockerfile">ocaml-dockerfile</a> for the library, <a href="https://github.com/ocaml/obi">obi</a> for the binaries.  If you are interested in adding a new Linux distribution, take a look at <a href="http://anil-code.recoil.org/ocaml-dockerfile/doc/dockerfile-opam/Dockerfile_distro/index.html">Dockerfile_distro</a> module for how to get started.
</p>
</div>
</div>
</div>




<div id="outline-container-org4529c87" class="outline-2">
<h2 id="5"><a id="org4529c87"></a>A WebAssembly backend for OCaml</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/a-webassembly-backend-for-ocaml/2898/1">https://discuss.ocaml.org/t/a-webassembly-backend-for-ocaml/2898/1</a>
</p>
</div>

<div id="outline-container-org66db01e" class="outline-3">
<h3 id="org66db01e">Sander announced</h3>
<div class="outline-text-3" id="text-org66db01e">
<p>
An article on the WebAssembly backend work done so far and what lies ahead:
</p>

<p>
<a href="https://medium.com/@sanderspies/a-webassembly-backend-for-ocaml-b78e7eeea9d5">https://medium.com/@sanderspies/a-webassembly-backend-for-ocaml-b78e7eeea9d5</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org356cf66" class="outline-2">
<h2 id="6"><a id="org356cf66"></a>Orsetto: structured data interchange languages (preview)</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-orsetto-structured-data-interchange-languages-preview/2913/1">https://discuss.ocaml.org/t/ann-orsetto-structured-data-interchange-languages-preview/2913/1</a>
</p>
</div>

<div id="outline-container-org5c9321f" class="outline-3">
<h3 id="org5c9321f">james woodyatt announced</h3>
<div class="outline-text-3" id="text-org5c9321f">
<p>
I'm nearing completion of the <span class="underline">~preview.1</span> release to OPAM of <a href="https://bitbucket.org/jhw/orsetto/"><span class="underline">Orsetto</span></a>, my toolkit for structured data interchange. Here's a brief summary of things left to do before I can commit to collaborating with the community and to engaging with feedback.
</p>

<ul class="org-ul">
<li>Build pipeline for continuous integration on Bitbucket.Org.</li>
<li>Generate documentation with <b>odoc</b> using the <b>Conjury</b> build system.</li>
<li>Consolidate <b>Cf_seq</b> as extension of the <b>Stdlib.Seq</b> module.</li>
<li>Minor last-minute improvements (e.g. leap second database, et cetera).</li>
<li>Removal of some experimental modules (e.g. <b>Cf_dyn</b> and <b>Cf_psys</b>).</li>
</ul>

<p>
Not sure when I'll have done this, but I'm hoping by the end of the month. I'm writing this now because I feel like I've gotten to the point where there isn't any major new logic that needs to be done before an initial preview can be posted. Anybody interested in my work who wants to comment before I post a preview to OPAM is invited to check out the sources at Bitbucket (linked above) and file issues.
</p>

<p>
p.s. I would have just added this as an update to the previous topic I filed about it, but <span class="underline">Discourse</span> is now refusing to let me reply more than three times to myself.
</p>
</div>
</div>
</div>




<div id="outline-container-org456b8de" class="outline-2">
<h2 id="7"><a id="org456b8de"></a>Mirage 3.3.0 released</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/mirage-3-3-0-released/2911/1">https://discuss.ocaml.org/t/mirage-3-3-0-released/2911/1</a>
</p>
</div>

<div id="outline-container-org0084f4c" class="outline-3">
<h3 id="org0084f4c">Hannes Mehnert announced</h3>
<div class="outline-text-3" id="text-org0084f4c">
<p>
It is my pleasure to announce <a href="https://mirage.io">MirageOS 3.3.0</a>, which was just merged into opam-repository! MirageOS 3.3.0 contains some breaking changes, see below for details.
</p>

<p>
What is MirageOS?<br />
MirageOS is a library operating system that constructs unikernels for secure, high-performance network applications across a variety of cloud computing and mobile platforms. Code can be developed on a traditional OS such as Linux or MacOS X, and then compiled into a fully-standalone, specialised unikernel that runs under the Xen or KVM hypervisors as well as lightweight hypervisors like FreeBSD's BHyve, OpenBSD's VMM. Xen and KVM power many public clouds; MirageOS unikernels are currently running on Amazon's Elastic Compute Cloud and Google Compute Engine, and maybe others!
</p>

<p>
New target: (via solo5) Genode:<br />
"Genode is a free and open-source operating system framework consisting
of a microkernel abstraction layer and a collection of userspace
components. The framework is notable as one of the few open-source
operating systems not derived from a proprietary OS, such as Unix. The
characteristic design philosophy is that a small trusted computing base
is of primary concern in a security oriented OS." (from wikipedia, more
at <a href="https://genode.org/">https://genode.org/</a> #942, by @ehmry)
</p>

<p>
User-visible changes
</p>
<ul class="org-ul">
<li><p>
use mirage-bootvar-unix instead of OS.Env.argv (deprecated since mirage-{xen,unix,os-shim}.3.1.0, mirage-solo5.0.5.0) on unix (#931, by @hannesm)
</p>

<p>
WARNING: this leads to a different semantics for argument passing on Unix: all arguments are concatenated (using a whitespace " " as separator), and split on the whitespace character again (by parse-argv). This is coherent with all other backends, but the whitespace in "&#x2013;hello=foo bar" needs to be escaped now.
</p></li>

<li><p>
mirage now generates upper bounds for hard-coded packages that are used in generated code. When we now break the API, unikernels which are configured with an earlier version won't accept the new release of the dependency. This means API breakage is much smoother for us, apart from that we now track version numbers in the mirage utility. The following rules were applied for upper bounds:
</p>
<ul class="org-ul">
<li>if version &lt; 1.0.0 then ~min:"a.b.c" ~max:"a.(b+1).0"</li>
<li>if version &gt; 1.0.0 then ~min:"a.b.c" ~max:"(a+1).0.0"</li>
<li>exceptions: tcpip (~min:"3.5.0" ~max:"3.6.0"), mirage-block-ramdisk (unconstrained)</li>
</ul>

<p>
WARNING: Please be careful when release any of the referenced libraries by taking care of appropriate version numbering. (initial version in #855 by @avsm, final #946 by @hannesm) See below for a full list of current constraints.
</p></li>

<li>since functoria.2.2.2, the "package" function (used in unikernel configuration) is extended with the labeled argument ~pin that receives a string (e.g. ~pin:"git+<a href="https://github.com/mirage-random/mirage-random.git">https://github.com/mirage-random/mirage-random.git</a>"), and is embedded into the generated opam file as <a href="https://opam.ocaml.org/doc/Manual.html#opamfield-pin-depends">pin-depends</a></li>

<li>mirage-random-stdlib is now used for default_random instead of mirage-random (which since 1.2.0 no longer bundles the stdlib Random module). mirage-random-stdlib is not cryptographically secure, but "a lagged-Fibonacci F(55, 24, +) with a modified addition function to enhance the mixing of bits.", which is now seeded using mirage-entropy. If you configure your unikernel with "mirage configure &#x2013;prng fortuna" (since mirage 3.0.0), a cryptographically secure PRNG will be used (read more at <a href="https://mirage.io/blog/mirage-entropy">https://mirage.io/blog/mirage-entropy</a>)</li>

<li>mirage now revived its command-line "&#x2013;no-depext", which removes the call to "opam depext" in the depend and depends target of the generated Makefile (#948, by @hannesm)</li>

<li>make depend no longer uses opam pin for opam install &#x2013;deps-only (#948, by @hannesm)</li>

<li>remove unused io_page configuration (initial discussion in #855, #940, by @hannesm)</li>

<li>charrua-client requires a Mirage_random interface since 0.11.0 (#938, by @hannesm)</li>

<li>split implementations into separate modules (#933, by @emillon)</li>

<li>improved opam2 support (declare ocaml as dependency #926)</li>

<li>switch build system to dune (#927, by @emillon)</li>

<li>block device writes has been fixed in mirage-solo5.0.5.0 (see <a href="https://github.com/mirage/mirage-solo5/issues/37">https://github.com/mirage/mirage-solo5/issues/37</a>)</li>
</ul>


<p>
The following package versions are constrained (generated by "git grep package\ " in the mirage repository):
</p>
<pre class="example">
lib/mirage.ml:          package ~build:true ~min:"4.04.2" "ocaml";
lib/mirage.ml:          package "lwt";
lib/mirage.ml:          package ~min ~max "mirage-types-lwt";
lib/mirage.ml:          package ~min ~max "mirage-types";
lib/mirage.ml:          package ~min ~max "mirage-runtime" ;
lib/mirage.ml:          package ~build:true "ocamlfind" ;
lib/mirage.ml:          package ~build:true "ocamlbuild" ;
lib/mirage.ml:          package ~min:"3.1.0" ~max:"3.2.0" "mirage-unix"
lib/mirage.ml:          package ~min:"3.1.0" ~max:"3.2.0" "mirage-xen"
lib/mirage.ml:          package ~min:"0.4.0" ~max:"0.5.0" ~ocamlfind:[]
"solo5-bindings-*"
lib/mirage.ml:          package ~min:"0.5.0" ~max:"0.6.0" "mirage-solo5"
lib/mirage_impl_argv.ml:      Key.pure [ package ~min:"0.1.0"
~max:"0.2.0" "mirage-bootvar-unix" ]
lib/mirage_impl_argv.ml:      Key.pure [ package ~min:"0.4.0"
~max:"0.5.0" "mirage-bootvar-xen" ]
lib/mirage_impl_arpv4.ml:    Key.pure [ package ~min:"3.5.0"
~max:"3.6.0" ~sublibs:["arpv4"] "tcpip" ]
lib/mirage_impl_arpv4.ml:    Key.pure [ package ~min:"0.2.0"
~max:"0.3.0" ~sublibs:["mirage"] "arp" ]
lib/mirage_impl_block.ml:  [ package ~min:"1.5.0" ~max:"2.0.0"
~sublibs:["front"] "mirage-block-xen" ]
lib/mirage_impl_block.ml:        [ package ~min:"0.4.0" ~max:"0.5.0"
"mirage-block-solo5" ]
lib/mirage_impl_block.ml:        [ package ~min:"2.5.0" ~max:"3.0.0"
"mirage-block-unix" ]
lib/mirage_impl_block.ml:      Key.pure [ package "mirage-block-ramdisk" ]
lib/mirage_impl_block.ml:      Key.pure [ package ~min:"0.9.0"
~max:"0.10.0" "tar-mirage" ]
lib/mirage_impl_conduit_connector.ml:let pkg = package ~min:"3.0.1"
~max:"4.0.0" "mirage-conduit"
lib/mirage_impl_conduit_connector.ml:        package ~min:"0.9.2"
~max:"0.10.0" ~sublibs:["mirage"] "tls" ;
lib/mirage_impl_console.ml:      Key.pure [ package ~min:"2.2.0"
~max:"3.0.0" "mirage-console-unix" ]
lib/mirage_impl_console.ml:      Key.pure [ package ~min:"2.2.0"
~max:"3.0.0" "mirage-console-xen" ]
lib/mirage_impl_console.ml:      Key.pure [ package ~min:"0.3.0"
~max:"0.4.0" "mirage-console-solo5" ]
lib/mirage_impl_ethernet.ml:    Key.pure [ package ~min:"3.5.0"
~max:"3.6.0" ~sublibs:["ethif"] "tcpip" ]
lib/mirage_impl_fs.ml:let fat_pkg = package ~min:"0.12.0" ~max:"0.13.0"
"fat-filesystem"
lib/mirage_impl_fs.ml:      Key.pure [package ~min:"1.0.0" ~max:"2.0.0"
"mirage-fs-lwt"]
lib/mirage_impl_http.ml:      Mirage_key.pure [ package ~min:"1.0.0"
~max:"2.0.0" "cohttp-mirage" ]
lib/mirage_impl_ip.ml:  Key.pure [ package ~min:"0.11.0" ~max:"0.12.0"
"charrua-client-mirage" ]
lib/mirage_impl_ip.ml:      Key.pure [ package ~min:"0.6" ~max:"0.7"
"mirage-qubes-ipv4" ]
lib/mirage_impl_kv_ro.ml:        package ~min:"2.0.0" ~max:"3.0.0"
"io-page";
lib/mirage_impl_kv_ro.ml:        package ~min:"2.0.0" ~max:"3.0.0"
~build:true "crunch"
lib/mirage_impl_kv_ro.ml:      Key.pure [ package ~min:"1.5.0"
~max:"2.0.0" "mirage-fs-unix" ]
lib/mirage_impl_mclock.ml:      [ package ~min:"1.2.0" ~max:"2.0.0"
"mirage-clock-unix" ]
lib/mirage_impl_mclock.ml:      [ package ~min:"1.2.0" ~max:"2.0.0"
"mirage-clock-freestanding" ]
lib/mirage_impl_network.ml:      | `Unix -&gt; [ package ~min:"2.3.0"
~max:"3.0.0" "mirage-net-unix" ]
lib/mirage_impl_network.ml:      | `MacOSX -&gt; [ package ~min:"1.4.0"
~max:"2.0.0" "mirage-net-macosx" ]
lib/mirage_impl_network.ml:      | `Xen -&gt; [ package ~min:"1.7.0"
~max:"2.0.0" "mirage-net-xen"]
lib/mirage_impl_network.ml:        [ package ~min:"1.7.0" ~max:"2.0.0"
"mirage-net-xen" ;
lib/mirage_impl_network.ml:        [ package ~min:"0.4.0" ~max:"0.5.0"
"mirage-net-solo5" ]
lib/mirage_impl_pclock.ml:      [ package ~min:"1.2.0" ~max:"2.0.0"
"mirage-clock-unix" ]
lib/mirage_impl_pclock.ml:      [ package ~min:"1.2.0" ~max:"2.0.0"
"mirage-clock-freestanding" ]
lib/mirage_impl_qubesdb.ml:let pkg = package ~min:"0.4" ~max:"0.7"
"mirage-qubes"
lib/mirage_impl_random.ml:    Mirage_key.pure [ package ~max:"0.1.0"
"mirage-random-stdlib" ]
lib/mirage_impl_random.ml:   the package array. *)
lib/mirage_impl_random.ml:        [ package ~min:"0.5.4" ~max:"0.6.0"
~sublibs:["mirage"] "nocrypto";
lib/mirage_impl_random.ml:          package ~max:"2.0" ~ocamlfind:[]
"zarith-xen" ]
lib/mirage_impl_random.ml:        [ package ~min:"0.5.4" ~max:"0.6.0"
~sublibs:["mirage"] "nocrypto";
lib/mirage_impl_random.ml:          package ~max:"2.0" ~ocamlfind:[]
"zarith-freestanding" ]
lib/mirage_impl_random.ml:        [ package ~min:"0.5.4" ~max:"0.6.0"
~sublibs:["lwt"] "nocrypto" ]
lib/mirage_impl_random.ml:    Mirage_key.pure [ package ~min:"0.5.4"
~max:"0.6.0" "nocrypto" ]
lib/mirage_impl_reporter.ml:      Key.pure [ package ~min:"0.3.0"
~max:"0.4.0" "mirage-logs" ]
lib/mirage_impl_resolver.ml:          package ~min:"1.0.0" ~max:"2.0.0"
"conduit-lwt-unix"; ]
lib/mirage_impl_syslog.ml:  Key.pure [ package ~min:"0.2.0" ~max:"0.3.0"
~sublibs "logs-syslog" ]
lib/mirage_impl_tracing.ml:        [ package ~max:"1.0.0" "mirage-profile";
lib/mirage_impl_tracing.ml:          package ~max:"1.0.0"
"mirage-profile-xen" ]
lib/mirage_impl_tracing.ml:        [ package ~max:"1.0.0" "mirage-profile";
lib/mirage_impl_tracing.ml:          package ~max:"1.0.0"
"mirage-profile-unix" ]
</pre>
</div>
</div>
</div>




<div id="outline-container-org9b34225" class="outline-2">
<h2 id="8"><a id="org9b34225"></a>Experimenting with a new opam repository release strategy for large libraries</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/experimenting-with-a-new-opam-repository-release-strategy-for-large-libraries/2918/1">https://discuss.ocaml.org/t/experimenting-with-a-new-opam-repository-release-strategy-for-large-libraries/2918/1</a>
</p>
</div>

<div id="outline-container-orgb3c9239" class="outline-3">
<h3 id="orgb3c9239">Anil Madhavapeddy announced</h3>
<div class="outline-text-3" id="text-orgb3c9239">
<p>
Dear opam repository contributors,
</p>

<p>
You will all be familiar with the difficulty of contributing a large new set of libraries into modern opam, due to the need to establish upper bounds on third party packages that use your libraries that have made breaking changes to interfaces.  This difficulty exists due to how successful we have been at importing in <b>multiple versions</b> of the same package into the opam-repository, and leveraging the opam solver to decide on the freshest versions of packages to install.
</p>

<p>
In order to make the contribution process a little easier, we are experimenting with a new release strategy for the latest large library set to drop into opam-repository (in this case, the new JS Core release).  It is as follows:
</p>

<ol class="org-ol">
<li>add upper bounds to <b>all</b> opam-repository packages that use your library in one PR. This prevents the newer libraries from being selected by the solver for existing packages.</li>
<li>import the new libraries, knowing that they will not be selected by the solver for existing packages.</li>
<li>relax the upper bounds on third party packages that have been tested to work with the new release.</li>
</ol>

<p>
This three-step process effectively allows the new versions of a library set to be staged in the opam repository without causing a massive interlock with third party packages. It also (via step 3) gives maintainers time to get used to a new library set without users being affected.
</p>

<p>
The main downside to this approach is that it may break development pins, since that metadata exists separately in each upstream repository and needs to be updated with upper bounds (or preferably, the code fixed to support the newer library).
</p>

<p>
The more minor downside is that it involves the maintainer of a library you depend on adding version constraints to "your" packages.  Since the <b>only</b> change here is to add an upper bound to an existing dependency, we judge this to be acceptable to the long-term health of the opam-repository database.  However, maintainers do have ample chance to comment on the step 1) repository if you really do not want anyone else making changes to your packages.  In this case however, we expect the maintainers who have objections to step up and do some testing with the newer releases and/or propose any changes in good time.
</p>

<p>
I'd like to emphasise that this is an experiment at the moment and not firm opam-repository policy, but one that we feel is worth trying. If it does work, then we can improve the tooling around the 3 steps to make it as easy as possible for maintainers.  In the meanwhile, you can see the first step of it in action in <a href="https://github.com/ocaml/opam-repository/pull/13010">ocaml/opam-repository#13010</a> which adds upper bounds in preparation for the new version of Core.
</p>
</div>
</div>
</div>




<div id="outline-container-orga3ad5c0" class="outline-2">
<h2 id="9"><a id="orga3ad5c0"></a>Other OCaml News</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orgaca906a" class="outline-3">
<h3 id="orgaca906a">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-orgaca906a">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="http://www.ocamlpro.com/2018/11/15/an-introduction-to-tezos-rpcs-a-basic-wallet/">An Introduction to Tezos RPCs: a Basic Wallet</a></li>
<li><a href="http://gallium.inria.fr/blog/parser-construction-menhir-appetizers">Parser Construction With Menhir: A Couple Appetizers</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org8ae14cc" class="outline-2">
<h2 id="org8ae14cc">Old CWN</h2>
<div class="outline-text-2" id="text-org8ae14cc">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
