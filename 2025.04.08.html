<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-04-08 Tue 15:12 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'JavaScript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2025.04.01.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2025.04.15.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of April 01 to 08, 2025.
</p>

<p>
Please note that some entries were posted on April 1st.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Ocsigen public meeting</a></li>
<li><a href="#2">Roguetype</a></li>
<li><a href="#3">Ppx_untype: An end to type errors in OCaml</a></li>
<li><a href="#4">Second of Two Lessons on Polymorphic Variants: Practical Usecases</a></li>
<li><a href="#5">Caqti 2.2.4 Release and Plans</a></li>
<li><a href="#6">update for the magick-core-7</a></li>
<li><a href="#7">gegl-0.4 _</a></li>
<li><a href="#8">Dune 3.18</a></li>
<li><a href="#9">QCheck 0.24</a></li>
<li><a href="#10">checked_oint v0.5.0: Safe integer arithmetic for OCaml</a></li>
<li><a href="#11">Outreachy December 2024 Round</a></li>
<li><a href="#12">OUPS meetup april 2025</a></li>
<li><a href="#13">Other OCaml News</a></li>
<li><a href="#orgdb70c40">Old CWN</a></li>
</ul>
</div>
</div>
<div id="outline-container-1" class="outline-2">
<h2 id="1">Ocsigen public meeting</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocsigen-public-meeting/16408/1">https://discuss.ocaml.org/t/ann-ocsigen-public-meeting/16408/1</a>
</p>
</div>
<div id="outline-container-org7823f85" class="outline-3">
<h3 id="org7823f85">William Caldwell announced</h3>
<div class="outline-text-3" id="text-org7823f85">
<p>
Hi all!
</p>

<p>
The Ocsigen team is organising a public meeting in which we'll be discussing the migration from Lwt to effect-based concurrency, updates about work in progress (wasm_of_ocaml, Ocsigen-i18n, â€¦).
</p>

<p>
We welcome user suggestions &amp; questions, please join us Monday the 14th of April at 1pm (France/GMT+2) at the following link: <a href="https://meet.google.com/zdm-krfj-rcw">https://meet.google.com/zdm-krfj-rcw</a>
</p>
</div>
</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="2">Roguetype</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-roguetype/16409/1">https://discuss.ocaml.org/t/ann-roguetype/16409/1</a>
</p>
</div>
<div id="outline-container-orgc9cf9ef" class="outline-3">
<h3 id="orgc9cf9ef">octachron announced</h3>
<div class="outline-text-3" id="text-orgc9cf9ef">
<p>
Have you ever felt pained by the lack of GADTs and high-arity functors when playing games?
Have you ever wondered if you could play games without being weighted by a runtime evaluation?
</p>

<p>
Then fear no longer, because in this day it is my pleasure to announce the first release of <a href="https://github.com/Octachron/roguetype.git">Roguetype</a>, the first ever roguelike written in the OCaml type system:
</p>

<ul class="org-ul">
<li>Test your mettle against the OCaml typechecker and the 8 levels of <code>roguetype</code>.</li>
<li>Explore functors, mountains, and forests to discover hidden paths.</li>
<li>Vanquish goblins and dragon(s), upgrade your equipment, while being sure that your travel is well-typed by construction.</li>
<li>And maybe, at the end of your adventure, you shall prove that the victory type is inhabited</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-3" class="outline-2">
<h2 id="3">Ppx_untype: An end to type errors in OCaml</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ppx-untype-an-end-to-type-errors-in-ocaml/16410/1">https://discuss.ocaml.org/t/ann-ppx-untype-an-end-to-type-errors-in-ocaml/16410/1</a>
</p>
</div>
<div id="outline-container-orge3c1ec5" class="outline-3">
<h3 id="orge3c1ec5">Paul-Elliot announced</h3>
<div class="outline-text-3" id="text-orge3c1ec5">
<p>
Hello dear people reading this!
</p>

<p>
Today, I am overly excited to announce one of the greatest and simplest tool, that will fix the biggest of all OCaml flaws.
</p>

<p>
Consider Javascript:
</p>

<pre class="example" id="orgf3f0dc1">
$ node
Welcome to Node.js v22.14.0.
Type ".help" for more information.
&gt; 1 + 3.5
4.5
</pre>

<p>
Simple and elegant, don't we all agree?
</p>

<p>
Now, the same with OCaml:
</p>

<pre class="example" id="org7ac042d">
$ ocaml
OCaml version 5.3.0
Enter #help;; for help.
# 1 + 3.5 ;;
Error: The constant 3.5 has type float but an expression was expected of type
         int
</pre>

<p>
What does this even mean?
</p>

<p>
The PPX that I lovingly share with you all is <code>ppx_untype</code>. It finally fully removes the OCaml type system that has plagued it since its inception.
</p>

<p>
The PPX can be used very simply. Add it to your opam switch:
</p>

<pre class="example" id="org7caddd9">
$ opam pin add ppx_untype https://github.com/panglesd/ppx_untype.git\#main
</pre>

<p>
and then add it to your <code>dune</code> (or other build system) file:
</p>

<pre class="example" id="orga4504c2">
(...
 (preprocess (pps ppx_untype))
 ...)
</pre>

<p>
And you can now enjoy OCaml!
</p>

<pre class="example" id="orgafcdb11">
$ cat bin.main.ml
let () = print_float (1 + 3.5)
$ dune exec bin/main.exe
3.47922429887e-310
</pre>
</div>
<div id="outline-container-org334527a" class="outline-4">
<h4 id="org334527a">Pros:</h4>
<div class="outline-text-4" id="text-org334527a">
<ul class="org-ul">
<li>All programs that was working before, still works.</li>
<li>Blazingly fast!</li>
<li>Finally integers and floats can be added.</li>
<li>All warnings are also removed.</li>
</ul>
</div>
</div>
<div id="outline-container-org44e87af" class="outline-4">
<h4 id="org44e87af">Cons:</h4>
<div class="outline-text-4" id="text-org44e87af">
<ul class="org-ul">
<li>None (apart from some unexpected behaviour at runtime)</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-4" class="outline-2">
<h2 id="4">Second of Two Lessons on Polymorphic Variants: Practical Usecases</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/second-of-two-lessons-on-polymorphic-variants-practical-usecases/16416/1">https://discuss.ocaml.org/t/second-of-two-lessons-on-polymorphic-variants-practical-usecases/16416/1</a>
</p>
</div>
<div id="outline-container-org343bfca" class="outline-3">
<h3 id="org343bfca">Jakub Svec announced</h3>
<div class="outline-text-3" id="text-org343bfca">
<p>
This is the second of two lessons on polymorphic variants I've been drafting for potential inclusion in the Lessons section of OCaml.org.
</p>

<p>
You can find the draft second lesson <a href="https://hackmd.io/@wqo57Le0RIyZVlb8qdJ8PA/ryPD_7961x">here</a>. I appreciate any feedback you may have.
</p>

<p>
The OCaml.org discussion of the first lesson can be found <a href="https://discuss.ocaml.org/t/new-lesson-on-polymorphic-variants/16390/11">here</a>.
</p>

<p>
The goal of the first lesson was to introduce the foundational knowledge for how polymorphic variants work (row polymorphism, structural typing, upper bounds, lower bounds, &#x2026;), their benefits and drawbacks, how they relate to "ordinary" variants, their notation (<code>\~</code>, <code>&gt;</code>, <code>&lt;</code>, <code>#</code>, &#x2026;), and their behavior during type refinement.
</p>

<p>
I am grateful to everyone that provided feedback on the first lesson. I incorporated most of the feedback into the lesson already, but it is not yet complete. I've held off finalizing the first lesson until this second lesson receives feedback, since there may be significant structural changes to the first lesson depending on the feedback received on this second part.
</p>

<p>
The objective of this second lesson is to demonstrate practical usecases for polymorphic variants. Presently, it demonstrates seven practical usecases of polymorphic variants, along with "ordinary" variant equivalents for comparison.
</p>

<p>
The seven usecases were sourced from:
</p>

<ul class="org-ul">
<li>Jacques Garrigue's <a href="https://caml.inria.fr/pub/papers/garrigue-polymorphic_variants-ml98.pdf">1998 paper</a></li>
<li><a href="https://discuss.ocaml.org/t/is-there-any-kind-of-guidline-about-when-to-use-polymorphic-variants/11006/14">This discussion</a> board on OCaml.org</li>
</ul>

<p>
Please consider this a rough draft. It does not include an indroduction and conclusion, and every example has minimal narrative supporting it. 
</p>

<p>
The goal is to solicit feedback on the <b>selected examples</b>, the <b>structure of the examples</b>, and
to solicit <b>additional examples</b> if these are insufficient.
</p>

<p>
If you have experience with specific usecases for polymorphic variants that you feel would do a better job demonstrating specific usecases or that demonstrate features not presented here, please let me know. If you can supply a concise example with a quick overview I would be grateful. If that does not work with your schedule, I can formulate an example from a description and perhaps a github link if available.
</p>

<p>
For example, none of the usecases demonstrate explicit coercions. That may be a useful example to include, however this was not mentioned in the source material and am unsure how commonly it is employed by OCaml developers.
</p>

<p>
Once this document's examples are locked down, I will consider the following:
</p>

<ul class="org-ul">
<li>Which lesson should be introduced first (demonstrations or foundations)?</li>
<li>Should the examples in this lesson be extracted into .ml files for readers to clone like in some other lessons on the site?</li>
<li>Should the two lessons be merged?</li>
<li>Is the length excessive?</li>
<li>Can any content be removed or extracted into a standalone lesson?</li>
</ul>

<p>
Once that is resolved, I will do a final pass on the lesson(s) and make another request for feedback.
</p>

<p>
Once again, I want to express my gratitude to everyone willing to work through these draft lessons, as well to those willing to provide feedback.
</p>

<p>
Example Usecases:
</p>

<ul class="org-ul">
<li>Monomorphic Usecases</li>
<li>Overloaded Tags</li>
<li>Compose with Result</li>
<li>Transitioning from Ordinary to Polymorphic Variants in an API</li>
<li>Polymorphic Variants with Phantom Types</li>
<li>Functional Reactive Programming with Polymorphic Variants</li>
<li>Encoding HTML in Hierarchical Structures</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-5" class="outline-2">
<h2 id="5">Caqti 2.2.4 Release and Plans</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-caqti-2-2-4-release-and-plans/16419/1">https://discuss.ocaml.org/t/ann-caqti-2-2-4-release-and-plans/16419/1</a>
</p>
</div>
<div id="outline-container-org20acbf0" class="outline-3">
<h3 id="org20acbf0">"Petter A. Urkedal announced</h3>
<div class="outline-text-3" id="text-org20acbf0">
</div>
<div id="outline-container-org986340e" class="outline-4">
<h4 id="org986340e">The Release</h4>
<div class="outline-text-4" id="text-org986340e">
<p>
I am pleased to announce the release of <a href="https://github.com/paurkedal/ocaml-caqti">Caqti</a> 2.2.4, after stumbling through a few minor releases starting at 2.2.0.  These are the combined release notes since the previous OPAM release, omitting intermediate regressions:
</p>
</div>
<ul class="org-ul">
<li><a id="orga8cdc82"></a>Improvements<br />
<div class="outline-text-5" id="text-orga8cdc82">
<ul class="org-ul">
<li>The sqlite3 driver now supports the refined error causes (<code>Caqti_error.cause</code>) for integrity constraint violations.</li>
<li>There is now experimental support for Miou (<a href="https://github.com/paurkedal/ocaml-caqti/pull/117">#117</a> by Calascibetta Romain).</li>
<li>Make the pool implementation shared-memory safe.</li>
<li>The new library <code>caqti.template</code> provides a preview of a interface for creating and working with request templates, with a few new features and, I think, a tidier design.  This is not yet suitable for production code, since it will change before the final version.  Feedback is welcome.</li>
</ul>
</div>
</li>
<li><a id="orgbfe6128"></a>Fixes<br />
<div class="outline-text-5" id="text-orgbfe6128">
<ul class="org-ul">
<li>Fixed a memory leak in the fall-back implementation of the <code>populate</code> connection method which affects all except the postgresql drivers.</li>
</ul>
</div>
</li>
<li><a id="org52080ca"></a>Deprecations<br />
<div class="outline-text-5" id="text-org52080ca">
<ul class="org-ul">
<li><code>Caqti_request.query_id</code> is deprecated and will be removed.</li>
<li>Constructors of <code>Caqti_type.t</code> are now fully private and will be moved away and likely defined differently in the next major release.</li>
</ul>
</div>
</li>
<li><a id="org061ddcc"></a>Dependency Updates<br />
<div class="outline-text-5" id="text-org061ddcc">
<ul class="org-ul">
<li>Prepare for upcoming mirage (<a href="https://github.com/paurkedal/ocaml-caqti/pull/124">#124</a> by Hannes Mehnert).</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-org685744b" class="outline-4">
<h4 id="org685744b">Upcoming Work on <code>caqti.template</code></h4>
<div class="outline-text-4" id="text-org685744b">
<p>
As mentioned, this library is experimental for now, yet it contains the real implementation of request templates, while the stable API is a backwards compatible wrapper.  I already have plans for revising the new API both due to hard requirements and feedback about usability and preferences, esp. for the most commonly used part of the API.
</p>
</div>
<ul class="org-ul">
<li><a id="org9714589"></a>Dynamic Prepare Policy and Parametric Types<br />
<div class="outline-text-5" id="text-org9714589">
<p>
One thing I am excited about with the <code>caqti.template</code> library is the support for prepared queries for dynamically generated request templates.
</p>

<p>
To motivate this, note that each prepared query retains resources on both the server side and locally, both associated with an open database connection, which can be long-lived.  So, if the application generates queries based on e.g. search expressions like <code>(author:Plato or author:Socrates) and topic:epistemology</code>, which cannot be prepared statically due to the boolean algebra over search terms, then users of the current API must use one-shot (non-prepared) queries to avoid unbounded retention of resources over time.  The new API provides a so-called dynamic prepare policy, which uses an LRU cache of prepared queries internally to limit the resource usage while providing a heuristic for re-using common prepared queries.
</p>

<p>
There is, however, a missing piece in order for this to be practically efficient.  Type descriptors like <code>Caqti_type.t2</code>, <code>Caqti_type.t3</code>, etc.  which represent parametrically polymorphic types, are currently generative with respect to the equality used by the LRU cache, meaning that the type expression would need to be lifted out of the function which generates the request template in order to avoid consistent cache-misses.
</p>

<p>
My plan is first to make a major release which moves the concrete type representation away from the public modules, and then revise it to properly encode parametric types.  Apart from changing the constructors, this involves adding an extra phantom type parameter, but the parameter will be universally qualified in the type exposed to the public API, so I expect to retain backwards compatibility for typical usage.
</p>
</div>
</li>
<li><a id="orge289542"></a>The Main Request Template API and Bring-Your-Own-Paint<br />
<div class="outline-text-5" id="text-orge289542">
<p>
For most use cases, it is sufficient to be able to construct request templates, which consists of type descriptors and a possibly dialect-dependent query template.  Everything needed for this is bundled into the module <code>Caqti_template.Create</code>. I may have developed a bit colourblindness after walking around this bikeshed, so let me show you how the current stable API looks like, how the current iteration of the new API looks like.
</p>

<p>
Here is a request template using the stable API:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">select_owner</span> =
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Caqti_request.Infix</span> <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Caqti_type.Std</span> <span style="color: #000000; font-weight: bold;">in</span>
  (string -&gt;? string)
  <span style="color: #ca3400;">"SELECT owner FROM bikereg WHERE frameno = ?"</span>
</pre>
</div>

<p>
In the current iteration of the new API, this looks like:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">select_owner</span> =
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Caqti_template.Create</span> <span style="color: #000000; font-weight: bold;">in</span>
  static <span style="color: #444fcf;">T.</span>(string --&gt;? string)
  <span style="color: #ca3400;">"SELECT owner FROM bikereg WHERE frameno = ?"</span>
</pre>
</div>

<p>
What changed?
</p>

<ul class="org-ul">
<li>There is now only a single <code>open</code>. That can only be good.</li>
<li>The type descriptors have been moved under a <code>T</code> sub-module.  This isn't strictly necessary, but I though it was tidier, esp. since there are clashing names (like <code>int</code>) under a parallel <code>Q</code> sub-module which is used for dynamically generated query templates.</li>
<li>The arrow was previously the main function, while in the new API it only constructs the type and multiplicity representation (<code>Caqti_template.Request_type.t</code>).</li>
<li>Instead, the main function now indicates the policy for whether to use a prepared query and, if so, the life-time of the request template.  The options are <code>direct</code>, <code>static</code>, and <code>dynamic</code> (as explained above).</li>
</ul>

<p>
The latter adds verbosity, but I think it is good to be explicit about static life-time, since using it for generated request templates would typically lead to a resource leakage.
</p>

<p>
It's getting late, so I will not write about dynamic and dialect-dependent request templates, but in the current revision, they are constructed with a "general" version of the above functions, <code>direct_gen</code>, <code>static_gen</code>, and <code>dynamic_gen</code> which takes a function receiving a dialect descriptor and returns a <code>Caqti_template.Query.t</code> instead of a string.  The stable API used combinator operators for this.
</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-6" class="outline-2">
<h2 id="6">update for the magick-core-7</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-update-for-the-magick-core-7/16422/1">https://discuss.ocaml.org/t/ann-update-for-the-magick-core-7/16422/1</a>
</p>
</div>
<div id="outline-container-org49e7898" class="outline-3">
<h3 id="org49e7898">Florent Monnier announced</h3>
<div class="outline-text-3" id="text-org49e7898">
<p>
An update to use the magick-core-7 is available there:
<a href="https://github.com/fccm2/mgk-gen2">https://github.com/fccm2/mgk-gen2</a>
</p>

<p>
If you still want to use the magick-core-6, the previous head is kept here:
<a href="https://github.com/fccm2/mgk-gen">https://github.com/fccm2/mgk-gen</a>
</p>

<p>
The updated version was tested with the magick-core version <code>7.1.1-44</code>, if you want to compile it, you need about <code>256M</code> space left on device.
</p>
</div>
</div>
</div>
<div id="outline-container-7" class="outline-2">
<h2 id="7">gegl-0.4 _</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-gegl-0-4/16424/1">https://discuss.ocaml.org/t/ann-gegl-0-4/16424/1</a>
</p>
</div>
<div id="outline-container-org19ede26" class="outline-3">
<h3 id="org19ede26">Florent Monnier announced</h3>
<div class="outline-text-3" id="text-org19ede26">
<p>
You can now access <code>gegl-0.4</code>, from your favorite scripting language,
and play with its nodes, with:
<a href="https://github.com/fccm2/gegl-ocaml">https://github.com/fccm2/gegl-ocaml</a> / (<a href="http://decapode314.free.fr/ocaml/gegl/docs/0.01/Gegl.html">api-doc</a>)
</p>
</div>
</div>
</div>
<div id="outline-container-8" class="outline-2">
<h2 id="8">Dune 3.18</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-3-18/16428/1">https://discuss.ocaml.org/t/ann-dune-3-18/16428/1</a>
</p>
</div>
<div id="outline-container-org1d0aafa" class="outline-3">
<h3 id="org1d0aafa">Etienne Marais announced</h3>
<div class="outline-text-3" id="text-org1d0aafa">
<p>
On the behalf of the dune team, I'm glad to announce the release of dune <code>3.18.0</code> :partying_face: 
</p>

<p>
This release contains changes to support the new <code>x-maintenance-intent</code> field by default. It also contains some changes regarding the cache, about how it handles file permissions. It introduces a new <code>(format-dune-file ...)</code> stanza with the intention to formalize the <code>dune format-dune-file</code> command as an inside rule. Finally, it includes various bug fixes for Dune.
</p>

<p>
If you encounter a problem with this release, you can report it on the <a href="https://github.com/ocaml/dune/issues">ocaml/dune</a> repository.
</p>
</div>
<div id="outline-container-org6bff106" class="outline-4">
<h4 id="org6bff106">Changelog</h4>
<div class="outline-text-4" id="text-org6bff106">
</div>
<ul class="org-ul">
<li><a id="org2f135b6"></a>Fixed<br />
<div class="outline-text-5" id="text-org2f135b6">
<ul class="org-ul">
<li>Support HaikuOS: don't call <code>execve</code> since it's not allowed if other pthreads
have been created. The fact that Haiku can't call <code>execve</code> from other threads
than the principal thread of a process (a team in haiku jargon), is a
discrepancy to POSIX and hence there is a <a href="https://dev.haiku-os.org/ticket/18665">bug about
it</a>. (@Sylvain78, #10953)

<ul class="org-ul">
<li>Fix flag ordering in generated Merlin configurations (#11503, @voodoos, fixes
ocaml/merlin#1900, reported by @vouillon)</li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org226d24d"></a>Added<br />
<div class="outline-text-5" id="text-org226d24d">
<ul class="org-ul">
<li>Add <code>(format-dune-file &lt;src&gt; &lt;dst&gt;)</code> action. It provides an alternative to the
<code>dune format-dune-file</code> command.  (#11166, @nojb)

<ul class="org-ul">
<li>Allow the <code>--prefix</code> flag when configuring dune with <code>ocaml configure.ml</code>.
This allows to set the prefix just like <code>$ dune install --prefix</code>. (#11172,
@rgrinberg)</li>

<li>Allow arguments starting with <code>+</code> in preprocessing definitions (starting with
<code>(lang dune 3.18)</code>). (@amonteiro, #11234)</li>

<li>Support for opam <code>(maintenance_intent ...)</code> in dune-project (#11274, @art-w)</li>

<li>Validate opam <code>maintenance_intent</code> (#11308, @art-w)</li>

<li>Support <code>not</code> in package dependencies constraints (#11404, @art-w, reported
by @hannesm)</li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org80430e7"></a>Changed<br />
<div class="outline-text-5" id="text-org80430e7">
<ul class="org-ul">
<li>Warn when failing to discover root due to reads failing. The previous
behavior was to abort. (@KoviRobi, #11173)</li>

<li>Use shorter path for inline-tests artifacts. (@hhugo, #11307)</li>

<li>Allow dash in <code>dune init</code> project name (#11402, @art-w, reported by @saroupille)</li>

<li>On Windows, under heavy load, file delete operations can sometimes fail due to
AV programs, etc. Guard against it by retrying the operation up to 30x with a
1s waiting gap (#11437, fixes #11425, @MSoegtropIMC)</li>

<li>Cache: we now only store the executable permission bit for files (#11541,
fixes #11533, @ElectreAAS)</li>

<li>Display negative error codes on Windows in hex which is the more customary
way to display <code>NTSTATUS</code> codes (#11504, @MisterDA)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-9" class="outline-2">
<h2 id="9">QCheck 0.24</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-qcheck-0-24/16198/2">https://discuss.ocaml.org/t/ann-qcheck-0-24/16198/2</a>
</p>
</div>
<div id="outline-container-org0e76a3c" class="outline-3">
<h3 id="org0e76a3c">Jan Midtgaard announced</h3>
<div class="outline-text-3" id="text-org0e76a3c">
<p>
FYI, QCheck 0.25 is now available from the opam repository :smiley: 
</p>

<p>
<a href="https://github.com/c-cube/qcheck/releases/">https://github.com/c-cube/qcheck/releases/</a>
</p>

<p>
The 0.25 release contains a combination of all-round fixes, documentation, and polishing:
</p>

<ul class="org-ul">
<li>Restore <code>Test.make</code>'s <code>max_fail</code> parameter which was accidentally broken in 0.18</li>
<li>Adjust <code>stats</code> computation of average and standard deviation to limit precision loss, print both using scientific notation, and workaround MinGW float printing to also pass expect tests</li>
<li>Fix dune snippets missing a language specifier in README.adoc causing <code>asciidoc</code> to error</li>
<li>Add a note to <code>QCheck{,2.Gen}.small_int_corners</code> and <code>QCheck{,2}.Gen.graft_corners</code> about internal state, and fix a range of documentation reference warnings</li>
<li>Reorganize and polish the <code>README</code>, rewrite it to use <code>qcheck-core</code>, and add a <code>QCheck2</code> integrated shrinking example</li>
<li>Document <code>QCHECK_MSG_INTERVAL</code> introduced in 0.20</li>
<li>Add <code>QCheck{,2}.Gen.map{4,5}</code> combinators</li>
</ul>

<p>
The accompanying <code>ppx_deriving_qcheck.0.7</code> release offers:
</p>

<ul class="org-ul">
<li>Support <code>ppxlib.0.36.0</code> based on the OCaml 5.2 AST</li>
</ul>

<p>
Thanks to @Pat-Lafon and @patricoferris for contributing PRs! ðŸŽ‰
</p>

<p>
Happy testing! :smiley: :keyboard:
</p>
</div>
</div>
</div>
<div id="outline-container-10" class="outline-2">
<h2 id="10">checked_oint v0.5.0: Safe integer arithmetic for OCaml</h2>
<div class="outline-text-2" id="text-10">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-checked-oint-v0-5-0-safe-integer-arithmetic-for-ocaml/16450/1">https://discuss.ocaml.org/t/ann-checked-oint-v0-5-0-safe-integer-arithmetic-for-ocaml/16450/1</a>
</p>
</div>
<div id="outline-container-org4243970" class="outline-3">
<h3 id="org4243970">hirrolot announced</h3>
<div class="outline-text-3" id="text-org4243970">
<p>
I would like to announce <a href="https://github.com/hirrolot/checked_oint"><code>checked_oint</code></a> v0.5.0, which provides checked integer arithmetic for OCaml. We support both signed and unsigned integers of 8, 16, 32, 64, and 128 bits. Unlike other libraries, <code>checked_oint</code> either returns an option or raises an exception when the result of an arithmetic operation cannot be represented in a desired integer type.
</p>

<p>
In addition, it contains abstractions for manipulating arbitrary integers and integer types in a generic and type-safe manner, which I find tremendously useful for compiler/interpreter implementations.
</p>

<p>
Usage example:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Checked_oint</span>

<span style="color: #000000; font-weight: bold;">let</span> () =
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">x</span> = <span style="color: #444fcf;">U8.</span>of_int_exn 50 <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">y</span> = <span style="color: #444fcf;">U8.</span>of_int_exn 70 <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #006f00; font-weight: bold;">assert</span> (<span style="color: #444fcf;">U8.</span>equal (<span style="color: #444fcf;">U8.</span>add_exn x y) (<span style="color: #444fcf;">U8.</span>of_int_exn 120));
  <span style="color: #006f00; font-weight: bold;">assert</span> (<span style="color: #444fcf;">Option.</span>is_none (<span style="color: #444fcf;">U8.</span>mul x y))
</pre>
</div>

<p>
The release v0.5.0 introduced crucial functionality for converting between any two integer types in a safe manner &#x2013; see <a href="https://hirrolot.github.io/checked_oint/checked_oint/Checked_oint/module-type-S/index.html#val-of_generic"><code>S.of_generic</code></a> and <a href="https://hirrolot.github.io/checked_oint/checked_oint/Checked_oint/module-type-S/index.html#val-of_generic_exn"><code>S.of_generic_exn</code></a>.
</p>
</div>
</div>
</div>
<div id="outline-container-11" class="outline-2">
<h2 id="11">Outreachy December 2024 Round</h2>
<div class="outline-text-2" id="text-11">
<p>
Archive: <a href="https://discuss.ocaml.org/t/outreachy-december-2024-round/15223/3">https://discuss.ocaml.org/t/outreachy-december-2024-round/15223/3</a>
</p>
</div>
<div id="outline-container-org9e2f2ba" class="outline-3">
<h3 id="org9e2f2ba">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-org9e2f2ba">
<p>
With the <a href="https://discuss.ocaml.org/t/outreachy-june-2025/16154">June 2025 round</a> about to begin, it is time to celebrate the awesome work @abdulaziz.alkurd has been doing on <a href="https://github.com/ocaml-semver/ocaml-api-watch">ocaml-api-watch</a> mentored by @NathanReb and @panglesd! 
</p>

<p>
Please join us on [date=2025-04-15 time=10:00:00 timezone="UTC"] for the community zoom call where we will get to hear about all of the progress that has been made.
</p>

<p>
Hope to see you there. I'll post a link to the video call closer to the time. For those that can't make it, the meeting will be recorded and uploaded to watch.ocaml.org :two_hump_camel:
</p>
</div>
</div>
</div>
<div id="outline-container-12" class="outline-2">
<h2 id="12">OUPS meetup april 2025</h2>
<div class="outline-text-2" id="text-12">
<p>
Archive: <a href="https://discuss.ocaml.org/t/oups-meetup-april-2025/16453/1">https://discuss.ocaml.org/t/oups-meetup-april-2025/16453/1</a>
</p>
</div>
<div id="outline-container-org6a66b60" class="outline-3">
<h3 id="org6a66b60">zapashcanon announced</h3>
<div class="outline-text-3" id="text-org6a66b60">
<p>
CAUTION: the time has been changed from 7pm to 6:30pm and it will be at ENS Ulm instead of Jussieu
</p>

<p>
The next OUPS meetup will take place on <b>Thursday, 24th of April</b> 2025. It will start at <b>6:30pm</b> at the <b>45 rue d'Ulm</b> in Paris. It will be in the in the <b>Salle des rÃ©sistants</b> (first floor in the "couloir du carrÃ©").
</p>

<p>
Please, <b><a href="https://www.meetup.com/fr-FR/ocaml-paris/events/307176170">register on meetup </a></b> as soon as possible to let us know how many pizza we should order.
</p>

<p>
For more details, you may check the <a href="https://oups.frama.io">OUPSâ€™ website </a>.
</p>

<p>
This time weâ€™ll have the following talks:
</p>

<p>
<b>A translation of OCaml programs from Gospel to Viper &#x2013; CharlÃ¨ne Gros</b>
</p>

<blockquote>
<p>
Presentation of a translation of OCaml programs specified in Gospel into Viper, an intermediate verification language supporting separation logic.
</p>

<p>
The practical goal is to add a new backend to Cameleer to verify OCaml programs that manipulate the heap.
The logical specification of such OCaml programs is described in the Gospel language, and we detail the extensions made to support separation logic in Viper.
</p>
</blockquote>

<p>
<b>Posca: an experimental social network based on Matrix, written in OCaml with melange &#x2013; Pierre de Lacroix</b>
</p>

<blockquote>
<p>
TBA
</p>
</blockquote>

<p>
After the talks there will be some pizzas offered by the <a href="https://ocaml-sf.org">OCaml Software Foundation</a> and later on weâ€™ll move to a pub nearby as usual.
</p>
</div>
</div>
</div>
<div id="outline-container-13" class="outline-2">
<h2 id="13">Other OCaml News</h2>
<div class="outline-text-2" id="text-13">
</div>
<div id="outline-container-org969f0da" class="outline-3">
<h3 id="org969f0da">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-org969f0da">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="https://blog.robur.coop/articles/mollymawk-first-milestone.html">What's new with Mollymawk?</a></li>
<li><a href="https://batsov.com/articles/2025/04/06/learning-ocaml-module-aliases/">Learning OCaml: Module Aliases</a></li>
<li><a href="https://batsov.com/articles/2025/04/06/learning-ocaml-parsing-data-with-scanf/">Learning OCaml: Parsing Data with Scanf</a></li>
<li><a href="https://batsov.com/articles/2025/04/04/learning-ocaml-regular-expressions/">Learning OCaml: Regular Expressions</a></li>
<li><a href="https://www.youtube.com/watch/g3qd4zpm1LA?version=3">Making OCaml Safe for Performance Engineering</a></li>
<li><a href="https://tarides.com/blog/2025-04-03-ocaml-in-space-spaceos-is-on-a-satellite">OCaml in Space: SpaceOS is on a Satellite!</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgdb70c40" class="outline-2">
<h2 id="orgdb70c40">Old CWN</h2>
<div class="outline-text-2" id="text-orgdb70c40">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe to the <a href="https://sympa.inria.fr/sympa/info/caml-list">caml-list</a>.
</p>

<div class="authorname" id="org765a910">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
