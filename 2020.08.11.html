<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-08-11 Tue 11:07 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2020.07.28.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2020.08.18.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of July 28 to August 11, 2020.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">Is Tezos the only well known blockchain written in Ocaml?</a></li>
<li><a href="#2">caml_qiskit 0.1.0: quantum computing for Ocaml</a></li>
<li><a href="#3">Multicore OCaml: July 2020</a></li>
<li><a href="#4">ANN: benchpress 0.1</a></li>
<li><a href="#5">Announcing a new maintainer for Lwt</a></li>
<li><a href="#6">containers 3.0</a></li>
<li><a href="#7">New packages: js_of_ocaml-webidl and js_of_ocaml-webgpu</a></li>
<li><a href="#8">opam-bin: binary packages for OPAM, beta release</a></li>
<li><a href="#9">New packages: plist-xml 0.1 and plist-xml-lwt 0.1</a></li>
<li><a href="#10">Call to testers (OCaml 4.11.0, release candidate)</a></li>
<li><a href="#11">OCaml 4.10.1, first release candidate</a></li>
<li><a href="#12">OCamlformat 0.15.0</a></li>
<li><a href="#13">ocamlnet-4.1.8</a></li>
<li><a href="#14">Other OCaml News</a></li>
<li><a href="#orgb8a102f">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orge458ffa" class="outline-2">
<h2 id="1"><a id="orge458ffa"></a>Is Tezos the only well known blockchain written in Ocaml?</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/is-tezos-the-only-well-known-blockchain-written-in-ocaml/6155/1">https://discuss.ocaml.org/t/is-tezos-the-only-well-known-blockchain-written-in-ocaml/6155/1</a>
</p>
</div>

<div id="outline-container-orge324105" class="outline-3">
<h3 id="orge324105">subarashiku asked and Davide Gessa replied</h3>
<div class="outline-text-3" id="text-orge324105">
<blockquote>
<p>
Is Tezos the only well known blockchain written in Ocaml?
</p>
</blockquote>

<p>
there is also:
</p>
<ul class="org-ul">
<li>dune.network: <a href="https://dune.network/">https://dune.network/</a></li>
<li>coda.protocol: <a href="https://codaprotocol.com/">https://codaprotocol.com/</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org5e53480" class="outline-2">
<h2 id="2"><a id="org5e53480"></a>caml_qiskit 0.1.0: quantum computing for Ocaml</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-caml-qiskit-0-1-0-quantum-computing-for-ocaml/6162/1">https://discuss.ocaml.org/t/ann-caml-qiskit-0-1-0-quantum-computing-for-ocaml/6162/1</a>
</p>
</div>

<div id="outline-container-orgb2bc30a" class="outline-3">
<h3 id="orgb2bc30a">Davide Gessa announced</h3>
<div class="outline-text-3" id="text-orgb2bc30a">
<p>
Hi developers, today I released a (yet) tiny OCaml binding for the quantum computing sdk of IBM, named
qiskit. Qiskit is a python library, so I used <i>pyml</i> for wrapping python classes and modules over OCaml
(that was very easy, pyml worked like a charm).
</p>

<p>
At the moment the library allows to:
</p>
<ul class="org-ul">
<li>create a quantum circuit using all the standard gates and draw it</li>
<li>simulate the quantum circuit execution locally</li>
<li>send the circuit to IBM quantum computer for real hardware execution</li>
</ul>

<p>
The source code of this is available here: <a href="https://github.com/dakk/caml_qiskit">https://github.com/dakk/caml_qiskit</a> , and you will be able to install it using opam where its name is <b>qiskit</b>; the library needs python3 + qiskit + matplotlib + numpy to work.
</p>

<p>
I wrote a medium post showing a basic example:
<a href="https://medium.com/@dakk/ocaml-and-quantum-computing-fcf4b60d3159">https://medium.com/@dakk/ocaml-and-quantum-computing-fcf4b60d3159</a>
</p>


<div class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/d/d2dd5543922e19e547929e9fd97f661836e4c01b.png" alt="d2dd5543922e19e547929e9fd97f661836e4c01b.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-orge74bac4" class="outline-3">
<h3 id="orge74bac4">Chet Murthy then said</h3>
<div class="outline-text-3" id="text-orge74bac4">
<p>
Hi, you might be interested in this code: <a href="https://github.com/chetmurthy/qc-ocaml">https://github.com/chetmurthy/qc-ocaml</a> <br />
tutorial: <a href="https://github.com/chetmurthy/qc-ocaml/blob/master/docs/Tutorial.asciidoc">https://github.com/chetmurthy/qc-ocaml/blob/master/docs/Tutorial.asciidoc</a>
</p>

<p>
I wrote it a good while ago, but IIRC I was able to create a circuit, compile to a "circuit", submit a
job, monitor its progress, recover results.
</p>

<p>
I didn't get around to interfacing with IBM's simulator.
</p>

<p>
If you find the code useful, I'm happy to re-license under GPL.
</p>
</div>
</div>
</div>




<div id="outline-container-orgd8f80f0" class="outline-2">
<h2 id="3"><a id="orgd8f80f0"></a>Multicore OCaml: July 2020</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/multicore-ocaml-july-2020/6186/1">https://discuss.ocaml.org/t/multicore-ocaml-july-2020/6186/1</a>
</p>
</div>

<div id="outline-container-org1fd9b23" class="outline-3">
<h3 id="org1fd9b23">Anil Madhavapeddy announced</h3>
<div class="outline-text-3" id="text-org1fd9b23">
<p>
Welcome to the July 2020 Multicore OCaml report! This update, along with the <a href="https://discuss.ocaml.org/tag/multicore-monthly">previous
updates</a>, has been compiled by @shakthimaan,
@kayceesrk and myself.  There are a number of advances both in upstream OCaml as well as our multicore
trees.
</p>
</div>

<div id="outline-container-org0695b70" class="outline-4">
<h4 id="org0695b70">Multicore OCaml</h4>
<div class="outline-text-4" id="text-org0695b70">
</div>
<ul class="org-ul">
<li><a id="org5f50d9d"></a>Thread compatibility via Domain Execution Contexts<br />
<div class="outline-text-5" id="text-org5f50d9d">
<p>
<span class="underline">TL;DR: once <a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/381">#381</a> is merged, dune will
work with multicore OCaml.</span>
</p>

<p>
As I <a href="https://discuss.ocaml.org/t/multicore-ocaml-june-2020/6047">noted</a> last month, not having a
Thread module that is backwards compatible with traditional OCaml's is a big blocker for ecosystem
compatibility.  This can be a little confusing at first glance &#x2013; why does Multicore OCaml need
non-parallel threading support?  The answer lies in the relationship between <a href="https://github.com/ocaml-multicore/ocaml-multicore/wiki/Concurrency-and-parallelism-design-notes">concurrency and
parallelism in multicore
OCaml</a>.
<span class="underline">Concurrency</span> is how we partition multiple computations such that they run in overlapping time periods,
and <span class="underline">parallelism</span> is how we run them on separate cores simultaneously to gain greater performance.  A
number of packages (most notably, Dune) currently use the Thread module to conveniently gain
concurrency while writing straight-line code without using monadic abstractions.  These uses do not
require parallelism, but are very difficult to rewrite to not use thread-based concurrency.
</p>

<p>
Therefore, multicore OCaml also needs a way to provide a reasonably performant version of Thread.  The
first solution we attempted (started by @jhw and continued by @engil in
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/342#issuecomment-643119638">#342</a>) mapped a
Thread to a multicore Domain, but scaled poorly for a larger number of threads since we may have a far
greater number of concurrency contexts (Thread instances) than we have CPUs available (Domain
instances). This lead to a bit of brainstorming
(<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/357">#357</a>) to figure out a solution that
would work for applications like Dune or the <a href="https://github.com/xapi-project/xen-api">XenServer stack</a>
that are heavy Thread users.
</p>

<p>
Our solution introduces a concept that we have dubbed <a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/381">Domain Execution Contexts in
#381</a>, which allows us to map multiple
system threads to OCaml domains.  Once that PR is reviewed and merged into the multicore OCaml
branches, it will unlock many more ecosystem packages, as the Dune build system will compile
unmodified.  The last "big" remaining blocker for wider opam testing after this is then
ocaml-migrate-parsetree, which requires a small patch to support the <code>effect</code> keyword syntax that is
present in the multicore OCaml trees.
</p>
</div>
</li>

<li><a id="org0a1fd26"></a>Domain Local Storage<br />
<div class="outline-text-5" id="text-org0a1fd26">
<p>
Domain Local Storage (DLS) (<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/372">#372</a>) is a
simple way to attach OCaml values privately to a domain.  A good example of speedup when using DLS is
shown in a PR to the <a href="https://github.com/ocaml-bench/sandmark/pull/152">LU decomposition benchmark</a>. In
this case, the benchmark needs a lot of random numbers, and initialising them in parallel locally to
the domain is a win.
</p>

<p>
Another example is the parallel implementation of an evolutionary algorithm (originally suggested by
@per_kristian_lehre in <a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/336">#336</a>) which
speeds up nicely in <a href="https://github.com/ocaml-bench/sandmark/pull/151">#151</a> (for those who want to
check the baseline, there is a sequential version in
<a href="https://github.com/ocaml-bench/sandmark/pull/155">#155</a> that you can look up in the Sandmark web
interface).
</p>
</div>
</li>

<li><a id="org82e09a2"></a>Parallel Programming with Multicore OCaml (document)<br />
<div class="outline-text-5" id="text-org82e09a2">
<p>
A tutorial on <a href="https://github.com/ocaml-multicore/parallel-programming-in-multicore-ocaml">Parallel Programming with Multicore
OCaml</a> has been made
available. It provides an introduction to Multicore OCaml and explains the concepts of <code>Domains</code>,
<code>Domainslib</code>, and <code>Channels</code>. Profiling of OCaml code using <code>perf</code> and <code>Eventlog</code> are also illustrated
with examples.
</p>

<p>
This draft was shared on
<a href="https://www.reddit.com/r/ocaml/comments/hluzmy/parallel_programming_in_multicore_ocaml_a_tutorial/">Reddit</a>
as well as on <a href="https://news.ycombinator.com/item?id=23740869">HackerNews</a>, so you'll find more chatter
about it there.
</p>
</div>
</li>

<li><a id="org2846b56"></a>Coq benchmarks<br />
<div class="outline-text-5" id="text-org2846b56">
<p>
The Sandmark benchmarking suite for OCaml has been successfully updated to use dune.2.6.0 and builds
for Multicore OCaml 4.10.0. With this major upgrade, we have also been able to include Coq and its
dependencies. We are working on adding more regression Coq benchmarks to the test suite.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgce68754" class="outline-4">
<h4 id="orgce68754">Upstream OCaml</h4>
<div class="outline-text-4" id="text-orgce68754">
<p>
The upstream OCaml trees have seen a flurry of activity in the 4.12.0dev trees with changes to prepare
for multicore OCaml.  The biggest one is the (to quote @xavierleroy) fabled page-less compactor in
<a href="https://github.com/ocaml/ocaml/pull/9728">ocaml/ocaml#9728</a>.  This followed on from last month's work
(<a href="https://github.com/ocaml/ocaml/pull/9698">#9698</a>) to eliminate the use of the page table when the
compiler is built with the "no-naked-pointers" option, and clears the path for the parallel multicore
OCaml runtime to be integrated in a future release of OCaml.
</p>

<p>
One of the other changes we hope to get into OCaml 4.12 is the alignment of the use of garbage
collector colours when marking and sweeping. The <a href="https://github.com/ocaml/ocaml/pull/9756">#9756</a>
changes make the upstream runtime use the same scheme we described in the <a href="https://arxiv.org/abs/2004.11663">Retrofitting Parallelism
onto OCaml</a> ICFP paper, with a few extra improvements that you can
read about in the PR review comments.
</p>

<p>
If you are curious about the full set of changes, you can see all the <a href="https://github.com/ocaml/ocaml/issues?q=label:multicore-prerequisite+is:closed">multicore
prerequisite</a>
issues that have been closed to date upstream.
</p>
</div>
</div>

<div id="outline-container-org46171a6" class="outline-4">
<h4 id="org46171a6">Detailed Updates</h4>
<div class="outline-text-4" id="text-org46171a6">
<p>
As with the previous updates, the Multicore OCaml updates are first listed, which are then followed by
the enhancements to the Sandmark benchmarking project. The upstream OCaml ongoing and completed updates
are finally mentioned for your reference.
</p>
</div>

<ul class="org-ul">
<li><a id="org1d61d82"></a>Multicore OCaml<br />
<ul class="org-ul">
<li><a id="orgbe94fa7"></a>Ongoing<br />
<div class="outline-text-6" id="text-orgbe94fa7">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/342">ocaml-multicore/ocaml-multicore#342</a>
Implementing the threads library with Domains
</p>

<p>
This is an on-going effort to rebase @jhwoodyatt's implementation of the Thread
library for Domains.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/357">ocaml-multicore/ocaml-multicore#357</a>
Implementation of systhreads with pthreads
</p>

<p>
A Domain Execution Context (DEC) is being introduced in this
implementation as a concurrency abstraction for implementing
systhreads with pthreads.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/374">ocaml-multicore/ocaml-multicore#374</a>
Force major slice on minor collection
</p>

<p>
A blocked thread in a domain may not progress the major GC when
servicing the minor collector through <code>handle_interrupt</code>, and hence
we need to have a minor collection to schedule a major collection
slice.
</p></li>
</ul>
</div>
</li>

<li><a id="orgd956b50"></a>Completed<br />
<ul class="org-ul">
<li><a id="org9d85baa"></a>Domain-Local State<br />
<div class="outline-text-7" id="text-org9d85baa">
<ul class="org-ul">
<li><p>
<a href="https://github.com/Sudha247/ocaml-multicore/pull/1">Sudha247/ocaml-multicore#1</a>
<code>dls_root</code> should be deleted before terminal GC
</p>

<p>
The deletion of the global root pushes an object on the mark stack,
and hence a final GC needs to be performed before the terminal GC.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/372">ocaml-multicore/ocaml-multicore#372</a>
Domain-local Storage
</p>

<p>
The RFC proposal (ocaml-multicore/ocaml-multicore#339)[<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/339">https://github.com/ocaml-multicore/ocaml-multicore/issues/339</a>]
to implement a Domain-Local Storage has been completed and merged to
Multicore OCaml.
</p></li>
</ul>
</div>
</li>

<li><a id="orga277f6b"></a>Removal of vestiges in Concurrent Minor GC<br />
<div class="outline-text-7" id="text-orga277f6b">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/370">ocaml-multicore/ocaml-multicore#370</a>
Remove Cloadmut and lloadmut
</p>

<p>
The <code>Cloadmut</code> and <code>Iloadmut</code> implementation and usage have been
cleaned up with this patch. This simplifies the code and brings it
closer to stock OCaml.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/371">ocaml-multicore/ocaml-multicore#371</a>
Domain interrupt cleanup
</p>

<p>
In <code>runtime/domain.c</code> the <code>struct interruptor* sender</code> has been
removed. The domain RPC functions have been grouped together in
<code>domain.h</code>, and consistent naming of definitions have been applied.
</p></li>
</ul>
</div>
</li>

<li><a id="orgcf91bfe"></a>Code Cleanup<br />
<div class="outline-text-7" id="text-orgcf91bfe">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/367">ocaml-multicore/ocaml-multicore#367</a>
Remove some unused RPC consumers
</p>

<p>
The domain RPC mechanisms are no longer in use, and have been
removed.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/368">ocaml-multicore/ocaml-multicore#368</a>
Removal of dead bits of read_barrier and caml_promote
</p>

<p>
This PR removes <code>caml_promote</code>, the assembly for read faults on ARM
and AMD, and the global for the read fault.
</p></li>
</ul>
</div>
</li>

<li><a id="orge0713aa"></a>Sundries<br />
<div class="outline-text-7" id="text-orge0713aa">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/366">ocaml-multicore/ocaml-multicore#366</a>
Add event to record idle domains
</p>

<p>
The <code>domain/idle_wait</code> and <code>domain/send_interrupt</code> events are added
to track domains that are idling. An eventlog screenshot with this
effect is shown below:
</p>


<div class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/optimized/2X/a/a7028229dbf95c975c65faecc99417268024520a_2_1380x596.png" alt="a7028229dbf95c975c65faecc99417268024520a_2_1380x596.png" />
</p>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/369">ocaml-multicore/ocaml-multicore#369</a>
Split caml_urge_major_slice into caml_request_minor_gc and
caml_request_major_slice
</p>

<p>
The <code>caml_urge_major_slices</code> is split into <code>caml_request_minor_gc</code>
and <code>caml_request_major_slice</code>. This reduces the total number of
minor garbage collections as observed in the following illustration:
</p>


<div class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/optimized/2X/6/66705c292bab15146adedf8d9f870484a6a87e87_2_1380x406.png" alt="66705c292bab15146adedf8d9f870484a6a87e87_2_1380x406.png" />
</p>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/373">ocaml-multicore/ocaml-multicore#373</a>
Fix the opam pin command in case the current directory name has spaces
</p>

<p>
Use the <code>-k path</code> command-line argument with <code>opam pin</code> to handle
directory names that have whitespaces.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/375">ocaml-multicore/ocaml-multicore#375</a>
Only lock the global freelist to adopt pools if needed
</p>

<p>
The lock acquire and release on allocation is removed when there are
no global pools requiring adoption.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/377">ocaml-multicore/ocaml-multicore#377</a>
Group env vars for run in travis CI
</p>

<p>
The <code>OCAMLRUNPARAM</code> parameter is defined as part of the environment
variable with the <code>USE_RUNTIME=d</code> command.
</p></li>

<li><p>
<a href="https://github.com/ocaml/dune/pull/3608">ocaml/dune#3608</a>
Upstream Multicore dune bootstrap patch
</p>

<p>
The patch is used to build dune using the secondary compiler
approach for
<a href="https://github.com/ocaml/dune/issues/3548">ocaml/dune#3548</a>.
</p></li>
</ul>
</div>
</li>
</ul>
</li>
</ul>
</li>

<li><a id="orgddc37dd"></a>Benchmarking<br />
<ul class="org-ul">
<li><a id="org3be3896"></a>Ongoing<br />
<div class="outline-text-6" id="text-org3be3896">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/107">ocaml-bench/sandmark#107</a>
Add Coq benchmarks
</p>

<p>
The upgrade of Sandmark to use dune.2.6.0 for Multicore OCaml 4.10.0
has allowed us to install Coq and its dependencies. We are currently
working on adding more Coq regression benchmarks to Sandmark.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/122">ocaml-bench/sandmark#122</a>
Measurements of code size
</p>

<p>
The code size of a benchmark is one measurement that is required for
<code>flambda</code> branch, and we are exploring adding the same to the
Sandmark bench runs.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/142">ocaml-bench/sandmark#142</a>
[RFC] How should a user configure a sandmark run?
</p>

<p>
We are gathering user feedback and suggestions on how you would like
to configure benchmarking for Sandmark. Please share your thoughts
and comments in this discussion.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/150">ocaml-bench/sandmark#150</a>
Coq files that work
</p>

<p>
Addition of more Coq files for benchmarking in Sandmark.
</p></li>
</ul>
</div>
</li>

<li><a id="orgded0acf"></a>Completed<br />
<ul class="org-ul">
<li><a id="org218b7dc"></a>Dune 2.6.0 Upgrade<br />
<div class="outline-text-7" id="text-org218b7dc">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/131">ocaml-bench/sandmark#131</a>
Update decompress benchmarks
</p>

<p>
The decompress benchmarks were updated by @dinosaure to use the
latest decompress.1.1.0 for dune.2.6.0.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/132">ocaml-bench/sandmark#132</a>
Update dependency packages to use dune.2.6.0 and Multicore OCaml 4.10.0
</p>

<p>
Sandmark has now been updated to use dune.2.6.0 and Multicore OCaml
4.10.0 with an upgrade of over 30 dependency packages. You can test
the same using:
</p>

<pre class="example">
$ opam install dune.2.6.0
$ make ocaml-versions/4.10.0+multicore.bench
</pre></li>
</ul>
</div>
</li>

<li><a id="org87c28c2"></a>Coq Benchmarks<br />
<div class="outline-text-7" id="text-org87c28c2">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/140">ocaml-bench/sandmark#140</a>
coqc compiling with Sandmark
</p>

<p>
The Coq compiler is added as a dependency package to Sandmark, which
now allows us to build and run Coq benchmarks.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/143">ocaml-bench/sandmark#143</a>
Added Coq library fraplib and a benchmark that depends on it
</p>

<p>
The <a href="https://github.com/achlipala/frap">Formal Reasoning About
Programs</a> book's <code>fraplib</code>
library benchmarks have now been included in Sandmark.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/144">ocaml-bench/sandmark#144</a>
Add frap as a Coq benchmark
</p>

<p>
The <code>CompilerCorrectness.v</code> Coq file is added as a test benchmark
for Coq in Sandmark.
</p></li>
</ul>
</div>
</li>

<li><a id="org2c72935"></a>Continuous Integration<br />
<div class="outline-text-7" id="text-org2c72935">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/136">ocaml-bench/sandmark#136</a>
Use BUILD_ONLY in .drone.yml
</p>

<p>
The .drone.yml file has been updated to use a BUILD_ONLY environment
variable to just install the dependencies and not execute the
benchmarks for the CI.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/147">ocaml-bench/sandmark#147</a>
Add support to associate tags with benchmarks
</p>

<p>
The <code>macro_bench</code> and <code>run_in_ci</code> tags have been introduced to
associate with the benchmarks. The benchmarks tagged as <code>run_in_ci</code>
will be executed as part of the Sandmark CI.
</p></li>
</ul>
</div>
</li>

<li><a id="org836ed88"></a>Sundries<br />
<div class="outline-text-7" id="text-org836ed88">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/124">ocaml-bench/sandmark#124</a>
User configurable paramwrapper added to Makefile
</p>

<p>
The <code>--cpu-list</code> can now be specified as a <code>PARAMWRAPPER</code>
environment variable for running the parallel benchmarks.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/134">ocaml-bench/sandmark#134</a>
Include more info on README
</p>

<p>
The README has been updated to include documentation to reflect the
latest changes in Sandmark.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/141">ocaml-bench/sandmark#141</a>
Enrich the variants with additional options
</p>

<p>
The <code>ocaml-versions/*</code> files now use a JSON file format which allow
you to specify the ocaml-base-compiler source URL, <code>configure</code>
options and <code>OCAMLRUNPARAMS</code>. An example is provided below:
</p>

<pre class="example">
{
"url" : "https://github.com/ocaml-multicore/ocaml-multicore/archive/parallel_minor_gc.tar.gz",
"configure" : "-q",
"runparams" : "v=0x400"
}
</pre></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/146">ocaml-bench/sandmark#146</a>
Update trunk from 4.11.0 to 4.12.0
</p>

<p>
Sandmark now uses the latest stock OCaml 4.12.0 as trunk in
ocaml-versions/.
</p></li>

<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/148">ocaml-bench/sandmark#148</a>
Install python3-pip and intervaltree for clean CI build
</p>

<p>
The .drone.yml file has been updated to install <code>python3-pip</code> and
<code>intervaltree</code> software packages to avoid errors when the Makefile
is invoked.
</p></li>
</ul>
</div>
</li>
</ul>
</li>
</ul>
</li>

<li><a id="orgef80ab6"></a>OCaml<br />
<ul class="org-ul">
<li><a id="org7814661"></a>Ongoing<br />
<div class="outline-text-6" id="text-org7814661">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml/ocaml/pull/9722">ocaml/ocaml#9722</a>
EINTR-based signals, again
</p>

<p>
The patch provides a new implementation to solve locking and
signal-handling issues.
</p></li>

<li><p>
<a href="https://github.com/ocaml/ocaml/pull/9756">ocaml/ocaml#9756</a>
Garbage collector colours change
</p>

<p>
The PR removes the gray colour in the garbage collector (GC) colour
scheme in order to use it with the Multicore OCaml major collector.
</p></li>
</ul>
</div>
</li>

<li><a id="org0c1d06a"></a>Completed<br />
<div class="outline-text-6" id="text-org0c1d06a">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml/dune/pull/3576">ocaml/dune#3576</a>
In OCaml 4.12.0, empty archives no longer generate .a files
</p>

<p>
A native archive will never be generated for an empty library, and
this fixes the compatibility with OCaml 4.12.0 when dealing with
empty archives.
</p></li>

<li><p>
<a href="https://github.com/ocaml/ocaml/pull/9541">ocaml/ocaml#9541</a>
Add manual page for the instrumented runtime
</p>

<p>
The <code>manual/manual/cmds/instrumented-runtime.etex</code> document has been
updated based on review comments and has been merged to stock OCaml.
</p></li>

<li><p>
<a href="https://github.com/ocaml/ocaml/pull/9728">ocaml/ocaml#9728</a>
Simplified compaction without page table
</p>

<p>
A self-describing closure representation is used to simplify the
compactor, and to get rid of the page table.
</p></li>
</ul>

<p>
We would like to thank all the OCaml developers and users in the community for their continued support,
code reviews, documentation and contributions to the multicore OCaml project.
</p>
</div>
</li>
</ul>
</li>

<li><a id="orgbdb253f"></a>Acronyms<br />
<div class="outline-text-5" id="text-orgbdb253f">
<ul class="org-ul">
<li>CI: Continuous Integration</li>
<li>DEC: Domain Execution Context</li>
<li>GC: Garbage Collector</li>
<li>OPAM: OCaml Package Manager</li>
<li>PR: Pull Request</li>
<li>RFC: Request for Comments</li>
<li>RPC: Remote Procedure Call</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org60d95f5" class="outline-2">
<h2 id="4"><a id="org60d95f5"></a>ANN: benchpress 0.1</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-benchpress-0-1/6187/1">https://discuss.ocaml.org/t/ann-benchpress-0-1/6187/1</a>
</p>
</div>

<div id="outline-container-orgba0a5ca" class="outline-3">
<h3 id="orgba0a5ca">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-orgba0a5ca">
<p>
I'm glad to announce that <a href="https://github.com/sneeuwballen/benchpress">benchpress</a> is now available in
0.1.
</p>

<p>
Benchpress is a test/benchmarking tool designed for automated theorem provers (including SMT solvers
and first-order provers), both to run a bunch of provers, and to display their results. Results are
stored in sqlite files, one per run. The sister package <code>benchpress-server</code> contains a daemon that
provides a web interface to examine the results; a read-only live instance <a href="https://benchpress.cedeela.fr/">can be seen
here</a>.
</p>

<p>
These are early days for benchpress but it could be of interest to the sub-community of logicians here
:slightly_smiling_face:
</p>
</div>
</div>
</div>




<div id="outline-container-orgb24842a" class="outline-2">
<h2 id="5"><a id="orgb24842a"></a>Announcing a new maintainer for Lwt</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/announcing-a-new-maintainer-for-lwt/6192/1">https://discuss.ocaml.org/t/announcing-a-new-maintainer-for-lwt/6192/1</a>
</p>
</div>

<div id="outline-container-org1a61119" class="outline-3">
<h3 id="org1a61119">Anton Bachin announced</h3>
<div class="outline-text-3" id="text-org1a61119">
<p>
I am pleased to announce that <b>Raphaël Proust</b> (@raphael-proust) is taking over as maintainer of Lwt.
</p>

<p>
Raphaël Proust is a long-time Lwt contributor. Outside the repo, he has released several libraries
using Lwt, and has written a very helpful
<a href="https://raphael-proust.github.io/code/lwt-part-1.html">Introduction</a> to it — among other output.
He is currently working at Nomadic Labs.
</p>
</div>
</div>
</div>




<div id="outline-container-orgab44196" class="outline-2">
<h2 id="6"><a id="orgab44196"></a>containers 3.0</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-containers-3-0/6194/1">https://discuss.ocaml.org/t/ann-containers-3-0/6194/1</a>
</p>
</div>

<div id="outline-container-org45f7d72" class="outline-3">
<h3 id="org45f7d72">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-org45f7d72">
<p>
I'm happy to announce, on behalf of containers' contributors, the release of <a href="https://github.com/c-cube/ocaml-containers/releases/tag/v3.0">containers
3.0</a>. API documentation can be found
<a href="https://c-cube.github.io/ocaml-containers/3.0/">here</a>.
</p>

<p>
Containers is a BSD-licensed standard library <span class="underline">extension</span> [1] that aims at being lightweight,
convenient, modular, portable, and only pay for what you use; that includes compatibility with OCaml &gt;=
4.03. This is the second major update in 7 years of existence, following semantic versioning.
</p>

<p>
Release 3.0 was the opportunity to clean up some inconsistencies (in printers, among others), to focus
on the standard <code>Seq.t</code> type, and to split some sub-libraries into their own packages
(<code>containers-thread</code> and <code>containers-data</code> respectively). The hope is that the new version is more
consistent, lightweight, and pleasant to use.
</p>

<p>
I want to thank all contributors for their hard work, and in particular
<a href="https://github.com/FardaleM">Fardale</a>.
</p>

<p>
[1]: as in, containers extends the stdlib and does not intend to replace it.
</p>
</div>

<div id="outline-container-org036f683" class="outline-4">
<h4 id="org036f683">Overview of breaking changes</h4>
<div class="outline-text-4" id="text-org036f683">
<p>
(this is extracted from <a href="https://github.com/c-cube/ocaml-containers/blob/master/README.md#to-30">the readme's migration section</a>)
</p>

<ol class="org-ol">
<li>The biggest change is that some sub-libraries have been either turned into
their own packages (<code>containers-thread</code>, <code>containers-data</code>),
deleted (<code>containers.iter</code>),or merged elsewhere (<code>containers.sexp</code>).
This means that if use these libraries you will have to edit your
<code>dune~/~_oasis~/~opam</code> files.

<ul class="org-ul">
<li>if you use <code>containers.sexp</code> (i.e. the <code>CCSexp</code> module), it now lives in
<code>containers</code> itself.</li>
<li>if you used anything in <code>containers.data</code>, you need to depend on the
<code>containers-data</code> package now.</li>
</ul></li>

<li><p>
Another large change is the removal (at last!) of functions deprecated
in 2.8, related to the spread of <code>Seq.t</code> as the standard iterator type.
Functions like <code>CCVector.of_seq</code> now operate on this standard <code>Seq.t</code> type,
and old-time iteration based on <a href="https://github.com/c-cube/iter">iter</a>
is now named <code>of_iter</code>, <code>to_iter</code>, etc.
</p>

<p>
Here you need to change you code, possibly using search and replace.
Thankfully, the typechecker should guide you.
</p></li>

<li><code>Array_slice</code> and <code>String.Sub</code> have been removed to simplify the
code and <code>String</code> more lightweight. There is no replacement at the moment.
Please tell us if you need this to be turned into a sub-library.</li>

<li>Renaming of some functions into more explicit/clear names.
Examples:

<ul class="org-ul">
<li><code>CCVector.shrink</code> is now <code>CCVector.truncate</code></li>
<li><code>CCVector.remove</code> is now <code>CCVector.remove_unordered</code>, to be
contrasted with the new <code>CCVector.remove_and_shift</code>.</li>
<li><code>CCPair.map_fst</code> and <code>map_snd</code> now transform a tuple into another tuple
by modify the first (resp. second) element.</li>
</ul></li>

<li>All the collection pretty-printers now take their separator/start/stop
optional arguments as <code>unit printer</code> (i.e. <code>Format.formatter -&gt; unit -&gt; unit</code>
functions) rather than strings. This gives the caller better control
over the formatting of lists, arrays, queues, tables, etc.</li>

<li>Removal of many deprecated functions.</li>
</ol>
</div>
</div>
</div>
</div>




<div id="outline-container-org4f3c0be" class="outline-2">
<h2 id="7"><a id="org4f3c0be"></a>New packages: js_of_ocaml-webidl and js_of_ocaml-webgpu</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/new-packages-js-of-ocaml-webidl-and-js-of-ocaml-webgpu/6196/1">https://discuss.ocaml.org/t/new-packages-js-of-ocaml-webidl-and-js-of-ocaml-webgpu/6196/1</a>
</p>
</div>

<div id="outline-container-org47485a8" class="outline-3">
<h3 id="org47485a8">Misha Aizatulin announced</h3>
<div class="outline-text-3" id="text-org47485a8">
<p>
Announcing two packages. One generates jsoo bindings from webidl definitions. The other package is a
specific application: a complete generated API for WebGPU .
</p>

<p>
Project page: <a href="https://github.com/tari3x/webgpu">https://github.com/tari3x/webgpu</a> <br />
Documentation: <a href="https://tari3x.github.io/webgpu">https://tari3x.github.io/webgpu</a>
</p>
</div>
</div>
</div>




<div id="outline-container-orgb39f980" class="outline-2">
<h2 id="8"><a id="orgb39f980"></a>opam-bin: binary packages for OPAM, beta release</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-bin-binary-packages-for-opam-beta-release/6198/1">https://discuss.ocaml.org/t/ann-opam-bin-binary-packages-for-opam-beta-release/6198/1</a>
</p>
</div>

<div id="outline-container-orgaaeb2b7" class="outline-3">
<h3 id="orgaaeb2b7">Fabrice Le Fessant announced</h3>
<div class="outline-text-3" id="text-orgaaeb2b7">
<p>
I am happy to announce the first public release of <code>opam-bin</code>, a
framework to create, use and share binary packages with opam:
</p>

<p>
<a href="https://ocamlpro.github.io/opam-bin">https://ocamlpro.github.io/opam-bin</a>
</p>

<p>
With opam-bin, you can :
</p>

<ul class="org-ul">
<li>build binary packages while installing their source counterpart with opam</li>
<li>automatically reuse previously created binary packages instead of compiling them again</li>
<li>export and share your binary packages as part of opam repositories for other users/computers to use</li>
</ul>

<p>
<code>opam-bin</code> is a framework in 3 parts :
</p>
<ul class="org-ul">
<li>a tool <code>opam-bin</code> to create binary packages: <a href="https://ocamlpro.github.io/opam-bin">https://ocamlpro.github.io/opam-bin</a></li>
<li>a set of patches to make some packages relocatable (<code>opam-bin</code> will apply them automatically when building packages): <a href="https://github.com/ocamlpro/relocation-patches">https://github.com/ocamlpro/relocation-patches</a></li>
<li>a set of contributed repositories of binary packages. For now, there is only one "example" (<a href="https://www.origin-labs.com/opam-bin/debian10.4-amd64/">https://www.origin-labs.com/opam-bin/debian10.4-amd64/</a> ) but we hope more people will contribute them in the future.</li>
</ul>

<p>
This is the first public release, it should be considered as a "beta
release", though we have tested it a lot in the last days.
</p>

<p>
<code>opam-bin</code> is a collaborative work between OCamlPro and Origin Labs.
</p>
</div>
</div>


<div id="outline-container-org3b0371b" class="outline-3">
<h3 id="org3b0371b">Fabrice Le Fessant later added</h3>
<div class="outline-text-3" id="text-org3b0371b">
<p>
Little update: the binary repository for OCaml 4.10.0 has been expanded to contain a set of 1800+
binary packages:
</p>

<p>
<a href="https://www.origin-labs.com/opam-bin/debian10.4-amd64/4.10.0">https://www.origin-labs.com/opam-bin/debian10.4-amd64/4.10.0</a>
</p>
</div>
</div>
</div>




<div id="outline-container-orgbddcbe5" class="outline-2">
<h2 id="9"><a id="orgbddcbe5"></a>New packages: plist-xml 0.1 and plist-xml-lwt 0.1</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-packages-plist-xml-0-1-and-plist-xml-lwt-0-1/6202/1">https://discuss.ocaml.org/t/ann-new-packages-plist-xml-0-1-and-plist-xml-lwt-0-1/6202/1</a>
</p>
</div>

<div id="outline-container-org8479052" class="outline-3">
<h3 id="org8479052">dosaylazy announced</h3>
<div class="outline-text-3" id="text-org8479052">
<p>
I would like to announce my first two OPAM packages,
<a href="https://opam.ocaml.org/packages/plist-xml/plist-xml.0.1/">plist-xml</a> and
<a href="https://opam.ocaml.org/packages/plist-xml-lwt/plist-xml-lwt.0.1/">plist-xml-lwt</a>. These two packages
build upon the <a href="https://opam.ocaml.org/packages/markup/markup.0.8.2/">markup</a> and
<a href="https://opam.ocaml.org/packages/markup-lwt/markup-lwt.0.5.0/">markup-lwt</a> libraries to read and write
plist files expressed as XML.
</p>

<p>
I originally wrote this code to process the TextMate grammar files found in
<a href="https://github.com/github/linguist/tree/master/vendor">https://github.com/github/linguist/tree/master/vendor</a>. I hope that other people can find good use of
these two libraries. Please report any bugs as well as any inconveniences in the API.
</p>
</div>
</div>
</div>




<div id="outline-container-orge770695" class="outline-2">
<h2 id="10"><a id="orge770695"></a>Call to testers (OCaml 4.11.0, release candidate)</h2>
<div class="outline-text-2" id="text-10">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-call-to-testers-ocaml-4-11-0-release-candidate/6205/1">https://discuss.ocaml.org/t/ann-call-to-testers-ocaml-4-11-0-release-candidate/6205/1</a>
</p>
</div>

<div id="outline-container-orga1e94f7" class="outline-3">
<h3 id="orga1e94f7">Kate announced</h3>
<div class="outline-text-3" id="text-orga1e94f7">
<p>
The release of OCaml version 4.11.0 is imminent. We have created a release candidate that you can test.
For users of the beta releases, this release candidate is exactly the same as the last beta release
except for a minor fix for the <code>#show</code> directive in the toplevel.
</p>
</div>

<div id="outline-container-org8d054d2" class="outline-4">
<h4 id="org8d054d2">&#x2014; :sparkles: The opam ecosystem ---</h4>
<div class="outline-text-4" id="text-org8d054d2">
<p>
The opam ecosystem is in good shape for this release candidate.
For maximum compatibility, you can use the following
<a href="https://github.com/kit-ty-kate/opam-alpha-repository/">opam-alpha-repository</a>:
</p>

<div class="org-src-container">
<pre class="src src-shell">$ opam repo add alpha https://github.com/kit-ty-kate/opam-alpha-repository.git
</pre>
</div>

<p>
during your tests. This repository integrate not-yet-upstreamed or unreleased fixes to various
packages.
With this repository all except a handful of packages are compatible with this release candidate.
</p>

<p>
Using opam-alpha-repository:
</p>
<ul class="org-ul">
<li><b>All core tools</b> (see <a href="https://github.com/ocaml/opam-repository/issues/16539">meta issue</a>) –</li>
</ul>
<p>
<b>including Merlin</b> :tada: – work, except for ocaml-lsp-server (which is not officially released yet
and only relevant for Windows users).
</p>

<ul class="org-ul">
<li><b>All packages</b> except 7 over the 2134 available packages in opam-repository that were compatible</li>
</ul>
<p>
with OCaml 4.10 are also compatible with OCaml 4.11.
</p>
</div>
</div>

<div id="outline-container-org44b522f" class="outline-4">
<h4 id="org44b522f">&#x2014; :checkered_flag: Call to testers ---</h4>
<div class="outline-text-4" id="text-org44b522f">
<p>
Given that the release is very close and the state of the community packages stable enough, we would
like to encourage people to give it a try before the release, especially for those on non-x86_64
architectures. I've personally been using OCaml 4.11 almost exclusively for the past 3 months and did
not really encountered any issues on my x86_64 machine with a fairly regular setup.
</p>

<p>
Give it a try! Happy testing! :milky_way:
</p>
</div>
</div>
</div>


<div id="outline-container-orgedff78d" class="outline-3">
<h3 id="orgedff78d">Anil Madhavapeddy then said</h3>
<div class="outline-text-3" id="text-orgedff78d">
<p>
And a huge thank you to @kit-ty-kate who has done an extraordinary amount of behind-the-scenes work for
this release.  This is the first time we're experimenting with the idea of an "OCaml Readiness Team" of
the maintainers of the various core tools, and she has <a href="https://github.com/ocaml/opam-repository/issues/16539">superbly
coordinated</a> those projects along with the wider
opam-repository (along with a large amount of direct compatibility fixing).
</p>

<p>
Due to this effort, for the first time since we started disaggregating tools out of the core OCaml
distribution starting about 8 years ago, the forthcoming releases of OCaml should come with tooling
that is ready for that release from day 1.  Props to all the maintainers for your hard work &#x2013; I'll be
talking about how this is working more in the forthcoming OCaml Workshop in a few weeks.
</p>
</div>
</div>
</div>




<div id="outline-container-orgf687d55" class="outline-2">
<h2 id="11"><a id="orgf687d55"></a>OCaml 4.10.1, first release candidate</h2>
<div class="outline-text-2" id="text-11">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-4-10-1-first-release-candidate/6207/1">https://discuss.ocaml.org/t/ocaml-4-10-1-first-release-candidate/6207/1</a>
</p>
</div>

<div id="outline-container-org5f9bda5" class="outline-3">
<h3 id="org5f9bda5">Kate announced</h3>
<div class="outline-text-3" id="text-org5f9bda5">
<p>
The release of OCaml version 4.10.1 is imminent. @octachron and the rest of the compiler dev team have
created a release candidate that you can test.
</p>

<p>
The source code is available at these addresses:
</p>

<p>
<a href="https://github.com/ocaml/ocaml/archive/4.10.1+rc1.tar.gz">https://github.com/ocaml/ocaml/archive/4.10.1+rc1.tar.gz</a> <br />
<a href="https://caml.inria.fr/pub/distrib/ocaml-4.10/ocaml-4.10.1+rc1.tar.gz">https://caml.inria.fr/pub/distrib/ocaml-4.10/ocaml-4.10.1+rc1.tar.gz</a>
</p>

<p>
The compiler can also be installed as an OPAM switch with one of the
following commands.
</p>

<pre class="example">
opam switch create ocaml-variants.4.10.1+rc1 --repositories=default,beta=git://github.com/ocaml/ocaml-beta-repository.git
</pre>

<p>
We want to know about any bugs. Please report them here:
<a href="https://github.com/ocaml/ocaml/issues">https://github.com/ocaml/ocaml/issues</a>
</p>

<p>
If every goes well, the full release should follow next week.
</p>
</div>

<div id="outline-container-orgaf648a4" class="outline-4">
<h4 id="orgaf648a4">— OCaml 4.10.1 changes ---</h4>
<div class="outline-text-4" id="text-orgaf648a4">
<p>
This version contains a collection of configuration, build systems and runtime fixes:
</p>
</div>

<ul class="org-ul">
<li><a id="org20bda2a"></a>Runtime system:<br />
<div class="outline-text-5" id="text-org20bda2a">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/9344">#9344</a>, <a href="https://github.com/ocaml/ocaml/issues/9368">#9368</a>: Disable exception backtraces in bytecode programs built with "-output-complete-exe". At the moment, such programs do not embed debug information and exception backtraces where causing them to crash. (Jérémie Dimino, review by Nicolás Ojeda Bär)</li>
</ul>
</div>
</li>

<li><a id="orgb53a14b"></a>Build system:<br />
<div class="outline-text-5" id="text-orgb53a14b">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/9531">#9531</a>: fix support for the BFD library on FreeBSD (Hannes Mehnert, review by Gabriel Scherer and David Allsopp)</li>
</ul>
</div>
</li>

<li><a id="org2b59d59"></a>Bug fixes:<br />
<div class="outline-text-5" id="text-org2b59d59">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/9068">#9068</a>, <a href="https://github.com/ocaml/ocaml/issues/9437">#9437</a>: ocamlopt -output-complete-obj failure on FreeBSD 12 (Xavier Leroy, report by Hannes Mehnert, review by Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9165">#9165</a>: Add missing -function-sections and -O3 flags in Makefiles. (Greta Yorsh, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9495">#9495</a>: fix a bug where bytecode binaries compiled with <code>-output-complete-exe</code> would not execute <code>at_exit</code> hooks at program termination (in particular, output channels would not be flushed). (Nicolás Ojeda Bär, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9714">#9714</a>, <a href="https://github.com/ocaml/ocaml/issues/9724">#9724</a>: Use the C++ alignas keyword when compiling in C++ in MSVC. Fixes a bug with MSVC C++ 2015 onwards. (Antonin Décimo, review by David Allsopp and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/9736">#9736</a>, <a href="https://github.com/ocaml/ocaml/issues/9749">#9749</a>: Compaction must start in a heap where all free blocks are blue, which was not the case with the best-fit allocator. (Damien Doligez, report and review by Leo White)</li>
</ul>
</div>
</li>

<li><a id="org3d2db15"></a>Tools:<br />
<div class="outline-text-5" id="text-org3d2db15">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/9552">#9552</a>: restore ocamloptp build and installation (Florian Angeletti, review by David Allsopp and Xavier Leroy)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org8a4a30e" class="outline-2">
<h2 id="12"><a id="org8a4a30e"></a>OCamlformat 0.15.0</h2>
<div class="outline-text-2" id="text-12">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocamlformat-0-15-0/6210/1">https://discuss.ocaml.org/t/ann-ocamlformat-0-15-0/6210/1</a>
</p>
</div>

<div id="outline-container-orgf477972" class="outline-3">
<h3 id="orgf477972">Guillaume Petiot announced</h3>
<div class="outline-text-3" id="text-orgf477972">
<p>
On behalf of the development team, I’d like to announce the release of ocamlformat version 0.15.0
:tada:.
</p>

<p>
Here are the main highlights of this release:
</p>
</div>

<div id="outline-container-org471b989" class="outline-4">
<h4 id="org471b989">Support for OCaml 4.11</h4>
<div class="outline-text-4" id="text-org471b989">
<p>
This means both that it compiles and runs using this version, but also that it can format 4.11-specific
language features (quoted extensions: <code>{%foo|...|}</code>).
</p>
</div>
</div>

<div id="outline-container-org7e13427" class="outline-4">
<h4 id="org7e13427">Compatibility with base and stdio v0.14.0</h4>
<div class="outline-text-4" id="text-org7e13427">
<p>
This compatibility has been restored since ocamlformat-0.14.3 but wasn't publicly announced,
ocamlformat is now compatible from base v0.12.0 to v0.14.0 included.
</p>
</div>
</div>

<div id="outline-container-orgc13de99" class="outline-4">
<h4 id="orgc13de99">Bugfixes</h4>
<div class="outline-text-4" id="text-orgc13de99">
<p>
Many bugs and unoptimal formatting were also fixed in this release:
</p>

<ul class="org-ul">
<li>Do not break inline elements such as <code>{i blah}</code> in docstrings</li>
<li>Distinguish hash-getter from hash-comparison infix operators. Operators of the form <code>#**#</code> or <code>#**.</code> where <code>**</code> can be 0 or more operator chars are considered getter operators and are not surrounded by spaces, as opposed to regular infix operators</li>
<li>Type constraint on return type of functions is now always printed before the function body</li>
<li>Restore previous functionality for pre-post extension points</li>
<li>Fix extra break before <code>function</code> body of a <code>fun</code>
Indent further args of anonymous functions</li>
<li>Do not clear the emacs <code>*compilation*</code> buffer on successful reformat</li>
<li>Fix disabling with attributes on OCaml &lt; 4.08</li>
<li>Preserve unwrapped comments by not adding artificial breaks when <code>wrap-comments=false</code> and <code>ocp-indent-compat=true</code> are set to avoid interfering with ocp-indent indentation</li>
<li>Break long literal strings at the margin</li>
<li>Break after a multiline argument in an argument list</li>
<li>Remove unnecessary parens around object</li>
<li>Fix placement of comments on constants</li>
<li>Do not escape arguments of some Odoc tags. The characters <code>[]{}</code> must not be escaped in the arguments of <code>@raise</code>, <code>@author</code>, <code>@version</code> and others.</li>
<li>Fix missing open line between multi-line let-binding with poly-typexpr</li>
<li>Remove trailing space after expression when followed by an attribute and break before attributes attached to multi-line phrases</li>
<li>Do not add a space to minimal comments <code>(* *)</code>, <code>(** *)</code> and <code>(*$ *)</code></li>
<li>Fix attributes position in labelled arguments type</li>
<li>Add missing parens around type annotation in anonymous function</li>
<li>Fix alignment of 'then' keyword in parenthesised expression</li>
<li>Recognise eliom file extensions</li>
</ul>
</div>
</div>

<div id="outline-container-orga698355" class="outline-4">
<h4 id="orga698355">A note for new users</h4>
<div class="outline-text-4" id="text-orga698355">
<p>
We encourage you to try ocamlformat, that can be installed from opam directly ( <code>opam install
ocamlformat</code> ), but please remember that it is still beta software. We added a <a href="https://github.com/ocaml-ppx/ocamlformat#faq-for-new-users">FAQ for new users
</a> that should help you decide if
ocamlformat is the right choice for you.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-org0387615" class="outline-2">
<h2 id="13"><a id="org0387615"></a>ocamlnet-4.1.8</h2>
<div class="outline-text-2" id="text-13">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2020-08/msg00005.html">https://sympa.inria.fr/sympa/arc/caml-list/2020-08/msg00005.html</a>
</p>
</div>

<div id="outline-container-org74b270a" class="outline-3">
<h3 id="org74b270a">Gerd Stolpmann announced</h3>
<div class="outline-text-3" id="text-org74b270a">
<p>
there is now ocamlnet-4.1.8 available:
</p>

<ul class="org-ul">
<li>compatibility with upcoming OCaml-4.11</li>
</ul>

<p>
See the project page for download, documentation, a detailed changelog,
and the mailing list:
<a href="http://projects.camlcity.org/projects/ocamlnet.html">http://projects.camlcity.org/projects/ocamlnet.html</a>
</p>

<p>
The repository is at
</p>

<p>
<a href="https://gitlab.com/gerdstolpmann/lib-ocamlnet3/">https://gitlab.com/gerdstolpmann/lib-ocamlnet3/</a>
</p>

<p>
opam follows soon.
</p>
</div>
</div>
</div>




<div id="outline-container-orgfde23a3" class="outline-2">
<h2 id="14"><a id="orgfde23a3"></a>Other OCaml News</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-orge1d7c01" class="outline-3">
<h3 id="orge1d7c01">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-orge1d7c01">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="https://blog.janestreet.com/jane-street-interview-process-2020/">The Jane Street Interview Process — 2020 Edition</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-orgb8a102f" class="outline-2">
<h2 id="orgb8a102f">Old CWN</h2>
<div class="outline-text-2" id="text-orgb8a102f">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
