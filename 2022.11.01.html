<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-11-01 Tue 12:53 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2022.10.25.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2022.11.08.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of October 25 to November 01, 2022.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">What are pros and cons of Eliom web framework?</a></li>
<li><a href="#2">Domain-shims: an implementation of `Domain` for OCaml 4 (beta version)</a></li>
<li><a href="#3">OCaml Platform Installer alpha release</a></li>
<li><a href="#4">geojson and geojsone</a></li>
<li><a href="#5">Other OCaml News</a></li>
<li><a href="#org0b78646">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">What are pros and cons of Eliom web framework?</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/what-are-pros-and-cons-of-eliom-web-framework/10658/7">https://discuss.ocaml.org/t/what-are-pros-and-cons-of-eliom-web-framework/10658/7</a>
</p>
</div>

<div id="outline-container-org34b24be" class="outline-3">
<h3 id="org34b24be">Deep in the thread, ZAN DoYe said</h3>
<div class="outline-text-3" id="text-org34b24be">
<p>
I&rsquo;ve made a cjkv info app with eliom, the old demo version is here(most of its functions are turned off and hidden):
<a href="https://cjkv.smaji.org/">https://cjkv.smaji.org/</a>
It collects variation, source info, input method code of characters among China, Japan, Korea, Vietnam, Hongkong,
Taiwan, ethnic minorities and ancient books. e.g.
</p>

<p>
<a href="https://cjkv.smaji.org/search/4ee4">https://cjkv.smaji.org/search/4ee4</a>
</p>

<p>
<a href="https://cjkv.smaji.org/char_list?step=16&amp;offset=184032&amp;stop=191471&amp;start=183984">https://cjkv.smaji.org/char_list?step=16&amp;offset=184032&amp;stop=191471&amp;start=183984</a>
</p>

<p>
Overall, eliom framework is fantastic. All the links are eliom_service, its parameters and itself are typed. Session
manage is powerful and flexible. Components are reactive with each other, seamlessly between server and client. An
app written in eliom is intrinsically an SSR SPA, an integral whole.
</p>

<p>
Writing an eliom app, all I want to say is: damn! it&rsquo;s too good!
</p>
</div>

<div id="outline-container-org2cb0763" class="outline-4">
<h4 id="org2cb0763">Cons:</h4>
<div class="outline-text-4" id="text-org2cb0763">
<ul class="org-ul">
<li>dune support</li>
<li><p>
merlin, ocaml-language-server
</p>

<p>
Your project is built by a manually managed Makefile and merln/lsp support is broken when you mix client/server code
together in the same folder.
</p>

<p>
You only get these supports when you write standalone server and client separately.
</p>

<p>
But these flaws can be overcome. I wrote a custom code translator, which generates server code and client code from
an eliom file into separate folder and make them still work together seamlessly. And in this case, I don&rsquo;t need a
Makefile, dune and ocaml-lsp works as normal projects.
</p></li>

<li><p>
ocsigenserver
</p>

<p>
It&rsquo;s good. But it updates infrequently and doesn&rsquo;t keep pace with other libraries closely. Because eliom depends on
it and its dependence constraint sometimes requires old libraries, better create a separate opam switch when working
with an eliom project.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgcf5931a" class="outline-4">
<h4 id="orgcf5931a">Wart</h4>
<div class="outline-text-4" id="text-orgcf5931a">
<p>
In fact, it&rsquo;s not a wart of eliom. It&rsquo;s lwt <a href="https://github.com/mirage/ocaml-cohttp/issues/545">https://github.com/mirage/ocaml-cohttp/issues/545</a>
That&rsquo;s why I stop working on the old demo and now rewriting it again with another tec stack.
</p>
</div>
</div>

<div id="outline-container-org417f847" class="outline-4">
<h4 id="org417f847">&#x2026;</h4>
<div class="outline-text-4" id="text-org417f847">
<p>
If only eliom depended on lwt/async optionally and came with an official code translator to overcome the dune/lsp
integration issue.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Domain-shims: an implementation of `Domain` for OCaml 4 (beta version)</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/domain-shims-an-implementation-of-domain-for-ocaml-4-beta-version/10706/1">https://discuss.ocaml.org/t/domain-shims-an-implementation-of-domain-for-ocaml-4-beta-version/10706/1</a>
</p>
</div>

<div id="outline-container-orgf73e971" class="outline-3">
<h3 id="orgf73e971">gasche announced</h3>
<div class="outline-text-3" id="text-orgf73e971">
<p>
I just wrote a small package, <code>domain-shims</code>, that provides a non-multicore implementation of the new <code>Domain</code>
module of the OCaml 5 standard library:
</p>

<p>
repository: <a href="https://gitlab.com/gasche/domain-shims">https://gitlab.com/gasche/domain-shims</a>
</p>

<p>
the one source file: <a href="https://gitlab.com/gasche/domain-shims/-/blob/trunk/lib/domain.ml">https://gitlab.com/gasche/domain-shims/-/blob/trunk/lib/domain.ml</a>
</p>

<p>
This is a fun hack, but it may also be useful for people who write some code using <code>Domain</code> to test it under OCaml
5, but still want to be able to build and run their project using their normal OCaml 4 setup.
</p>

<p>
I haven&rsquo;t put a version number and made a formal release yet.
</p>

<p>
The main limitation of the library is that it does not implement the <code>Effect</code> module providing effect handlers, so
it is not true that all OCaml 5 code will be compatible. I discuss this in more details in the <a href="https://gitlab.com/gasche/domain-shims#no-effect-support">README # no effect
support</a>, quoted below:
</p>
<blockquote>
<p>
OCaml 5 also provides effect handlers as a new <code>Effect</code> module of the standard library. We do not provide an
implementation of <code>Effect</code>, which is much harder to emulate using regular OCaml 4.
</p>

<p>
Someone could experiment with an implementation using the <a href="https://opam.ocaml.org/packages/delimcc/">delimcc</a>
library for delimited control. (Please do this and report! It is probably fun.) We expect that the result would be
much slower than the OCaml 5 implementation, probably by an order of magnitude. This would be okay for toy
experiments. But it would not be good enough to seriously run libraries relying on effect handlers for
performance-sensitive operations, such as Domainslib or Eio.
</p>

<p>
The other option would be to implement shim versions of Effect-using libraries. We are considering providing a
shim for Domainslib in particular, which is very easy to do without emulating effects at all. This general
approach sounds scary (no limit to the number of programs you need to provide shims for), but remember that OCaml
5 users are not supposed to use effect handlers too much yet, it was only made available for lightweight
concurrent schedulers.
</p>
</blockquote>

<p>
Happy hacking :-)
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">OCaml Platform Installer alpha release</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocaml-platform-installer-alpha-release/10652/5">https://discuss.ocaml.org/t/ann-ocaml-platform-installer-alpha-release/10652/5</a>
</p>
</div>

<div id="outline-container-org84c7eac" class="outline-3">
<h3 id="org84c7eac">Deep in this thread, Hannes Mehnert asked and Paul-Elliot replied</h3>
<div class="outline-text-3" id="text-org84c7eac">
<p>
Hello Hannes and thanks for your interest!
</p>

<blockquote>
<p>
do you have machine-readable data what went into the binaries that are being downloaded (i.e. which version of
what) [nowadays the buzzword is &ldquo;Software Bill of Materials] – NB: and opam switch export &#x2013;full &#x2013;freeze is a
good start for the opam packages
</p>
</blockquote>

<p>
In fact, currently only the <code>ocaml-platform</code> binary is being downloaded. The tools are then compiled in a sandbox
switch on the local machine, and cached in a local opam repository. Only the version of OCaml and of the tool is
kept as info in the local cache.
</p>

<blockquote>
<p>
do you have security in mind? the curl | sudo bash is not very nice from a security perspective, since that may do
any harm.
</p>
</blockquote>

<p>
We do have security in mind! We wanted a one line copy-paste installation for new users. So, we went for an install
script, although we will consider your advice on setting up a package repository!
</p>

<blockquote>
<p>
is there an update path? when I run your installer, how to upgrade to the latest version of “platform installer”
(can I check whether an update is available and what will change?)?
</p>
</blockquote>

<p>
Currently, the update path is simply to re-run the install script:
</p>

<pre class="example" id="orgc26a7a9">
bash &lt; &lt;(curl -sL https://github.com/tarides/ocaml-platform-installer/releases/latest/download/installer.sh)
</pre>

<p>
But there is no way to know if there is a new release, apart from checking the github releases page. Thanks a lot
for the inputs! I&rsquo;ll reach out to you soon by private message, as your work and experience on reproducible builds
might help for the ongoing remote repo!
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">geojson and geojsone</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-geojson-and-geojsone/10738/1">https://discuss.ocaml.org/t/ann-geojson-and-geojsone/10738/1</a>
</p>
</div>

<div id="outline-container-org8db37d9" class="outline-3">
<h3 id="org8db37d9">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-org8db37d9">
<p>
On behalf of the <a href="https://github.com/geocaml">geocaml</a> org, I&rsquo;m happy to announce the first release of <a href="https://github.com/geocaml/ocaml-geojson">geojson and
geojsone</a>.
</p>
</div>

<div id="outline-container-org8b4cbaf" class="outline-4">
<h4 id="org8b4cbaf">What is GeoJSON?</h4>
<div class="outline-text-4" id="text-org8b4cbaf">
<p>
GeoJSON is defined in <a href="https://www.rfc-editor.org/rfc/rfc7946">RFC7946</a> as
</p>

<blockquote>
<p>
&#x2026;a geospatial data interchange format based on JavaScript Object Notation (JSON).
</p>
</blockquote>

<p>
It is a schema for writing geospatial information in JSON often as some combination of &ldquo;geometries&rdquo; (e.g. a Point or
a Polygon). These are all using the <a href="https://en.wikipedia.org/wiki/World_Geodetic_System#1984_version">World Geodetic System 1984
(WGS84)</a> coordinate reference system.
</p>
</div>
</div>

<div id="outline-container-org9e5297e" class="outline-4">
<h4 id="org9e5297e">An example</h4>
<div class="outline-text-4" id="text-org9e5297e">
<p>
A collections of features where the first feature contains a single point.
</p>

<div class="org-src-container">
<pre class="src src-json">{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "Place du Capitole"
      },
      "geometry": {
        "coordinates": [
          1.4433418775990958,
          43.60443107383625
        ],
        "type": "Point"
      }
    }
  ]
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org59f3c17" class="outline-4">
<h4 id="org59f3c17">Geojson Library</h4>
<div class="outline-text-4" id="text-org59f3c17">
<p>
The <code>geojson</code> library provides functions for reading and writing GeoJSON objects. You must, however, provide a
simple interface for the JSON library of your choosing. This was a design decision made to offer better support for
using the library in the browser. You can <a href="https://github.com/geocaml/ocaml-geojson#geojson">read more about it in the
documentation</a>.
</p>
</div>
</div>

<div id="outline-container-org665afe4" class="outline-4">
<h4 id="org665afe4">Geojsone Library</h4>
<div class="outline-text-4" id="text-org665afe4">
<p>
The <code>geojsone</code> library is inspired by the <a href="https://erratique.ch/software/jsonm">jsonm</a> library. It vendors jsonm and
ports it to a non-blocking implementation provided using effects. Internally it then reconstructs
<a href="https://github.com/mirage/ezjsonm">ezjsonm</a> using <a href="https://github.com/ocaml-multicore/eio">eio</a> dubbed <code>ezjsone</code>.
The purpose of this library is to deal with the fact that GeoJSON documents can be quite big. It should be
considered quite experimental. I did a <a href="https://github.com/geocaml/ocaml-geojson/pull/49#issuecomment-1242945412">little bit of
benchmarking</a> and it seemed to suggest
that effects helps lower the memory usage (sometimes&#x2026;).
</p>
</div>
</div>

<div id="outline-container-orgd349f9b" class="outline-4">
<h4 id="orgd349f9b">Thanks</h4>
<div class="outline-text-4" id="text-orgd349f9b">
<p>
Thanks to all of the Outreachy applicants that helped with this library and in particular @IIITM-Jay who did some
work at the start of his Outreachy internship on the library.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">Other OCaml News</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgcdc4b90" class="outline-3">
<h3 id="orgcdc4b90">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-orgcdc4b90">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="https://tarides.com/blog/2022-10-28-the-mirageos-retreat-a-journey-of-food-cats-and-unikernels">The MirageOS Retreat: A Journey of Food, Cats, and Unikernels</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org0b78646" class="outline-2">
<h2 id="org0b78646">Old CWN</h2>
<div class="outline-text-2" id="text-org0b78646">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I&rsquo;ll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="orgd2b12e6">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>