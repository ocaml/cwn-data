<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-11-03 Tue 16:08 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2020.10.27.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2020.11.10.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of October 27 to November 03, 2020.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">Brr 0.0.1, a toolkit for programming browsers</a></li>
<li><a href="#2">New release of Monolith (20201026)</a></li>
<li><a href="#3">MirageOS 3.9.0 released</a></li>
<li><a href="#4">An AST typing problem</a></li>
<li><a href="#5">erlang 0.0.14, a toolkit to manipulate Erlang sources</a></li>
<li><a href="#6">opam-bin.1.0.0: binary packages for opam</a></li>
<li><a href="#7">Interesting OCaml Articles</a></li>
<li><a href="#orgcc2b37e">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-org9c4d55d" class="outline-2">
<h2 id="1">Brr 0.0.1, a toolkit for programming browsers</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-brr-0-0-1-a-toolkit-for-programming-browsers/6608/9">https://discuss.ocaml.org/t/ann-brr-0-0-1-a-toolkit-for-programming-browsers/6608/9</a>
</p>
</div>

<div id="outline-container-orgf70c794" class="outline-3">
<h3 id="orgf70c794">Continuing this thread, Daniel Bünzli said</h3>
<div class="outline-text-3" id="text-orgf70c794">
<p>
One thing I forgot, is that there is a <a href="http://todomvc.com/">todomvc</a> example in the repo, see
<code>todomvc.{html,ml}</code> in <a href="https://github.com/dbuenzli/brr/tree/master/test">this directory</a>.
</p>

<p>
It doesn't use the UI toolkit you mentioned, just the basic reactive DOM support provided by
<a href="https://erratique.ch/software/brr/doc/Brr_note/index.html"><code>Brr_note</code></a> and
<a href="https://erratique.ch/software/brr/doc/Brr_note_kit/index.html"><code>Brr_note_kit</code></a>. But you can see how
quickly you get reusable and composable components like
<a href="https://github.com/dbuenzli/brr/blob/41580885f40bfd184c3d8e5be2ddd56b0712b411/test/todomvc.ml#L229"><code>bool_editor</code></a>
and
<a href="https://github.com/dbuenzli/brr/blob/41580885f40bfd184c3d8e5be2ddd56b0712b411/test/todomvc.ml#L213-L214"><code>string_editor</code></a>.
</p>

<p>
The program structure in that example is quite similar to the one I had in the drawing app. You define
a purely functional, non reactive <a href="https://github.com/dbuenzli/brr/blob/41580885f40bfd184c3d8e5be2ddd56b0712b411/test/todomvc.ml#L36">data
model</a>,
<a href="https://github.com/dbuenzli/brr/blob/41580885f40bfd184c3d8e5be2ddd56b0712b411/test/todomvc.ml#L101">actions</a>
over the data model, create small UI fragments that renders parts of your data model and generate
actions events for it, gradually glue them together using note combinators and finally define a <a href="https://github.com/dbuenzli/brr/blob/41580885f40bfd184c3d8e5be2ddd56b0712b411/test/todomvc.ml#L314-L324">fixed
point
signal</a>
that holds the data model as massaged by the actions events of your UI (as mentioned I'd like to
replace fix points by direct <code>let rec</code> and a lazy infinitesimal delay combinator).
</p>

<p>
There are a few pitfalls like you should avoid retaining parts of your data model in the UI otherwise
you could get outdated data come back in your model (makes for very fun and spooky bugs though).
Identity in the data model is also a bit tricky, it seems in todomvc I
<a href="https://github.com/dbuenzli/brr/blob/41580885f40bfd184c3d8e5be2ddd56b0712b411/test/todomvc.ml#L84">used</a>
<code>==</code>. That didn't work in the drawing app where my surfaces had properties that could be updated but
they could also be linked toghether (that window belongs to that wall etc.) so I needed stable
identifiers for which I introduced a little abstraction to identify values and define relations between
them.
</p>

<p>
One thing I remember fondly when doing the drawing app is that I would still get the odd interaction
glitches you get when coding direct mouse manipulation interactions (surface
definition/selection/move/transform) however thanks to the ability to denotationally reason and act
(left leaning <a href="https://erratique.ch/software/note/doc/Note/E/index.html#val-select"><code>E.select</code></a>) on the
simultaneity of events, they were easy to understand and fix in an explicit way (that is via a defining
<b>expression</b>).
</p>

<p>
Also if you get into <a href="https://erratique.ch/software/note/doc/Note/"><code>Note</code></a> the denotational semantics
notation is not yet explained there, refer to the <a href="https://erratique.ch/software/react/doc/React/index.html#sem">one of
react</a> it's the same.
</p>
</div>
</div>


<div id="outline-container-org6a11e9a" class="outline-3">
<h3 id="org6a11e9a">Yoann Padioleau asked and Daniel Bünzli replied</h3>
<div class="outline-text-3" id="text-org6a11e9a">
<blockquote>
<p>
How hard would it be to build on top of Brr_note something like an Elm Architecture-style toolkit? I
know there's a TEA-Bucklescript library, but I'd rather use something relying on dune/jsoo.
</p>

<p>
I've read somewhere else that you were a bit skeptical about the advantage of MVU (movel-view-update)
over MVC, but I personnaly find the counter UI example in ELM at
<a href="https://guide.elm-lang.org/architecture/buttons.html">https://guide.elm-lang.org/architecture/buttons.html</a>
far simpler than the corresponding one in Brr at
<a href="https://github.com/barko/brr-eg/blob/master/counter/counter.ml">https://github.com/barko/brr-eg/blob/master/counter/counter.ml</a>
</p>
</blockquote>

<p>
I don't know. I didn't look into MVU too much, but to me it's largely a remix of MVC – despite what its
proponents try to tell you. Since we now live in an age of software adverstising it's a bit hard to get
frank assessments.
</p>

<p>
As far as I'm concerned the compositionality story of MVU doesn't look great. Basically it enforces
state machines on you, and composing state machines is a bit meh. In FRP state machines become signals
(via <code>S.accum</code>) which are highly composable entities with <b>fine granularity</b> (and bonus point, a well
defined denotational semantics for equational reasoning).
</p>

<p>
If you are looking for MVU I think you can simply jump on <a href="https://github.com/LexiFi/ocaml-vdom">LexiFI's
vdom</a>. But when I see how you get to <a href="https://github.com/LexiFi/ocaml-vdom/blob/9c5e42888ba72e69d5a018e38a4633e400913bfb/examples/demo/demo.ml#L196-L223">compose two
models</a>
in that paradigm, I'm not convinced.
</p>

<blockquote>
<p>
There’s no need for those E.select. The UI is IMHO more declarative in ELM.
</p>
</blockquote>

<p>
That example could be rewritten (I didn't write the examples in this repo) to be more like the ELM one
in it's declarations.
</p>

<p>
But I think the ELM example is also more rigid. You may not like that <code>E.select</code> on this toy example,
but you may get to enjoy it you when you start composing larger systems from smaller components.
</p>
</div>
</div>


<div id="outline-container-orgfa6d2df" class="outline-3">
<h3 id="orgfa6d2df">Yaron Minsky then said</h3>
<div class="outline-text-3" id="text-orgfa6d2df">
<p>
You might be interested in Bonsai! At some level, you can think of it as a library for building
composable state machines. It uses <a href="https://github.com/janestreet/incremental">Incremental</a> as its
engine for incrementalizing the computation of views, with a virtual-dom implementation underneath.
</p>

<p>
<a href="https://github.com/janestreet/bonsai">https://github.com/janestreet/bonsai</a>
</p>

<p>
It's the primary tool we use for building UIs inside of Jane Street.
</p>

<p>
In some ways, Bonsai is like Elm, but it has its own interesting ideas. Some of the concepts are
borrowed from this paper:
</p>

<p>
<a href="https://www.cl.cam.ac.uk/~jdy22/papers/the-arrow-calculus.pdf">https://www.cl.cam.ac.uk/~jdy22/papers/the-arrow-calculus.pdf</a>
</p>

<p>
though I won't pretend to understand this paper myself!
</p>

<p>
Bonsai doesn't yet have enough public-facing documentation, and really the bleeding edge version on
github is considerably better and more usable than the one released into opam. But there's at least one
public-facing UI that's built with it, if you want a real-world example.
</p>

<p>
<a href="https://blog.janestreet.com/finding-memory-leaks-with-memtrace/">https://blog.janestreet.com/finding-memory-leaks-with-memtrace/</a>
</p>
</div>
</div>


<div id="outline-container-orgdc8734f" class="outline-3">
<h3 id="orgdc8734f">Yoann Padioleau replied</h3>
<div class="outline-text-3" id="text-orgdc8734f">
<p>
Thx for the links!
</p>

<p>
The memtrace viewer example is pretty cool, but Bonsai looks far more complicated than ELM.
If you look at the counter example (the hello world of UI), here:
<a href="https://github.com/janestreet/bonsai/blob/master/examples/counters/lib/bonsai_web_counters_example.ml">https://github.com/janestreet/bonsai/blob/master/examples/counters/lib/bonsai_web_counters_example.ml</a>
</p>

<p>
and you compare it to the one in ocaml-vdom (thx @dbuenzli for the link) at
<a href="https://github.com/LexiFi/ocaml-vdom/blob/master/examples/counters/counters.ml">https://github.com/LexiFi/ocaml-vdom/blob/master/examples/counters/counters.ml</a>
</p>

<p>
there's a huge difference in simplicity.
</p>
</div>
</div>


<div id="outline-container-org52bdb68" class="outline-3">
<h3 id="org52bdb68">Ty Overby then said</h3>
<div class="outline-text-3" id="text-org52bdb68">
<p>
Hi Aryx, I wrote the Bonsai example that you linked, and it certainly isn't the most concise, but
that's because it was built for a tutorial on building small components (one counter is a single
component), how to use more advanced combinators (Bonsai.assoc), and how to move data from one
component to another (the add_counter_component into the associated counters component.)  I think it's
a great example of the power of structuring an UI as a DAG rather than a tree, but it definitely
doesn't make for the most concise code!
</p>

<p>
In the example, the comments that look like "CODE_EXCERPT_BEGIN" are actually preprocessor definitions
that are used in the (honestly, kinda out of date) <a href="https://github.com/janestreet/bonsai/blob/master/docs/getting_started/open_source/counters.mdx">tutorial
here</a>.
A bonsai app that wasn't written for such a tutorial would look more like
<a href="https://gist.github.com/TyOverby/e0f7e944d002cdf7144aaf0102d16ed5">this</a>.
</p>
</div>
</div>
</div>




<div id="outline-container-org299be7b" class="outline-2">
<h2 id="2">New release of Monolith (20201026)</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-release-of-monolith-20201026/6667/1">https://discuss.ocaml.org/t/ann-new-release-of-monolith-20201026/6667/1</a>
</p>
</div>

<div id="outline-container-org49a5c74" class="outline-3">
<h3 id="org49a5c74">François Pottier announced</h3>
<div class="outline-text-3" id="text-org49a5c74">
<p>
It is my pleasure to announce a major new release of Monolith.
</p>

<div class="org-src-container">
<pre class="src src-shell">opam update &amp;&amp; opam install monolith
</pre>
</div>

<p>
Monolith offers facilities for testing an OCaml library (for instance, a data structure implementation)
by comparing it against a reference implementation. It can be used to perform either random testing or
fuzz testing. Fuzz testing relies on the external tool afl-fuzz.
</p>

<p>
More information on Monolith is available <a href="https://gitlab.inria.fr/fpottier/monolith">here</a> and in the
draft paper <a href="http://cambium.inria.fr/~fpottier/publis/pottier-monolith-2021.pdf">Strong Automated Testing of OCaml
Libraries</a>.
</p>
</div>
</div>
</div>




<div id="outline-container-org6f65497" class="outline-2">
<h2 id="3">MirageOS 3.9.0 released</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-mirageos-3-9-0-released/6668/1">https://discuss.ocaml.org/t/ann-mirageos-3-9-0-released/6668/1</a>
</p>
</div>

<div id="outline-container-org137976d" class="outline-3">
<h3 id="org137976d">Martin Lucina announced</h3>
<div class="outline-text-3" id="text-org137976d">
<p>
We are pleased to announce the release of MirageOS 3.9.0.
</p>

<p>
Our last release announcement was for <a href="https://mirage.io/blog/announcing-mirage-36-release">MirageOS
3.6.0</a>, so we will also cover changes since 3.7.x
and 3.8.x in this announcement.
</p>

<p>
New features:
</p>

<ul class="org-ul">
<li>The Xen backend has been <a href="https://github.com/mirage/mirage/issues/1159">re-written from scratch</a> to be based on Solo5, and now supports PVHv2 on Xen 4.10 or higher, and QubesOS 4.0.</li>
<li>As part of this re-write, the existing Mini-OS based implementation has been retired, and all non-UNIX backends now use a unified OCaml runtime based on <code>ocaml-freestanding</code>.</li>
<li>OCaml runtime settings settable via the <code>OCAMLRUNPARAM</code> environment variable are now exposed as unikernel boot parameters. For details, refer to <a href="https://github.com/mirage/mirage/pull/1180">#1180</a>.</li>
</ul>

<p>
Security posture improvements:
</p>

<ul class="org-ul">
<li>With the move to a unified Solo5 and ocaml-freestanding base MirageOS unikernels on Xen gain several notable improvements to their overall security posture such as SSP for all C code, W^X, and malloc heap canaries. For details, refer to the mirage-xen 6.0.0 release <a href="https://github.com/mirage/mirage-xen/releases/tag/v6.0.0">announcement</a>.</li>
</ul>

<p>
API breaking changes:
</p>

<ul class="org-ul">
<li>Several Xen-specific APIs have been removed or replaced, unikernels using these may need to be updated. For details, refer to the mirage-xen 6.0.0 release <a href="https://github.com/mirage/mirage-xen/releases/tag/v6.0.0">announcement</a>.</li>
</ul>

<p>
Other notable changes:
</p>

<ul class="org-ul">
<li><code>Mirage_runtime</code> provides event loop enter and exit hook registration (<a href="https://github.com/mirage/mirage/pull/1010">#1010</a>).</li>
<li>All MirageOS backends now behave similarly on a successful exit of the unikernel: they call <code>exit</code> with the return value 0, thus <code>at_exit</code> handlers are now executed (<a href="https://github.com/mirage/mirage/pull/1011">#1011</a>).</li>
<li>The unix backend used a toplevel exception handler, which has been removed. All backends now behave equally with respect to exceptions.</li>
<li>Please note that the <code>Mirage_net.listen</code> function still installs an exception handler, which will be removed in a future release. The out of memory exception is no longer caught by <code>Mirage_net.listen</code> (<a href="https://github.com/mirage/mirage/issues/1036">#1036</a>).</li>
<li>To reduce the number of OPAM packages, the <code>mirage-*-lwt</code> packages are now deprecated. <code>Mirage_net</code> (and others) now use <code>Lwt.t</code> directly, and their <code>buffer</code> type is <code>Cstruct.t</code> (<a href="https://github.com/mirage/mirage/issues/1004">#1004</a>).</li>
<li>OPAM files generated by <code>mirage configure</code> now include opam build and installation instructions, and also an URL to the Git <code>origin</code> (<a href="https://github.com/mirage/mirage/pull/1022">#1022</a>).</li>
</ul>

<p>
Known issues:
</p>

<ul class="org-ul">
<li><code>mirage configure</code> fails if the unikernel is under version control and no <code>origin</code> remote is present (<a href="https://github.com/mirage/mirage/issues/1188">#1188</a>).</li>
<li>The Xen backend has issues with event delivery if built with an Alpine Linux GCC toolchain. As a work-around, please use a Fedora or Debian based toolchain.</li>
</ul>

<p>
Acknowledgements:
</p>

<ul class="org-ul">
<li>Thanks to Roger Pau Monné, Andrew Cooper and other core Xen developers for help with understanding the specifics of how Xen PVHv2 works, and how to write an implementation from scratch.</li>
<li>Thanks to Marek Marczykowski-Górecki for help with the QubesOS specifics, and for forward-porting some missing parts of PVHv2 to QubesOS version of Xen.</li>
<li>Thanks to @palainp on Github for help with testing on QubesOS.</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-orgbe4072a" class="outline-2">
<h2 id="4">An AST typing problem</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/an-ast-typing-problem/3677/8">https://discuss.ocaml.org/t/an-ast-typing-problem/3677/8</a>
</p>
</div>

<div id="outline-container-org514f74f" class="outline-3">
<h3 id="org514f74f">Chet Murthy announced</h3>
<div class="outline-text-3" id="text-org514f74f">
<p>
This note discusses the beginnings of an OCaml attribute-grammar
evaluator generator.  You can find this code on github at <code>camlp5/pa_ppx_ag</code>.
</p>

<p>
All of this code is implemented using <code>camlp5</code> and the <code>pa_ppx</code> suite
of PPX rewriters.
</p>

<p>
Caveat: this code is less than a week old, so it's changing fast.  In
the unlkely event that anybody out there is actually interested in
using this code, I'm happy to help in any way I can.  But just be
aware that it's changing -really- fast.
</p>
</div>

<div id="outline-container-orgf77f0de" class="outline-4">
<h4 id="orgf77f0de">Attribute Grammars for the multipass AST analysis problem</h4>
<div class="outline-text-4" id="text-orgf77f0de">
<p>
A year-and-a-half ago, the OP "An AST Typing Problem"
(<a href="https://discuss.ocaml.org/t/an-ast-typing-problem/3677">https://discuss.ocaml.org/t/an-ast-typing-problem/3677</a>) raised the
problem of how to deal with ASTs, in the presence of multiple passes
of program-analysis, each of which will want to hang various bits of
data off nodes.  The author of the OP pointed also at a couple of
posts on Lambda-the-Ultimate (LtU), discussing related problems.
</p>

<p>
The author notes:
</p>

<blockquote>
<p>
There’s a lot of passes, many of which depend on the previous ones,
each one making some slight change to the AST which might or might
not result in having to walk through the whole AST to catch all
occurrences of that particular node. Clearly you’ll want to encode
semantic errors in the types, so each pass ends up having its own
unique AST, each depending on the previous one. To change a single
node deep in the AST I have to write about a hundred lines of types
and mapping functions’ worth of boilerplate. Any change in the
lower levels of the AST bubbles up to the higher ones, and
refactoring becomes a nightmare.
</p>
</blockquote>

<p>
I've been thinking about this problem ever since, and at the time, had
suggested that while it seemed like attribute-grammars might be a
workable solution, they were a pretty heavy hammer.  It doesn't help
(of course) that there exist no attribute-grammar evaluator
generators, for OCaml.  Also, at least in the LtU threads, there was
discussion of modifying the AST, and having the analyses automatically
be updated for the modified AST.  Obviously this would require an
incremental re-attribution algorithm: more complexity and again,
something that isn't implemented for OCaml.
</p>

<p>
But imagine that there existed an attribute-grammar evaluator
generator for OCaml.  So for a simple language of expressions, with an assignment-operator,
we could write an evaluator as an attribute-grammar.
Imagine that you could write an ast like this
(test1_ast.ml):
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">expr</span> =
    <span style="color: #000000; background-color: #ffffff;">INT</span> <span style="color: #a020f0;">of</span> int
  | <span style="color: #000000; background-color: #ffffff;">BINOP</span> <span style="color: #a020f0;">of</span> binop * expr * expr
  | <span style="color: #000000; background-color: #ffffff;">UNOP</span> <span style="color: #a020f0;">of</span> unop * expr
  | <span style="color: #000000; background-color: #ffffff;">REF</span> <span style="color: #a020f0;">of</span> string
  | <span style="color: #000000; background-color: #ffffff;">ASSIGN</span> <span style="color: #a020f0;">of</span> string * expr
  | <span style="color: #000000; background-color: #ffffff;">SEQ</span> <span style="color: #a020f0;">of</span> expr * expr
<span style="color: #000000; font-weight: bold;">and</span> <span style="color: #a0522d;">unop</span> = <span style="color: #000000; background-color: #ffffff;">UPLUS</span> | <span style="color: #000000; background-color: #ffffff;">UMINUS</span>
<span style="color: #000000; font-weight: bold;">and</span> <span style="color: #a0522d;">binop</span> = <span style="color: #000000; background-color: #ffffff;">PLUS</span> | <span style="color: #000000; background-color: #ffffff;">MINUS</span> | <span style="color: #000000; background-color: #ffffff;">STAR</span> | <span style="color: #000000; background-color: #ffffff;">SLASH</span> | <span style="color: #000000; background-color: #ffffff;">PERCENT</span>
<span style="color: #000000; font-weight: bold;">and</span> <span style="color: #a0522d;">prog</span> = expr
</pre>
</div>
<p>
and then (having elsewhere written parser/pretty-printer) declare
attributes on those types (test1_variants.ml):
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">module</span> <span style="color: #228b22;">Attributed</span> = <span style="color: #000000; font-weight: bold;">struct</span>
  <span style="color: #483d8b; background-color: #ebebeb;">[%%import</span>: <span style="color: #228b22;">Test1_ast.</span>expr<span style="color: #483d8b; background-color: #ebebeb;">]</span>
  <span style="color: #483d8b;">[@@deriving attributed {</span>
<span style="color: #483d8b;">    attributed_module_name = AT</span>
<span style="color: #483d8b;">  ; normal_module_name = OK</span>
<span style="color: #483d8b;">  ; attributes = {</span>
<span style="color: #483d8b;">      expr = {</span>
<span style="color: #483d8b;">        inh_env = [%typ: (string * int) list]</span>
<span style="color: #483d8b;">      ; syn_env = [%typ: (string * int) list]</span>
<span style="color: #483d8b;">      ; value_ = [%typ: int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    ; prog = {</span>
<span style="color: #483d8b;">        value_ = [%typ: int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    ; binop = {</span>
<span style="color: #483d8b;">        oper = [%typ: int -&gt; int -&gt; int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    ; unop = {</span>
<span style="color: #483d8b;">        oper = [%typ: int -&gt; int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    }</span>
<span style="color: #483d8b;">  }]</span>
<span style="color: #000000; font-weight: bold;">end</span>
</pre>
</div>
<p>
and then declare attribute equations (test1_ag.ml):
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">module</span> <span style="color: #228b22;">REC</span> = <span style="color: #000000; font-weight: bold;">struct</span>
<span style="color: #483d8b; background-color: #ebebeb;">[%%import</span>: <span style="color: #228b22;">Test1_variants.Attributed.AT.</span>expr<span style="color: #483d8b; background-color: #ebebeb;">]</span>
  <span style="color: #483d8b;">[@@deriving ag {</span>
<span style="color: #483d8b;">    module_name = AG</span>
<span style="color: #483d8b;">  ; storage_mode = Records</span>
<span style="color: #483d8b;">  ; axiom = prog</span>
<span style="color: #483d8b;">  ; attributes = {</span>
<span style="color: #483d8b;">      expr = {</span>
<span style="color: #483d8b;">        inh_env = [%typ: (string * int) list]</span>
<span style="color: #483d8b;">      ; syn_env = [%typ: (string * int) list]</span>
<span style="color: #483d8b;">      ; value_ = [%typ: int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    ; prog = {</span>
<span style="color: #483d8b;">        value_ = [%typ: int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    ; binop = {</span>
<span style="color: #483d8b;">        oper = [%typ: int -&gt; int -&gt; int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    ; unop = {</span>
<span style="color: #483d8b;">        oper = [%typ: int -&gt; int]</span>
<span style="color: #483d8b;">      }</span>
<span style="color: #483d8b;">    }</span>
<span style="color: #483d8b;">  ; attribution = {</span>
<span style="color: #483d8b;">      expr__INT = (</span>
<span style="color: #483d8b;">        [%nterm 0].syn_env := [%nterm 0].inh_env ;</span>
<span style="color: #483d8b;">        [%nterm 0].value_ := [%prim 1].intval</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; expr__BINOP = (</span>
<span style="color: #483d8b;">        [%nterm expr.(1)].inh_env := [%nterm expr].inh_env ;</span>
<span style="color: #483d8b;">        [%nterm expr.(2)].inh_env := [%nterm expr.(1)].syn_env ;</span>
<span style="color: #483d8b;">        [%nterm expr].syn_env := [%nterm expr.(2)].syn_env ;</span>
<span style="color: #483d8b;">        [%nterm expr].value_ := [%nterm binop.(1)].oper [%nterm expr.(1)].value_ [%nterm</span>
<span style="color: #483d8b;">expr.(2)].value_</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; expr__UNOP = (</span>
<span style="color: #483d8b;">        [%nterm expr.(1)].inh_env := [%nterm expr].inh_env ;</span>
<span style="color: #483d8b;">        [%nterm expr].syn_env := [%nterm expr.(1)].syn_env ;</span>
<span style="color: #483d8b;">        [%nterm expr].value_ := [%nterm unop.(1)].oper [%nterm expr.(1)].value_</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; expr__REF = (</span>
<span style="color: #483d8b;">        [%nterm 0].syn_env := [%nterm 0].inh_env ;</span>
<span style="color: #483d8b;">        [%nterm 0].value_ := List.assoc [%prim 1].stringval [%nterm 0].inh_env</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; expr__ASSIGN = (</span>
<span style="color: #483d8b;">        [%nterm 0].syn_env := ([%prim 1].stringval, [%nterm expr.(1)].value_) :: [%nterm</span>
<span style="color: #483d8b;">expr.(1)].syn_env ;</span>
<span style="color: #483d8b;">        [%nterm expr.(1)].inh_env := [%nterm 0].inh_env ;</span>
<span style="color: #483d8b;">        [%nterm 0].value_ := [%nterm expr.(1)].value_</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; expr__SEQ = (</span>
<span style="color: #483d8b;">        [%nterm 1].inh_env := [%nterm 0].inh_env ;</span>
<span style="color: #483d8b;">        [%nterm 2].inh_env := [%nterm 1].syn_env ;</span>
<span style="color: #483d8b;">        [%nterm 0].syn_env := [%nterm 2].syn_env ;</span>
<span style="color: #483d8b;">        [%nterm 0].value_ := [%nterm 2].value_</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; prog = (</span>
<span style="color: #483d8b;">        [%nterm 1].inh_env := [] ;</span>
<span style="color: #483d8b;">        [%nterm 0].value_ := [%nterm 1].value_ ;</span>
<span style="color: #483d8b;">        assert True</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; unop__UPLUS = (</span>
<span style="color: #483d8b;">        [%nterm unop].oper := fun x -&gt; x</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; unop__UMINUS = (</span>
<span style="color: #483d8b;">        [%nterm unop].oper := fun x -&gt; (- x)</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; binop__PLUS = (</span>
<span style="color: #483d8b;">        [%nterm binop].oper := (+)</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; binop__MINUS = (</span>
<span style="color: #483d8b;">        [%nterm binop].oper := (-)</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; binop__STAR = (</span>
<span style="color: #483d8b;">        [%nterm binop].oper := fun a b -&gt; a*b</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; binop__SLASH = (</span>
<span style="color: #483d8b;">        [%nterm binop].oper := (/)</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    ; binop__PERCENT = (</span>
<span style="color: #483d8b;">        [%nterm binop].oper := (mod)</span>
<span style="color: #483d8b;">      )</span>
<span style="color: #483d8b;">    }</span>
<span style="color: #483d8b;">  }]</span>
<span style="color: #000000; font-weight: bold;">end</span>
</pre>
</div>
<p>
and then, turning a crank, you would get an evaluator:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">test_records</span> <span style="color: #a0522d;">ctxt</span> =
  assert_equal 3 (<span style="color: #8b2252;">{| x := 1 ; x ; y := 2 ; x + y |}</span> <span style="color: #a52a2a;">|&gt;</span> pa_prog_attributed <span style="color: #a52a2a;">|&gt;</span> <span style="color: #228b22;">REC.AG.</span>evaluate)
; assert_equal 0 (<span style="color: #8b2252;">{| x := 1 ; y := 2 ; x / y |}</span> <span style="color: #a52a2a;">|&gt;</span> pa_prog_attributed <span style="color: #a52a2a;">|&gt;</span> <span style="color: #228b22;">REC.AG.</span>evaluate)
</pre>
</div>
<p>
where <code>pa_prog_attributed</code> is a parser that parses the surface syntax
into an AST, which has empty slots for all attributes, and
<code>REC.AG.evaluate</code> evaluates attributes in its argument AST, and then
returns a tuple of all the synthesized attributes of the root node.
</p>
</div>
</div>

<div id="outline-container-org64ae6bb" class="outline-4">
<h4 id="org64ae6bb">Retaining familiar surface syntax for pattern-matching and constructing ASTs</h4>
<div class="outline-text-4" id="text-org64ae6bb">
<p>
Now, we don't want to give up easy pattern-matching and construction
of the AST, just because the AST has attributes strewn throughout it.
But we don't have to: with Camlp5's "quotations", once we define a
surface syntax parser for the basic AST (unadorned with attributes &#x2013;
viz. <code>test1_ast.ml</code>), we can use that to bootstrap ourselves to a
surface syntax parser for expressions and patterns over that AST, and
then in a similar manner we can get them for the AST adorned with
attributes.
</p>

<p>
This has already been done for hashconsed ASTs, and ASTs with built-in
unique-IDs, and and doing it for "attributed ASTs" isn't any harder.
Those examples can be found in the github project
<code>camlp5/pa_ppx_q_ast</code>.
</p>
</div>
</div>

<div id="outline-container-org8dda5a8" class="outline-4">
<h4 id="org8dda5a8">Limitations</h4>
<div class="outline-text-4" id="text-org8dda5a8">
<p>
There are still limitations.
</p>

<ol class="org-ol">
<li>The current code only implements topological-order evaluation.
That is, it builds the entire dependency-graph, topologically-sorts
it, and then evaluates attributes.  This is &#x2026;. suboptimal, when
we well know that almost all interesting AGs are already in the
class of ordered attribute-grammars (OAGs).  I plan to implement
the OAG evaluation strategy next.</li>

<li><p>
Traditionally AGs are defined over "productions" which are
sequences of nonterminals and terminals.  This doesn't correspond
to the way we define OCaml constructor data-types.  So instead of a constructor like
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">expr</span> =
  ... | <span style="color: #000000; background-color: #ffffff;">Call</span> <span style="color: #a020f0;">of</span> name * arg_list
<span style="color: #000000; font-weight: bold;">and</span> <span style="color: #a0522d;">arg_list</span> = <span style="color: #000000; background-color: #ffffff;">NoArgs</span> | <span style="color: #000000; background-color: #ffffff;">SomeArgs</span> <span style="color: #a020f0;">of</span> expr * arg_list
</pre>
</div>
<p>
we might want to use ~ 'a list~
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">expr</span> =
  ... | <span style="color: #000000; background-color: #ffffff;">Call</span> <span style="color: #a020f0;">of</span> name * expr list
</pre>
</div>

<p>
Problem is: defining attribute-equations for (effectively) an array of
nodes, is not part of the standard lingo of AGs.  But I believe we can
invent new syntax and make this succinct.
</p></li>

<li>Storage optimization.  A naive implementation of AGs can store all
attributes ever computed, at all the nodes in the AST.  This can
use a lot of memory.  But there are well-known techniques to
discard attributes once they'll never more be needed in the rest of
the attribute-evaluation, and I plan to implement these techniques.</li>
</ol>

<p>
There's an entire literature on things like remote-references in
attribute grammars, aggregates, and other things, all of which can
probably be usefully employed.
</p>
</div>
</div>

<div id="outline-container-orgfc2cc4d" class="outline-4">
<h4 id="orgfc2cc4d">Conclusion</h4>
<div class="outline-text-4" id="text-orgfc2cc4d">
<p>
I think that attribute-grammars could be a useful way to structure
complex multipass program-analysis, just as they used to do back in
the good ol' days.
</p>

<p>
Maybe worth a look-see!
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-orgf369ba8" class="outline-2">
<h2 id="5">erlang 0.0.14, a toolkit to manipulate Erlang sources</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-erlang-0-0-14-a-toolkit-to-manipulate-erlang-sources/6694/1">https://discuss.ocaml.org/t/ann-erlang-0-0-14-a-toolkit-to-manipulate-erlang-sources/6694/1</a>
</p>
</div>

<div id="outline-container-org2ce414a" class="outline-3">
<h3 id="org2ce414a">ostera announced</h3>
<div class="outline-text-3" id="text-org2ce414a">
<p>
Hej, hope you're staying safe :raised_hands:
</p>

<p>
I'm excited to share with you the first release of <code>erlang</code>.
</p>

<p>
<b>tl;dr</b>: <span class="underline">parser/lexer/ast/printer for Erlang</span>
</p>
</div>

<div id="outline-container-orgbc0e761" class="outline-4">
<h4 id="orgbc0e761">Description</h4>
<div class="outline-text-4" id="text-orgbc0e761">
<p>
<code>erlang</code> is a toolkit for manipulating Standard Erlang and Core Erlang sources and their abstract
syntax trees according to the Erlang specifications.
</p>

<p>
Version 0.0.14 provides:
</p>
<ul class="org-ul">
<li>A lexer/parser written in Menhir for Standard Erlang</li>
<li>ASTs for Core Erlang and Standard Erlang</li>
<li>An AST helper module for constructing Standard Erlang programs</li>
<li>A printer for the Standard Erlang AST (of highly volatile prettiness)</li>
<li>Support to turn ASTs to S-expressions</li>
<li><code>erldump</code>, a binary tool for reading Erlang sources and printing their concrete syntax trees as S-expressions.</li>
</ul>

<p>
It is distributed under Apache-2.0 license, depends on Menhir and Cmdliner, and it is being developed
as part of the Caramel project.
</p>

<ul class="org-ul">
<li><b>PR</b>: <a href="https://github.com/ocaml/opam-repository/pull/17553">https://github.com/ocaml/opam-repository/pull/17553</a> &#x2013; should be on opam.ocaml.org sometime tomorrow :)</li>
<li><b>Homepage</b>: <a href="https://github.com/AbstractMachinesLab/caramel">https://github.com/AbstractMachinesLab/caramel</a></li>
<li><b>Install</b>: <code>opam install erlang</code></li>
<li><b>API Docs &amp; manuals</b>: maybe on next release, but <span class="underline">follow the types</span>, and the <code>Erlang.Ast_helper</code> module is modeled after the <code>Parsing.Ast_helper</code> so it should feel familiar.</li>
</ul>

<p>
I started writing <code>erlang</code> to let Caramel do an entirely symbolic compilation from the OCaml typedtree
that would still allow for other passes/checks to be made cleanly. It's come with a decent number of
tests, and it can parse some OTP modules with small modifications.
</p>

<p>
There's <a href="https://github.com/AbstractMachinesLab/caramel/issues?q=is%3Aissue+is%3Aopen+label%3Alib%3Aerlang">a few outstanding
issues</a>
regarding the parsing for the next release, but it should be a starting point for anyone wanting to
read sources and <span class="underline">do something</span> with them. I plan on cover these issues in the rest of the year, but as
with all open source, it may take longer.
</p>

<p>
I'd like to add a few other things, like an AST invariants module to check that ASTs are actually valid
Erlang programs, and transformations more suitable for static analyses of the sources.
</p>

<p>
My thanks go to @antron, @c-cube, @Drup, @rgrinberg, and @mseri for helping me get around the OCaml
compiler, Menhir, and eventually to get this version split from Caramel and released independently.
Also a shoutout to the Js_of_ocaml project that served as a starting point for the parser/lexer work
here.
</p>

<p>
If you can give me some feedback on the design and implementation, I'd very much like to hear your
thoughts :slight_smile:
</p>

<p>
For those of you hoping to start using it, <span class="underline">do not</span> let it crash.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-org6c52a23" class="outline-2">
<h2 id="6">opam-bin.1.0.0: binary packages for opam</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-bin-1-0-0-binary-packages-for-opam/6696/1">https://discuss.ocaml.org/t/ann-opam-bin-1-0-0-binary-packages-for-opam/6696/1</a>
</p>
</div>

<div id="outline-container-orgcd91c9e" class="outline-3">
<h3 id="orgcd91c9e">Fabrice Le Fessant announced</h3>
<div class="outline-text-3" id="text-orgcd91c9e">
<p>
I am happy to announce the first stable release of <code>opam-bin</code>,
version 1.0.0, a framework to CREATE, USE and SHARE binary relocatable
packages with opam, to speed-up installation of packages. It is easily
installable from opam-repository, and available on Github:
</p>

<p>
<a href="https://ocamlpro.github.io/opam-bin">https://ocamlpro.github.io/opam-bin</a>
</p>

<p>
With opam-bin, you can :
</p>

<ul class="org-ul">
<li>build binary packages while installing their source counterpart with opam</li>
<li>automatically reuse previously created binary packages instead of compiling them again</li>
<li>export and share your binary packages as part of opam repositories for other users/computers to use</li>
</ul>

<p>
<code>opam-bin</code> is a framework in 3 parts :
</p>
<ul class="org-ul">
<li>a tool <code>opam-bin</code> to create binary packages: <a href="https://ocamlpro.github.io/opam-bin">https://ocamlpro.github.io/opam-bin</a></li>
<li>a set of patches to make some packages relocatable (<code>opam-bin</code> will apply them automatically when building packages), including patches to make the OCaml distribution relocatable from version 4.02.0 to 4.11.1: <a href="https://github.com/ocamlpro/relocation-patches">https://github.com/ocamlpro/relocation-patches</a></li>
<li>a set of contributed repositories of binary packages. For now, there is only one contribution, during the summer, by Origin Labs : <a href="https://www.origin-labs.com/opam-bin/debian10.4-amd64/">https://www.origin-labs.com/opam-bin/debian10.4-amd64/</a> containing 5 repos, among which the "4.10.0" repo contains more than 1800 packages. These repos can be used DIRECTLY WITH opam, WITHOUT USING opam-bin.</li>
</ul>

<p>
This is the first stable release:
</p>
<ul class="org-ul">
<li>Specific support has been added in the current <code>master</code> branch of <code>opam</code> to make working with this version more convenient, by printing pre- and post- installation messages. Yet, it will still work with previous version of opam, but with no output on the terminal when calling opam.</li>
<li>The <code>sharing</code> option can be enabled to share files with hard-links between switches, making the creation of new local switches almost costless in time and disk space.</li>
</ul>

<p>
<code>opam-bin</code> is a collaborative work between OCamlPro and Origin Labs.
</p>

<p>
<code>opam-bin</code> is particularly useful if you create many local switches,
as they become unexpensive. Tools like Drom (an OCaml project
scaffolder, <a href="https://ocamlpro.github.io/drom">https://ocamlpro.github.io/drom</a>) can take advantage of
that to provide a cargo-like experience.
</p>
</div>
</div>
</div>




<div id="outline-container-org2e2d6d6" class="outline-2">
<h2 id="7">Interesting OCaml Articles</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/interesting-ocaml-articles/1867/63">https://discuss.ocaml.org/t/interesting-ocaml-articles/1867/63</a>
</p>
</div>

<div id="outline-container-org06a14da" class="outline-3">
<h3 id="org06a14da">Ryan Slade announced</h3>
<div class="outline-text-3" id="text-org06a14da">
<p>
Anyone who's been following this blog probably saw this coming:
</p>

<p>
<a href="https://blog.darklang.com/leaving-ocaml/">https://blog.darklang.com/leaving-ocaml/</a>
</p>

<p>
It's an interesting read and hopefully can be used as constructive criticism in order to improve the
state of the OCaml ecosystem.
</p>
</div>
</div>
</div>




<div id="outline-container-orgcc2b37e" class="outline-2">
<h2 id="orgcc2b37e">Old CWN</h2>
<div class="outline-text-2" id="text-orgcc2b37e">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
