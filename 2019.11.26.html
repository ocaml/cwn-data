<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-11-26 Tue 09:29 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2019.11.19.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2019.12.03.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of November 19 to 26, 2019.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">tiny_httpd 0.1</a></li>
<li><a href="#2">printbox.0.3</a></li>
<li><a href="#3">v0.13 release of Jane Street packages</a></li>
<li><a href="#4">opam2nix (v1)</a></li>
<li><a href="#5">GitHub Actions for OCaml / opam now available</a></li>
<li><a href="#6">OCurrent 0.1 (CI/CD pipeline eDSL)</a></li>
<li><a href="#7">New pages for OCaml API</a></li>
<li><a href="#8">Irmin 2.0.0 release</a></li>
<li><a href="#9">Tail cascade: a new indentation style for some OCaml constructs</a></li>
<li><a href="#orga562926">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgc718c85" class="outline-2">
<h2 id="1">tiny_httpd 0.1</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-tiny-httpd-0-1/4727/1">https://discuss.ocaml.org/t/ann-tiny-httpd-0-1/4727/1</a>
</p>
</div>

<div id="outline-container-orgdd1bed5" class="outline-3">
<h3 id="orgdd1bed5">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-orgdd1bed5">
<p>
Hello and good morning, I'm pleased to announce that <a href="https://github.com/c-cube/tiny_httpd">tiny_httpd</a> 0.1 has been released and is on opam.
</p>

<p>
The goal is to emulate python's standard <code>http.server</code> by providing a 0-dependencies, minimalist, simple HTTP server for embedding in applications that are not primarily a website, with very basic routing (thanks to <code>Scanf</code>). A binary <code>http_of_dir</code> is also distributed and can be used to serve a directory, with optional upload of files.
</p>
</div>
</div>
</div>




<div id="outline-container-org002969b" class="outline-2">
<h2 id="2">printbox.0.3</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-printbox-0-3/4731/1">https://discuss.ocaml.org/t/ann-printbox-0-3/4731/1</a>
</p>
</div>

<div id="outline-container-org83b4721" class="outline-3">
<h3 id="org83b4721">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-org83b4721">

<div class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/8/8e7c55c5ab69c12f53a7862d2f84dd6e0cfc0dc0.png" alt="8e7c55c5ab69c12f53a7862d2f84dd6e0cfc0dc0.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">b</span> =
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">PrintBox</span> <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #228b22;">PrintBox_unicode.</span>setup();
  frame <span style="color: #a52a2a;">@@</span> grid_l [
    [text <span style="color: #8b2252;">"subject"</span>; text_with_style <span style="color: #228b22;">Style.</span>bold <span style="color: #8b2252;">"announce: printbox 0.3"</span>];
    [text <span style="color: #8b2252;">"explanation"</span>;
    frame <span style="color: #a52a2a;">@@</span> text <span style="color: #8b2252;">{|PrintBox is a library for rendering nested tables,</span>
<span style="color: #8b2252;">    trees, and similar structures in monospace text or HTML.|}</span>];
    [text <span style="color: #8b2252;">"github"</span>;
    text_with_style <span style="color: #228b22;">Style.</span>(bg_color <span style="color: #000000; background-color: #ffffff;">Blue</span>) <span style="color: #8b2252;">"https://github.com/c-cube/printbox/releases/tag/0.3"</span>];
    [text <span style="color: #8b2252;">"contributors"</span>;
     vlist_map (text_with_style <span style="color: #228b22;">Style.</span>(fg_color <span style="color: #000000; background-color: #ffffff;">Green</span>)) [<span style="color: #8b2252;">"Simon"</span>; <span style="color: #8b2252;">"Guillaume"</span>; <span style="color: #8b2252;">"Matt"</span>]];
    [text <span style="color: #8b2252;">"dependencies"</span>;
    tree empty
      [tree (text <span style="color: #8b2252;">"mandatory"</span>)
         [text <span style="color: #8b2252;">"dune"</span>; text <span style="color: #8b2252;">"bytes"</span>];
       tree (text <span style="color: #8b2252;">"optional"</span>)
         [text <span style="color: #8b2252;">"uutf"</span>; text <span style="color: #8b2252;">"uucp"</span>; text <span style="color: #8b2252;">"tyxml"</span>]]];
    [text <span style="color: #8b2252;">"expected reaction"</span>; text <span style="color: #8b2252;">"&#127881;"</span>];
  ]

<span style="color: #000000; font-weight: bold;">let</span> () = print_endline <span style="color: #a52a2a;">@@</span> <span style="color: #228b22;">PrintBox_text.</span>to_string b
</pre>
</div>

<p>
(<a href="https://github.com/c-cube/printbox/releases/tag/0.3">actual link to the release</a>)
</p>
</div>
</div>
</div>




<div id="outline-container-org37102d8" class="outline-2">
<h2 id="3">v0.13 release of Jane Street packages</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-v0-13-release-of-jane-street-packages/4735/1">https://discuss.ocaml.org/t/ann-v0-13-release-of-jane-street-packages/4735/1</a>
</p>
</div>

<div id="outline-container-org08305ad" class="outline-3">
<h3 id="org08305ad">Xavier Clerc announced</h3>
<div class="outline-text-3" id="text-org08305ad">
<p>
We are pleased to announce the v0.13 release of Jane Street packages!
</p>

<p>
This release comes with 14 new packages, and a number of fixes and
enhancements. The documentation for this release is available on our
website:
</p>

<p>
<a href="https://ocaml.janestreet.com/ocaml-core/v0.13/doc/">https://ocaml.janestreet.com/ocaml-core/v0.13/doc/</a>
</p>

<p>
The remainder of this mail highlights the main changes since the v0.12
release; we hope it will be useful to developers in the process of
migrating to the new version. A comprehensive changelog is available
at the end.
</p>
</div>

<div id="outline-container-orgf38a962" class="outline-4">
<h4 id="orgf38a962">Notable changes</h4>
<div class="outline-text-4" id="text-orgf38a962">
<ul class="org-ul">
<li>Changed <code>Base</code>, <code>Core_kernel</code>, and <code>Core</code> functions to raise
<code>Not_found_s</code> instead of <code>Not_found</code>.  <code>Hashtbl.find_exn</code> and
<code>Map.find_exn</code> now include the key in their error message.</li>

<li>Changed <code>Core</code> and <code>Core_kernel</code> to export <code>int</code> comparison rather
than polymorphic comparison.</li>

<li>Removed the "robust" float comparison operators (<code>&gt;.</code>, <code>=.</code>, &#x2026;)
from the default namespace.</li>

<li>Replaced <code>sexp_*</code> types (<code>sexp_list</code>, <code>sexp_option</code>, <code>sexp_opaque</code>,
&#x2026;) with preprocessor attributes (<code>[@sexp.list]</code>, <code>[@sexp.option]</code>,
<code>[@sexp.opaque]</code>, &#x2026;).</li>

<li>Changed <code>let%map</code> syntax from <code>let%map.Foo.Let_syntax</code> to
<code>let%map.Foo</code>.</li>

<li>Added to <code>match%optional</code> support for specifying a path, so you can
write <code>match%optional.Foo foo_option</code> rather than <code>let open
  Foo.Optional_syntax in match%optional foo_option</code>.</li>

<li>Improved <code>Base.Backtrace</code> so that it enables recording of backtraces
in more situations, specifically when <code>OCAMLRUNPARAM</code> is defined but
doesn't mention the backtrace flag, <code>b</code>.</li>

<li>Added javascript support for <code>Zarith</code>, <code>Bigint</code>, <code>Bignum</code>, and
<code>Bigdecimal</code>.</li>

<li>Changed <code>Hashtbl.create</code>'s default <code>size</code> from 128 to 0.</li>

<li>Changed <code>Core_kernel.Command</code> so that all commands accept double
dash flags: <code>--help</code>, <code>--version</code>, and <code>--build-info</code>.</li>
</ul>
</div>
</div>


<div id="outline-container-org8769b57" class="outline-4">
<h4 id="org8769b57">New packages</h4>
<div class="outline-text-4" id="text-org8769b57">
<ul class="org-ul">
<li>async_udp (<a href="https://github.com/janestreet/async_udp">https://github.com/janestreet/async_udp</a>): UDP support for
Async.</li>

<li>async_websocket (<a href="https://github.com/janestreet/async_websocket">https://github.com/janestreet/async_websocket</a>):
A library that implements the websocket protocol on top of Async.</li>

<li>bonsai (<a href="https://github.com/janestreet/bonsai">https://github.com/janestreet/bonsai</a>): A library for building
dynamic webapps, using Js_of_ocaml.</li>

<li>postgres_async (<a href="https://github.com/janestreet/postgres_async">https://github.com/janestreet/postgres_async</a>):
OCaml/async implementation of the postgres protocol (i.e., does not
use C-bindings to libpq).</li>

<li>ppx_cold (<a href="https://github.com/janestreet/ppx_cold">https://github.com/janestreet/ppx_cold</a>): Expands <code>[@cold]</code>
into <code>[@inline never][@specialise never][@local never]</code>.</li>

<li>ppx_pattern_bind (<a href="https://github.com/janestreet/ppx_pattern_bind">https://github.com/janestreet/ppx_pattern_bind</a>):
A ppx for writing fast incremental bind nodes in a pattern match.</li>

<li>ppx_python (<a href="https://github.com/janestreet/ppx_python">https://github.com/janestreet/ppx_python</a>):
<code>[@@deriving]</code> plugin to generate Python conversion functions.</li>

<li>ppx_yojson_conv (<a href="https://github.com/janestreet/ppx_yojson_conv">https://github.com/janestreet/ppx_yojson_conv</a>):
<code>[@@deriving]</code> plugin to generate Yojson conversion functions.</li>

<li>ppx_yojson_conv_lib (<a href="https://github.com/janestreet/ppx_yojson_conv_lib">https://github.com/janestreet/ppx_yojson_conv_lib</a>):
Runtime lib for <code>ppx_yojson_conv</code>.</li>

<li>pythonlib (<a href="https://github.com/janestreet/pythonlib">https://github.com/janestreet/pythonlib</a>): A library to
help writing wrappers around OCaml code for python.</li>

<li>sexp_select (<a href="https://github.com/janestreet/sexp_select">https://github.com/janestreet/sexp_select</a>): A library
to use CSS-style selectors to traverse sexp trees.</li>

<li>timezone (<a href="https://github.com/janestreet/timezone">https://github.com/janestreet/timezone</a>): Time-zone handling.</li>

<li>toplevel_backend (<a href="https://github.com/janestreet/toplevel_backend">https://github.com/janestreet/toplevel_backend</a>):
Shared backend for setting up toplevels.</li>

<li>zarith_stubs_js (<a href="https://github.com/janestreet/zarith_stubs_js">https://github.com/janestreet/zarith_stubs_js</a>):
Javascript stubs for the Zarith library.</li>
</ul>
</div>
</div>


<div id="outline-container-org15bdd14" class="outline-4">
<h4 id="org15bdd14">Deprecations / Removals</h4>
<div class="outline-text-4" id="text-org15bdd14">
<p>
<code>Async_kernel</code>:
</p>

<ul class="org-ul">
<li>Deprecated monadic <code>ignore</code> functions in favor of <code>ignore_m</code>.</li>
</ul>

<p>
<code>Base</code>:
</p>

<ul class="org-ul">
<li>Deleted <code>Array.replace</code> and <code>replace_all</code> functions, which have been
deprecated since before the last public release.</li>

<li>Deprecated <code>Result.ok_unit</code>; use <code>Ok ()</code>.</li>

<li>Removed the <code>Monad</code> and <code>Applicative</code> interfaces' <code>all_ignore</code>
function; it was previously deprecated and replaced by <code>all_unit</code>.</li>

<li>Removed <code>List.dedup</code>, which has been deprecated since 2017-04.</li>

<li>Removed <code>String</code> mutation functions, which have been deprecated in
favor of <code>Bytes</code> since 2017-10.</li>

<li>Deprecated <code>Array.truncate</code>, <code>Obj_array.unsafe_truncate</code>, and
<code>Uniform_array.unsafe_truncate</code>.</li>

<li>Deprecated <code>Sys.argv</code>, which has been superseded by <code>get_argv</code>,
which is a function, reflecting the fact that <code>argv</code> can change (as
of OCaml 4.09).</li>
</ul>

<p>
<code>Core_kernel</code>:
</p>

<ul class="org-ul">
<li>Removed <code>Core_kernel.Std</code>, which had been deprecated for a year.</li>

<li>Deprecated type <code>Command.Spec.param</code> in favor of <code>Command.Param.t</code>.</li>

<li>Removed <code>Hashtbl</code> functions that had been deprecated for years.</li>

<li>Removed <code>Float.to_string_round_trippable</code>, which has been deprecated
in favor of <code>to_string</code> since 2017-04.</li>

<li>Deprecated <code>Fqueue</code> functions where one should use <code>Fdeque</code> instead:
<code>bot</code>, <code>bot_exn</code>, and <code>enqueue_top</code>.</li>

<li>Deleted <code>Bus.unsubscribes</code>, which will be obviated by a performance
improvement to <code>Bus.unsubscribe</code>.</li>
</ul>

<p>
<code>Timing_wheel</code>:
</p>

<ul class="org-ul">
<li>Removed the <code>alarm_upper_bound</code> function, which has been deprecated
for 6 months, and superseded by <code>max_allowed_alarm_time</code>.</li>
</ul>
</div>
</div>


<div id="outline-container-orgfdea015" class="outline-4">
<h4 id="orgfdea015">Moves</h4>
<div class="outline-text-4" id="text-orgfdea015">
<p>
<code>Core_kernel</code>:
</p>

<ul class="org-ul">
<li>Moved <code>Bounded_int_table</code> to a standalone library.</li>

<li>Moved the <code>Pool</code> and <code>Tuple_type</code> modules to a standalone library,
<code>Tuple_pool</code>.</li>
</ul>

<p>
<code>Async_unix</code>:
</p>

<ul class="org-ul">
<li>Moved <code>Unix.Fd.replace</code> into a <code>Private</code> submodule.</li>
</ul>
</div>
</div>


<div id="outline-container-orgb7268bc" class="outline-4">
<h4 id="orgb7268bc">Changelog</h4>
<div class="outline-text-4" id="text-orgb7268bc">
<p>
Please visit <a href="https://discuss.ocaml.org/t/ann-v0-13-release-of-jane-street-packages/4735">https://discuss.ocaml.org/t/ann-v0-13-release-of-jane-street-packages/4735</a>
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-org1d77fa4" class="outline-2">
<h2 id="4">opam2nix (v1)</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam2nix-v1/4741/1">https://discuss.ocaml.org/t/ann-opam2nix-v1/4741/1</a>
</p>
</div>

<div id="outline-container-org48df80f" class="outline-3">
<h3 id="org48df80f">Tim Cuthbertson announced</h3>
<div class="outline-text-3" id="text-org48df80f">
<p>
Anouncing opam2nix (v1)
</p>

<p>
<a href="https://github.com/timbertson/opam2nix">opam2nix</a> generates <a href="https://nixos.org/">nix</a> expressions from the <a href="https://opam.ocaml.org/">opam</a> OCaml package repository. It works similarly to <a href="https://github.com/nix-community/bundix">bundix</a>, <a href="https://github.com/svanderburg/node2nix">node2nix</a>, etc:
</p>

<p>
You run an (impure) command to resolve all transitive dependency versions using the current opam repository, generating a .nix file that locks down the exact package sources and versions. Then this file can be imported to provide <code>buildInputs</code> for building your ocaml project in nix.
</p>

<p>
<b>What is nix and why would I care?</b> Well, that's a long story but the headline benefits of nix are:
</p>

<ul class="org-ul">
<li>reproducible builds (if it builds for me, it builds for you)</li>
<li>stateless (you don't set up switches and then install packages, each expression specifies everything it needs, and anything you don't have is fetched/built on demand)</li>
<li>language agnostic (takes care of non-ocaml dependencies)</li>
</ul>

<p>
It's sadly not a shallow learning curve, but those benefits are hard to find elsewhere, so I obviously think it's worthwhile. So if you use nix (or would like to), please give it a try and provide feedback. I'll (slowly) start working on upstreaming it into nixpkgs.
</p>
</div>
</div>
</div>




<div id="outline-container-orgb7cca50" class="outline-2">
<h2 id="5">GitHub Actions for OCaml / opam now available</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/github-actions-for-ocaml-opam-now-available/4745/1">https://discuss.ocaml.org/t/github-actions-for-ocaml-opam-now-available/4745/1</a>
</p>
</div>

<div id="outline-container-org00426ce" class="outline-3">
<h3 id="org00426ce">Anil Madhavapeddy announced</h3>
<div class="outline-text-3" id="text-org00426ce">
<p>
I was in the <a href="https://github.com/actions">GitHub Actions</a> beta program and forward ported my code to the latest version that just went public.  It's a pretty simple way to get your OCaml code tested on Linux, macOS and Windows, without requiring an external CI service.  The action attempts to provide a homogenous interface across all three operating systems, so invoking 'opam' from subsequent actions should "just work".
</p>

<p>
You can find it here:
</p>
<ul class="org-ul">
<li>In the GitHub Marketplace at <a href="https://github.com/marketplace/actions/setup-ocaml">https://github.com/marketplace/actions/setup-ocaml</a></li>
<li>Source code on <a href="https://github.com/avsm/setup-ocaml/">https://github.com/avsm/setup-ocaml/</a></li>
<li>Hello World usage on <a href="https://github.com/avsm/hello-world-action-ocaml">https://github.com/avsm/hello-world-action-ocaml</a></li>
<li>Usage in ocaml-yaml:
<ul class="org-ul">
<li><a href="https://github.com/avsm/ocaml-yaml/blob/master/.github/workflows/test.yml">https://github.com/avsm/ocaml-yaml/blob/master/.github/workflows/test.yml</a></li>
<li>An <a href="https://github.com/avsm/ocaml-yaml/runs/314055554">example ocaml-yaml run</a></li>
</ul></li>
</ul>

<p>
This should be considered fairly experimental as GH Actions is so new.  If you do use it, then consider <a href="https://github.com/avsm/setup-ocaml/issues/4">updating this issue with your usage</a>.  It does not current supporting caching yet, but is pretty fast to bootstrap (~4minutes).
</p>

<p>
It also doesn't have any higher level purpose other than to set up an opam environment, since most of the additional functionality such as revdeps testing is planned for addition to the <a href="https://discuss.ocaml.org/t/ann-ocurrent-0-1-ci-cd-pipeline-edsl/4742/2">ocurrent DSL</a>.   Nevertheless, this GH feature will hopefully be useful for smaller projects without a lot of computational requirements.   Let me know how it goes!
</p>

<p>
Windows is currently supported through @fdopen's excellent fork that uses Cygwin.   As Windows support is being mainlined into opam itself at the moment, I'm hoping that we will gradually move over to that.  That should eventually remove the need for two separate opam-repositories, so I won't be adding any features that are Linux or macOS-specific and do not work on the Cygwin version.
</p>
</div>
</div>
</div>




<div id="outline-container-orgbb4ec17" class="outline-2">
<h2 id="6">OCurrent 0.1 (CI/CD pipeline eDSL)</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocurrent-0-1-ci-cd-pipeline-edsl/4742/1">https://discuss.ocaml.org/t/ann-ocurrent-0-1-ci-cd-pipeline-edsl/4742/1</a>
</p>
</div>

<div id="outline-container-orgc382f8c" class="outline-3">
<h3 id="orgc382f8c">Thomas Leonard announced</h3>
<div class="outline-text-3" id="text-orgc382f8c">
<p>
<a href="https://github.com/ocurrent/ocurrent">OCurrent</a> 0.1 has just been released to opam-repository.
</p>

<p>
OCurrent is an OCaml eDSL intended for writing build/test/deploy pipelines. It is being used as the engine for <a href="https://github.com/ocurrent/ocaml-ci/">ocaml-ci</a> and the <a href="https://github.com/ocurrent/docker-base-images">docker-base-images</a> builder (used to build the OCaml Docker images, such as <code>ocurrent/opam:alpine-3.10-ocaml-4.08</code>). Other good uses might be building and redeploying a Docker service or a unikernel whenever its source repository changes. It can be run locally as a single Unix process.
</p>

<p>
An OCurrent pipeline is written as an OCaml program, but the OCurrent engine ensures that it is kept up-to-date by re-running stages when their inputs change. A web UI is available so you can view your pipeline and see its current state.
</p>

<p>
OCurrent can statically analyse the pipelines before they have run, allowing it to run steps in parallel automatically and to display the whole pipeline. It does this using a light-weight alternative to arrows, which doesn't require programming in an awkward point-free style. See
<a href="https://roscidus.com/blog/blog/2019/11/14/cicd-pipelines/">CI/CD Pipelines: Monad, Arrow or Dart?</a> for more about that.
</p>

<p>
The basic functionality can be extended using "plugins" (just normal OCaml libraries). Plugins are available for interacting with Docker, Git, GitHub and Slack. These are in separate packages (e.g. <code>current_github</code>) to avoid having the base package pull in too many dependencies).
</p>

<p>
There is also an optional Cap'n Proto RPC interface, in the <code>current_rpc</code> opam package. This is used, for example, by <a href="https://github.com/ocurrent/citty">citty</a> to provide a TTY interface to ocaml-ci.
</p>

<p>
<a href="https://github.com/ocurrent/ocurrent/wiki">The OCurrent wiki</a> contains examples, and documentation on the various plugins.
</p>

<p>
Here's an example pipeline (from the base image builder):
</p>


<div class="figure">
<p><img src="https://roscidus.com/blog/images/cicd/docker-base-images-thumb.png" alt="docker-base-images-thumb.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-orgbdfa9a2" class="outline-3">
<h3 id="orgbdfa9a2">Anil Madhavapeddy then added</h3>
<div class="outline-text-3" id="text-orgbdfa9a2">
<p>
For those curious about the relation to the existing CI used in opam-repository, then it is no coincidence that @talex5 is the author of both :-)
</p>

<p>
This DSL is the next iteration of the <a href="https://github.com/moby/datakit">datakit-ci</a>, but specialised to be faster and simpler for extending with OCaml and more complex workflows that our OCaml Platform tools need these days (like ocamlformat linting, or dune expect promotion, or odoc cross-referenced doc generation).  We are planning a smooth migration next year over to the new system, but wanted to release this early to show you some of the pieces going into this new iteration.  I am particularly excited about the new tty-based interface that saves an awful lot of clicking around on web UIs for CI results&#x2026;
</p>
</div>
</div>
</div>




<div id="outline-container-orgf26e58f" class="outline-2">
<h2 id="7">New pages for OCaml API</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/new-pages-for-ocaml-api/4720/13">https://discuss.ocaml.org/t/new-pages-for-ocaml-api/4720/13</a>
</p>
</div>

<div id="outline-container-org73238c6" class="outline-3">
<h3 id="org73238c6">Continuing this thread, sanette announced</h3>
<div class="outline-text-3" id="text-org73238c6">
<p>
I have uploaded a new version (same link <a href="https://sanette.github.io/ocaml-api/">https://sanette.github.io/ocaml-api/</a>)
</p>
<ul class="org-ul">
<li>background color for links in the TOC @Maelan</li>
<li>more indentation for value descriptions @Maelan,  @grayswandyr</li>
<li>word wrapping long <code>&lt;pre&gt;</code> codes @grayswandyr</li>
<li>type table: remove <code>(*</code> and <code>*)</code>, give more space to code wrt comments, diminish comment's color @grayswandyr</li>
</ul>

<p>
searching is not ready yet&#x2026; please wait
suggestions for dark theme welcome
</p>
</div>
</div>


<div id="outline-container-orgc98a45b" class="outline-3">
<h3 id="orgc98a45b">sanette later added</h3>
<div class="outline-text-3" id="text-orgc98a45b">
<p>
I have just uploaded a new version with a basic search engine.
</p>
<ul class="org-ul">
<li>for each page, you can search values/modules</li>
<li>in the general index page, the search includes also the descriptions</li>
<li>search results are ranked by relevance</li>
</ul>

<p>
the downside is that each page now comes with an index of about 570Kb in the form of an index.js file. I'm kind of hoping that the browser will cache this, but I'm not sure. It would be maybe better to only load the index file on demand.
</p>
</div>
</div>
</div>




<div id="outline-container-orgddf2ff1" class="outline-2">
<h2 id="8">Irmin 2.0.0 release</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-irmin-2-0-0-release/4746/1">https://discuss.ocaml.org/t/ann-irmin-2-0-0-release/4746/1</a>
</p>
</div>

<div id="outline-container-org3575072" class="outline-3">
<h3 id="org3575072">Thomas Gazagnaire announced</h3>
<div class="outline-text-3" id="text-org3575072">
<p>
On behalf of the Irmin development team, I am very happy to announce the release of Irmin 2.0.0, a major release of the Git-like distributed branching and storage substrate that underpins <a href="https://mirage.io/">MirageOS</a>. We began the release process for all the components that make up Irmin <a href="https://tarides.com/blog/2019-05-13-on-the-road-to-irmin-v2">back in May 2019</a>, and there have been close to 1000 commits since Irmin 1.4.0 released back in June 2018. To celebrate this milestone, we have a new logo and opened a dedicated website: <a href="https://irmin.org/">irmin.org</a>.
</p>

<p>
More details here: <a href="https://tarides.com/blog/2019-11-21-irmin-v2">https://tarides.com/blog/2019-11-21-irmin-v2</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org0772aad" class="outline-2">
<h2 id="9">Tail cascade: a new indentation style for some OCaml constructs</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/tail-cascade-a-new-indentation-style-for-some-ocaml-constructs/4736/1">https://discuss.ocaml.org/t/tail-cascade-a-new-indentation-style-for-some-ocaml-constructs/4736/1</a>
</p>
</div>

<div id="outline-container-org09e0c55" class="outline-3">
<h3 id="org09e0c55">gasche announced</h3>
<div class="outline-text-3" id="text-org09e0c55">
<p>
I recently decided to change my indentation style for certain OCaml constructs in a way that I'm going to describe below. I just coined a name for this approach, "tail cascade". I'm creating this topic to convince everyone that this is a cool idea you should adopt as well. Or at least tolerate it when you review other people's code.
</p>
</div>

<div id="outline-container-org490268e" class="outline-4">
<h4 id="org490268e">Problem</h4>
<div class="outline-text-4" id="text-org490268e">
<p>
Programs that heavily use <code>match</code> often see a shift to the right due to nested indentation.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #a020f0;">match</span> foo <span style="color: #a020f0;">with</span>
| <span style="color: #000000; background-color: #ffffff;">Foo</span> -&gt; ...
| <span style="color: #000000; background-color: #ffffff;">Bar</span> x -&gt;
  <span style="color: #a020f0;">match</span> bar x <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">FooBar</span> -&gt; ...
  | <span style="color: #000000; background-color: #ffffff;">Blah</span> y -&gt;
    <span style="color: #a020f0;">match</span> f y <span style="color: #a020f0;">with</span>
    | <span style="color: #000000; background-color: #ffffff;">Some</span> z -&gt;
      ...
</pre>
</div>

<p>
Another problem with this style is that it suffers from the "dangling bar" issue: if you try to add a new case for one of the exterior <code>match</code>, it is parsed as belonging to the innermost <code>match</code>. People have been recommending (rightly) to use <code>begin match .. end</code> for all nested match constructs to avoid this issue.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #a020f0;">match</span> foo <span style="color: #a020f0;">with</span>
| <span style="color: #000000; background-color: #ffffff;">Foo</span> -&gt; ...
| <span style="color: #000000; background-color: #ffffff;">Bar</span> x -&gt;
  <span style="color: #000000; font-weight: bold;">begin</span> <span style="color: #a020f0;">match</span> bar x <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">FooBar</span> -&gt; ...
  | <span style="color: #000000; background-color: #ffffff;">Blah</span> y -&gt;
    <span style="color: #000000; font-weight: bold;">begin</span> <span style="color: #a020f0;">match</span> f y <span style="color: #a020f0;">with</span>
    | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; ...
    | <span style="color: #000000; background-color: #ffffff;">Some</span> z -&gt;
      ...
    <span style="color: #000000; font-weight: bold;">end</span>
  <span style="color: #b22222;">(* </span><span style="color: #b22222;">now this is safe </span><span style="color: #b22222;">*)</span>
  | <span style="color: #000000; background-color: #ffffff;">FooBlah</span> -&gt; ...
  <span style="color: #000000; font-weight: bold;">end</span>
</pre>
</div>

<p>
But still the unpleasant shift to the right remains.
</p>
</div>
</div>

<div id="outline-container-orgb802bf4" class="outline-4">
<h4 id="orgb802bf4">Proposal: cascading tail case</h4>
<div class="outline-text-4" id="text-orgb802bf4">
<p>
We should in general use <code>begin match .. end</code> for nested matches. But the "cascading tail case" proposal is to <b>not</b> do it for the <b>last</b> case of the pattern-matching, and instead <b>de-indent</b> (dedent) this last case &#x2013; tail case.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #a020f0;">match</span> foo <span style="color: #a020f0;">with</span>
| <span style="color: #000000; background-color: #ffffff;">Foo</span> -&gt; ...
| <span style="color: #000000; background-color: #ffffff;">Bar</span> x -&gt;
<span style="color: #a020f0;">match</span> bar x <span style="color: #a020f0;">with</span>
| <span style="color: #000000; background-color: #ffffff;">FooBar</span> -&gt; ...
| <span style="color: #000000; background-color: #ffffff;">Blah</span> y -&gt;
<span style="color: #a020f0;">match</span> f y <span style="color: #a020f0;">with</span>
| <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; ...
| <span style="color: #000000; background-color: #ffffff;">Some</span> z -&gt;
...
</pre>
</div>

<p>
Note that with this indentation style, the "dangling match" problem is also avoided: unlike with the original, non <code>end</code>-protected program, the indentation makes it immediately obvious that any further case will be attached to the innermost match, and not any of the exterior ones.
</p>

<p>
A program using this "cascading tail" approach should always use <code>begin match .. end</code> for nested matches, except for a nested match returned within the last branch of an outer match, which can (optionally) be dedented instead.
</p>

<p>
The choice to dedent the last case corresponds to encouraging a sequential reading of the program, where the other cases are "auxiliary cases" checked first and dispatched quickly, and the last case is the "main part" where the "rest" of the logic of the program lies. This pattern is typical of nested pattern-matching on the <code>option</code> or <code>result</code> type for example:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #a020f0;">match</span> foo x <span style="color: #a020f0;">with</span>
| <span style="color: #000000; background-color: #ffffff;">Error</span> err -&gt;
  fail_foo_error err
| <span style="color: #000000; background-color: #ffffff;">Ok</span> y -&gt;
<span style="color: #a020f0;">match</span> bar y <span style="color: #a020f0;">with</span>
| <span style="color: #000000; background-color: #ffffff;">Error</span> err -&gt;
  fail_bar_error err
| <span style="color: #000000; background-color: #ffffff;">Ok</span> () -&gt;
...
</pre>
</div>

<p>
Remark: it is <b>not</b> always the case that the <code>Error</code> constructor is the auxiliary case, and the <code>Ok</code> constructor is the main case; sometimes we implement fallback logic like "if <code>foo</code> work then we are good, but otherwise we have to do this and that", and the error case is the most salient (and longer) part of the program logic. I would recommend being mindful, when you write code, of whether there is a most convincing way to "sequentialize" it (distinguish auxiliary and main/tail case), and avoid using cascading tails when there is no clear sequentialization choice.
</p>

<p>
Remark: some cases of tail cascades can be linearized by using a good definition of "bind" and a monadic style. This tends to be very limited however: it fixes one of the constructors to always be the "tail" constructor (always <code>Some</code>, always <code>Ok</code>), and it only works when the handling of the other constructors is very homogeneous (typically: return directly). In real code, many situations occur where the monadic style doesn't fit the problem, but tail cascade does help writing a readable program.
</p>
</div>
</div>


<div id="outline-container-org86e8c67" class="outline-4">
<h4 id="org86e8c67">Generalization: tail cascade</h4>
<div class="outline-text-4" id="text-org86e8c67">
<p>
While I have never seen cascading tail cases in real-world OCaml code before (I'm happy to be given pointers; I think that the idea is not new, but I'm not aware of previous attempts to give it a catchy name and spread the cascade love), this is in fact a new (to me) instance of a common technique that is used for other OCaml constructs:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #a020f0;">if</span> foo x <span style="color: #a020f0;">then</span> ...
<span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> bar x <span style="color: #a020f0;">then</span> ...
<span style="color: #a020f0;">else</span> ... <span style="color: #b22222;">(* </span><span style="color: #b22222;">this `tail else` was dedented </span><span style="color: #b22222;">*)</span>

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">x</span> = foo <span style="color: #000000; font-weight: bold;">in</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">y</span> = bar <span style="color: #000000; font-weight: bold;">in</span> <span style="color: #b22222;">(* </span><span style="color: #b22222;">this `tail let` was dedented </span><span style="color: #b22222;">*)</span>
...            <span style="color: #b22222;">(* </span><span style="color: #b22222;">and the rest as well </span><span style="color: #b22222;">*)</span>

bind foo <span style="color: #a52a2a;">@@</span> <span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">x</span> -&gt;
bind bar <span style="color: #a52a2a;">@@</span> <span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">y</span> -&gt; <span style="color: #b22222;">(* </span><span style="color: #b22222;">this "tail function body" was dedented </span><span style="color: #b22222;">*)</span>
...                  <span style="color: #b22222;">(* </span><span style="color: #b22222;">and the rest as well </span><span style="color: #b22222;">*)</span>
</pre>
</div>

<p>
I would call "tail cascade" (or maybe: "cascading tail") the idea of dedenting the "rest" of an OCaml expression (compared to a strict tree-nesting-based approach) when it morally describes the "rest" of the expression. I use the name "tail" because those expressions are almost always in tail-position in the sense of tail-calls.
</p>

<p>
This general approach legitimizes some styles that I have seen, and sometimes used, in the wild, while at the same time considering that I may have been doing something improper, for example:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #a020f0;">if</span> foo <span style="color: #a020f0;">then</span> blah <span style="color: #a020f0;">else</span>
... <span style="color: #b22222;">(* </span><span style="color: #b22222;">dedented </span><span style="color: #b22222;">*)</span>


<span style="color: #228b22;">Fun.</span>protect
  <span style="color: #008b8b;">~finally</span>:(...)
<span style="color: #a52a2a;">@@</span> <span style="color: #a020f0;">fun</span> () -&gt;
... <span style="color: #b22222;">(* </span><span style="color: #b22222;">dedented </span><span style="color: #b22222;">*)</span>


<span style="color: #a020f0;">try</span> simple_approach <span style="color: #a020f0;">with</span> exn -&gt;
... <span style="color: #b22222;">(* </span><span style="color: #b22222;">dedented </span><span style="color: #b22222;">*)</span>


1 +
2 + <span style="color: #b22222;">(* </span><span style="color: #b22222;">dedented </span><span style="color: #b22222;">*)</span>
... <span style="color: #b22222;">(* </span><span style="color: #b22222;">dedented </span><span style="color: #b22222;">*)</span>
</pre>
</div>

<p>
Remark: after a <code>then</code> or <code>else</code>, many people share the reasonable view that any expression containing imperative constructs (<code>foo; bar</code>) should be enclosed in a <code>begin .. end</code> block to avoid surprising-precedence issue. Just as for nested <code>match</code>, this recommendation should be lifted for "tail else" constructs.
</p>

<p>
Remark: The last example is a case where the dedented expressions are <b>not</b> in tail-position from a runtime-evaluation point of view. I am not sure as whether the two notions should be made to coincide more strongly, but in any case I'm not fond of the style in this particular example, I prefer to move the infix operator to the beginning of the next line instead, following a different style and justification.
</p>

<p>
The possibility this "cascading tail" style today crucially relies on the nesting properties of open-ended syntactic constructs, notably <code>let</code> (commonly cascaded), and now <code>match</code> and <code>if ... else</code>. Proposals to transition to a syntax where <code>match</code> and <code>else</code> are forced to take a closing marker are incompatible with the cascading style. I have not made my mind on whether this should be considered a blocker for those proposals, but at least it shows that having the open-ended form available has value for certain programs.
</p>
</div>
</div>
</div>


<div id="outline-container-org985e6f6" class="outline-3">
<h3 id="org985e6f6">Louis Gesbert then said</h3>
<div class="outline-text-3" id="text-org985e6f6">
<p>
@gasche I prototyped a dedicated option in <code>ocp-indent</code>, if you're interested in trying it out :)
</p>
<div class="org-src-container">
<pre class="src src-shell">opam pin git+https://github.com/OCamlPro/ocp-indent#match-tail-cascade
<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"match_tail_cascade=true"</span> &gt;&gt; ~/.ocp-indent
</pre>
</div>
</div>
</div>
</div>




<div id="outline-container-orga562926" class="outline-2">
<h2 id="orga562926">Old CWN</h2>
<div class="outline-text-2" id="text-orga562926">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
