<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-09-17 Tue 08:40 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2019.09.10.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2019.09.24.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of September 10 to 17, 2019.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">OCaml 4.09.0+beta2</a></li>
<li><a href="#2">chartjs: OCaml bindings for Chart.js charting library</a></li>
<li><a href="#3">How does one print any type?</a></li>
<li><a href="#4">Interesting OCaml Articles</a></li>
<li><a href="#5">Dune 2.0.0 coming soon!</a></li>
<li><a href="#org8fae000">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgca5b4cf" class="outline-2">
<h2 id="1">OCaml 4.09.0+beta2</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2019-09/msg00010.html">https://sympa.inria.fr/sympa/arc/caml-list/2019-09/msg00010.html</a>
</p>
</div>

<div id="outline-container-orgf4fd0fc" class="outline-3">
<h3 id="orgf4fd0fc">Florian Angeletti announced</h3>
<div class="outline-text-3" id="text-orgf4fd0fc">
<p>
The release of OCaml 4.09.0 is approaching. We have created a second
beta version
to help you adapt your softwares to the new features ahead of the release.
</p>

<p>
This new beta integrates in particular the fixes from 4.08.1 that were
not yet
part of the first beta due to the overlap between the release of 4.08.1
and the
first beta.
</p>

<p>
If you tried to test the first beta, and were stopped by the lack of
working dune
and ocamlfind, those issues has been fixed.
</p>

<p>
The source code is available at these addresses:
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/archive/4.09.0+beta2.tar.gz">https://github.com/ocaml/ocaml/archive/4.09.0+beta2.tar.gz</a></li>
<li><a href="https://caml.inria.fr/pub/distrib/ocaml-4.09/ocaml-4.09.0+beta2.tar.gz">https://caml.inria.fr/pub/distrib/ocaml-4.09/ocaml-4.09.0+beta2.tar.gz</a></li>
</ul>

<p>
The compiler can also be installed as an OPAM switch with one of the
following commands.
</p>

<pre class="example">
opam switch create ocaml-variants.4.09.0+beta2 --repositories=default,beta=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>

<p>
or
</p>

<pre class="example">
opam switch create ocaml-variants.4.09.0+beta2+&lt;VARIANT&gt; --repositories=default,beta=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>

<p>
where you replace &lt;VARIANT&gt; with one of these:
</p>
<ul class="org-ul">
<li>afl</li>
<li>default-unsafe-string</li>
<li>flambda</li>
<li>fp</li>
<li>fp+flambda</li>
</ul>

<p>
We want to know about all bugs. Please report them here: <a href="https://github.com/ocaml/ocaml/issues">https://github.com/ocaml/ocaml/issues</a>
</p>

<p>
Happy hacking
</p>

<p>
— Florian "octachron" Angeletti, for the OCaml team
</p>
</div>


<div id="outline-container-org2cf42db" class="outline-4">
<h4 id="org2cf42db">OCaml 4.09.0</h4>
<div class="outline-text-4" id="text-org2cf42db">
<p>
(Changes that can break existing programs are marked with a "*")
</p>
</div>

<ul class="org-ul">
<li><a id="org4affab9"></a>Code generation and optimizations:<br />
<div class="outline-text-5" id="text-org4affab9">
<ul class="org-ul">
<li>#2278: Remove native code generation support for 32-bit Intel macOS,
iOS and other Darwin targets.
(Mark Shinwell, review by Nicolas Ojeda Bar and Xavier Leroy)</li>

<li>#8507: Shorten symbol names of anonymous functions in Flambda mode
(the directory portions are now hidden)
(Mark Shinwell, review by Nicolás Ojeda Bär)</li>

<li>#7931, #1904: Add FreeBSD/aarch64 support
(Greg V, review by Sébastien Hinderer, Stephen Dolan, Damien Doligez
and Xavier Leroy)</li>

<li>#8547: Optimize matches that are an affine function of the input.
(Stefan Muenzel, review by Alain Frisch, Gabriel Scherer)</li>

<li>#8681, #8699, #8712: Fix code generation with nested let rec of functions.
(Stephen Dolan, Leo White, Gabriel Scherer and Pierre Chambart,
review by Gabriel Scherer, reports by Alexey Solovyev and Jonathan French)</li>
</ul>
</div>
</li>

<li><a id="org3604ffa"></a>Compiler user-interface and warnings:<br />
<div class="outline-text-5" id="text-org3604ffa">
<ul class="org-ul">
<li>* #2276: Remove support for compiler plugins and hooks (also adds
[Dynlink.unsafe_get_global_value])
(Mark Shinwell, Xavier Clerc, review by Nicolás Ojeda Bär,
Florian Angeletti, David Allsopp and Xavier Leroy)</li>

<li>#2301: Hint on type error on int literal
(Jules Aguillon, review by Nicolás Ojeda Bär , Florian Angeletti,
Gabriel Scherer and Armaël Guéneau)</li>

<li>#2309: New options -with-runtime and -without-runtime in ocamlopt/ocamlc
that control the inclusion of the runtime system in the generated program.
(Lucas Pluvinage, review by Daniel Bünzli, Damien Doligez, David Allsopp
and Florian Angeletti)</li>

<li>#2314: Remove support for gprof profiling.
(Mark Shinwell, review by Xavier Clerc and Stephen Dolan)</li>

<li>#3819, #8546 more explanations and tests for illegal permutation
(Florian Angeletti, review by Gabriel Scherer)</li>

<li>#8537: fix the -runtime-variant option for bytecode
(Damien Doligez, review by David Allsopp)</li>

<li>#8541: Correctly print multi-lines locations
(Louis Roché, review by Gabriel Scherer)</li>

<li>#8579: Better error message for private constructors
of an extensible variant type
(Guillaume Bury, review by many fine eyes)</li>
</ul>
</div>
</li>

<li><a id="org5746547"></a>Compiler distribution build system:<br />
<div class="outline-text-5" id="text-org5746547">
<ul class="org-ul">
<li>#2267: merge generation of header programs, also fixing parallel build on
Cygwin.
(David Allsopp, review by Sébastien Hinderer)</li>

<li>#8514: Use boot/ocamlc.opt for building, if available.
(Stephen Dolan, review by Gabriel Scherer)</li>
</ul>
</div>
</li>

<li><a id="orge68739a"></a>Internal/compiler-libs changes:<br />
<div class="outline-text-5" id="text-orge68739a">
<ul class="org-ul">
<li>#1579: Add a separate types for clambda primitives
(Pierre Chambart, review by Vincent Laviron and Mark Shinwell)</li>

<li>#1965: remove loop constructors in Cmm and Mach
(Vincent Laviron)</li>

<li>#1973: fix compilation of catches with multiple handlers
(Vincent Laviron)</li>

<li>#2190: fix pretty printing (using Pprintast) of "lazy &#x2026;" patterns and
"fun (type t) -&gt; &#x2026;" expressions.
(Nicolás Ojeda Bär, review by Gabriel Scherer)</li>

<li>#2228, #8545: refactoring the handling of .cmi files
by moving the logic from Env to a new module Persistent_env
(Gabriel Scherer, review by Jérémie Dimino and Thomas Refis)</li>

<li>#2229: Env: remove prefix_idents cache
(Thomas Refis, review by Frédéric Bour and Gabriel Scherer)</li>

<li>#2237, #8582: Reorder linearisation of Trywith to avoid a call instruction
(Vincent Laviron and Greta Yorsh, additional review by Mark Shinwell;
fix in #8582 by Mark Shinwell, Xavier Leroy and Anil Madhavapeddy)</li>

<li>#2265: Add bytecomp/opcodes.mli
(Mark Shinwell, review by Nicolas Ojeda Bar)</li>

<li>#2268: Improve packing mechanism used for building compilerlibs modules
into the Dynlink libraries
(Mark Shinwell, Stephen Dolan, review by David Allsopp)</li>

<li>#2277: Use newtype names as type variable names
(Matthew Ryan)</li>

<li>#2280: Don't make more Clambda constants after starting Cmmgen
(Mark Shinwell, review by Vincent Laviron)</li>

<li>#2281: Move some middle-end files around
(Mark Shinwell)</li>

<li>#2283: Add [is_prefix] and [find_and_chop_longest_common_prefix] to
[Misc.Stdlib.List]
(Mark Shinwell, review by Alain Frisch and Stephen Dolan)</li>

<li>#2284: Add various utility functions to [Misc] and remove functions
from [Misc.Stdlib.Option] that are now in [Stdlib.Option]
(Mark Shinwell, review by Thomas Refis)</li>

<li>#2286: Functorise [Consistbl]
(Mark Shinwell, review by Gabriel Radanne)</li>

<li>#2291: Add [Compute_ranges] pass
(Mark Shinwell, review by Vincent Laviron)</li>

<li>#2292: Add [Proc.frame_required] and [Proc.prologue_required].
Move tail recursion label creation to [Linearize]. Correctly position
[Lprologue] relative to [Iname_for_debugger] operations.
(Mark Shinwell, review by Vincent Laviron)</li>

<li>#2308: More debugging information on [Cmm] terms
(Mark Shinwell, review by Stephen Dolan)</li>

<li>#7878, #8542: Replaced TypedtreeIter with tast_iterator
(Isaac "Izzy" Avram, review by Gabriel Scherer and Nicolás Ojeda Bär)</li>

<li>#8598: Replace "not is_nonexpansive" by "maybe_expansive".
(Thomas Refis, review by David Allsopp, Florian Angeletti, Gabriel Radanne,
Gabriel Scherer and Xavier Leroy)</li>
</ul>
</div>
</li>

<li><a id="orga8a4669"></a>Runtime system:<br />
<div class="outline-text-5" id="text-orga8a4669">
<ul class="org-ul">
<li>#1725, #2279: Deprecate Obj.set_tag and Obj.truncate
(Stephen Dolan, review by Gabriel Scherer, Damien Doligez and Xavier Leroy)</li>

<li>#2075, #7729: rename _T macro used to support Unicode in the (Windows) runtime
in order to avoid compiler warning
(Nicolás Ojeda Bär, review by Gabriel Scherer and David Allsopp)</li>

<li>* #2240: Constify "identifier" in struct custom_operations
(Cedric Cellier, review by Xavier Leroy)</li>

<li>#2250: Remove extra integer sign-extension in compare functions
(Stefan Muenzel, review by Xavier Leroy)</li>

<li>* #2293: Constify "caml_named_value"
(Stephen Dolan, review by Xavier Leroy)</li>

<li>#8607: Remove obsolete macros for pre-2002 MSVC support
(Stephen Dolan, review by Nicolás Ojeda Bär and David Allsopp)</li>

<li>#8656: Fix a bug in [caml_modify_generational_global_root]
(Jacques-Henri Jourdan, review by Gabriel Scherer)</li>

<li>#8787, #8788: avoid integer overflow in caml_output_value_to_bytes
(Jeremy Yallop, report by Marcello Seri)</li>
</ul>
</div>
</li>

<li><a id="org6565fe9"></a>Standard library:<br />
<div class="outline-text-5" id="text-org6565fe9">
<ul class="org-ul">
<li>#2262: take precision (.&lt;n&gt;) and flags ('+' and ' ') into account
in printf %F
(Pierre Roux, review by Gabriel Scherer)</li>

<li>#6148, #8596: optimize some buffer operations
(Damien Doligez, reports by John Whitington and Alain Frisch,
review by Jeremy Yallop and Gabriel Scherer)</li>
</ul>
</div>
</li>

<li><a id="org82e3cb5"></a>Other libraries:<br />
<div class="outline-text-5" id="text-org82e3cb5">
<ul class="org-ul">
<li>#2112: Fix Thread.yield unfairness with busy threads yielding to each
other.
(Andrew Hunter, review by Jacques-Henri Jourdan, Spiros Eliopoulos, Stephen
Weeks, &amp; Mark Shinwell)</li>

<li>#7903, #2306: Make Thread.delay interruptible by signals again
(Xavier Leroy, review by Jacques-Henri Jourdan and Edwin Török)</li>

<li>#2248: Unix alloc_sockaddr: Fix read of uninitialized memory for an
unbound Unix socket. Add support for receiving abstract (Linux) socket paths.
(Tim Cuthbertson, review by Sébastien Hinderer and Jérémie Dimino)</li>

<li>#2289: Delete the vmthreads library. This library was deprecated in 4.08.0.
(Jérémie Dimino)</li>

<li>#2318: Delete the graphics library. This library is now available
as a separate "graphics" package in opam. Its new home is:
<a href="https://github.com/ocaml/graphics">https://github.com/ocaml/graphics</a>
(Jérémie Dimino, review by Nicolas Ojeda Bar, Xavier Leroy and
Sébastien Hinderer)</li>
</ul>
</div>
</li>

<li><a id="orge8a8150"></a>Tools:<br />
<div class="outline-text-5" id="text-orge8a8150">
<ul class="org-ul">
<li>#2221: ocamldep will now correctly allow a .ml file in an include directory
that appears first in the search order to shadow a .mli appearing in a later
include directory.
(Nicolás Ojeda Bär, review by Florian Angeletti)</li>
</ul>
</div>
</li>

<li><a id="org3fb7142"></a>Manual and documentation:<br />
<div class="outline-text-5" id="text-org3fb7142">
<ul class="org-ul">
<li>#8757: Rename Pervasives to Stdlib in core library documentation.
(Ian Zimmerman, review by David Allsopp)</li>

<li>#7584, #8538: Document .cmt* files in the "overview" of ocaml{c,opt}
(Oxana Kostikova, rewiew by Florian Angeletti)</li>

<li>#8515: manual, precise constraints on reexported types
(Florian Angeletti, review by Gabriel Scherer)</li>
</ul>
</div>
</li>

<li><a id="org8a0d779"></a>Bug fixes:<br />
<div class="outline-text-5" id="text-org8a0d779">
<ul class="org-ul">
<li>#7156, #8594: make top level use custom printers if they are available
(Andrew Litteken, report by Martin Jambon, review by Nicolás Ojeda Bär,
Thomas Refis, Armaël Guéneau, Gabriel Scherer, David Allsopp)</li>
<li>#3249: ocamlmklib should reject .cmxa files
(Xavier Leroy)</li>
<li>#7937, #2287: fix uncaught Unify exception when looking for type
declaration
(Florian Angeletti, review by Jacques Garrigue)</li>

<li>#2296: Fix parsing of hexadecimal floats with underscores in the exponent.
(Hugo Heuzard and Xavier Leroy, review by Gabriel Scherer)</li>

<li>#8610, #8613: toplevel printing, consistent deduplicated name for types
(Florian Angeletti, review by Thomas Refis and Gabriel Scherer,
reported by Xavier Clerc)</li>

<li>#8635, #8636: Fix a bad side-effect of the -allow-approx option of
ocamldep. It used to turn some errors into successes
(Jérémie Dimino)</li>

<li>#8701, #8725: Variance of constrained parameters causes principality issues
(Jacques Garrigue, report by Leo White, review by Gabriel Scherer)</li>

<li>#8777(partial): fix position information in some polymorphic variant
error messages about missing tags
(Florian Angeletti, review by Thomas Refis)</li>

<li>#8779, more cautious variance computation to avoid missing cmis
(Florian Angeletti, report by Antonio Nuno Monteiro, review by Leo White)</li>

<li>#8800: Fix soundness bug in extension constructor inclusion
(Leo White, review by Jacques Garrigue)</li>

<li>#8810: Env.lookup_module: don't allow creating loops
(Thomas Refis, report by Leo White, review by Jacques Garrigue)</li>

<li>#8848: Fix x86 stack probe CFI information in caml_c_call and
caml_call_gc
(Tom Kelly, review by Xavier Leroy)</li>

<li>#8864, #8865: Fix native compilation of left shift by (word_size - 1)
(Vincent Laviron, report by Murilo Giacometti Rocha, review by Xavier Leroy)</li>

<li>#8862, #8871: subst: preserve scopes
(Thomas Refis, report by Leo White, review by Jacques Garrigue)</li>

<li>#8921, #8924: Fix stack overflow with Flambda
(Vincent Laviron, review by Pierre Chambart and Leo White,
report by Aleksandr Kuzmenko)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org42bfc12" class="outline-2">
<h2 id="2">chartjs: OCaml bindings for Chart.js charting library</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-chartjs-ocaml-bindings-for-chart-js-charting-library/4363/1">https://discuss.ocaml.org/t/ann-chartjs-ocaml-bindings-for-chart-js-charting-library/4363/1</a>
</p>
</div>

<div id="outline-container-org403efb9" class="outline-3">
<h3 id="org403efb9">Alex announced</h3>
<div class="outline-text-3" id="text-org403efb9">
<p>
I'm pleased to announce <code>chartjs</code>, OCaml bindings for <a href="http://chartjs.org">Chart.js</a> charting library and its popular extensions. The library relies on <code>js_of_ocaml</code> bindings for browser API and follows <code>js_of_ocaml</code> <a href="https://ocsigen.org/js_of_ocaml/dev/manual/bindings">guides</a> for binding a JavaScript library.
</p>

<p>
Line, bar, horizontal bar, pie and doughnut charts are currently supported.
The bindings are not full yet, some chart types and plugins are to be added later.
</p>

<ul class="org-ul">
<li>Installation: <code>opam install chartjs</code>.</li>
<li>Repository: <a href="https://github.com/monstasat/chartjs-ocaml">https://github.com/monstasat/chartjs-ocaml</a></li>
<li>Library sage examples: <a href="https://github.com/monstasat/chartjs-ocaml/tree/master/examples">https://github.com/monstasat/chartjs-ocaml/tree/master/examples</a></li>
<li>Online documentation and examples: <a href="https://monstasat.github.io/chartjs-ocaml">https://monstasat.github.io/chartjs-ocaml</a></li>
</ul>

<p>
Some auxiliary libraries are available providing bindings for popular Chart.js plugins:
</p>
<ul class="org-ul">
<li><code>chartjs-annotation</code></li>
<li><code>chartjs-streaming</code></li>
<li><code>chartjs-datalabels</code></li>
<li><code>chartjs-colorschemes</code></li>
</ul>

<p>
These libraries are also available via opam.
</p>

<p>
Any feedback is highly appreciated.
</p>
</div>
</div>
</div>




<div id="outline-container-org782a967" class="outline-2">
<h2 id="3">How does one print any type?</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/how-does-one-print-any-type/4362/1">https://discuss.ocaml.org/t/how-does-one-print-any-type/4362/1</a>
</p>
</div>

<div id="outline-container-orgeaf508f" class="outline-3">
<h3 id="orgeaf508f">Pinocchio asked</h3>
<div class="outline-text-3" id="text-orgeaf508f">
<p>
I just want to print any type (like a print statement in python). I am just learning ocaml using the ocaml command interactively with my script basically. How do I do this?
</p>
</div>
</div>


<div id="outline-container-org8caf18c" class="outline-3">
<h3 id="org8caf18c">Alex replied</h3>
<div class="outline-text-3" id="text-org8caf18c">
<p>
You may also use the <a href="https://github.com/ocaml-ppx/ppx_deriving#plugin-show">ppx_deriving.show</a> plugin from the <a href="https://github.com/ocaml-ppx/ppx_deriving">ppx_deriving</a> library. This plugin is able to generate <code>'a -&gt; string</code> and <code>Format.formatter -&gt; 'a -&gt; unit</code> (where <code>'a</code> is the type you want to print) functions which can then be used for value printing.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">t</span> =
{  number : int
;  text : string
}<span style="color: #483d8b;">[@@deriving show]</span>
</pre>
</div>
<p>
This will produce a <code>show</code> and <code>pp</code> functions of type <code>t -&gt; string</code> and <code>Format.formatter -&gt; t -&gt; unit</code>, which can then be used as
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">v</span> = { number = 2; text = <span style="color: #8b2252;">"Hello world"</span>} <span style="color: #000000; font-weight: bold;">in</span>
print_endline (show v)
</pre>
</div>

<p>
or
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">v</span> = { number = 2; text = <span style="color: #8b2252;">"Hello world"</span>} <span style="color: #000000; font-weight: bold;">in</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">s</span> = <span style="color: #228b22;">Format.</span>asprintf <span style="color: #8b2252;">"%a"</span> pp v <span style="color: #000000; font-weight: bold;">in</span>
print_endline s
</pre>
</div>
<p>
Of course, you can always define such functions for the needed types by yourself.
</p>

<p>
As I can see, almost every library introducing a new type also provides pretty-printing (kinda <code>pp</code> in this example) functions out of the box.
</p>
</div>
</div>


<div id="outline-container-org1b22918" class="outline-3">
<h3 id="org1b22918">progman also replied</h3>
<div class="outline-text-3" id="text-org1b22918">
<p>
The same basic printing as the toplevel can be had with:
</p>

<p>
<a href="http://github.com/progman1/genprintlib">http://github.com/progman1/genprintlib </a> (general value printing in compiled code)
</p>

<p>
Available through the official opam repository:
opam install genprint
</p>
</div>
</div>


<div id="outline-container-orgc5069f0" class="outline-3">
<h3 id="orgc5069f0">Ivan Gotovchits also replied</h3>
<div class="outline-text-3" id="text-orgc5069f0">
<p>
There is no such facility in OCaml. OCaml is not an interpreted language with a dynamic type system. When a program is compiled all types are erased, so it is impossible in runtime to reflect a value to its type. And yes, as you've already pointed out, when you interact with OCaml using interactive toplevel there is some generic printing facility, but this is a very special case because you're not really running a program, but interactively compile it.
</p>

<p>
So, you have to accept this fact and learn how to program in OCaml using OCaml ways of doing things. First of all, learn how to use the <code>Format.printf</code> function. This is a generic function that takes the  <code>format</code> specification and arguments and prints them, e.g.,
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Format</span>

<span style="color: #000000; font-weight: bold;">let</span> () =
  printf <span style="color: #8b2252;">"Hello, %s world\n%!"</span> <span style="color: #8b2252;">"cruel"</span>;
  printf <span style="color: #8b2252;">"Hello, %d times!\n%!"</span> 42
</pre>
</div>

<p>
As you can see, the special format specifiers, like <code>%s</code> or <code>%d</code> specify the type of an argument. So <code>%d</code> expects one argument of type <code>int</code>, and <code>%s</code> expects one of <code>string</code>, there is also <code>%c</code> for <code>char</code> , <code>%b</code> for <code>bool</code> and so on.
</p>

<p>
There is also a generic <code>%a</code> specifier, which expects not one argument, but two &#x2013; a function, that will tell how to print the argument, and the argument itself. It is used to print values of abstract types, hence the name <code>%a</code>. There is a convention, that modules that define abstract types also provide a function called <code>pp</code> which specifies how this value should be printed, e.g.,
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> () = printf <span style="color: #8b2252;">"Hello, abstract student %a\n%!"</span> <span style="color: #228b22;">Student.</span>pp s
</pre>
</div>

<p>
Where the <code>Student</code> module might be defined as
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">struct</span> <span style="color: #000000; background-color: #ffffff;">Student</span> : <span style="color: #000000; font-weight: bold;">sig</span>
   <span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">t</span>
   <span style="color: #000000; font-weight: bold;">val</span> <span style="color: #0000ff;">create</span> : string -&gt; int -&gt; t
   <span style="color: #000000; font-weight: bold;">val</span> <span style="color: #0000ff;">pp</span> : <span style="color: #228b22;">Format.</span>formatter -&gt; t -&gt; unit
<span style="color: #000000; font-weight: bold;">end</span> = <span style="color: #000000; font-weight: bold;">struct</span>
   <span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">t</span> = {name : string; cls : int}
   <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">create</span> <span style="color: #a0522d;">name</span> <span style="color: #a0522d;">cls</span>  = {name; cls}
   <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">pp</span> <span style="color: #a0522d;">ppf</span> {<span style="color: #a0522d;">name</span>; <span style="color: #a0522d;">cls</span>} =
      <span style="color: #228b22;">Format.</span>fprintf ppf <span style="color: #8b2252;">"%s of %d"</span> name cls
<span style="color: #000000; font-weight: bold;">end</span>
</pre>
</div>

<p>
That is roughly how we print everything in OCaml :)
</p>
</div>
</div>
</div>




<div id="outline-container-orga135ae8" class="outline-2">
<h2 id="4">Interesting OCaml Articles</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/interesting-ocaml-articles/1867/50">https://discuss.ocaml.org/t/interesting-ocaml-articles/1867/50</a>
</p>
</div>

<div id="outline-container-org1e3c645" class="outline-3">
<h3 id="org1e3c645">Yotam Barnoy said</h3>
<div class="outline-text-3" id="text-org1e3c645">
<p>
<a href="https://tarides.com/blog/2019-09-13-decompress-experiences-with-ocaml-optimization.html">https://tarides.com/blog/2019-09-13-decompress-experiences-with-ocaml-optimization.html</a>
</p>
</div>
</div>


<div id="outline-container-orgae74d73" class="outline-3">
<h3 id="orgae74d73">Ryan Slade also said</h3>
<div class="outline-text-3" id="text-orgae74d73">
<p>
Interesting performance comparison with quite a few languages when writing a user space network driver:
</p>

<p>
<a href="https://github.com/ixy-languages/ixy-languages">https://github.com/ixy-languages/ixy-languages</a>
</p>
</div>
</div>
</div>




<div id="outline-container-orgd406f54" class="outline-2">
<h2 id="5">Dune 2.0.0 coming soon!</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/dune-2-0-0-coming-soon/4102/2">https://discuss.ocaml.org/t/dune-2-0-0-coming-soon/4102/2</a>
</p>
</div>

<div id="outline-container-org57a7720" class="outline-3">
<h3 id="org57a7720">Jérémie Dimino announced</h3>
<div class="outline-text-3" id="text-org57a7720">
<p>
Update: after thinking about this more and working more towards preparing Dune 2.0.0, we made the following changes compared to this post:
</p>

<ul class="org-ul">
<li>The source code of Dune itself will remain compatible with the last 3 released versions of OCaml rather than just the last one. i.e. if 4.08 is the last released version of OCaml when Dune 2.0.0 is released then Dune 2.0.0 will be guaranteed to build with OCaml 4.06, 4.07 and 4.08. We still plan to provide an easy way to install Dune 2.0.0 in older opam switches</li>
<li>Dune 2.0.0 will not be able to read jbuild files at all. Only <code>dune upgrade</code> will still be able to read them in order to upgrade them</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org8fae000" class="outline-2">
<h2 id="org8fae000">Old CWN</h2>
<div class="outline-text-2" id="text-org8fae000">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
