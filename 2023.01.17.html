<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-01-17 Tue 09:35 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2023.01.10.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2023.01.24.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of January 10 to 17, 2023.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Installing Windows OCaml 5.0.0 in opam</a></li>
<li><a href="#2">Release of Mehari 0.1</a></li>
<li><a href="#3">Outreachy Summer 2023</a></li>
<li><a href="#4">Petrol 1.0.0 - A high-level typed SQL API for OCaml designed to go fast!</a></li>
<li><a href="#5">ocaml-search 0.1.1 - In-memory Search Index for OCaml values</a></li>
<li><a href="#org546a4e5">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Installing Windows OCaml 5.0.0 in opam</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/pre-ann-installing-windows-ocaml-5-0-0-in-opam/11150/1">https://discuss.ocaml.org/t/pre-ann-installing-windows-ocaml-5-0-0-in-opam/11150/1</a>
</p>
</div>

<div id="outline-container-org5b68ce5" class="outline-3">
<h3 id="org5b68ce5">David Allsopp announced</h3>
<div class="outline-text-3" id="text-org5b68ce5">
<p>
One of opam 2.2&rsquo;s headline features is that both &ldquo;upstream&rdquo; opam (i.e. <code>opam</code> built from un-patched sources from
<a href="https://github.com/ocaml/opam">ocaml/opam</a>) and &ldquo;un-forked&rdquo; opam-repository (i.e.
<a href="https://github.com/ocaml/opam-repository">ocaml/opam-repository</a>) finally provide native Windows opam switches. We&rsquo;re aiming to get
an alpha release of this out in the coming weeks, but I&rsquo;ve had various requests directly for how to use OCaml 5.0 with
opam-repository-mingw in the meantime, so I&rsquo;m just sharing this temporary solution, in case it&rsquo;s of use to others.
</p>

<p>
I have a demonstration workflow at <a href="https://github.com/dra27/ocaml5-ci-demo">https://github.com/dra27/ocaml5-ci-demo</a> with <a href="https://github.com/ocaml/setup-ocaml">setup-ocaml</a>.
It shows the commands necessary for local use:
</p>
<div class="org-src-container">
<pre class="src src-yaml">      - run: opam repo add dra27 git+https://github.com/dra27/opam-repository#windows-5.0 --all --set-default
      - run: opam switch create 5.0 --packages=ocaml.5.0.0,ocaml-option-mingw
      - run: opam exec --switch=5.0 -- ocamlopt -config
      - run: opam install --switch=5.0 utop
</pre>
</div>
<p>
and also how to use it directly in a workflow:
</p>
<div class="org-src-container">
<pre class="src src-yaml">      - name: Set-up OCaml
        uses: ocaml/setup-ocaml@v2
        with:
          ocaml-compiler: ocaml.5.0.0,ocaml-option-mingw
          opam-repositories: |
            dra27: https://github.com/dra27/opam-repository.git#windows-5.0
            default: https://github.com/fdopen/opam-repository-mingw.git#opam2
</pre>
</div>

<p>
The <code>windows-5.0</code> branch adds just enough to provide the OCaml 5.0.0 package for mingw-w64 by patching
<code>ocaml-variants.5.0.0+options</code> (rather than providing <code>ocaml-variants.5.0.0+mingw64</code>). Unless you expressly select
<code>ocaml-variants.5.0.0+options</code>, it&rsquo;ll actually pick up a version patched with
<a href="https://github.com/ocaml/ocaml/pull/11846">ocaml/ocaml#11846</a>.
</p>

<p>
The only change once the alpha release comes out should be the removal of the <code>opam repo add dra27</code> part.
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Release of Mehari 0.1</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-release-of-mehari-0-1/11158/1">https://discuss.ocaml.org/t/ann-release-of-mehari-0-1/11158/1</a>
</p>
</div>

<div id="outline-container-org704135b" class="outline-3">
<h3 id="org704135b">Tim ats announced</h3>
<div class="outline-text-3" id="text-org704135b">
<p>
@artichaut and I are very pleased to announce the first release of Mehari.
</p>

<p>
<a href="https://github.com/Psi-Prod/Mehari/">Mehari</a> was created with the aim of offering a cross-platform framework to create
<a href="https://gemini.circumlunar.space/">Gemini</a> applications.
</p>

<p>
Gemini is a lightweight alternative protocol to HTTP and Gopher, which runs on top of TLS.
</p>

<p>
On the &ldquo;Geminispace&rdquo;, there are mainly static content like blogs and other applications like games, BBS, etc.
</p>

<p>
Mehari API&rsquo;s is largely inspired by <a href="https://aantron.github.io/dream/">Dream</a>: it consists of a single module, and is pretty
similar, there are handlers, routes, middlewares, etc.
</p>

<p>
Among the features, there are:
</p>

<ul class="org-ul">
<li>Cross-platform: the library provides many IO modules (Lwt, Mirage, Eio)</li>
<li>MIME type inference (using experimental <a href="https://discuss.ocaml.org/t/ann-first-release-of-conan-the-detective-to-recognize-your-file/">Conan</a> support)</li>
<li>Rate limit : it is easy to rate limit access to a route or to the whole server</li>
<li>Virtual hosting : hostname verification with SNI or request URL</li>
<li>Proxy: Ability to act as a proxy</li>
<li>CGI support with environment variables</li>
<li>Long-running TCP connection : incremental creation of the response body</li>
</ul>

<p>
Examples of use are available on the <a href="https://github.com/Psi-Prod/Mehari/tree/master/examples">GitHub repository</a>.
</p>

<p>
Documentation is available <a href="https://docs.heyplzlookat.me/mehari">online</a> with a short tutorial explaining the basics.
</p>

<p>
Currently, the library is in its infancy, the API is subject to change, so we are open to feedback and contribution, especially in
terms of security.
</p>

<p>
Mehari is our first <a href="https://mirage.io/">MirageOS</a>-compatible library, so the creation of unikernels is experimental, and we&rsquo;d love
to get feedback on it.
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Outreachy Summer 2023</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/outreachy-summer-2023/11159/1">https://discuss.ocaml.org/t/outreachy-summer-2023/11159/1</a>
</p>
</div>

<div id="outline-container-org6bad608" class="outline-3">
<h3 id="org6bad608">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-org6bad608">
<p>
Yep, it&rsquo;s that time of the year again! Outreachy has officially started asking for organisations and mentors for the Summer 2023
round.
</p>

<blockquote>
<p>
What is Outreachy?
</p>

<p>
Outreachy is a paid, remote internship program. Outreachy promotes diversity in open source and open science. Our internships are
for people who face under-representation, and discrimination or systemic bias in the technology industry of their country.
</p>
</blockquote>

<p>
Given the long discussion in <a href="https://discuss.ocaml.org/t/what-are-the-biggest-reasons-newcomers-give-up-on-ocaml/10958">https://discuss.ocaml.org/t/what-are-the-biggest-reasons-newcomers-give-up-on-ocaml/10958</a> I can
guarantee you that if you want some more really good answers, participating in Outreachy is one way to do that!
</p>

<p>
To help get a feel for what is to be a mentor, Outreachy will be holding a livestreamed call with previous mentors taking part which
should be available on peertube (I&rsquo;ll post links when available).
</p>
</div>

<div id="outline-container-org9703937" class="outline-4">
<h4 id="org9703937">Important Dates</h4>
<div class="outline-text-4" id="text-org9703937">
<ul class="org-ul">
<li>Jan. 17 at 3pm UTC - Mentor chat on YouTube and PeerTube</li>
<li>Feb. 6 at 3pm UTC - Mentor chat on YouTube and PeerTube</li>
<li>Feb. 10 at 4pm UTC - Deadline for open source and open science communities to sign up to be an Outreachy mentoring organization</li>
<li>Feb. 24 at 4pm UTC - Deadline for mentors to submit project descriptions for May 2023 interns to work on</li>
</ul>
</div>
</div>

<div id="outline-container-org38ae3ce" class="outline-4">
<h4 id="org38ae3ce">This round</h4>
<div class="outline-text-4" id="text-org38ae3ce">
<p>
We had some excellent proposals for projects working on the compiler but unfortunately in the end no intern was found for it, please
don&rsquo;t be disheartened by this and I hope to see more projects suggested.
</p>

<p>
I&rsquo;ve had the great fortune of working with <a href="https://prisca-chidimma.dreamwidth.org">Prisca</a> on
<a href="https://github.com/geocaml/ocaml-topojson">ocaml-topojson</a> which has come on leaps and bounds thanks to her work! We&rsquo;ll have a
proper debrief towards the end of the project like the previous two rounds, although it may be a little shorter given the OCaml
community only has one intern this round.
</p>

<p>
The older, but still relevant post
<a href="https://discuss.ocaml.org/t/become-an-outreachy-mentor-support-the-growth-and-diversity-of-the-ocaml-community/8213">https://discuss.ocaml.org/t/become-an-outreachy-mentor-support-the-growth-and-diversity-of-the-ocaml-community/8213</a> contains some
more information about being a mentor which you may want to take a look at.
</p>

<p>
Please uses this thread for any questions, ideas or thoughts. Thank you :camel: !
</p>
</div>
</div>
</div>


<div id="outline-container-orgb24c79f" class="outline-3">
<h3 id="orgb24c79f">Patrick Ferris later added</h3>
<div class="outline-text-3" id="text-orgb24c79f">
<p>
Friendly reminder the live chat will take place on <a href="https://diode.zone/a/outreachy">https://diode.zone/a/outreachy</a> tomorrow (17th Jan. 2023) at 3pm UTC. Whilst
primarily focused on helping prospective applicants, it is still super useful for mentors to understand the process to help them out
when the time comes.
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Petrol 1.0.0 - A high-level typed SQL API for OCaml designed to go fast!</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-petrol-1-0-0-a-high-level-typed-sql-api-for-ocaml-designed-to-go-fast/11166/1">https://discuss.ocaml.org/t/ann-petrol-1-0-0-a-high-level-typed-sql-api-for-ocaml-designed-to-go-fast/11166/1</a>
</p>
</div>

<div id="outline-container-org2c694f6" class="outline-3">
<h3 id="org2c694f6">Kiran Gopinathan announced</h3>
<div class="outline-text-3" id="text-org2c694f6">
<p>
Heyo! Pleased to annouce the release of a new library that I&rsquo;ve been working on for some personal projects, but thought might be
useful for others.
</p>

<p>
<b>Petrol</b> is a Free software library that provides a high-level OCaml API for interacting with SQL databases. The aim of this
interface is to provide a type-safe API to allow developers to define their SQL tables and queries directly in OCaml, thereby
avoiding the impedence mismatch and fragility that comes with having to directly write SQL code, as is typical in a normal
Caqti-based project.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Petrol</span>

<span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">define a new schema</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">schema</span> = <span style="color: #444fcf;">StaticSchema.</span>init ()

<span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">declare a table</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">example_table</span>, <span style="color: #444fcf;">Expr.</span>[<span style="color: #007a9f;">name</span>; <span style="color: #007a9f;">age</span>] =
    <span style="color: #444fcf;">StaticSchema.</span>declare_table schema <span style="color: #00824f;">~name</span>:<span style="color: #ca3400;">"example"</span>
    <span style="color: #444fcf;">Schema.</span>[
        field <span style="color: #ca3400;">"name"</span> <span style="color: #00824f;">~ty</span>:<span style="color: #444fcf;">Type.</span>text;
        field <span style="color: #ca3400;">"age"</span> <span style="color: #00824f;">~ty</span>:<span style="color: #444fcf;">Type.</span>int
    ]
</pre>
</div>

<p>
Petrol&rsquo;s DSL allows you to express complex SQL queries as simple OCaml
function compositions:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">create a query</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a7601f;">insert_person</span> <span style="color: #00824f;">~name</span>:<span style="color: #007a9f;">n</span> <span style="color: #00824f;">~age</span>:<span style="color: #007a9f;">a</span> <span style="color: #007a9f;">db</span> =
    <span style="color: #444fcf;">Query.</span>insert <span style="color: #00824f;">~table</span>:example_table
        <span style="color: #00824f;">~values</span>:<span style="color: #444fcf;">Expr.</span>[
            name := s n;
            age := i a
         ]
    <span style="color: #a52a2a;">|&gt;</span> <span style="color: #444fcf;">Request.</span>make_zero
    <span style="color: #a52a2a;">|&gt;</span> <span style="color: #444fcf;">Petrol.</span>exec db
</pre>
</div>

<p>
Another selling point of Petrol is that it comes out of the box with a versioning system to gracefully allow changing the schemas in
your application over time - this and more is described in the documentation.
</p>

<p>
<a href="https://github.com/gopiandcode/petrol">https://github.com/gopiandcode/petrol</a>
</p>

<p>
Anyway, as usual, I&rsquo;ve tried to spend some quality time tuning the documentation to make it as easy to pick up as possible, so feel
free to have a gander: <a href="https://gopiandcode.github.io/petrol/petrol/index.html">https://gopiandcode.github.io/petrol/petrol/index.html</a>
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">ocaml-search 0.1.1 - In-memory Search Index for OCaml values</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocaml-search-0-1-1-in-memory-search-index-for-ocaml-values/11179/1">https://discuss.ocaml.org/t/ann-ocaml-search-0-1-1-in-memory-search-index-for-ocaml-values/11179/1</a>
</p>
</div>

<div id="outline-container-org33c0415" class="outline-3">
<h3 id="org33c0415">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-org33c0415">
<p>
I&rsquo;m happy to announce the release of a little OCaml library for doing in-memory searches over OCaml values:
<a href="https://github.com/patricoferris/ocaml-search">ocaml-search</a>.
</p>

<p>
Here&rsquo;s a quick example:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">module</span> <span style="color: #444fcf;">Book</span> = <span style="color: #000000; font-weight: bold;">struct</span>
  <span style="color: #000000; font-weight: bold;">type</span> <span style="color: #444fcf;">t</span> = {
    title : string;
    author : string;
  }
<span style="color: #000000; font-weight: bold;">end</span>

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">books</span> :<span style="color: #444fcf;"> </span><span style="color: #444fcf;">Book.</span><span style="color: #444fcf;">t list </span>=
  [
    { title = <span style="color: #ca3400;">"Dune"</span>; author = <span style="color: #ca3400;">"Frank Herbet"</span> };
    { title = <span style="color: #ca3400;">"The Day of the Triffids"</span>; author = <span style="color: #ca3400;">"John Wyndham"</span> };
    { title = <span style="color: #ca3400;">"The Remains of the Day"</span>; author = <span style="color: #ca3400;">"Kazuo Ishiguro"</span> }
  ]

<span style="color: #000000; font-weight: bold;">module</span> <span style="color: #444fcf;">Mono</span> = <span style="color: #444fcf;">Search.Tfidf.Mono (Search.Uids.String) (Book)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">search</span> = <span style="color: #444fcf;">Mono.</span>empty ()
</pre>
</div>

<p>
You can then add an index to your search index along with the documents.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #444fcf;">Mono.</span>add_index search (<span style="color: #006f00; font-weight: bold;">fun</span> <span style="color: #007a9f;">t</span> -&gt; t.title);
<span style="color: #444fcf;">List.</span>iter (<span style="color: #006f00; font-weight: bold;">fun</span> <span style="color: #007a9f;">doc</span> -&gt; <span style="color: #444fcf;">Mono.</span>add_document search doc.<span style="color: #444fcf;">Book.</span>title doc) books
</pre>
</div>

<p>
Before finally being able to search.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #444fcf;">Mono.</span>search search <span style="color: #ca3400;">"day"</span><span style="color: #ff4500;">;;</span>
- : <span style="color: #444fcf;">Mono.</span>doc list =
[{<span style="color: #444fcf;">Book.</span>title = <span style="color: #ca3400;">"The Remains of the Day"</span>; author = <span style="color: #ca3400;">"Kazuo Ishiguro"</span>};
 {<span style="color: #444fcf;">Book.</span>title = <span style="color: #ca3400;">"The Day of the Triffids"</span>; author = <span style="color: #ca3400;">"John Wyndham"</span>}]
</pre>
</div>

<p>
The <a href="https://github.com/patricoferris/ocaml-search">README</a> provides more thorough documentation and also explains how it can also
provide a heterogeneous search index should you want it. I have plans to make the library more easily extendible with your own
search strategies, but thought the initial TF-IDF implementation might already be useful.
</p>

<p>
This library is heavily inspired by <a href="https://github.com/bvaughn/js-search">js-search</a> without which it wouldn&rsquo;t exist.
</p>

<p>
Happy Hacking :camel:
</p>
</div>
</div>
</div>




<div id="outline-container-org546a4e5" class="outline-2">
<h2 id="org546a4e5">Old CWN</h2>
<div class="outline-text-2" id="text-org546a4e5">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I&rsquo;ll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org3c9f98e">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>