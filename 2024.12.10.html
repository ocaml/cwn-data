<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-12-10 Tue 14:47 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2024.12.03.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2024.12.17.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of December 03 to 10, 2024.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Release of cppo 1.8.0</a></li>
<li><a href="#2">New releases of Merlin and OCaml-LSP</a></li>
<li><a href="#3">New release of baby</a></li>
<li><a href="#4">Release of Saturn 1.0</a></li>
<li><a href="#5">Dune dev meeting</a></li>
<li><a href="#6">Dune 3.17</a></li>
<li><a href="#7">Spec and interface to declare dependencies in an OCaml script</a></li>
<li><a href="#8">Other OCaml News</a></li>
<li><a href="#org277a245">Old CWN</a></li>
</ul>
</div>
</div>
<div id="outline-container-1" class="outline-2">
<h2 id="1">Release of cppo 1.8.0</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-release-of-cppo-1-8-0/15749/1">https://discuss.ocaml.org/t/ann-release-of-cppo-1-8-0/15749/1</a>
</p>
</div>
<div id="outline-container-org9ca4dc5" class="outline-3">
<h3 id="org9ca4dc5">Fran√ßois Pottier announced</h3>
<div class="outline-text-3" id="text-org9ca4dc5">
<p>
I am pleased to announce a new release of <code>cppo</code> (1.8.0) with one new feature and one bug fix:
</p>

<ul class="org-ul">
<li>A scope, delimited by <code>#scope ... #endscope</code>, limits the effect of <code>#define</code>, <code>#def ... #enddef</code>, and <code>#undef</code>.</li>
<li>The command <code>cppo -version</code>, which used to print a blank line, has been fixed.</li>
</ul>

<p>
For more details, please see the <a href="https://github.com/ocaml-community/cppo/">documentation</a>.
</p>
</div>
</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="2">New releases of Merlin and OCaml-LSP</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-releases-of-merlin-and-ocaml-lsp/15752/1">https://discuss.ocaml.org/t/ann-new-releases-of-merlin-and-ocaml-lsp/15752/1</a>
</p>
</div>
<div id="outline-container-orgb181490" class="outline-3">
<h3 id="orgb181490">vds announced</h3>
<div class="outline-text-3" id="text-orgb181490">
<p>
I am pleased to announce new releases of Merlin (<code>5.3-502</code> and <code>4.18-414</code>) and OCaml-LSP  (<code>1.20.1</code> and <code>1.20.1-4.14</code>). 
</p>

<p>
The Merlin releases bundle a handful of fixes while the LSP releases focus on adding more custom queries. These custom queries will enable tailored LSP clients to provide the same rich OCaml editing features as the one provided by the original Merlin modes for Emacs and Vim.
</p>

<p>
Latest releases of <code>vscode-ocaml-platform</code> already provide two new commands: <code>Construct</code> and <code>Jump</code> that respectively provide a better UI to fill typed holes with values and jump to specific parent nodes. Search by type/polarity and a command to get the type of growing and shrinking selections will also be available in the future.
</p>


<div id="org5f23762" class="figure">
<p><img src="https://global.discourse-cdn.com/flex020/uploads/ocaml/original/2X/c/c07de3130c92cb1601215531c75ecc0545a97b4d.gif" alt="c07de3130c92cb1601215531c75ecc0545a97b4d.gif" />
</p>
</div>
</div>
<div id="outline-container-org4398508" class="outline-4">
<h4 id="org4398508">Merlin changelog</h4>
<div class="outline-text-4" id="text-org4398508">
</div>
<ul class="org-ul">
<li><a id="org4c12998"></a>merlin 5.3<br />
<div class="outline-text-5" id="text-org4c12998">
<ul class="org-ul">
<li>merlin binary
<ul class="org-ul">
<li>Respect the <code>EXCLUDE_QUERY_DIR</code> configuration directive when looking for cmt
files (#1854)</li>
<li>Fix occurrences bug in which relative paths in index files are resolved against the
PWD rather than the SOURCE_ROOT (#1855)</li>
<li>Fix exception in polarity search (#1858 fixes #1113)</li>
<li>Fix jump to <code>fun</code> targets not working (#1863, fixes #1862)</li>
<li>Fix type-enclosing results instability. This reverts some overly
aggressive deduplication that should be done on the client side. (#1864)</li>
<li>Fix occurrences not working when the definition comes from a hidden source
file (#1865)</li>
</ul></li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-org1b5765e" class="outline-4">
<h4 id="org1b5765e">OCaml-LSP changelog</h4>
<div class="outline-text-4" id="text-org1b5765e">
</div>
<ul class="org-ul">
<li><a id="orgc8296f9"></a>1.20.1<br />
<ul class="org-ul">
<li><a id="org4c1cde9"></a>Features<br />
<div class="outline-text-6" id="text-org4c1cde9">
<ul class="org-ul">
<li>Add custom
[~ocamllsp/typeSearch~](/ocaml-lsp-server/docs/ocamllsp/typeSearch-spec.md) request (#1369)</li>
<li>Make MerlinJump code action configurable (#1376)</li>
<li>Add custom [~ocamllsp/jump~](/ocaml-lsp-server/docs/ocamllsp/merlinJump-spec.md) request (#1374)</li>
</ul>
</div>
</li>
<li><a id="orgef8b0df"></a>Fixes<br />
<div class="outline-text-6" id="text-orgef8b0df">
<ul class="org-ul">
<li>Fix fd leak in running external processes for preprocessing (#1349)</li>
<li>Fix prefix parsing for completion of object methods (#1363, fixes #1358)</li>
<li>Remove some duplicates in the <code>selectionRange</code> answers (#1368)</li>
<li>Deactivate the <code>jump</code> code actions by default. Clients can enable them with
the <code>merlinJumpCodeActions</code> configuration option. Alternatively a custom
request is provided for ad hoc use of the feature. (#1411)</li>
</ul>
</div>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-3" class="outline-2">
<h2 id="3">New release of baby</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/new-release-of-baby/15754/1">https://discuss.ocaml.org/t/new-release-of-baby/15754/1</a>
</p>
</div>
<div id="outline-container-orgc2f75f3" class="outline-3">
<h3 id="orgc2f75f3">Fran√ßois Pottier announced</h3>
<div class="outline-text-3" id="text-orgc2f75f3">
<p>
It is my pleasure to announce the second release of <code>baby</code>.
</p>

<pre class="example" id="orga7f102d">
opam update
opam install baby.20241204
</pre>

<p>
<code>baby</code> is an OCaml library that offers persistent sets and maps based on balanced binary search trees. It offers replacements for OCaml's <code>Set</code> and <code>Map</code> modules.
</p>

<p>
Height-balanced and weight-balanced binary search trees are offered out of the box. Furthermore, to advanced users, the library offers a lightweight way of implementing other balancing strategies.
</p>

<p>
<a href="https://cambium.inria.fr/~fpottier/baby/doc/baby/">Documentation</a> is available online.
</p>

<p>
The changes in this release are as follows:
</p>

<ul class="org-ul">
<li>The library now offers both sets and maps. The modules <code>Baby.H.Set</code> and <code>Baby.W.Set</code> continue to exist, and are compatible with OCaml's <code>Set</code> library. The modules <code>Baby.H.Map</code> and <code>Baby.W.Map</code> appear, and are compatible with OCaml's <code>Map</code> library. Furthermore, the functors <code>Baby.H.Make</code> and <code>Baby.W.Make</code> appear. These functors produce a module that contains sets, maps, and two conversion functions between sets and maps, namely <code>domain</code> and <code>lift</code>.</li>
<li>Documentation: in the signature <code>OrderedType</code>, clarify the specification of the function <code>compare</code>; this function decides a total preorder <code>‚â§</code>.</li>
<li>Documentation: in the preamble, clarify that, most of the time, we assume that <code>‚â§</code> is a total order; if an operation must be understood in the more general case where <code>‚â§</code> is a total preorder, then this is explicitly indicated.</li>
<li>Documentation: update the documentation of <code>find</code> and <code>find_opt</code> in accordance with the previous point.</li>
<li>A number of incompatible changes have been made; see <a href="https://github.com/fpottier/baby/blob/main/CHANGES.md">the change log</a> for details.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-4" class="outline-2">
<h2 id="4">Release of Saturn 1.0</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-release-of-saturn-1-0/15763/1">https://discuss.ocaml.org/t/ann-release-of-saturn-1-0/15763/1</a>
</p>
</div>
<div id="outline-container-orgf250715" class="outline-3">
<h3 id="orgf250715">Carine Morel announced</h3>
<div class="outline-text-3" id="text-orgf250715">
<p>
I am thrilled to announce the release of <a href="https://github.com/ocaml-multicore/saturn">Saturn</a> 1.0!
</p>

<p>
Saturn is a collection of concurrent-safe data structures designed for OCaml 5. These structures have been:
</p>
<ul class="org-ul">
<li>thoroughly tested with amazing tools like <a href="https://github.com/ocaml-multicore/multicoretests">STM</a> (see this <a href="https://tarides.com/blog/2024-04-24-under-the-hood-developing-multicore-property-based-tests-for-ocaml-5/">blog post</a>) and <a href="https://github.com/ocaml-multicore/dscheck">DScheck</a>,</li>
<li>benchmarked for performance,</li>
<li>optimized for efficiency,</li>
<li>and even verified in some cases!</li>
</ul>

<p>
If you're curious about the motivation behind Saturn and the challenges it addresses, you can read more <a href="https://github.com/ocaml-multicore/saturn/blob/main/doc/motivation.md">here</a>.
</p>
</div>
<div id="outline-container-org996cf1c" class="outline-4">
<h4 id="org996cf1c">What Can You Do with Saturn?</h4>
<div class="outline-text-4" id="text-org996cf1c">
<p>
Saturn provides a variety of data structures, including queues, stacks, hash tables, and more. All of these structures are <b><b>lock-free</b></b>, <b><b>linearizable</b></b>, and specifically designed to take full advantage of OCaml 5‚Äôs multicore capabilities.
</p>
</div>
<ul class="org-ul">
<li><a id="orgfc52274"></a>Portable Data Structures<br />
<div class="outline-text-5" id="text-orgfc52274">
<p>
Lock-freedom is a progress property that guarantees system-wide progress. This is a powerful and desirable feature, though it comes at the cost of some overhead. However, it offers a significant advantage: lock-free data structures avoid the need for scheduler-specific blocking mechanisms, making them compatible with any scheduler, such as <a href="https://github.com/ocaml-multicore/eio">Eio</a> or <a href="https://github.com/ocaml-multicore/domainslib">Domainslib</a>.
</p>
</div>
</li>
<li><a id="orgbcdf4a9"></a>Restrictions<br />
<div class="outline-text-5" id="text-orgbcdf4a9">
<p>
Saturn‚Äôs data structures are not composable, meaning you cannot combine them (e.g., use <code>Saturn.Queue</code> inside <code>Saturn.Htbl</code>) while preserving properties like lock-freedom and linearizability.
</p>

<p>
They are also not extensible outside of Saturn without losing these properties. For instance, <code>Saturn.Queue</code> does not include a <code>length</code> function because implementing one would introduce significant overhead (see <code>Saturn.Bounded_queue</code> for an example of this tradeoff). Attempting to add this functionality, such as by wrapping the queue:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #444fcf;">'a t</span> = {size: int <span style="color: #444fcf;">Atomic.</span>t; queue : 'a <span style="color: #444fcf;">Saturn.Queue.</span>t}
</pre>
</div>

<p>
would result in a structure that either loses lock-freedom or is no longer linearizable.
</p>

<p>
If you need composable lock-free data structures, consider exploring <a href="https://ocaml-multicore.github.io/kcas/doc/kcas_data/Kcas_data/index.html">kcas_data</a>.
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-org571c499" class="outline-4">
<h4 id="org571c499">Call to Action</h4>
<div class="outline-text-4" id="text-org571c499">
<ul class="org-ul">
<li><b>Try It Out</b>: Give Saturn a try in your projects and let us know how it works for you. If you encounter any bugs or issues, please report them on our <a href="https://github.com/ocaml-multicore/saturn">GitHub repository</a>.</li>
<li><b>Share Your Use Case</b>: Are you already using Saturn? Let us know in the comments what you're building with it!</li>
<li><b>Contribute</b>: We‚Äôd love to have more contributors. Whether it‚Äôs implementing new features, improving documentation, or suggesting enhancements, your contributions are welcome!</li>
<li><b>Help Shape the Future</b>: What would you like to see in Saturn? Is there a missing data structure you need? Share your thoughts to help us build a roadmap for future development.</li>
</ul>

<p>
<b>Thank you for your support!</b>
</p>
</div>
</div>
<div id="outline-container-orge4ba716" class="outline-4">
<h4 id="orge4ba716">Talks and Resources</h4>
<div class="outline-text-4" id="text-orge4ba716">
<p>
If you want to learn more about Saturn, I gave a talk at the 2024 OCaml Workshop‚Äîcheck out the short <a href="https://icfp24.sigplan.org/details/ocaml-2024-papers/12/Saturn-a-library-of-verified-concurrent-data-structures-for-OCaml-5">paper</a> and the <a href="https://youtu.be/OuQqblCxJ2Y?t=24398">talk</a>.
</p>

<p>
To dive deeper into concurrent-safe data structures, I highly recommend having a look at <a href="https://www.researchgate.net/publication/213876653_The_Art_of_Multiprocessor_Programming">The Art of Multiprocessor Programming</a>, which explores the differences in design between lock-based and lock-free data structures.
</p>
</div>
</div>
<div id="outline-container-org44a1447" class="outline-4">
<h4 id="org44a1447">Commercial Support</h4>
<div class="outline-text-4" id="text-org44a1447">
<p>
If you‚Äôre interested in incorporating Saturn into your commercial applications, Tarides offers professional development and support services. Feel free to contact us for more details.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-5" class="outline-2">
<h2 id="5">Dune dev meeting</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-dev-meeting/14994/18">https://discuss.ocaml.org/t/ann-dune-dev-meeting/14994/18</a>
</p>
</div>
<div id="outline-container-org49f5d09" class="outline-3">
<h3 id="org49f5d09">Etienne Marais announced</h3>
<div class="outline-text-3" id="text-org49f5d09">
<p>
Hi Dune enthusiasts! :smile:  
</p>

<p>
We will hold our regular Dune dev meeting on <b>Wednesday, December, 11th at 9:00</b> CET. As usual, the session will be one hour long.
</p>

<p>
Whether you are a maintainer, a regular contributor, a new joiner or just curious, you are welcome to join: these discussions are opened! The goal of these meetings is to provide a place to discuss the ongoing work together and synchronise between the Dune developers ! :camel: 
</p>
</div>
<div id="outline-container-org4e49efb" class="outline-4">
<h4 id="org4e49efb">:calendar: Agenda</h4>
<div class="outline-text-4" id="text-org4e49efb">
<p>
The agenda is available on the<a href="https://github.com/ocaml/dune/wiki/dev-meeting-2024-12-11"> meeting dedicated page</a>. Feel free to ask if you want to add more items in it.
</p>
</div>
</div>
<div id="outline-container-orgbe46424" class="outline-4">
<h4 id="orgbe46424">:computer: Links</h4>
<div class="outline-text-4" id="text-orgbe46424">
<ul class="org-ul">
<li>Meeting link:<a href="https://us06web.zoom.us/j/85096877776?pwd=cWNhU1dHQ1ZNSjZuOUZCQ0h2by9Udz09"> zoom</a></li>
<li>Calendar event:<a href="https://calendar.google.com/calendar/embed?src=c_5cd698df6784e385b1cdcdc1dbca18c061faa96959a04781566d304dc9ec7319%40group.calendar.google.com"> google calendar</a></li>
<li>Wiki with information and previous notes:<a href="https://github.com/ocaml/dune/wiki#dev-meetings"> GitHub Wiki</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-6" class="outline-2">
<h2 id="6">Dune 3.17</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-3-17/15770/1">https://discuss.ocaml.org/t/ann-dune-3-17/15770/1</a>
</p>
</div>
<div id="outline-container-org009d09e" class="outline-3">
<h3 id="org009d09e">Etienne Marais announced</h3>
<div class="outline-text-3" id="text-org009d09e">
<p>
The Dune team is happy to announce the release of Dune <code>3.17.0</code>! :tada: 
</p>

<p>
Among the list of changes, this minor release enables the Dune cache by default for known-safe operations, adds out-of-the-box support for <code>Wasm_of_ocaml</code>, adds support for the~-H~ compiler flag introduced in OCaml 5.2, allows specifying code hosting services like Codeberg or GitLab organisations, and gives the possibility to run individual tests with <code>dune runtest</code>.
</p>

<p>
If you encounter a problem with this release, you can report it on the <a href="https://github.com/ocaml/dune/issues">ocaml/dune</a> repository.
</p>
</div>
<div id="outline-container-org084493c" class="outline-4">
<h4 id="org084493c">Changelog</h4>
<div class="outline-text-4" id="text-org084493c">
</div>
<ul class="org-ul">
<li><a id="org7e04917"></a>Added<br />
<div class="outline-text-5" id="text-org7e04917">
<ul class="org-ul">
<li>Make Merlin/OCaml-LSP aware of "hidden" dependencies used by
<code>(implicit_transitive_deps false)</code> via the <code>-H</code> compiler flag. (#10535, @voodoos)</li>
<li>Add support for the -H flag (introduced in OCaml compiler 5.2) in dune
(requires lang versions 3.17). This adaptation gives
the correct semantics for <code>(implicit_transitive_deps false)</code>.
(#10644, fixes #9333, ocsigen/tyxml#274, #2733, #4963, @MA0100)</li>
<li>Add support for specifying Gitlab organization repositories in <code>source</code>
stanzas (#10766, fixes #6723, @H-ANSEN)</li>
<li>New option to control jsoo sourcemap generation in env and executable stanza
(#10777, fixes #10673, @hhugo)</li>
<li>One can now control jsoo compilation_mode inside an executable stanza
(#10777, fixes #10673, @hhugo)</li>
<li>Add support for specifying default values of the <code>authors</code>, <code>maintainers</code>, and
<code>license</code> stanzas of the <code>dune-project</code> file via the dune config file. Default
values are set using the <code>(project_defaults)</code> stanza (#10835, @H-ANSEN)</li>
<li>Add names to source tree events in performance traces (#10884, @jchavarri)</li>
<li>Add <code>codeberg</code> as an option for defining project sources in dune-project
files. For example, <code>(source (codeberg user/repo))</code>. (#10904, @nlordell)</li>
<li><code>dune runtest</code> can now run individual tests with <code>dune runtest mytest.t</code>
(#11041, @Alizter).</li>
<li>Wasm_of_ocaml support (#11093, @vouillon)</li>
<li>Add a <code>coqdep_flags</code> field to the <code>coq</code> field of the <code>env</code> stanza, and to the
<code>coq.theory</code> stanza, allowing to configure <code>coqdep</code> flags. (#11094,
@rlepigre)</li>
</ul>
</div>
</li>
<li><a id="org438accd"></a>Fixed<br />
<div class="outline-text-5" id="text-org438accd">
<ul class="org-ul">
<li>Show the context name for errors happening in non-default contexts.
(#10414, fixes #10378, @jchavarri)</li>
<li>Correctly declare dependencies of indexes so that they are rebuilt when
needed. (#10623, @voodoos)</li>
<li>Don't depend on coq-stdlib being installed when expanding variables
of the <code>coq.version</code> family (#10631, fixes #10629, @gares)</li>
<li>Error out if no files are found when using <code>copy_files</code>. (#10649, @jchavarri)</li>
<li>Re_export dune-section private library in the dune-site library stanza,
in order to avoid failure when generating and building sites modules
with implicit_transitive_deps = false. (#10650, fixes #9661, @MA0100)</li>
<li>Expect test fixes: support multiple modes and fix dependencies when there is
a custom runner (#10671, @vouillon)</li>
<li>In a <code>(library)</code> stanza with <code>(extra_objects)</code> and <code>(foreign_stubs)</code>, avoid
double linking the extra object files in the final executable.
(#10783, fixes #10785, @nojb)</li>
<li>Map <code>(re_export)</code> library dependencies to the <code>exports</code> field in <code>META</code> files,
and vice-versa. This field was proposed in to
<a href="https://discuss.ocaml.org/t/proposal-a-new-exports-field-in-findlib-meta-files/13947">https://discuss.ocaml.org/t/proposal-a-new-exports-field-in-findlib-meta-files/13947</a>.
The field is included in Dune-generated <code>META</code> files only when the Dune lang
version is &gt;= 3.17.
(#10831, fixes #10830, @nojb)</li>
<li>Fix staged pps preprocessors on Windows (which were not working at all
previously) (#10869, fixes #10867, @nojb)</li>
<li>Fix <code>dune describe</code> when an executable is disabled with <code>enabled_if</code>.
(#10881, fixes #10779, @moyodiallo)</li>
<li>Fix an issue where C stubs would be rebuilt whenever the stderr of Dune was
redirected. (#10883, fixes #10882, @nojb)</li>
<li>Fix the URL opened by the command <code>dune ocaml doc</code>. (#10897, @gridbugs)</li>
<li>Fix the file referred to in the error/warning message displayed due to the
dune configuration version not supporting a particular configuration
stanza in use. (#10923, @H-ANSEN)</li>
<li>Fix <code>enabled_if</code> when it uses <code>env</code> variable. (#10936, fixes #10905, @moyodiallo)</li>
<li>Fix exec -w for relative paths with &#x2013;root argument (#10982, @gridbugs)</li>
<li>Do not ignore the <code>(locks ..)</code> field in the <code>test</code> and <code>tests</code> stanza
(#11081, @rgrinberg)</li>
<li>Tolerate files without extension when generating merlin rules.
(#11128, @anmonteiro)</li>
</ul>
</div>
</li>
<li><a id="orgad7fc58"></a>Changed<br />
<div class="outline-text-5" id="text-orgad7fc58">
<ul class="org-ul">
<li>Remove all remnants of the experimental <code>patch-back-source-tree</code>. (#10771,
@rgrinberg)</li>
<li>Change the preset value for author and maintainer fields in the
<code>dune-project</code> file to encourage including emails. (#10848, @punchagan)</li>
<li>Tweak the preset value for tags in the <code>dune-project</code> file to hint at topics
not having a special meaning. (#10849, @punchagan)</li>
<li>Change some colors to improve readability in light-mode terminals
(#10890, @gridbugs)</li>
<li>Forward the linkall flag to jsoo in whole program compilation as well (#10935, @hhugo)</li>
<li>Configurator uses <code>pkgconf</code> as pkg-config implementation when available
and forwards it the <code>target</code> of <code>ocamlc -config</code>. (#10937, @pirbo)</li>
<li>Enable Dune cache by default. Add a new Dune cache setting
<code>enabled-except-user-rules</code>, which enables the Dune cache, but excludes
user-written rules from it. This is a conservative choice that can avoid
breaking rules whose dependencies are not correctly specified. This is the
current default. (#10944, #10710, @nojb, @ElectreAAS)</li>
<li>Do not add <code>dune</code> dependency in <code>dune-project</code> when creating projects with
<code>dune init proj</code>. The Dune dependency is implicitely added when generating
opam files (#11129, @Leonidas-from-XIV)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-7" class="outline-2">
<h2 id="7">Spec and interface to declare dependencies in an OCaml script</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/spec-and-interface-to-declare-dependencies-in-an-ocaml-script/15772/1">https://discuss.ocaml.org/t/spec-and-interface-to-declare-dependencies-in-an-ocaml-script/15772/1</a>
</p>
</div>
<div id="outline-container-org5889ac5" class="outline-3">
<h3 id="org5889ac5">jbeckford announced</h3>
<div class="outline-text-3" id="text-org5889ac5">
<p>
This is the fourth article in the MlFront series. If you are interested in scripting frameworks that can download source code and bytecode, and inter-operate while doing so, please read:
</p>

<p>
<a href="https://diskuv.com/mlfront/overview-4/">https://diskuv.com/mlfront/overview-4/</a>
</p>
</div>
<div id="outline-container-org1851419" class="outline-4">
<h4 id="org1851419">TLDR</h4>
<div class="outline-text-4" id="text-org1851419">
<p>
<i>(Critical, verbatim snippets from article)</i>
</p>

<p>
I have an old opam package <a href="https://ocaml.org/p/DkSDKFFIOCaml_Std/latest">DkSDKFFIOCaml_Std</a> that is a low-level bridge between OCaml and other programming languages. It can be extraordinarily difficult to build, so I made it a mix of pure OCaml source code and prebuilt library downloads. Today I'll describe how embedded OCaml dependencies like the following <i>simplifies the build process</i>:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">module</span> _ = <span style="color: #242521; background-color: #fcf7ef;">DkSDKFFI_OCaml</span>
<span style="color: #4f677f; font-style: italic;">(** The bridge between OCaml and other programming languages.</span>

<span style="color: #4f677f; font-style: italic;">    </span><span style="color: #00824f;">{[</span> <span style="color: #242521; background-color: #fcf7ef;">`v1</span> [
          <span style="color: #242521; background-color: #fcf7ef;">`sec</span> [ <span style="color: #242521; background-color: #fcf7ef;">`scheme</span> "dkcoder" ];
          <span style="color: #242521; background-color: #fcf7ef;">`blib</span> ["https://gitlab.com/api/v4/projects/62703194/packages/generic/<span style="color: #a52a2a;">@</span><span style="color: #242521; background-color: #fcf7ef;">DKML_TARGET_ABI</span><span style="color: #a52a2a;">@/</span>2.1.4/<span style="color: #a52a2a;">@</span><span style="color: #242521; background-color: #fcf7ef;">DKML_TARGET_ABI</span><span style="color: #a52a2a;">@-</span>4.14.2-<span style="color: #242521; background-color: #fcf7ef;">DkSDKFFI_OCaml</span>-2.1.4-none.blib.zip"];
          <span style="color: #242521; background-color: #fcf7ef;">`clib</span> ["https://gitlab.com/api/v4/projects/62703194/packages/generic/<span style="color: #a52a2a;">@</span><span style="color: #242521; background-color: #fcf7ef;">DKML_TARGET_ABI</span><span style="color: #a52a2a;">@/</span>2.1.4/<span style="color: #a52a2a;">@</span><span style="color: #242521; background-color: #fcf7ef;">DKML_TARGET_ABI</span><span style="color: #a52a2a;">@-</span>4.14.2-<span style="color: #242521; background-color: #fcf7ef;">DkSDKFFI_OCaml</span>-2.1.4-none.clib.zip"]
        ] <span style="color: #00824f;">]}</span><span style="color: #4f677f; font-style: italic;"> *)</span>

<span style="color: #8f6f4a; font-style: italic;">(* </span><span style="color: #8f6f4a; font-style: italic;">And use what you imported ...</span><span style="color: #8f6f4a; font-style: italic;"> *)</span>
<span style="color: #000000; font-weight: bold;">let</span> () =
   <span style="color: #557400; font-weight: bold;">ignore</span> (<span style="color: #444fcf;">DkSDKFFI_OCaml.Com.</span>create_c ())
</pre>
</div>

<p>
&#x2014;
</p>

<p>
One set of designs I created are the <code>MlFront_Archive</code> package formats:
</p>

<ol class="org-ol">
<li><code>*.blib.zip</code> - This is the bytecode archive. It is a zip file containing <code>.cma</code>, <code>.cmi</code> and some other critical metadata.</li>
<li><code>*.clib.zip</code> - This is the C library archive. It is a zip file containing <code>.so</code> or <code>.dylib</code> or <code>.dll</code> shared libraries, and also the corresponding static libraries.</li>
</ol>
<p>
The important concept is that <code>*.blib.zip</code> and <code>*.clib.zip</code> for OCaml are analogous to <code>*.jar</code> files for Java. The design is available at:
</p>

<ul class="org-ul">
<li>Format of packages: <a href="https://gitlab.com/diskuv/registries/public-packages#generic-registry-layout">https://gitlab.com/diskuv/registries/public-packages#generic-registry-layout</a></li>
<li>Binaries to unpack the packages: <a href="https://gitlab.com/dkml/build-tools/MlFront_Archive/-/releases">https://gitlab.com/dkml/build-tools/MlFront_Archive/-/releases</a></li>
</ul>

<p>
&#x2014;
</p>

<p>
The remote specification design is in the <code>MlFront_Config</code> library:
</p>

<ul class="org-ul">
<li>code: <a href="https://gitlab.com/dkml/build-tools/MlFront#mlfront">https://gitlab.com/dkml/build-tools/MlFront#mlfront</a></li>
<li>odoc: <a href="https://dkml.gitlab.io/build-tools/MlFront/MlFront_Config/MlFront_Config/RemoteSpec/index.html">https://dkml.gitlab.io/build-tools/MlFront/MlFront_Config/MlFront_Config/RemoteSpec/index.html</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-8" class="outline-2">
<h2 id="8">Other OCaml News</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org70ba81b" class="outline-3">
<h3 id="org70ba81b">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-org70ba81b">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="https://frama-c.com/fc-versions/zinc.html">Release of Frama-C 30.0 (Zinc)</a></li>
<li><a href="https://tarides.com/blog/2024-12-04-irmin-on-mirageos-under-the-hood-with-notafs">Irmin on MirageOS: Under-the-Hood With Notafs</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org277a245" class="outline-2">
<h2 id="org277a245">Old CWN</h2>
<div class="outline-text-2" id="text-org277a245">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe to the <a href="https://sympa.inria.fr/sympa/info/caml-list">caml-list</a>.
</p>

<div class="authorname" id="orgac2e355">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
