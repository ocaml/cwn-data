<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-10-14 Tue 11:55 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'JavaScript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2025.10.07.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2025.10.21.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of October 07 to 14, 2025.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">opam-publish 2.7.0</a></li>
<li><a href="#2">OCaml.org: Introducing Backstage OCaml - Separate Feeds for Stable and Experimental Features</a></li>
<li><a href="#3">LexiFi at FUN OCaml 2025</a></li>
<li><a href="#4">Introducing <code>oui</code></a></li>
<li><a href="#5">OCaml 5.4.0 released</a></li>
<li><a href="#6">OCaml compiler office hours</a></li>
<li><a href="#7">tutorial about compiling ocaml-5 on a ChromBook with Crostini</a></li>
<li><a href="#8">dune-release-action: Automate your opam package releases with GitHub Actions</a></li>
<li><a href="#9">Other OCaml News</a></li>
<li><a href="#org09e42ac">Old CWN</a></li>
</ul>
</div>
</div>
<div id="outline-container-1" class="outline-2">
<h2 id="1">opam-publish 2.7.0</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-publish-2-7-0/17358/1">https://discuss.ocaml.org/t/ann-opam-publish-2-7-0/17358/1</a>
</p>
</div>
<div id="outline-container-org2bf6637" class="outline-3">
<h3 id="org2bf6637">Kate announced</h3>
<div class="outline-text-3" id="text-org2bf6637">
<p>
Hi everyone,
</p>

<p>
We are happy to announce the release of opam-publish 2.7.0 (and 2.6.0), which together brought the ability to more easily publish your releases automatically, thanks to @filipeom:
</p>

<ul class="org-ul">
<li>A new <code>OPAM_PUBLISH_GH_TOKEN</code> environment variable and <code>--token</code> argument are now available to pass the GitHub token</li>

<li>SSH keys aren't used to push the branch to the user's fork anymore. Instead the token we already require is used.</li>

<li>If undefined, the git config variables <code>user.name</code> and <code>user.email</code> are automatically filled with the github username and username@opam-publish as a backup</li>
</ul>

<p>
An example of the new automated setup can be found in <a href="https://github.com/formalsec/smtml/commit/3c98cc024583e69b87c6d63a233abff149471399">this CI job</a>.
</p>

<p>
Other minor changes include:
</p>

<ul class="org-ul">
<li>The addition of a message after the PR is open, to notify users that they can re-run opam-publish to update the PR. <b>Thanks to @punchagan</b></li>

<li>The switch from <code>lwt_ssl</code> to <code>tls-lwt</code> which avoid one dependency and avoid depending on the system libssl</li>
</ul>

<p>
Happy publishing!
</p>

<p>
&lt;&gt; &lt;&gt; The opam team &lt;&gt; &lt;&gt; :camel:
</p>
</div>
</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="2">OCaml.org: Introducing Backstage OCaml - Separate Feeds for Stable and Experimental Features</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-org-introducing-backstage-ocaml-separate-feeds-for-stable-and-experimental-features/17359/1">https://discuss.ocaml.org/t/ocaml-org-introducing-backstage-ocaml-separate-feeds-for-stable-and-experimental-features/17359/1</a>
</p>
</div>
<div id="outline-container-orge229869" class="outline-3">
<h3 id="orge229869">Sabine Schmaltz announced</h3>
<div class="outline-text-3" id="text-orge229869">
<p>
We're pleased to announce that OCaml.org now has dedicated RSS feeds and pages for stable and experimental announcements, introduced in <a href="https://github.com/ocaml/ocaml.org/pull/3278">PR #3278</a>!
</p>

<p>
<b>What's new:</b>
</p>

<ul class="org-ul">
<li><b>OCaml Changelog</b> at <a href="https://ocaml.org/changelog">ocaml.org/changelog</a> — Official stable release announcements and updates from the OCaml compiler, OCaml infrastructure, and the OCaml Platform Tools</li>

<li><b>Backstage OCaml</b> at <a href="https://ocaml.org/backstage">ocaml.org/backstage</a> — Updates on experimental releases, work-in-progress, and opportunities to contribute to the development of the OCaml Platform and its infrastructure</li>
</ul>

<p>
This separation helps keep the main changelog focused on production-ready releases while providing a dedicated space for those interested in experimental work, early testing, and contributing to OCaml's development.
</p>

<p>
Both pages have their own RSS feeds, so you can subscribe to whichever matches your needs—or both!
</p>

<p>
We welcome your feedback as we continue improving OCaml.org.
</p>
</div>
</div>
</div>
<div id="outline-container-3" class="outline-2">
<h2 id="3">LexiFi at FUN OCaml 2025</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/lexifi-at-fun-ocaml-2025/17363/1">https://discuss.ocaml.org/t/lexifi-at-fun-ocaml-2025/17363/1</a>
</p>
</div>
<div id="outline-container-org0bcaf9d" class="outline-3">
<h3 id="org0bcaf9d">Nicolas Ojeda Bar announced</h3>
<div class="outline-text-3" id="text-org0bcaf9d">
<p>
Dear OCaml enthusiasts,
</p>

<p>
LexiFi participated in this year's <a href="https://fun-ocaml.com">FUN OCaml</a> that took place in Warsaw this past September 15 and 16. The event was a great success, thanks to the efforts of the organizers and the other participants. Hopefully the event will continue to take place and develop in the future.
</p>

<p>
LexiFi both sponsored and contributed (two) presentations to the event: a 30-minute retrospective on 25 years of using OCaml at LexiFi, and a 2-hour workshop on implementing a toy version of our type-reflection extension to the compiler.
</p>

<p>
If you are interested, we wrote a short blog post <a href="https://www.lexifi.com/blog/ocaml/fun-ocaml-2025/">https://www.lexifi.com/blog/ocaml/fun-ocaml-2025/</a> where you will find the slides and the video for the 30-minute presentation, as well as the code and the slides for the 2-hour workshop (the video recording for this part is not yet available).
</p>

<p>
Enjoy!
</p>

<p>
Best wishes,
Nicolas
</p>
</div>
</div>
</div>
<div id="outline-container-4" class="outline-2">
<h2 id="4">Introducing <code>oui</code></h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/introducing-oui/17364/1">https://discuss.ocaml.org/t/introducing-oui/17364/1</a>
</p>
</div>
<div id="outline-container-org2495f64" class="outline-3">
<h3 id="org2495f64">Nathan Rebours announced</h3>
<div class="outline-text-3" id="text-org2495f64">
<p>
At <a href="https://ocamlpro.com/">OCamlPro</a> we're happy to announce our new ongoing project funded by the <a href="https://list.cea.fr/en/">CEA-List</a>: ocaml-universal-installer or <code>oui</code>!
</p>

<p>
<code>oui</code>'s goal is to help teams developping applications in OCaml to package them for their users outside the OCaml World by building binary installers for all major platforms: Linux, Windows and macOS.
</p>

<p>
<code>oui</code> builds standalone installers: you just need to download and run the file. No need to install OCaml, Opam and to compile anything on the target system anymore.
</p>

<p>
The tool will be used to package and distribute <a href="https://frama-c.com/">Frama-C</a> and its plugins to non opam users.
</p>

<p>
It is still in development but we'd like to present it to the community with the hope that it will prove helpful to you as well.
</p>
</div>
<div id="outline-container-orged7bda8" class="outline-4">
<h4 id="orged7bda8">How it works</h4>
<div class="outline-text-4" id="text-orged7bda8">
<p>
You take care of building your application and provide <code>oui</code> the list of your binaries and extra files you'd like installed alongside them and it will assemble an installer from those.
</p>

<p>
It uses different tools and build different types of installers for all three main platfoms:
</p>
<ul class="org-ul">
<li>on Linux, we build self extracting archives using <a href="https://makeself.io/">makeself</a>.</li>
<li>on Windows, we build MSI using the <a href="https://wixtoolset.org/">Wix6 toolset</a></li>
<li>on macOS, we build regular OSX installers using <code>pkgbuild~/~productbuild</code></li>
</ul>

<p>
We started <code>oui</code> on top of an older but very similar project: <code>opam-wix</code>. <code>opam-wix</code> was an opam plugin used to build a Windows MSI from a locally installed opam package. This feature, though not the core focus of the early development, is still available via <code>opam-oui</code> and will be extended with the ability to build installers for the other supported platforms.
</p>
</div>
</div>
<div id="outline-container-org00f87db" class="outline-4">
<h4 id="org00f87db">A tool for the community</h4>
<div class="outline-text-4" id="text-org00f87db">
<p>
Though it is initially developped for Frama-C's distribution, both the CEA-List and ourselves at OCamlPro would like to make <code>oui</code> a community tool that can help open source OCaml developpers ship their applications easily.
</p>

<p>
The goal of this early announcement is to gather data and feedback on other use cases for binary installers across the OCaml Ecosystem to help us shape <code>oui</code> into the right tool from the start.
</p>

<p>
This is an ongoing project, if you'd like to follow the development, it is publicly hosted <a href="https://github.com/OCamlPro/ocaml-universal-installer">here</a>.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-5" class="outline-2">
<h2 id="5">OCaml 5.4.0 released</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-5-4-0-released/17365/1">https://discuss.ocaml.org/t/ocaml-5-4-0-released/17365/1</a>
</p>
</div>
<div id="outline-container-orga58ed09" class="outline-3">
<h3 id="orga58ed09">octachron announced</h3>
<div class="outline-text-3" id="text-orga58ed09">
<p>
We have the pleasure of celebrating the birthdays of Camille Saint-Saëns and
Karl Schwarzschild by announcing the release of OCaml version 5.4.0.
</p>

<p>
Some of the highlights of OCaml 5.4.0 are:
</p>
</div>
<div id="outline-container-orge66a0fe" class="outline-4">
<h4 id="orge66a0fe">Labelled tuples</h4>
<div class="outline-text-4" id="text-orge66a0fe">
<p>
It is now possible to add labels on tuple fields
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> ( <span style="color: #a7601f;">*</span> ) (<span style="color: #007a9f;">x</span>,~<span style="color: #007a9f;">dx</span>) (<span style="color: #007a9f;">y</span>, ~<span style="color: #007a9f;">dy</span>) =
  x*.y, <span style="color: #444fcf;">~dx</span>:(x *. dy +. y *. dx )
</code></pre>
</div>

<p>
Those labeled tuples are equivalent to SML records: they are an ordered and
structurally-typed variants of records. In particular this implies that
partial pattern matching on tuples is only possible for labelled tuples with a
known type:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">type</span> <span style="color: #444fcf;">t</span> = float * dx:float
<span style="color: #242521; font-weight: bold;">let</span> <span style="color: #a7601f;">v</span> (<span style="color: #007a9f;">x_and_dx</span>:<span style="color: #444fcf;">t</span>) = <span style="color: #242521; font-weight: bold;">let</span> (<span style="color: #007a9f;">x</span>,..) = x_and_dx <span style="color: #242521; font-weight: bold;">in</span> x
</code></pre>
</div>

<p>
Those types are mostly intended for local types where previous code was using tuples.
</p>
</div>
</div>
<div id="outline-container-orgbb5de45" class="outline-4">
<h4 id="orgbb5de45">Array literal syntax support for immutable arrays and ~floatarray~s</h4>
<div class="outline-text-4" id="text-orgbb5de45">
<p>
The array literal syntax is now shared by array-like primitive types, like <code>'a
array</code>, <code>floatarray</code> and immutable array <code>iarray</code>. For instance, this code
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">x</span> = <span style="color: #557400;">Float.Array.</span>of_list [0.;1.;2.]
</code></pre>
</div>

<p>
can now be written
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">x</span> :<span style="color: #444fcf;"> floatarray </span>= [|0.; 1.; 2.|]
</code></pre>
</div>

<p>
This also supported in patterns
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">one</span> = <span style="color: #006f00;">match</span> x <span style="color: #006f00;">with</span>
  | [|_;y;_|] -&gt; <span style="color: #242521;">Some</span> y
  | _ -&gt; None
</code></pre>
</div>

<p>
However array indexing still needs to go through user-defined indexing operators
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> (.<span style="color: #9f0d0f;">$</span>()) = <span style="color: #557400;">Float.Array.</span>get
<span style="color: #242521; font-weight: bold;">let</span> (.<span style="color: #9f0d0f;">$</span>()&lt;-) = <span style="color: #557400;">Float.Array.</span>set
<span style="color: #242521; font-weight: bold;">let</span> () = x.<span style="color: #9f0d0f;">$</span>(0) &lt;- x.<span style="color: #9f0d0f;">$</span>(1)
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgdc52793" class="outline-4">
<h4 id="orgdc52793">Immutable arrays</h4>
<div class="outline-text-4" id="text-orgdc52793">
<p>
Along with shared array literals, OCaml 5.4 adds support for immutable arrays.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">v</span>:<span style="color: #444fcf;"> int iarray </span>= [| 0; 1; 2 |]
</code></pre>
</div>

<p>
Immutable arrays are covariant in the type of their elements, it is thus possible to coerce
immutable arrays with no costs at runtime:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">i1</span>:<span style="color: #444fcf;"> _ iarray </span>= [|<span style="color: #242521; font-weight: bold;">object</span> <span style="color: #242521; font-weight: bold;">method</span> <span style="color: #a7601f;">m</span> = 0 <span style="color: #242521; font-weight: bold;">end</span>|]
<span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">i2</span> = ( i1 :&gt; &lt; &gt; iarray)
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org61e6025" class="outline-4">
<h4 id="org61e6025">Atomic record fields</h4>
<div class="outline-text-4" id="text-org61e6025">
<p>
  It is now possible to mark a field of a record as atomic. Atomic operations on
those fields require to use the new <code>Atomic.Loc</code> submodule after accessing the
location with the <code>[%atomic.loc ...]</code> builtin extension. For instance,
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">type</span> <span style="color: #444fcf;">'a mpsc_list</span> = { <span style="color: #006f00;">mutable</span> head:'a list; <span style="color: #006f00;">mutable</span> tail: 'a list <span style="color: #a7601f;">[@atomic]</span> }

<span style="color: #242521; font-weight: bold;">let</span> <span style="color: #242521; font-weight: bold;">rec</span> <span style="color: #a7601f;">push</span> <span style="color: #007a9f;">t</span> <span style="color: #007a9f;">x</span> =
  <span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">before</span> = <span style="color: #557400;">Atomic.Loc.</span>get <span style="color: #a7601f; background-color: #ebebeb;">[%atomic.loc</span> t.tail<span style="color: #a7601f; background-color: #ebebeb;">]</span> <span style="color: #242521; font-weight: bold;">in</span>
  <span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">after</span> = x <span style="color: #242521;">::</span> before <span style="color: #242521; font-weight: bold;">in</span>
  <span style="color: #006f00;">if</span> <span style="color: #9f0d0f;">not</span> (<span style="color: #557400;">Atomic.Loc.</span>compare_and_set <span style="color: #a7601f; background-color: #ebebeb;">[%atomic.loc</span> t.tail<span style="color: #a7601f; background-color: #ebebeb;">]</span> before after) <span style="color: #006f00;">then</span>
    push t x
  ...
</code></pre>
</div>
<p>
Moreover, it is forbidden to pattern match on atomic fields:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #a7601f;">f</span> { <span style="color: #007a9f;">head</span>; <span style="color: #007a9f;">tail</span> } = tail
</code></pre>
</div>

<pre class="example" id="orgde5ab05">
Error: Atomic fields (here tail) are forbidden in patterns,
       as it is difficult to reason about when the atomic read
       will happen during pattern matching: the field may be read
       zero, one or several times depending on the patterns around it.
</pre>

<p>
in order to make all reads on those atomic fields explicit.
</p>
</div>
</div>
<div id="outline-container-org74ca879" class="outline-4">
<h4 id="org74ca879">Four new standard library modules: Pair, Pqueue, Repr, and Iarray</h4>
<div class="outline-text-4" id="text-org74ca879">
<p>
The standard library has been extended with four new modules:
</p>

<ul class="org-ul">
<li>Pair: functions for working on pairs</li>
</ul>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">ones</span> = <span style="color: #557400;">Pair.</span>map_fst succ (0,1)
</code></pre>
</div>

<ul class="org-ul">
<li>Pqueue: priority queues, generic or not</li>
</ul>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">module</span> <span style="color: #557400;">Int_pqueue</span> = <span style="color: #557400;">Pqueue.MakeMin(Int)</span>
<span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">q</span> = <span style="color: #557400;">Int_pqueue.</span>of_list [4;0;5;7]
<span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">some_zero</span> = <span style="color: #557400;">Int_pqueue.</span>pop_min q
</code></pre>
</div>

<ul class="org-ul">
<li>Repr: physical and structural equality, comparison function,
more generically all functions dependent on the memory representation
of values.</li>
</ul>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">f</span> = <span style="color: #557400;">Repr.</span>phys_equal (<span style="color: #557400;">ref</span> 0) (<span style="color: #557400;">ref</span> 0)
</code></pre>
</div>

<ul class="org-ul">
<li>Iarray: functions on immutable arrays</li>
</ul>

<div class="org-src-container">
<pre class="src src-ocaml"><code><span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">a</span> = <span style="color: #557400;">Iarray.</span>init 10 <span style="color: #557400;">Fun.</span>id
<span style="color: #242521; font-weight: bold;">let</span> <span style="color: #007a9f;">b</span> = <span style="color: #557400;">Iarray.</span>map succ a
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org15ed31f" class="outline-4">
<h4 id="org15ed31f">Restored "memory cleanup upon exit" mode</h4>
<div class="outline-text-4" id="text-org15ed31f">
<p>
This mode allows to restart many time the OCaml runtime in C-driven programs
that interact with OCaml libraries. It is also useful to reduce noise when
tracking memory leaks in C code running the OCaml runtime. To get around
cancellation issues, the restored mode currently assumes that all domains are
joined before exiting the OCaml runtime.
</p>
</div>
</div>
<div id="outline-container-orge2d8ed0" class="outline-4">
<h4 id="orge2d8ed0">A new section in the reference manual on profiling OCaml programs on Linux and macOS</h4>
<div class="outline-text-4" id="text-orge2d8ed0">
<p>
A new section in the <a href="https://ocaml.org/manual/profil.html">reference manual</a> explains
how to use OS specific profiling tools to profile native OCaml programs.
</p>
</div>
</div>
<div id="outline-container-org7952068" class="outline-4">
<h4 id="org7952068">A lot of incremental changes:</h4>
<div class="outline-text-4" id="text-org7952068">
<ul class="org-ul">
<li>Many runtime and code generation improvements</li>
<li>More than thirty new standard library functions</li>
<li>Nearly a dozen improved error messages</li>
<li>Around fifty bug fixes</li>
</ul>

<p>
Please report any unexpected behaviours on the <a href="https://github.com/ocaml/ocaml/issues">OCaml issue
tracker</a> and post any questions or
comments you might have on our <a href="https://discuss.ocaml.org">discussion forums</a>.
</p>

<p>
The full list of changes can be found in the full changelog. <i>Editor note: please follow the archive link above for the installation instructions and the full changelog</i>
</p>

<p>
Happy hacking,
Florian Angeletti for the OCaml team.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-6" class="outline-2">
<h2 id="6">OCaml compiler office hours</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-compiler-office-hours/17230/16">https://discuss.ocaml.org/t/ocaml-compiler-office-hours/17230/16</a>
</p>
</div>
<div id="outline-container-org9b0dbed" class="outline-3">
<h3 id="org9b0dbed">Continuing this thread, gasche announced</h3>
<div class="outline-text-3" id="text-org9b0dbed">
<p>
The meeting went well &ndash; see the <a href="https://codimd.math.cnrs.fr/nuew1gMsROCAy_klt_TkJg">collaborative pad</a> for notes.
</p>

<p>
I propose to have another meeting about a month from now:
</p>

<p>
on <b>November 7th</b>
at <b>15:30&ndash;17:00</b> UTC
</p>

<p>
(I picked a different time slot from the current one, that also looks reasonable given previous poll results. If extra people would like to join, please feel free to participate to the time-slot poll in <a href="https://discuss.ocaml.org/t/ocaml-compiler-office-hours/17230">the first post</a> so that I can tell when are good meeting times.)
</p>

<p>
@giltho thanks for noticing the language issue on the online-meeting service I proposed; this is a new issue that looks like it comes from a version upgrade, it of course had a fine English interface when I adopted the service. Let's keep jitsi.meet for now.
</p>
</div>
</div>
</div>
<div id="outline-container-7" class="outline-2">
<h2 id="7">tutorial about compiling ocaml-5 on a ChromBook with Crostini</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-tutorial-about-compiling-ocaml-5-on-a-chrombook-with-crostini/17368/1">https://discuss.ocaml.org/t/ann-tutorial-about-compiling-ocaml-5-on-a-chrombook-with-crostini/17368/1</a>
</p>
</div>
<div id="outline-container-org1431e93" class="outline-3">
<h3 id="org1431e93">Florent Monnier announced</h3>
<div class="outline-text-3" id="text-org1431e93">
<p>
Hello dear list,
I wrote another mini-tutorial to explain how to compile ocaml-5 on a chromebook with crostini:
<a href="http://decapode314.free.fr/ocaml2/tut/tut-ocaml-5/tut-ocaml-5.html">http://decapode314.free.fr/ocaml2/tut/tut-ocaml-5/tut-ocaml-5.html</a>
The trick to compile ocaml-5 in this environement was the same than to compile ocaml-4 in the same environement because <code>ln -s</code> doesn't seem to produce the expected result.
At the beginning I edited the <code>Makefile</code> to replace the <code>ln -s</code> commands by <code>cp</code> commands, but an easier way is to use the <code>make</code> feature that permits you to change the value of one of the variable from the command line which invokes <code>make</code>, like this <code>make LN=cp</code>.
</p>

<p>
With this trick everything was producing the expected <code>ocaml</code> <code>tools</code> with ocaml-4, but with ocaml-5, I have only been able to get <code>ocamlnat</code> and <code>ocamlopt</code> tools (which is enough.)
</p>

<p>
<code>ocamlopt</code> was installed as expected by the <code>make install</code> command, but <code>ocamlnat</code> had to be copied by hand.
</p>

<p>
If the command <code>ocaml</code> produces an error (<code>cannot execute</code>), in scripts I can still replace:
</p>
<pre class="example" id="org0557b2e">
#!/usr/bin/env ocaml
</pre>
<p>
by:
</p>
<pre class="example" id="org206e3fa">
#!/usr/bin/env ocamlnat
</pre>
<p>
By defining the same environement variables than <code>opam</code> I can get two different ocaml version usable at the same time, one 4 version, and a 5 version, next to each other at the same time, without using <code>opam</code> because <code>opam</code> grew up a lot, and in crostini environement we quickly lack of space.
</p>

<p>
PS: If someone want to help finding how to get the <code>ocaml</code> and <code>ocamlc</code> commands functioning, the help will be wellcome, and I will update this mini-tutorial.
</p>
</div>
</div>
</div>
<div id="outline-container-8" class="outline-2">
<h2 id="8">dune-release-action: Automate your opam package releases with GitHub Actions</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-release-action-automate-your-opam-package-releases-with-github-actions/17380/1">https://discuss.ocaml.org/t/ann-dune-release-action-automate-your-opam-package-releases-with-github-actions/17380/1</a>
</p>
</div>
<div id="outline-container-org35dd0db" class="outline-3">
<h3 id="org35dd0db">David Sancho announced</h3>
<div class="outline-text-3" id="text-org35dd0db">
<p>
Hi everyone 👋
</p>

<p>
I'm excited to share a new GitHub Action I've been working on: <b>dune-release-action</b>
</p>

<p>
If you maintain OCaml packages, you know the drill: every release involves a ritual of commands and manual steps. You need to:
</p>

<ol class="org-ol">
<li>Ensure your CHANGES.md is properly formatted</li>
<li>Tag your release</li>
<li>Run <code>dune-release</code> <code>lint + distrib + submit</code></li>
<li>Create a GitHub release with the correct changelog section</li>
<li>Check the opam-repository's PR</li>
<li>Oh shit, github token is expired</li>
<li>Create new token without expiration (??)</li>
<li>Retry</li>
</ol>

<p>
For me, was following this guide <a href="https://gist.github.com/anmonteiro/abd9275456888740758aa9f772d1992a">https://gist.github.com/anmonteiro/abd9275456888740758aa9f772d1992a</a> by @anmonteiro, but it typically took around an hour per release.
</p>
</div>
<div id="outline-container-org2ad3937" class="outline-4">
<h4 id="org2ad3937">dune-release-action</h4>
<div class="outline-text-4" id="text-org2ad3937">
<p>
<code>dune-release-action</code> automates the entire release workflow in GitHub Actions. Push a git tag, and the action runs dune-release for you with:
</p>

<ul class="org-ul">
<li>Handles all the <code>dune-release</code> orchestration</li>
<li>Validates your changelog format (right tag exists, etc)</li>
<li>Creates a GitHub release with proper description (from your changelog section (!!))</li>
<li>Submits a PR to opam-repository</li>
</ul>

<div class="org-src-container">
<pre class="src src-yaml"><code>name: Release

on:
  push:
    tags:
      - '*'

permissions:
  contents: write
  pull-requests: write

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - uses: ocaml/setup-ocaml@v3
        with:
          ocaml-compiler: 5.3.0

      - run: opam install dune-release -y

      - uses: davesnx/dune-release-action@v1
        with:
          package-name: 'your-package'
          github-token: ${{ secrets.GH_TOKEN }}
</code></pre>
</div>

<p>
This is very much a one-day half vibe-coded project and it's hard to test in many use cases, I'm sure there are edge cases and workflows I haven't considered.
</p>

<ul class="org-ul">
<li><b>Repository</b>: <a href="https://github.com/davesnx/dune-release-action">https://github.com/davesnx/dune-release-action</a></li>
<li><b>Documentation</b>: <a href="https://github.com/davesnx/dune-release-action/blob/main/README.md">https://github.com/davesnx/dune-release-action/blob/main/README.md</a></li>
</ul>

<p>
Looking forward to hearing your thoughts!
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-9" class="outline-2">
<h2 id="9">Other OCaml News</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orgbbb5b94" class="outline-3">
<h3 id="orgbbb5b94">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-orgbbb5b94">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="https://tarides.com/blog/2025-10-10-ocaml-5-4-release-new-features-fixes-and-more">OCaml 5.4 Release: New Features, Fixes, and More!</a></li>
<li><a href="https://www.tunbury.org/2025/10/10/docker-base-images/">Docker base image build rate</a></li>
<li><a href="https://www.lexifi.com/blog/ocaml/fun-ocaml-2025/">LexiFi at FUN OCaml 2025</a></li>
<li><a href="https://ocaml.org/events">Upcoming OCaml Events</a></li>
<li><a href="https://www.tunbury.org/2025/10/07/freebsd-14.3/">Updating OCaml CI systems to FreeBSD 14.3</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org09e42ac" class="outline-2">
<h2 id="org09e42ac">Old CWN</h2>
<div class="outline-text-2" id="text-org09e42ac">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe to the <a href="https://sympa.inria.fr/sympa/info/caml-list">caml-list</a>.
</p>

<div class="authorname" id="orga8fb7f7">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
