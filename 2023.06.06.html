<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-06-06 Tue 16:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2023.05.30.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2023.06.13.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of May 30 to June 06, 2023.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Meetup group in New York City</a></li>
<li><a href="#2">Creating a tutorial on sequences</a></li>
<li><a href="#3">new release: Merlin 4.9</a></li>
<li><a href="#4">Taking Inventory of the OCaml Ecosystem on OCaml.org</a></li>
<li><a href="#5">New release: DocuLib 1.3.5</a></li>
<li><a href="#6">opam 2.1.5 release!</a></li>
<li><a href="#7">dune 3.8.0</a></li>
<li><a href="#8">Second alpha release of OCaml 5.1.0</a></li>
<li><a href="#9">ML&rsquo;23: ACM SIGPLAN ML Family Workshop — Call for presentations</a></li>
<li><a href="#10">qcheck-lin and qcheck-stm 0.2</a></li>
<li><a href="#11">Melange 1.0 – compile OCaml / ReasonML to JavaScript</a></li>
<li><a href="#12">Debugging Native Code in &ldquo;Second OCaml&rdquo; YouTube Video</a></li>
<li><a href="#13">Sandmark nightly now supports latency profiling</a></li>
<li><a href="#14">Update on Eio (effects-based direct-style IO for OCaml 5)</a></li>
<li><a href="#15">Initial Emissions Monitoring of the OCaml.org Infrastructure</a></li>
<li><a href="#16">Other OCaml News</a></li>
<li><a href="#org7aba518">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Meetup group in New York City</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/meetup-group-in-new-york-city/12270/1">https://discuss.ocaml.org/t/meetup-group-in-new-york-city/12270/1</a>
</p>
</div>

<div id="outline-container-org95a06dd" class="outline-3">
<h3 id="org95a06dd">Ashish Agarwal announced</h3>
<div class="outline-text-3" id="text-org95a06dd">
<p>
I&rsquo;m pleased to announce that the <a href="https://www.meetup.com/nyc-ocaml/">OCaml NYC Meetup</a> is back! We have scheduled
our first new event for June 20th, where we will discuss the use of OCaml in Tezos. Please join the meetup group to
stay informed about future events. We normally will not post to this forum.
</p>

<p>
We are always looking for speakers. Please reach out to me if you are in the New York City area and are interested
in giving a talk.
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Creating a tutorial on sequences</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/creating-a-tutorial-on-sequences/12091/2">https://discuss.ocaml.org/t/creating-a-tutorial-on-sequences/12091/2</a>
</p>
</div>

<div id="outline-container-org650a00a" class="outline-3">
<h3 id="org650a00a">Cuihtlauac Alvarado announced</h3>
<div class="outline-text-3" id="text-org650a00a">
<p>
This tutorial is now online: <a href="https://ocaml.org/docs/sequences">https://ocaml.org/docs/sequences</a>
</p>

<p>
Thanks to Miod Vallat, Sayo Bamigdade (@SaySayo), Christine Rose (@professor.rose), Sabine Schmaltz (@sabine),
Guillaume Petiot (@gpetiot), Xavier Van de Woestyne (@xvw) and Simon Cruanes (@c-cube ) for their feedback
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">new release: Merlin 4.9</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-release-merlin-4-9/12277/1">https://discuss.ocaml.org/t/ann-new-release-merlin-4-9/12277/1</a>
</p>
</div>

<div id="outline-container-org9174756" class="outline-3">
<h3 id="org9174756">vds announced</h3>
<div class="outline-text-3" id="text-org9174756">
<p>
I am pleased to announce a new release of Merlin!
</p>

<p>
Merlin is an editor service that provides modern IDE features for OCaml.
</p>

<p>
This new release brings a number of improvements and bug fixes. In particular we identified and patched an
important memory consumption issue that could greatly affect Merlin&rsquo;s performance in heavily functorized projects.
</p>

<p>
Full changelog: <a href="https://github.com/ocaml/merlin/blob/master/CHANGES.md#merlin-49">https://github.com/ocaml/merlin/blob/master/CHANGES.md#merlin-49</a>
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Taking Inventory of the OCaml Ecosystem on OCaml.org</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/taking-inventory-of-the-ocaml-ecosystem-on-ocaml-org/12278/1">https://discuss.ocaml.org/t/taking-inventory-of-the-ocaml-ecosystem-on-ocaml-org/12278/1</a>
</p>
</div>

<div id="outline-container-orgc33eb02" class="outline-3">
<h3 id="orgc33eb02">Sabine Schmaltz announced</h3>
<div class="outline-text-3" id="text-orgc33eb02">
<p>
we have an open PR on ocaml/ocaml.org (<a href="https://github.com/ocaml/ocaml.org/pull/1226">https://github.com/ocaml/ocaml.org/pull/1226</a>) to show an approximation of
what the state of the OCaml ecosystem is with respect to different topics / use cases.
</p>

<p>
This addition is inspired by Rust&rsquo;s excellent &ldquo;Are we X yet?&rdquo; pages which
</p>
<ol class="org-ol">
<li><b>highlight libraries</b> that are production-ready, well-documented, and have a nice API in the different categories. This is a <b>showcase where we want to proudly point newcomers to</b>.</li>
<li>offer a high-level overview of the usability of the language for certain applications. This <b>makes visible where contributions to the ecosystem would be particularly valuable</b> to the OCaml community. They provide a starting point for (prospective) package authors to see where gaps in the ecosystem are, so they can <b>create successful open source projects that meet community demand</b>! (I know at least one company which is interested in contributing to funding such projects. :wink:)</li>
</ol>

<p>
This is where you come in:
</p>

<ol class="org-ol">
<li><b>Please help us give these pages an iconic name / title</b>. Got an idea? Reply to this post! Make it memorable.</li>
<li><b>Are there any important categories missing?</b></li>
<li>Contributions are always welcome - none of use here is an expert on the ever-growing OCaml ecosystem!</li>
</ol>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">New release: DocuLib 1.3.5</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-release-doculib-1-3-5/12286/1">https://discuss.ocaml.org/t/ann-new-release-doculib-1-3-5/12286/1</a>
</p>
</div>

<div id="outline-container-orgf4b5950" class="outline-3">
<h3 id="orgf4b5950">nguermond announced</h3>
<div class="outline-text-3" id="text-orgf4b5950">
<p>
I&rsquo;m happy to announce a new release of DocuLib on OPAM, a lightweight and easy to use GUI for locally managing
metadata for books, textbooks, and articles (kind of like Zotero). This release is mostly for minor fixes but I
want to take the opportunity to advertise <a href="https://github.com/nguermond/doculib">DocuLib</a> again.
</p>

<p>
Its core features are
</p>
<ul class="org-ul">
<li>facilitating looking up metadata with an interface to openlibrary.org, semanticscholar.org, and bibtex references through crossref.org</li>
<li>automatically detecting duplicates (by md5 hash), file renamings, and files moved between libraries without losing metadata</li>
<li>keeping track of authors, title, tags, personal notes, date, DOI/ISBN</li>
<li>error permissive search</li>
</ul>

<p>
For a full list of changes see <a href="https://github.com/nguermond/doculib/blob/master/CHANGES.md">CHANGES</a>
</p>

<p>
Feel free to make suggestions in the comments!
</p>
</div>
</div>


<div id="outline-container-org95a60ba" class="outline-3">
<h3 id="org95a60ba">Kiran Gopinathan asked and nguermond replied</h3>
<div class="outline-text-3" id="text-org95a60ba">
<blockquote>
<p>
Could you comment a bit more on the comparison to zotero? Are there certain features in doculib that you can&rsquo;t
easily achieve in zotero?
</p>
</blockquote>

<p>
The biggest difference is the way data is stored:
</p>
<ul class="org-ul">
<li>Zotero puts a priority on metadata entries where a physical file is a child of that entry if it exists, whereas DocuLib entries are one-to-one with physical files on your computer</li>
<li>files added to Zotero are either stored in a Zotero data directory (over which you have no control) or a link to a file on your computer (which you have to keep track of manually, so clearly not the preferred method), whereas DocuLib files are stored in libraries, of which you can have multiple. A library is a directory containing files you want DocuLib to index, but metadata for that library is also stored in that library.This means libraries are portable, so you can share them or sync them independently of DocuLib.</li>
<li>Zotero stores metadata in a database, whereas DocuLib stores metadata as json files one-to-one with the corresponding document</li>
</ul>

<p>
So in short, use DocuLib if you are a document hoarder and want local control over your files. I&rsquo;d say creating
bibliographic references is not the primary focus of DocuLib, whereas it is for Zotero.
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">opam 2.1.5 release!</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-2-1-5-release/12290/1">https://discuss.ocaml.org/t/ann-opam-2-1-5-release/12290/1</a>
</p>
</div>

<div id="outline-container-org1235350" class="outline-3">
<h3 id="org1235350">R. Boujbel announced</h3>
<div class="outline-text-3" id="text-org1235350">
<p>
We are pleased to announce the patch release of <a href="https://github.com/ocaml/opam/releases/tag/2.1.5">opam 2.1.5</a>.
</p>

<p>
This opam release consists of <a href="https://github.com/ocaml/opam/issues/5444">backported</a> bug fixes &amp; a security fix.
</p>

<p>
You’ll find more information in the <a href="https://opam.ocaml.org/blog/opam-2-1-5">release blog post</a>, and the local
cache corruption issue in <a href="https://opam.ocaml.org/blog/opam-2-1-5-local-cache">the security post</a>.
</p>

<p>
Thanks to <a href="https://robur.coop">robur</a> for the security review!
</p>

<p>
To upgrade simply run:
</p>

<pre class="example" id="org1105ed6">
bash -c "sh &lt;(curl -fsSL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh) --version 2.1.5"
</pre>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">dune 3.8.0</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-3-8-0/12291/1">https://discuss.ocaml.org/t/ann-dune-3-8-0/12291/1</a>
</p>
</div>

<div id="outline-container-org3937a7b" class="outline-3">
<h3 id="org3937a7b">Etienne Millon announced</h3>
<div class="outline-text-3" id="text-org3937a7b">
<p>
The dune team is pleased to announce the release of Dune 3.8.0.
</p>

<p>
It is now available in opam-repository. As usual, it should always be safe to upgrade your <code>dune</code> package: new
features and deprecations are only availble if you upgrade the language version in your <code>dune-project</code> files.
</p>
</div>

<div id="outline-container-orgf9dc950" class="outline-4">
<h4 id="orgf9dc950">Added</h4>
<div class="outline-text-4" id="text-orgf9dc950">
<ul class="org-ul">
<li>Introduce mdx stanza 0.4 requiring mdx &gt;= 2.3.0 which updates the default
list of files to include <code>*.mld</code> files (#7582, @Leonidas-from-XIV)</li>

<li>Allow <code>(stdlib ...)</code> to be used with <code>(wrapped false)</code> in library stanzas
(#7139, @anmonteiro).</li>

<li>Allow the main module of a library with <code>(stdlib ...)</code> to depend on other
libraries (#7154, @anmonteiro).</li>

<li>Support <code>(link_flags ...)</code> in <code>(cinaps ...)</code> stanza. (#7423, fixes #7416,
@nojb)</li>

<li>Allow <code>(package ...)</code> in any position within <code>(rule ...)</code> stanza (#7445,
@Leonidas-from-XIV)</li>

<li>Added a new user action <code>(concurrent )</code> which is like <code>(progn )</code> but runs the
actions concurrently. (#6933, @Alizter)</li>

<li>Accept the Ordered Set Language for the <code>modes</code> field in <code>library</code> stanzas
(#6611, @anmonteiro).</li>

<li>Allow parallel execution of inline tests partitions (#7012, @hhugo)</li>

<li>Add the <code>--display-separate-messages</code> flag to separate the error messages
produced by commands with a blank line. (#6823, fixes #6158, @esope)</li>

<li>Add <code>--watch-exclusions</code> to Dune build options (#7216, @jonahbeckford)</li>

<li>Adds support for loading plugins in toplevels (#6082, fixes #6081,
@ivg, @richardlford)</li>

<li>Introduce a <code>public_headers</code> field on libraries. This field is like
<code>install_c_headers</code>, but it allows to choose the extension and choose the
paths for the installed headers. (#7512, @rgrinberg)</li>

<li>Dune can now detect Coq theories from outside the workspace. This allows for
composition with installed theories (not necessarily installed with Dune).
(#7047, @Alizter, @ejgallego)</li>

<li>Added a <code>--no-build</code> option to <code>dune coq top</code> for avoiding rebuilds (#7380,
fixes #7355, @Alizter)</li>

<li>Add a <code>coqdoc_flags</code> field to the <code>coq.theory</code> stanza allowing the user to
pass extra arguments to <code>coqdoc</code>. (#7676, fixes #7954 @Alizter)</li>

<li>Preliminary support for Coq compiled intefaces (<code>.vos</code> files) enabled via
<code>(mode vos)</code> in <code>coq.theory</code> stanzas. This can be used in combination with
<code>dune coq top</code> to obtain fast re-building of dependencies (with no checking
of proofs) prior to stepping into a file. (#7406, @rlepigre)</li>

<li>Read <code>pkg-config</code> arguments from the <code>PKG_CONFIG_ARGN</code> environment variable
(#1492, #7734, @anmonteiro)</li>

<li>Use <code>$PKG_CONFIG</code>, when set, to find the <code>pkg-config</code> binary  (#7469, fixes
#2572, @anmonteiro)</li>
</ul>
</div>
</div>

<div id="outline-container-orgf401081" class="outline-4">
<h4 id="orgf401081">Changed</h4>
<div class="outline-text-4" id="text-orgf401081">
<ul class="org-ul">
<li>Bootstrap: remove reliance on shell. Previously, we&rsquo;d use the shell to get
the number of processors. (#7274, @rgrinberg)</li>

<li>Non-user proccesses such as version control or config checking are now run
silently. (#6994, fixes #4066, @Alizter)</li>

<li>Bytecode executables built for JSOO are linked with <code>-noautolink</code> and no
longer depend on the shared stubs of their dependent libraries (#7156, @nojb)</li>

<li>Always include <code>opam</code> files in the generated <code>.install</code> file. Previously, it
would not be included whenever <code>(generate_opam_files true)</code> was set and the
<code>.install</code> file wasn&rsquo;t yet generated. (#7547, @rgrinberg)</li>
</ul>
</div>
</div>

<div id="outline-container-org888400d" class="outline-4">
<h4 id="org888400d">Deprecated</h4>
<div class="outline-text-4" id="text-org888400d">
<ul class="org-ul">
<li>Modules that were declared in <code>(modules_without_implementation)</code>,
<code>(private_modules)</code> or <code>(virtual_modules)</code> but not declared in <code>(modules)</code>
will cause Dune to emit a warning which will become an error in 3.9. (#7608,
fixes #7026, @Alizter)</li>

<li>Coq language versions less 0.8 are deprecated, and will be removed
in an upcoming Dune version. All users are required to migrate to
<code>(coq lang 0.8)</code> which provides the right semantics for theories
that have been globally installed, such as those coming from opam
(@ejgallego, @Alizter)</li>
</ul>
</div>
</div>

<div id="outline-container-org72c9e95" class="outline-4">
<h4 id="org72c9e95">Fixed</h4>
<div class="outline-text-4" id="text-org72c9e95">
<ul class="org-ul">
<li>Find <code>pps</code> dependencies in the host context when cross-compiling,  (#7415,
fixes #4156, @anmonteiro)</li>

<li>Fix plugin loading with findlib. The functionality was broken in 3.7.0.
(#7556, @anmonteiro)</li>

<li>Load the host context <code>findlib.conf</code> when cross-compiling (#7428, fixes
#1701, @rgrinberg, @anmonteiro)</li>

<li>Allow overriding the <code>ocaml</code> binary with findlib configuration (#7648,
@rgrinberg)</li>

<li>Resolve <code>ppx_runtime_libraries</code> in the target context when cross compiling
(#7450, fixes #2794, @anmonteiro)</li>

<li>Fix <code>dune install</code> when cross compiling (#7410, fixes #6191, @anmonteiro,
@rizo)</li>

<li>Fix string quoting in the json file written by <code>--trace-file</code> (#7773,
@rleshchinskiy)</li>

<li>Correctly set <code>MANPATH</code> in <code>dune exec</code>. Previously, we would use the <code>bin/</code>
directory of the context. (#7655, @rgrinberg)</li>

<li>merlin: ignore instrumentation settings for preprocessing. (#7606, fixes
#7465, @Alizter)</li>

<li>When a rule&rsquo;s action is interrupted, delete any leftover directory targets.
This is consistent with how we treat file targets. (#7564, @rgrinberg)</li>

<li>Fix dune crashing on MacOS in watch mode whenever <code>$PATH</code> contains <code>$PWD</code>
(#7441, fixes #6907, @rgrinberg)</li>

<li>Dune in watch mode no longer builds concurrent rules in serial (#7395
@rgrinberg, @jchavarri)</li>

<li><code>dune coq top</code> now correctly respects the project root when called from a
subdirectory. However, absolute filenames passed to <code>dune coq top</code> are no
longer supported (due to being buggy) (#7357, fixes #7344, @rlepigre and
@Alizter)</li>

<li>RPC: Ignore SIGPIPE when clients suddenly disconnect (#7299, #7319, fixes
#6879, @rgrinberg)</li>

<li>Always clean up the UI on exit. (#7271, fixes #7142 @rgrinberg)</li>

<li>Bootstrap: correctly detect the number of processors by allowing <code>nproc</code> to be
looked up in <code>$PATH</code> (#7272, @Alizter)</li>

<li>Speed up file copying on macos by using <code>clonefile</code> when available
(@rgrinberg, #7210)</li>

<li>Support commands that output 8-bit and 24-bit colors in the terminal (#7188,
@Alizter)</li>

<li>Speed up rule generation for libraries and executables with many modules
(#7187, @jchavarri)</li>

<li>Do not re-render UI on every frame if the UI doesn&rsquo;t change (#7186, fix
#7184, @rgrinberg)</li>

<li>Make <code>coq_db</code> creation in scope lazy (@ejgallego, #7133)</li>

<li>dune install now respects &#x2013;display quiet mode (#7116, fixes #4573, fixes
#7106, @Alizter)</li>

<li>Stub shared libraries (<code>dllXXX_stubs.so</code>) in Dune-installed libraries could
not be used as dependencies of libraries in the workspace (eg when compiling
to bytecode and/or Javascript).  This is now fixed. (#7151, @nojb)</li>

<li>Fix regression where Merlin was unable to handle filenames with uppercase
letters under Windows. (#7577, @nojb)</li>

<li>On nix+macos, pass <code>-f</code> to the codesign hook to avoid errors when the binary
is already signed (#7183, fixes #6265, @greedy)</li>

<li>Fix bug where RPC clients built with dune-rpc-lwt would crash when closing
their connection to the server (#7581, @gridbugs)</li>

<li>Fix RPC server on Windows (used for OCaml-LSP). (#7666, @nojb)</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-8" class="outline-2">
<h2 id="8">Second alpha release of OCaml 5.1.0</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/second-alpha-release-of-ocaml-5-1-0/12299/1">https://discuss.ocaml.org/t/second-alpha-release-of-ocaml-5-1-0/12299/1</a>
</p>
</div>

<div id="outline-container-org82b30b1" class="outline-3">
<h3 id="org82b30b1">octachron announced</h3>
<div class="outline-text-3" id="text-org82b30b1">
<p>
With the progress of the ongoing stabilisation effort for OCaml 5.1.0, I am happy to announce a second alpha
release for OCaml 5.1.0.
</p>

<p>
This second alpha release contains many noteworthy fixes:
</p>

<ul class="org-ul">
<li>a long-awaited GC fix</li>
<li>a Windows ABI fix</li>
</ul>

<p>
as announced in the first alpha but also
</p>

<ul class="org-ul">
<li>a compiler-libs (parsetree) fix</li>
<li>a type system compatibility enhancement change</li>
<li>a restored backed for  s390x/IBM Z</li>
</ul>

<p>
The full list of changes since the first alpha is available below.
</p>

<p>
Once most major OCaml tools are updated to the last compiler-libs changes, we will switch to beta releases.
Hopefully, this will happen in the upcoming weeks. The progress on stabilising the ecosystem is tracked on the
<a href="https://github.com/ocaml/opam-repository/issues/23669">opam readiness for 5.1.0 meta-issue</a>.
</p>

<p>
Currently, the release is still planned for around July.
</p>

<p>
If you find any bugs, please report them on <a href="https://github.com/ocaml/ocaml/issues">OCaml&rsquo;s issue tracker</a>.
</p>

<p>
If you are interested in the ongoing list of new features and bug fixes, the
updated change log for OCaml 5.1.0 is available <a href="https://github.com/ocaml/ocaml/blob/5.1/Changes">on GitHub</a>.
</p>
</div>

<div id="outline-container-orgaed6170" class="outline-4">
<h4 id="orgaed6170">Installation Instructions</h4>
<div class="outline-text-4" id="text-orgaed6170">
<p>
The base compiler can be installed as an opam switch with the following commands
on opam 2.1:
</p>

<div class="org-src-container">
<pre class="src src-shell">opam update
opam switch create 5.1.0~alpha2
</pre>
</div>

<p>
The source code for the alpha is also available at these addresses:
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/archive/5.1.0-alpha2.tar.gz">GitHub</a></li>
<li><a href="https://caml.inria.fr/pub/distrib/ocaml-5.1/ocaml-5.1.0~alpha2.tar.gz">OCaml archives at Inria</a></li>
</ul>
</div>

<ul class="org-ul">
<li><a id="org60d586c"></a>Fine-Tuned Compiler Configuration<br />
<div class="outline-text-5" id="text-org60d586c">
<p>
If you want to tweak the configuration of the compiler, you can switch to the option variant with:
</p>

<div class="org-src-container">
<pre class="src src-shell">opam update
opam switch create &lt;switch_name&gt; ocaml-variants.5.1.0~alpha2+options &lt;option_list&gt;
</pre>
</div>

<p>
where <code>option_list</code> is a space-separated list of <code>ocaml-option-*</code> packages. For instance, for a flambda and
no-flat-float-array switch:
</p>

<div class="org-src-container">
<pre class="src src-shell">opam switch create 5.1.0~alpha2+flambda+nffa ocaml-variants.5.1.0~alpha2+options ocaml-option-flambda ocaml-option-no-flat-float-array
</pre>
</div>

<p>
All available options can be listed with <code>opam search ocaml-option</code>.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-org9941886" class="outline-4">
<h4 id="org9941886">Changes Compared To The First Alpha Release</h4>
<div class="outline-text-4" id="text-org9941886">
</div>
<ul class="org-ul">
<li><a id="org0decfa1"></a>Runtime System:<br />
<div class="outline-text-5" id="text-org0decfa1">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/11589">#11589</a>, <a href="https://github.com/ocaml/ocaml/issues/11903">#11903</a>: Modify the GC pacing code to make sure the GC keeps
up with allocations in the presence of idle domains.
(Damien Doligez and Stephen Dolan, report by Florian Angeletti,
review by KC Sivaramakrishnan and Sadiq Jaffer)</li>

<li>(<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/11865">#11865</a>, <a href="https://github.com/ocaml/ocaml/issues/11868">#11868</a>, <a href="https://github.com/ocaml/ocaml/issues/11876">#11876</a>: Clarify that the operations of a custom
block must never access the OCaml runtime. The previous
documentation only mentioned the main illicit usages. In particular,
since OCaml 5.0, it is no longer safe to call
<code>caml_remove_global_root</code> or <code>caml_remove_generational_global_root</code>
from within the C finalizer of a custom block, or within the
finalization function passed to <code>caml_alloc_final</code>. As a workaround,
such a finalization operation can be registered with <code>Gc.finalize</code>
instead, which guarantees to run the finalizer at a safe point.
(Report by Timothy Bourke, discussion by Yotam Barnoy, Timothy
Bourke, Sadiq Jaffer, Xavier Leroy, Guillaume Munch-Maccagnoni, and
Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11827">#11827</a>, +<a href="https://github.com/ocaml/ocaml/issues/12249">#12249</a>: Restore prefetching for GC marking
(Fabrice Buoro and Stephen Dolan, review by Gabriel Scherer and Sadiq Jaffer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12131">#12131</a>: Simplify implementation of weak hash sets, fixing a
performance regression. (Nick Barnes, review by François Bobot,
Alain Frisch and Damien Doligez).</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12231">#12231</a>: Support MinGW-w64 11.0 winpthreads library, where the macro
to set up to get flexdll working changed
(David Allsopp and Samuel Hym, light review by Xavier Leroy)</li>
</ul>
</div>
</li>

<li><a id="org3b2955e"></a>Type System:<br />
<div class="outline-text-5" id="text-org3b2955e">
<ul class="org-ul">
<li>(<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12189">#12189</a>, <a href="https://github.com/ocaml/ocaml/issues/12211">#12211</a>: anonymous row variables in explicitly polymorphic type
annotation, e.g. <code>'a. [&lt; X of 'a ] -&gt; 'a</code>, are now implicitly
universally quantified (in other words, the example above is now read
as <code>'a 'r. ([&lt; X of 'a ] as 'r) -&gt; 'a</code>).
(Florian Angeletti and Gabriel Scherer, review by Jacques Garrigue)</li>
</ul>
</div>
</li>

<li><a id="org381992c"></a>Code Generation And Optimizations:<br />
<div class="outline-text-5" id="text-org381992c">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/11712">#11712</a>, <a href="https://github.com/ocaml/ocaml/issues/12258">#12258</a>, <a href="https://github.com/ocaml/ocaml/issues/12261">#12261</a>: s390x / IBM Z multicore support:
OCaml &amp; C stack separation; dynamic stack size checks; fiber and
effects support.
(Aleksei Nikiforov, with help from Vincent Laviron and Xavier Leroy,
 additional suggestions by Luc Maranget,
 review by the same and KC Sivaramakrishnan)</li>
</ul>
</div>
</li>

<li><a id="org1665799"></a>Internal/compiler-libs Changes:<br />
<div class="outline-text-5" id="text-org1665799">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12119">#12119</a>, <a href="https://github.com/ocaml/ocaml/issues/12188">#12188</a>, <a href="https://github.com/ocaml/ocaml/issues/12191">#12191</a>: mirror type constraints on value binding in the
parsetree:
the constraint <code>typ</code> in <code>let pat : typ = exp</code> is now directly stored
in the value binding node in the parsetree.
(Florian Angeletti, review by  Richard Eisenberg)</li>
</ul>
</div>
</li>

<li><a id="orga774d5d"></a>Bug Fixes<br />
<div class="outline-text-5" id="text-orga774d5d">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/11846">#11846</a>: Mark rbx as destroyed at C call for Win64 (mingw-w64 and Cygwin64).
Reserve the shadow store for the ABI in the c_stack_link struct instead of
explictly when calling C functions. This simultaneously reduces the number of
stack pointer manipulations and also fixes a bug when calling noalloc
functions where the shadow store was not being reserved.
(David Allsopp, report by Vesa Karvonen, review by Xavier Leroy and
 KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12170">#12170</a>: fix pthread_geaffinity_np configure check for android
(David Allsopp, review by Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12252">#12252</a>: Fix shared library build error on RISC-V.
(Edwin Török, review by Nicolás Ojeda Bär and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12255">#12255</a>, <a href="https://github.com/ocaml/ocaml/issues/12256">#12256</a>: Handle large signal numbers correctly (Nick Barnes,
review by David Allsopp).</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12277">#12277</a>: ARM64, fix a potential assembler error for very large functions by
emitting stack reallocation code before the body of the function.
(Xavier Leroy, review by KC Sivaramakrishnan)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-9" class="outline-2">
<h2 id="9">ML&rsquo;23: ACM SIGPLAN ML Family Workshop — Call for presentations</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ml23-acm-sigplan-ml-family-workshop-call-for-presentations/12224/2">https://discuss.ocaml.org/t/ml23-acm-sigplan-ml-family-workshop-call-for-presentations/12224/2</a>
</p>
</div>

<div id="outline-container-orgf28c018" class="outline-3">
<h3 id="orgf28c018">Guillaume Munch-Maccagnoni announced</h3>
<div class="outline-text-3" id="text-orgf28c018">
<p>
I&rsquo;m letting you know that the deadline has been extended to June 8th (AoE).
</p>
</div>
</div>
</div>




<div id="outline-container-10" class="outline-2">
<h2 id="10">qcheck-lin and qcheck-stm 0.2</h2>
<div class="outline-text-2" id="text-10">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-qcheck-lin-and-qcheck-stm-0-2/12301/1">https://discuss.ocaml.org/t/ann-qcheck-lin-and-qcheck-stm-0-2/12301/1</a>
</p>
</div>

<div id="outline-container-orgeecfbdd" class="outline-3">
<h3 id="orgeecfbdd">Jan Midtgaard announced</h3>
<div class="outline-text-3" id="text-orgeecfbdd">
<p>
I&rsquo;m happy to share release 0.2 of <code>qcheck-lin</code> and <code>qcheck-stm</code> for black-box property-based testing.
</p>

<ul class="org-ul">
<li><code>qcheck-lin</code> requires little more than an interface description. It allows to test a library for sequential consistency, that is, whether results obtained from using it in parallel agree with some linear, single domain execution.</li>

<li><code>qcheck-stm</code> is a model-based, state-machine framework for both sequential and parallel testing. It allows to test an imperative interface against a pure model description, and thereby allows to express and test intended behaviour beyond a signature description.</li>
</ul>

<p>
For example, here&rsquo;s a minimal <code>qcheck-lin</code> test of a selection of the <code>Stdlib</code> <code>Hashtbl</code> interface:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">module</span> <span style="color: #444fcf;">HashtblSig</span> =
<span style="color: #000000; font-weight: bold;">struct</span>
  <span style="color: #000000; font-weight: bold;">type</span> <span style="color: #444fcf;">t</span> = (char, int) <span style="color: #444fcf;">Hashtbl.</span>t
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a7601f;">init</span> () = <span style="color: #444fcf;">Hashtbl.</span>create <span style="color: #00824f;">~random</span>:<span style="color: #00824f;">false</span> <span style="color: #00824f;">42</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a7601f;">cleanup</span> <span style="color: #007a9f;">_</span> = ()

  <span style="color: #000000; font-weight: bold;">open </span><span style="color: #444fcf;">Lin</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">a</span>,<span style="color: #007a9f;">b</span> = char_printable,nat_small
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #007a9f;">api</span> =
    [ val_ <span style="color: #ca3400;">"Hashtbl.add"</span>    <span style="color: #444fcf;">Hashtbl.</span>add    (t <span style="color: #a52a2a;">@-&gt;</span> a <span style="color: #a52a2a;">@-&gt;</span> b <span style="color: #a52a2a;">@-&gt;</span> returning unit);
      val_ <span style="color: #ca3400;">"Hashtbl.remove"</span> <span style="color: #444fcf;">Hashtbl.</span>remove (t <span style="color: #a52a2a;">@-&gt;</span> a <span style="color: #a52a2a;">@-&gt;</span> returning unit);
      val_ <span style="color: #ca3400;">"Hashtbl.find"</span>   <span style="color: #444fcf;">Hashtbl.</span>find   (t <span style="color: #a52a2a;">@-&gt;</span> a <span style="color: #a52a2a;">@-&gt;</span> returning_or_exc b);
      val_ <span style="color: #ca3400;">"Hashtbl.mem"</span>    <span style="color: #444fcf;">Hashtbl.</span>mem    (t <span style="color: #a52a2a;">@-&gt;</span> a <span style="color: #a52a2a;">@-&gt;</span> returning bool);
      val_ <span style="color: #ca3400;">"Hashtbl.length"</span> <span style="color: #444fcf;">Hashtbl.</span>length (t <span style="color: #a52a2a;">@-&gt;</span> returning int); ]
<span style="color: #000000; font-weight: bold;">end</span>

<span style="color: #000000; font-weight: bold;">module</span> <span style="color: #444fcf;">HT</span> = <span style="color: #444fcf;">Lin_domain.Make(HashtblSig)</span>
<span style="color: #ff4500;">;;</span>
<span style="color: #444fcf;">QCheck_base_runner.</span>run_tests_main [
  <span style="color: #444fcf;">HT.</span>lin_test <span style="color: #00824f;">~count</span>:<span style="color: #00824f;">1000</span> <span style="color: #00824f;">~name</span>:<span style="color: #ca3400;">"Hashtbl DSL test"</span>;
]
</pre>
</div>

<p>
Running this test quickly finds a minimal counterexample to illustrate that <code>Hashtbl</code> is not safe to use in
parallel:
</p>
<pre class="example" id="orgd001ba0">
Messages for test Hashtbl DSL test:

  Results incompatible with sequential execution

                                    |
                        Hashtbl.add t '&lt;' 0 : ()
                                    |
                 .------------------------------------.
                 |                                    |
     Hashtbl.add t 'a' 0 : ()             Hashtbl.remove t '&lt;' : ()
       Hashtbl.length t : 0
</pre>

<p>
We presented preliminary work on both these libraries at the OCaml Workshop 2022. The libraries furthermore
underlie our continuing effort to test the multicore runtime of OCaml 5.x, and have helped identify several issues.
</p>

<p>
The 0.2 release adds a range of features and bugfixes, including support for OCaml 4.12.x, 4.13.x and 4.14.x
without the <code>Domain</code> and <code>Effect</code> modes.
</p>

<p>
Detailed release notes and more information is available from the GitHub repository:
  <a href="https://github.com/ocaml-multicore/multicoretests">https://github.com/ocaml-multicore/multicoretests</a>
</p>

<p>
Happy testing!
</p>
</div>
</div>
</div>




<div id="outline-container-11" class="outline-2">
<h2 id="11">Melange 1.0 – compile OCaml / ReasonML to JavaScript</h2>
<div class="outline-text-2" id="text-11">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-melange-1-0-compile-ocaml-reasonml-to-javascript/12305/1">https://discuss.ocaml.org/t/ann-melange-1-0-compile-ocaml-reasonml-to-javascript/12305/1</a>
</p>
</div>

<div id="outline-container-org279d1b7" class="outline-3">
<h3 id="org279d1b7">Antonio Nuno Monteiro announced</h3>
<div class="outline-text-3" id="text-org279d1b7">
<p>
The Melange team and I are thrilled to announce the release of Melange 1.0 today, marking a major milestone in the
life of the project. This release represents the culmination of many months of hard work and incredible
collaboration.
</p>

<p>
Melange, which <a href="https://anmonteiro.com/2021/03/on-ocaml-and-the-js-platform/">started as a fork of BuckleScript</a>,
was created with the vision of maintaining compatibility with OCaml and providing the best OCaml experience within
the modern JavaScript ecosystem. Today, we are proud to present Melange 1.0, a mature and reliable tool for
compiling OCaml to efficient and readable JavaScript that teams rely on <a href="https://tech.ahrefs.com/ahrefs-is-now-built-with-melange-b14f5ec56df4">to deliver complex OCaml / ReasonML
applications</a>.
</p>

<p>
<a href="https://ocaml.org/p/melange/1.0.0">Get it now</a>:
</p>

<div class="org-src-container">
<pre class="src src-shell">$ opam install melange.1.0.0
</pre>
</div>
</div>

<div id="outline-container-org9e30c2f" class="outline-4">
<h4 id="org9e30c2f">Highlights</h4>
<div class="outline-text-4" id="text-org9e30c2f">
<p>
Melange 1.0 radically improves user experience. This release focuses on robustness, OCaml compatibility and
developer experience: Melange is fully embracing the <a href="https://ocaml.org/docs/platform">OCaml Platform</a> to make it
easy and reliable for OCaml users to target JavaScript.
</p>
</div>

<ul class="org-ul">
<li><a id="orgf0d2344"></a>Dune Integration<br />
<div class="outline-text-5" id="text-orgf0d2344">
<p>
Integrating with Dune was our biggest priority. <a href="https://discuss.ocaml.org/t/ann-dune-3-8-0/12291">Dune 3.8</a>,
released very recently, adds Melange support by understanding the following types of stanzas:
</p>

<div class="org-src-container">
<pre class="src src-lisp">(library
  (modes melange) <span style="color: #8f6f4a; font-style: italic;">;; </span><span style="color: #8f6f4a; font-style: italic;">&lt;- new Melange mode</span>
)

<span style="color: #8f6f4a; font-style: italic;">;; </span><span style="color: #8f6f4a; font-style: italic;">emit JS to ~js-output~ folder in this</span>
<span style="color: #8f6f4a; font-style: italic;">;; </span><span style="color: #8f6f4a; font-style: italic;">directory</span>
(melange.emit
 (target js-output))
</pre>
</div>

<p>
In Melange 1.0, the Dune integration is the officially supported workflow to build Melange projects. It provides
robust rule generation, static assets support (your HTML / CSS / SVG / images), seamless editor integration (e.g.
with OCaml LSP or Merlin).
</p>
</div>
</li>

<li><a id="org0755c6c"></a>Documentation<br />
<div class="outline-text-5" id="text-org0755c6c">
<p>
With Melange 1.0, we&rsquo;re also launching a new documentation effort, <a href="https://melange.re">melange.re</a>. This website
should currently be considered a work in progress, and we&rsquo;re looking for feedback on how to best explain the
Melange workflow and its available features. Feel free to get in touch in the <a href="https://github.com/melange-re/melange-re.github.io">OSS
repository</a>.
</p>

<p>
Additionally, the Dune documentation includes <a href="https://dune.readthedocs.io/en/latest/melange.html">reference
materials</a> specific to using Melange with Dune.
</p>
</div>
</li>

<li><a id="orgd264b87"></a>Everything else<br />
<ul class="org-ul">
<li><a id="org4df0073"></a>Wider OCaml version support<br />
<div class="outline-text-6" id="text-org4df0073">
<p>
Melange was previously only available on OCaml 4.14. In this release, we&rsquo;ve widened that range to versions of OCaml
starting from version 4.13. This includes the OCaml 5 release line and allows Melange projects to share the same
OCaml compiler switch as e.g. server-side projects.
</p>

<p>
Editor integration is the only caveat: it only works on OCaml 4.14, since Melange emits <a href="https://ocaml.org/p/ocaml-base-compiler/4.14.1/doc/Cmt_format/index.html"><code>.cmt</code>
artifacts</a> (used by e.g. LSP) targeting
the OCaml 4.14 binary format.
</p>
</div>
</li>

<li><a id="org771c4c7"></a>Multiple syntaxes<br />
<div class="outline-text-6" id="text-org771c4c7">
<p>
Dune supports <a href="https://reasonml.github.io/">ReasonML</a> out of the box via
<a href="https://dune.readthedocs.io/en/stable/overview.html#term-dialect">dialects</a>, keeping ReasonML support in Melange
unchanged from a user perspective. Internally, however, Melange 1.0 has dropped any knowledge of ReasonML, relying
on the existing, battle-tested Dune support for dialects instead.
</p>

<p>
A <a href="https://ocaml.org/p/rescript-syntax/1.0.0"><code>rescript-syntax</code></a> package is part of the Melange release too. It
enables support for ReScript syntax in Melange, which Dune also supports. Keep in mind, however, that newer
ReScript features are unlikely to be supported by this best-effort compatibility package.
</p>
</div>
</li>

<li><a id="orgfa48c17"></a>Separate PPX<br />
<div class="outline-text-6" id="text-orgfa48c17">
<p>
A big benefit of deep integration with the OCaml platform is having the freedom to assume that a native toolchain
is present. That made it possible to unbundle the Melange distribution into a few separate components.
</p>

<p>
Melange now ships with a <code>melange.ppx</code> preprocessor based on <a href="https://ocaml-ppx.github.io/ppxlib">Ppxlib</a> that can
be added to <code>(preprocess (pps melange.ppx))</code>, as per <a href="https://dune.readthedocs.io/en/stable/reference/preprocessing-spec.html">Dune&rsquo;s preprocessing
specification</a>.
</p>

<p>
The React JS PPX (for Reason + JSX) has also been extracted and is now distributed separately as
<a href="https://ocaml.org/p/reactjs-jsx-ppx/1.0.0"><code>reactjs-jsx-ppx</code></a>.
</p>
</div>
</li>

<li><a id="orgc777215"></a>Enabling modern JS workflows<br />
<div class="outline-text-6" id="text-orgc777215">
<p>
The Melange design in Dune was designed from day one with the goal of  embracing the JavaScript platform:
</p>

<ul class="org-ul">
<li>The Dune integration generates JavaScript files in a predictable way
<ul class="org-ul">
<li>The resulting layout works well with the Node.js <a href="https://nodejs.org/api/modules.html#all-together">module resolution algorithm</a>, which most bundlers understand.</li>
<li>The JS output layout is <a href="https://melange.re/v1.0.0/build-system/#javascript-artifacts-layout">documented here</a>.</li>
</ul></li>
<li>To exercise modern workflows, Melange has been tested in a <a href="https://nextjs.org/">Next.js</a> application using <a href="https://react.dev/blog/2020/12/21/data-fetching-with-react-server-components">React Server Components</a>, and the available constructs were deemed sufficient to enable similar use cases.</li>
</ul>
</div>
</li>

<li><a id="orgdb619aa"></a>Full list of changes:<br />
<div class="outline-text-6" id="text-orgdb619aa">
<p>
The full list of changes can be consulted <a href="https://github.com/melange-re/melange/blob/main/Changes.md">here</a>.
</p>
</div>
</li>
</ul>
</li>
</ul>
</div>

<div id="outline-container-orga30322d" class="outline-4">
<h4 id="orga30322d">Support &amp; Sponsorship</h4>
<div class="outline-text-4" id="text-orga30322d">
<p>
The effort that went into this release would not have been possible without the support of many.
</p>

<p>
We&rsquo;d like to thank everyone who made it possible:
</p>

<ul class="org-ul">
<li><a href="https://ahrefs.com/">Ahrefs</a> has shown interest in Melange <a href="https://tech.ahrefs.com/building-ahrefs-codebase-with-melange-9f881f6d022b">since its first announcement</a>. Since October 2022, Ahrefs&rsquo;s crucial sponsorship has made it possible to <a href="https://tech.ahrefs.com/ahrefs-is-now-built-with-melange-b14f5ec56df4">build its codebase with Melange</a> and work on this release.</li>
<li><a href="https://www.qwick.com/">Qwick</a>, who has been running Melange since November 2022, providing invaluable feedback, financial backing and an open-minded team willing to try new directions.</li>
<li>The <a href="https://ocaml-sf.org/">OCaml Software Foundation</a> previously <a href="https://twitter.com/_anmonteiro/status/1589044352479035393">committed funding</a> for the Melange project in October 2022, and has recently approved a new round of OSS sponsorship.</li>
<li><a href="https://github.com/sponsors/anmonteiro/">My (Antonio) sponsors</a> on GitHub, both past and present</li>
</ul>

<p>
We&rsquo;d also like to thank the following notable contributors to this release:
</p>

<ul class="org-ul">
<li><a href="https://github.com/rgrinberg">Rudi Grinberg</a>, for his indispensable guidance and direction on the design and implementation of the Dune integration.</li>
<li><a href="https://github.com/jchavarri">Javier Chávarri</a>, for migrating a huge production codebase at Ahrefs to Melange, working on the Dune integration, the Melange documentation effort and providing vital feedback to the project.</li>
<li><a href="https://github.com/davesnx">David Sancho</a>, for trying out our most bleeding edge ideas and providing early feedback on how to move forward with ways that encompass the whole ecosystem.</li>
</ul>
</div>
</div>

<div id="outline-container-org947de13" class="outline-4">
<h4 id="org947de13">Looking Forward</h4>
<div class="outline-text-4" id="text-org947de13">
<p>
We are enthusiastic about the progress we have made and the positive feedback we have received from the community.
We remain committed to continuously improving Melange, ensuring it remains a robust and efficient tool for OCaml
developers targeting the JavaScript platform.
</p>

<p>
Our <a href="https://docs.google.com/document/d/1279euT9LeJIkwAUYqazqeh2lc8c7TLQap2_2vBNcK4w/">Q2 2023 roadmap</a> includes
most of the goals that we set out to achieve over the past few months, and some of what we&rsquo;re thinking about
working in the months ahead. Melange 1.0 only marks the beginning of our journey towards the best OCaml experience
on the JS platform.
</p>

<p>
Finally, we would like to extend our deepest thanks to everyone who has supported the project, whether through code
contributions, testing, or providing feedback. This is your achievement as much as it is ours, and we look forward
to continuing this journey together.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-12" class="outline-2">
<h2 id="12">Debugging Native Code in &ldquo;Second OCaml&rdquo; YouTube Video</h2>
<div class="outline-text-2" id="text-12">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-debugging-native-code-in-second-ocaml-youtube-video/12315/1">https://discuss.ocaml.org/t/ann-debugging-native-code-in-second-ocaml-youtube-video/12315/1</a>
</p>
</div>

<div id="outline-container-org64c9e56" class="outline-3">
<h3 id="org64c9e56">jbeckford announced</h3>
<div class="outline-text-3" id="text-org64c9e56">
<p>
In response to an earlier post
(<a href="https://discuss.ocaml.org/t/enhancing-ocaml-debugging-experience-in-visual-studio-code/12236/4?u=jbeckford">https://discuss.ocaml.org/t/enhancing-ocaml-debugging-experience-in-visual-studio-code/12236/4?u=jbeckford</a>) I&rsquo;ve
uploaded a video on YouTube.
</p>

<p>
Direct Link: <a href="https://youtu.be/OV19_FqAUCw">https://youtu.be/OV19_FqAUCw</a>
</p>

<p>
Quick Summary: Pre-requisite skill is the ability to compile your own OCaml compiler. Only macOS and Linux.
Breakpoints and single-stepping; no display of OCaml values.
</p>

<p>
Hopefully it will be the first of several if a few people subscribe or comment. The video, and others that I may
make for that new channel, are <b>not for OCaml beginners</b>.
</p>

<p>
<i>Aside: Personally, I don&rsquo;t become a beginner in a new subject without first having a glimpse of what I can accomplish in that subject. My expectation is that the people curious about OCaml may land on a few videos and then become beginners.</i>
</p>

<p>
Since this is my very first YouTube video, I&rsquo;d appreciate feedback!
</p>
</div>
</div>
</div>




<div id="outline-container-13" class="outline-2">
<h2 id="13">Sandmark nightly now supports latency profiling</h2>
<div class="outline-text-2" id="text-13">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-sandmark-nightly-now-supports-latency-profiling/12318/1">https://discuss.ocaml.org/t/ann-sandmark-nightly-now-supports-latency-profiling/12318/1</a>
</p>
</div>

<div id="outline-container-orgb9e8b94" class="outline-3">
<h3 id="orgb9e8b94">Puneeth Chaganti announced</h3>
<div class="outline-text-3" id="text-orgb9e8b94">
<p>
<a href="https://sandmark.tarides.com/">Sandmark nightly</a> now monitors tail latency of sequential and parallel applications
enabled by new features in OCaml 5.
</p>


<div id="org8daca7c" class="figure">
<p><img src="https://global.discourse-cdn.com/business7/uploads/ocaml/optimized/2X/2/28bed5afb55f4d8182f7b83913d7d73d666eb835_2_1380x404.png" alt="28bed5afb55f4d8182f7b83913d7d73d666eb835_2_1380x404.png" />
</p>
</div>

<p>
<a href="https://sandmark.tarides.com/?app=sequential-latency&amp;pausetimes_seq_00=turing&amp;pausetimes_seq_find_by=hostname&amp;pausetimes_seq_10=turing&amp;pausetimes_seq_01=20230601&amp;pausetimes_seq_12=%5B%27turing_5.2.0%2Btrunk%2Bbartoszmodelski%2Bpr12212%2Bpausetimes_seq_20230530_a6f309f%27%5D&amp;pausetimes_seq_11=20230530&amp;pausetimes_seq_02=turing_5.2.0%2Btrunk%2Bpausetimes_seq_20230601_224c14c&amp;pausetimes_seq_num_variants=2">Click to see the Sequential latency benchmark run</a>
</p>


<div id="org43548d3" class="figure">
<p><img src="https://global.discourse-cdn.com/business7/uploads/ocaml/optimized/2X/b/b849c2316026f43d0c2cf2855df298177339d1c7_2_1380x938.jpeg" alt="b849c2316026f43d0c2cf2855df298177339d1c7_2_1380x938.jpeg" />
</p>
</div>

<p>
<a href="https://sandmark.tarides.com/?app=parallel-latency&amp;pausetimes_par_num_variants=2&amp;pausetimes_par_01=20230531&amp;pausetimes_par_find_by=hostname&amp;pausetimes_par_02=navajo_5.2.0%2Btrunk%2Bpausetimes_par_20230531_224c14c&amp;pausetimes_par_00=navajo&amp;pausetimes_par_12=navajo_5.2.0%2Btrunk%2Bpausetimes_par_20230526_8778780&amp;pausetimes_par_10=navajo&amp;pausetimes_par_11=20230526">Click here to see the Parallel latency benchmark run</a>
</p>
</div>

<div id="outline-container-org8570e67" class="outline-4">
<h4 id="org8570e67">Instrumented runtime of the past</h4>
<div class="outline-text-4" id="text-org8570e67">
<p>
In the past, Sandmark used to support monitoring GC latencies using the instrumented runtime that was present in
OCaml 4. But this GC latency feature was disabled due to breaking changes in Sandmark when moving from OCaml 4 to
OCaml 5. It is also useful to note that the instrumented runtime wrote to a file, and had a noticeable impact on
the program speed. As a result, this instrumentation had to be enabled with a compile-time flag that linked the
instrumented runtime with the application rather than the default runtime. The instrumented runtime was used to
generate the graphs that were used in the ICFP paper, <a href="https://kcsrk.info/papers/retro-parallel_icfp_20.pdf">Retrofitting Parallelism onto
OCaml</a> (Fig 10 and Fig 12). However, given its cost, the
instrumented runtime was seen as only to be used by GC hackers for performance debugging.
</p>
</div>
</div>

<div id="outline-container-org1667115" class="outline-4">
<h4 id="org1667115">Latency profiling through olly</h4>
<div class="outline-text-4" id="text-org1667115">
<p>
OCaml 5 supports <a href="https://v2.ocaml.org/releases/5.0/api/Runtime_events.html">Runtime Events</a> &#x2014; a new feature that
enables continuous monitoring of production applications. The key differences to the earlier instrumented runtime
approach are
</p>

<ol class="org-ol">
<li>Instead of a file, the events are now written to a shared in-memory ring. The events may be read out by an external process from this ring.</li>
<li>Some of the frequent (expensive) probes associated are eschewed to keep the costs low. The expensive probes are still available using the instrumented runtime.</li>
</ol>

<p>
Due to this design, every OCaml 5 program may be continuously monitored for performance, not just the ones compiled
with the instrumented runtime. On top of this runtime events feature, we have built
<a href="https://github.com/tarides/runtime_events_tools">olly</a>, an observability tool for OCaml programs. Olly can extract
traces of GC events that can be viewed by <a href="https://perfetto.dev/">Perfetto</a> and also produce a short report on GC
behaviour including tail latency profiles.
</p>

<p>
The Sandmark team has now replaced the old latency profiling feature developed over OCaml 4 instrumented runtimes
to using olly to generate the profiles. (See Sandmark PR <a href="https://github.com/ocaml-bench/sandmark/pull/424">here</a>).
Now, the OCaml compiler is continuously monitored not only for speed and memory usage, but also for latency.
</p>
</div>
</div>

<div id="outline-container-org8a2c0ba" class="outline-4">
<h4 id="org8a2c0ba">Call for action</h4>
<div class="outline-text-4" id="text-org8a2c0ba">
<p>
If you are interested in profiling and analysing the performance of the development branch of the OCaml compiler,
please submit your branch through <a href="https://github.com/ocaml-bench/sandmark-nightly-config/">Sandmark Nightly
Config</a>.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-14" class="outline-2">
<h2 id="14">Update on Eio (effects-based direct-style IO for OCaml 5)</h2>
<div class="outline-text-2" id="text-14">
<p>
Archive: <a href="https://discuss.ocaml.org/t/update-on-eio-effects-based-direct-style-io-for-ocaml-5/10395/3">https://discuss.ocaml.org/t/update-on-eio-effects-based-direct-style-io-for-ocaml-5/10395/3</a>
</p>
</div>

<div id="outline-container-orgf058497" class="outline-3">
<h3 id="orgf058497">Thomas Leonard announced</h3>
<div class="outline-text-3" id="text-orgf058497">
<p>
With Eio 0.10 just released, it&rsquo;s time for another update! Since the above post (which was for Eio 0.5), some of
the bigger changes are:
</p>

<ul class="org-ul">
<li>A new eio_posix backed for Unix-type systems provides much better performance than the old libuv one. Removing libuv has also made it safe to share file-descriptors between domains, so you can now accept a connection with one domain and handle it with another, for example.</li>
<li>There is now an <a href="https://github.com/ocaml-multicore/eio#running-processes">API for spawning sub-processes</a>.</li>
<li>Networking changes include better support for datagram sockets and the new <a href="https://ocaml-multicore.github.io/eio/eio/Eio/Net/index.html#running-servers">Eio.Net.run_server</a> convenience function.</li>
<li>Many of the data-structures (promises, conditions, semaphores and synchronous streams) are now lock-free, making them faster to use across multiple domains.</li>
<li>It is safe to <a href="https://github.com/ocaml-multicore/eio#example-signal-handlers">handle signals in Eio</a> now that <code>Eio.Condition.broadcast</code> is lock-free (signal handlers can&rsquo;t take locks, since they may have interrupted the thread holding the lock). Though note that reliable signal handling on OCaml 5 requires <a href="https://github.com/ocaml/ocaml/issues/12253">OCaml#12253</a> to be fixed too.</li>
<li><a href="https://ocaml-multicore.github.io/eio/eio/Eio/Fiber/index.html#val-fork_seq">Fiber.fork_seq</a> provides an easy way to create generator functions.</li>
<li>Eio now supports <a href="https://github.com/ocaml-multicore/domain-local-await">domain-local-await</a>, which allows sharing e.g. <a href="https://github.com/ocaml-multicore/kcas">kcas</a> data-structures across Eio and Domainslib domains.</li>
<li><a href="https://github.com/ocaml-multicore/eio/blob/main/README.md#error-handling">Error handling</a> has been improved. You can now add extra context information to errors (e.g. an error opening a missing file will now include the path of the file). You can also choose how specific to be: e.g. you can catch all IO errors, all network errors, or all connection reset errors.</li>
<li>There are also some experimental backends under development:
<ul class="org-ul">
<li><a href="https://github.com/TheLortex/eio-solo5">eio_solo5</a> is for MirageOS unikernels.</li>
<li><a href="https://github.com/ocaml-multicore/eio/pull/405">eio_js</a> is for browsers.</li>
<li>eio_windows is for Windows - see <a href="https://github.com/ocaml-multicore/eio/issues/125">#125</a> if you&rsquo;d like to help out.</li>
</ul></li>
</ul>

<p>
A more detailed list of changes can be found in the <a href="https://github.com/ocaml-multicore/eio/releases">release
notes</a>.
</p>

<p>
Eio&rsquo;s <a href="https://github.com/ocaml-multicore/eio/blob/main/README.md">README.md</a> provides an introduction to most of
the features.
</p>

<p>
If you&rsquo;d like to get involved, the new <a href="https://github.com/ocaml-multicore/eio/blob/main/HACKING.md">HACKING.md</a>
document explains the structure of the code for people who want to contribute to Eio, and there are regular <a href="https://discuss.ocaml.org/t/eio-developer-meetings/12207">Eio
developer meetings</a> for anyone who wants to get involved.
</p>
</div>
</div>
</div>




<div id="outline-container-15" class="outline-2">
<h2 id="15">Initial Emissions Monitoring of the OCaml.org Infrastructure</h2>
<div class="outline-text-2" id="text-15">
<p>
Archive: <a href="https://discuss.ocaml.org/t/initial-emissions-monitoring-of-the-ocaml-org-infrastructure/12335/1">https://discuss.ocaml.org/t/initial-emissions-monitoring-of-the-ocaml-org-infrastructure/12335/1</a>
</p>
</div>

<div id="outline-container-orgeb761f6" class="outline-3">
<h3 id="orgeb761f6">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-orgeb761f6">
<p>
I&rsquo;m happy to announce that some initial emissions monitoring has been added to the OCaml.org infrastructure. A more
detailed write up can be found at <a href="https://infra.ocaml.org/2023/05/30/emissions-monitoring.html">https://infra.ocaml.org/2023/05/30/emissions-monitoring.html</a>. This is a first
step in accurately measuring the amount of emissions we are generating. There was a discuss thread touching on some
of this a while ago <a href="https://discuss.ocaml.org/t/ocaml-carbon-footprint/8580">https://discuss.ocaml.org/t/ocaml-carbon-footprint/8580</a>.
</p>

<p>
I think there are two important next tasks: getting full coverage of all of the infrastructure machines and making
the data publicly available. I hope to work on this (in an open-source way) in the future, if anyone else is
interested do let me know!
</p>

<p>
Thanks to <a href="https://tarides.com">Tarides</a> (who funded the initial work on this) and to @lambda_foo, Mark Elvers and
@avsm for helping with the deployment and ideas for measuring emissions. There is an issue on the
ocaml/infrastructure repository for the next steps <a href="https://github.com/ocaml/infrastructure/issues/47">https://github.com/ocaml/infrastructure/issues/47</a> :seedling:
</p>
</div>
</div>
</div>




<div id="outline-container-16" class="outline-2">
<h2 id="16">Other OCaml News</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-org8808cbb" class="outline-3">
<h3 id="org8808cbb">From the ocaml.org blog</h3>
<div class="outline-text-3" id="text-org8808cbb">
<p>
Here are links from many OCaml blogs aggregated at <a href="https://ocaml.org/blog/">the ocaml.org blog</a>.
</p>

<ul class="org-ul">
<li><a href="http://cambium.inria.fr/blog/two-variants-of-the-bind-rule">Two variants of the Bind rule</a></li>
<li><a href="https://blog.janestreet.com/oxidizing-ocaml-locality/">Oxidizing OCaml: Locality</a></li>
<li><a href="https://signals-threads.simplecast.com/episodes/the-future-of-programming-with-richard-eisenberg-pOktpZ_e">The Future of Programming with Richard Eisenberg</a></li>
<li><a href="https://frama-c.com/fc-versions/cobalt.html">Beta release of Frama-C 27.0~beta (Cobalt)</a></li>
<li><a href="http://gallium.inria.fr/blog/function-specs-2023-05-12">Specifying Functions: Two Styles</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org7aba518" class="outline-2">
<h2 id="org7aba518">Old CWN</h2>
<div class="outline-text-2" id="text-org7aba518">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I&rsquo;ll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org97c7453">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>