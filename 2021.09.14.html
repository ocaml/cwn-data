<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-09-14 Tue 14:05 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2021.09.07.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2021.09.21.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of September 07 to 14, 2021.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">opam-grep: search through the sources of all the packages in opam-repository</a></li>
<li><a href="#2">The OCaml 4.13 preview for Merlin is now available</a></li>
<li><a href="#3">Outreachy Summer 2021</a></li>
<li><a href="#4">http-cookie v4.2.0</a></li>
<li><a href="#5">Dune 2.9.1</a></li>
<li><a href="#6">MDX 1.11.0</a></li>
<li><a href="#7">OCaml 4.13.0, first release candidate</a></li>
<li><a href="#8">New release: ProVerif 2.03</a></li>
<li><a href="#9">ocaml-lsp-server 1.8.0</a></li>
<li><a href="#10">Multicore OCaml: August 2021</a></li>
<li><a href="#11">Higher-kinded bounded polymorphism</a></li>
<li><a href="#12">OCaml Workshop 2021: Live Stream</a></li>
<li><a href="#13">Windows-friendly OCaml 4.12 distribution 2nd preview release (0.2.0)</a></li>
<li><a href="#org58361b5">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">opam-grep: search through the sources of all the packages in opam-repository</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-grep-search-through-the-sources-of-all-the-packages-in-opam-repository/8434/1">https://discuss.ocaml.org/t/ann-opam-grep-search-through-the-sources-of-all-the-packages-in-opam-repository/8434/1</a>
</p>
</div>

<div id="outline-container-org01495d9" class="outline-3">
<h3 id="org01495d9">Kate announced</h3>
<div class="outline-text-3" id="text-org01495d9">
<p>
<a href="https://github.com/kit-ty-kate/opam-grep">opam-grep</a> is an opam plugin that greps through
the sources of all opam packages.
</p>

<p>
To install it, simply call:
</p>
<pre class="example" id="org2d368af">
$ opam install opam-grep
</pre>
<p>
Then to use it, simply call:
</p>
<pre class="example" id="org7fd6341">
$ opam grep "your regexp"
</pre>
<p>
<i>Side note</i>: currently opam-grep will cache the sources in your cache directory (<code>~/.cache/opam-grep</code>), so a few GB of available disk space is most likely required.
</p>

<p>
I hope this can help core compiler and community library devs alike, to know which part of
their software is used in the wild.
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">The OCaml 4.13 preview for Merlin is now available</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-the-ocaml-4-13-preview-for-merlin-is-now-available/8436/1">https://discuss.ocaml.org/t/ann-the-ocaml-4-13-preview-for-merlin-is-now-available/8436/1</a>
</p>
</div>

<div id="outline-container-org351a0fa" class="outline-3">
<h3 id="org351a0fa">Kate announced</h3>
<div class="outline-text-3" id="text-org351a0fa">
<p>
Over the past previous OCaml releases the release-readiness team tried its best to make most
packages, and especially core OCaml packages (dune, merlin, ppxlib, …) available day one so
people can have the smoothest transition possible to the new compiler release.
</p>

<p>
Today I'm announcing that merlin (arguably the trickiest core tool to port to new releases,
and the most indispensable) is now available to install for early adopters of OCaml 4.13.
</p>

<p>
To install the latest OCaml 4.13 beta together with Merlin simply call:
</p>
<pre class="example" id="org974c3e3">
$ opam switch create 4.13 --formula='"ocaml-base-compiler" {&gt;= "4.13" &amp; &lt; "4.14"}'
$ opam install merlin
</pre>
<p>
The package is still an early preview. If you encounter any problems while using merlin,
please feel free to report it directly in <a href="https://github.com/ocaml/merlin/pull/1381">https://github.com/ocaml/merlin/pull/1381</a>
</p>

<p>
All of the <a href="https://github.com/ocaml/opam-repository/issues/18791">OCaml core packages</a> (with
the exception of ocaml-lsp, hopefully <a href="https://github.com/ocaml/ocaml-lsp/issues/503">soon</a>)
should be available out-of-the-box. If some packages aren't available yet,
opam-alpha-repository should have you covered:
</p>
<pre class="example" id="orgb7f1ad6">
$ opam remote add alpha git://github.com/kit-ty-kate/opam-alpha-repository.git
</pre>

<p>
If you have any questions or remarks feel free to ask them here.
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Outreachy Summer 2021</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/outreachy-summer-2021/8438/1">https://discuss.ocaml.org/t/outreachy-summer-2021/8438/1</a>
</p>
</div>

<div id="outline-container-org4bf914a" class="outline-3">
<h3 id="org4bf914a">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-org4bf914a">
<p>
This summer the OCaml community rebooted its participation in Outreachy "&#x2026;a diversity initiative that provides
paid, remote internships to people subject to systemic bias and impacted by underrepresentation in the technical
industry where they are living".
</p>

<p>
We had the pleasure of working with three talented interns over 13 weeks this summer on projects relating to
v3.ocaml.org.  Each intern has summarised their experience in a blog post that we'd like to share with you.
</p>

<p>
<b>A quick reminder, if you are interested in mentoring for the OCaml community in the next round, please <a href="https://discuss.ocaml.org/t/become-an-outreachy-mentor-support-the-growth-and-diversity-of-the-ocaml-community/8213">read this post</a> and <a href="https://www.outreachy.org/communities/cfp/ocaml/">apply with your project</a>. The project submission deadline is Sept. 23, 2021 at 4pm UTC.</b>
</p>
</div>

<div id="outline-container-org34b8dec" class="outline-4">
<h4 id="org34b8dec">A Graphql Endpoint for Packages on OCaml.org</h4>
<div class="outline-text-4" id="text-org34b8dec">
<p>
One of the centre-pieces for the ocaml.org revamp is <a href="https://v3.ocaml.org/packages">centralised docs for every version of every opam
package</a>. With all of this information it would be useful to expose an API for exploring the
packages. This is exactly what Odinaka Joy worked on and is live now at v3.ocaml.org/graphiql! For more information
<a href="https://dinakajoy-blog.vercel.app/blog/my-journey">have a read of the accompanying blog post</a>.
</p>
</div>
</div>

<div id="outline-container-org733bcfe" class="outline-4">
<h4 id="org733bcfe">A Modern Front-end for OCaml.org</h4>
<div class="outline-text-4" id="text-org733bcfe">
<p>
Another goal of v3.ocaml.org was to modernise the design and front-end of the site. This primarily meant <a href="https://github.com/ocaml/ood">splitting
the data out</a> and using modern tools like <a href="https://github.com/ocaml/v3.ocaml.org">tailwind, react, nextjs and
rescript</a> to build a new front-end. Shreya Kumari Gupta has been driving this
effort forward by porting more content, pages and designs into v3 including adding all of the academic institutions,
industrial users and solving complicated nextjs-rescript-leaflet bindings. To learn about this and Shreya's overall
experience <a href="https://shreyaswikriti693235797.wordpress.com/2021/09/04/my-internship-with-ocaml-outreachy-summary/">have a read of that blog
post</a>.
</p>
</div>
</div>

<div id="outline-container-org04f6f1d" class="outline-4">
<h4 id="org04f6f1d">Peer-to-peer, privacy-focused video streaming for OCaml.org</h4>
<div class="outline-text-4" id="text-org04f6f1d">
<p>
Last and certainly not least we have OCaml.org's peer-to-peer <a href="https://joinpeertube.org/">peertube</a> instance where
videos (such as the <a href="https://watch.ocaml.org/video-channels/ocaml2021/videos">2021 OCaml Workshop</a>) are hosted with
no tracking software and backed-up for posterity. Diksha Gupta worked on adding content, building tools to use the
peertube API to query about the videos which ultimately creates <a href="https://github.com/ocaml/ood/blob/main/data/watch.yml">a usable index of the videos in
ood</a>. For more on this project, <a href="https://dikshagupta99.wordpress.com/2021/09/04/outreachy-my-experience-and-my-project/">look no further than the blog
post</a>.
</p>

<p>
It's been a pleasure working with all of the interns this summer and we're excited to see this initiative grow.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">http-cookie v4.2.0</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-http-cookie-v4-2-0/8441/1">https://discuss.ocaml.org/t/ann-http-cookie-v4-2-0/8441/1</a>
</p>
</div>

<div id="outline-container-org80315cc" class="outline-3">
<h3 id="org80315cc">Bikal Lem announced</h3>
<div class="outline-text-3" id="text-org80315cc">
<p>
I am pleased to announce v4.* series release of <code>http-cookie</code>. The v4 release contains many new enhancements to make
working with cookies in OCaml web applications a little bit easier.
</p>

<p>
v4.*.* release series features the following additions and changes:
</p>
<ol class="org-ol">
<li>Add pretty printers - <code>pp, pp_date_time and pp_same_site</code>. These can be used during debugging and in a OCaml toplevel session</li>
<li>Flatten out <code>Same_site</code> module</li>
<li>Add <code>of_cookie</code> to parse <code>Cookie</code> header.</li>
<li>Add <code>of_set_cookie</code> to parse <code>Set-Cookie</code> header. This can be used by http client applications</li>
<li>Rename <code>of_cookie_header</code> to <code>of_cookie</code>, <code>to_cookie_header_value</code> to <code>to_cookie</code>, <code>to_set_cookie_header_value</code> to <code>to_set_cookie</code> to enhance API ergonomics</li>
<li>Add validation for cookie <code>domain</code> value which consists of - host name, IPv4 and IPv6 - to conform to their respective RFC specs - Domain name RFC(RFC 1034), RFC 1123 and draft IPv4 and IPv6 RFCs.</li>
<li>Improve documentation</li>
</ol>
<p>
  
</p>
<ul class="org-ul">
<li><a href="https://lemaetech.co.uk/http-cookie/http-cookie/Http_cookie/index.html">Documentation</a></li>
<li><a href="https://github.com/lemaetech/http-cookie">Github repo</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">Dune 2.9.1</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-2-9-1/8442/1">https://discuss.ocaml.org/t/ann-dune-2-9-1/8442/1</a>
</p>
</div>

<div id="outline-container-orgc3b4ed2" class="outline-3">
<h3 id="orgc3b4ed2">Emilio Jesús Gallego Arias announced</h3>
<div class="outline-text-3" id="text-orgc3b4ed2">
<p>
on behalf of the Dune team I'm pleased to announce the release of Dune 2.9.1.
</p>

<p>
This is a minor release, fixing an important problem with opam file generation when <code>(lang dune 2.9)</code> was set, and a
few other minor fixes; please find the changelog below:
</p>

<ul class="org-ul">
<li>Don't use <code>subst --root</code> in Opam files (<a href="https://github.com/ocaml/dune#4806">https://github.com/ocaml/dune#4806</a>, @MisterDA)</li>

<li>Fix compilation on Haiku (<a href="https://github.com/ocaml/dune#4885">https://github.com/ocaml/dune#4885</a>, @Sylvain78)</li>

<li>Allow depending on <code>ocamldoc</code> library when <code>ocamlfind</code> is not installed.
(<a href="https://github.com/ocaml/dune#4811">https://github.com/ocaml/dune#4811</a>, fixes <a href="https://github.com/ocaml/dune#4809">https://github.com/ocaml/dune#4809</a>, @nojb)</li>

<li>Fix <code>(enabled_if ...)</code> for installed libraries (<a href="https://github.com/ocaml/dune#4824">https://github.com/ocaml/dune#4824</a>, fixes <a href="https://github.com/ocaml/dune#4821">https://github.com/ocaml/dune#4821</a>, @dra27)</li>

<li>Create more future-proof opam files using <code>--promote-install-files=false</code>
(<a href="https://github.com/ocaml/dune#4860">https://github.com/ocaml/dune#4860</a>, @bobot)</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">MDX 1.11.0</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-mdx-1-11-0/8457/1">https://discuss.ocaml.org/t/ann-mdx-1-11-0/8457/1</a>
</p>
</div>

<div id="outline-container-orgb3b1194" class="outline-3">
<h3 id="orgb3b1194">Marek Kubica announced</h3>
<div class="outline-text-3" id="text-orgb3b1194">
<p>
On behalf of the MDX maintainers I'd like to announce the availability of <a href="https://opam.ocaml.org/packages/mdx/mdx.1.11.0/">MDX
1.11.0</a>. This is mostly a maintenance release but it prepares for a
2.0 release soon. The most important change in this regard is that it will output deprecation warnings when OCaml
toplevel lines are not <code>;;</code> terminated.
</p>

<p>
As an example this will trigger a deprecation warning to be printed on stderr:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"># <span style="color: #228b22;">List.</span>map (<span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">x</span> -&gt; x + 1) [1; 2; 3]
- : int list = [2; 3; 4
</pre>
</div>

<p>
Note that this will only print a warning, it will still process these lines correctly and output code just like
before. To avoid the warning, make sure to add terminating <code>;;</code>:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"># <span style="color: #228b22;">List.</span>map (<span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">x</span> -&gt; x + 1) [1; 2; 3]<span style="color: #ff4500;">;;</span>
- : int list = [2; 3; 4
</pre>
</div>

<p>
To ease migration, MDX 2.0 will change behaviour and insert <code>;;</code> into the output so users will be able to use e.g.
<code>dune promote</code> to get their source files updated with <code>;;</code>. In MDX 3.0 reading toplevel phrases without the trailing
<code>;;</code> will be finally unsupported and the deprecation warning will be removed.
</p>

<p>
Happy documenting!
</p>
</div>

<div id="outline-container-org073d46b" class="outline-4">
<h4 id="org073d46b">Changed</h4>
<div class="outline-text-4" id="text-org073d46b">
<ul class="org-ul">
<li>Use odoc-parser.0.9.0 (<a href="https://github.com/realworldocaml/mdx/pull/333">#333</a>, @Juloo)</li>
</ul>
</div>
</div>

<div id="outline-container-orgd1cffb0" class="outline-4">
<h4 id="orgd1cffb0">Deprecated</h4>
<div class="outline-text-4" id="text-orgd1cffb0">
<ul class="org-ul">
<li>Add a deprecation warning for toplevel blocks that are not terminated with <code>;;</code> (<a href="https://github.com/realworldocaml/mdx/pull/342">#342</a>, @Leonidas)</li>
</ul>
</div>
</div>

<div id="outline-container-orgbb91a0c" class="outline-4">
<h4 id="orgbb91a0c">Fixed</h4>
<div class="outline-text-4" id="text-orgbb91a0c">
<ul class="org-ul">
<li>Fix accidental redirect of stderr to stdout (<a href="https://github.com/realworldocaml/mdx/pull/343">#343</a>, @Leonidas)</li>
<li>Remove trailing whitespaces that were added to indent empty lines (<a href="https://github.com/realworldocaml/mdx/pull/341">#341</a>, @gpetiot)</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">OCaml 4.13.0, first release candidate</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-4-13-0-first-release-candidate/8461/1">https://discuss.ocaml.org/t/ocaml-4-13-0-first-release-candidate/8461/1</a>
</p>
</div>

<div id="outline-container-org921753d" class="outline-3">
<h3 id="org921753d">octachron announced</h3>
<div class="outline-text-3" id="text-org921753d">
<p>
The release of OCaml 4.13.0 is imminent. As a last test that everything is in order, we are publishing a first
release candidate for OCaml 4.13.0.
</p>

<p>
Compared to the last beta release, this release candidate includes one small fix
for flambda, another for the compiler-libs, one regression fix when compiling C
files with ocamlc or ocamlopt, and a handful of configuration and build system
improvements (in particular on Windows). See the changelog below for more details.
</p>

<p>
If you find any bugs, please report them here:
</p>

<p>
<a href="https://github.com/ocaml/ocaml/issues">https://github.com/ocaml/ocaml/issues</a>
</p>

<p>
The release of OCaml 4.13.0 is currently planned for mid-September.
An assembler generation bug was discovered this morning, we might release
another release candidate next week once this bug is fixed.
</p>

<p>
Happy hacking,
Florian Angeletti for the OCaml team.
</p>
</div>

<div id="outline-container-orgb83f66e" class="outline-4">
<h4 id="orgb83f66e">Installation instructions</h4>
<div class="outline-text-4" id="text-orgb83f66e">
<p>
The base compiler can be installed as an opam switch with the following commands
</p>
<pre class="example" id="orga8f3fe8">
opam update
opam switch create 4.13.0~rc1 --repositories=default,beta=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>
<p>
If you want to tweak the configuration of the compiler, you can switch to the option variant with:
</p>
<pre class="example" id="org76b3f0b">
opam update
opam switch create &lt;switch_name&gt; --packages=ocaml-variants.4.13.0~rc1+options,&lt;option_list&gt;
--repositories=default,beta=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>
<p>
where &lt;option_list&gt; is a comma separated list of ocaml-option-* packages. For instance, for a flambda and
no-flat-float-array switch:
</p>
<pre class="example" id="orgc4434b1">
opam switch create 4.13.0~rc1+flambda+nffa
--packages=ocaml-variants.4.13.0~rc1+options,ocaml-option-flambda,ocaml-option-no-flat-float-array
--repositories=default,beta=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>
<p>
All available options can be listed with "opam search ocaml-option".
</p>

<p>
The source code for the beta release is also available at these addresses:
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/archive/4.13.0-rc1.tar.gz">https://github.com/ocaml/ocaml/archive/4.13.0-rc1.tar.gz</a></li>
<li><a href="https://caml.inria.fr/pub/distrib/ocaml-4.13/ocaml-4.13.0~rc1.tar.gz">https://caml.inria.fr/pub/distrib/ocaml-4.13/ocaml-4.13.0~rc1.tar.gz</a></li>
</ul>
</div>
</div>

<div id="outline-container-org606b6e3" class="outline-4">
<h4 id="org606b6e3">Changes since the first beta</h4>
<div class="outline-text-4" id="text-org606b6e3">
</div>
<div id="outline-container-orgc6a74c9" class="outline-5">
<h5 id="orgc6a74c9">Bug fixes</h5>
<div class="outline-text-5" id="text-orgc6a74c9">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/10593">#10593</a>: Fix untyping of patterns without named existential quantifiers. This bug was only present in the beta version of OCaml 4.13.0.
(Ulysse Gérard, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/10603">#10603</a>, <a href="https://github.com/ocaml/ocaml/issues/10611">#10611</a>: Fix if condition marked as inconstant in flambda (Vincent Laviron and Pierre Chambart, report by Marcello Seri)</li>
</ul>
</div>
</div>

<div id="outline-container-org0988064" class="outline-5">
<h5 id="org0988064">Regression fix</h5>
<div class="outline-text-5" id="text-org0988064">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/9960">#9960</a>, <a href="https://github.com/ocaml/ocaml/issues/10619">#10619</a>(new in rc1): extend ocamlc/ocamlopt's -o option to work when compiling C files (Sébastien Hinderer, reported by Daniel Bünzli, review by Florian Angeletti and Gabriel Scherer)</li>
</ul>
</div>
</div>

<div id="outline-container-org1cb8b20" class="outline-5">
<h5 id="org1cb8b20">Internal configuration and build system</h5>
<div class="outline-text-5" id="text-org1cb8b20">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/10471">#10471</a>: Fix detection of arm32 architectures with musl in configure. (Louis Gesbert, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/10451">#10451</a>: Replace the use of iconv with a C utility to convert $(LIBDIR) to a C string constant on Windows when building the runtime. Hardens the generation of the constant on Unix for paths with backslashes, double-quotes and newlines. (David Allsopp, review by Florian Angeletti and Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/10511">#10511</a>: Cygwin ports now correctly configure when flexdll is not available.
(David Allsopp, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/10584">#10584</a>, <a href="https://github.com/ocaml/ocaml/issues/10856">#10856</a>: Standard Library documentation build no longer fails if optional libraries have been disabled. (David Allsopp, report by Yuri Victorovich review by Florian Angeletti)</li>
</ul>
</div>
</div>

<div id="outline-container-org988f15a" class="outline-5">
<h5 id="org988f15a">Manual</h5>
<div class="outline-text-5" id="text-org988f15a">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/10605">#10605</a>: manual, name few css classes to ease styling and maintainability. (Florian Angeletti, review by Wiktor Kuchta and Gabriel Scherer)</li>
</ul>
</div>
</div>
</div>
</div>
</div>




<div id="outline-container-8" class="outline-2">
<h2 id="8">New release: ProVerif 2.03</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/new-release-proverif-2-03/8463/1">https://discuss.ocaml.org/t/new-release-proverif-2-03/8463/1</a>
</p>
</div>

<div id="outline-container-org2aa6f0f" class="outline-3">
<h3 id="org2aa6f0f">Bruno Blanchet announced</h3>
<div class="outline-text-3" id="text-org2aa6f0f">
<p>
Vincent and I are pleased to announce a new release of ProVerif, version 2.03.
ProVerif is a automatic security protocol verifier that relies on the symbolic model of cryptography.
</p>

<p>
ProVerif is available at
<a href="http://proverif.inria.fr/">http://proverif.inria.fr </a>
It is also available via opam (see installation instructions
in Section 1.4 of the manual <a href="http://proverif.inria.fr/manual.pdf">http://proverif.inria.fr/manual.pdf </a> )
</p>

<p>
This release contains many important changes since version 2.01 (version
2.02 was not announced here because of a pending anonymous
submission), mainly implemented by Vincent:
</p>

<ul class="org-ul">
<li>Change of license for Windows binaries: Windows binaries are now distributed under GPL, like the source (because ProVerif now integrates a modified version of an OCaml module under LGPL). If this change of license prevents you from using ProVerif, please email me.</li>

<li>Major speedups for large examples.</li>

<li>Several extensions, including temporal variables in correspondence queries
(see Section 4.3.1 of the manual, paragraph "Temporal correspondences").</li>

<li>Bug fixes.</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-9" class="outline-2">
<h2 id="9">ocaml-lsp-server 1.8.0</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocaml-lsp-server-1-8-0/8470/1">https://discuss.ocaml.org/t/ann-ocaml-lsp-server-1-8-0/8470/1</a>
</p>
</div>

<div id="outline-container-org7f8daa3" class="outline-3">
<h3 id="org7f8daa3">Rudi Grinberg announced</h3>
<div class="outline-text-3" id="text-org7f8daa3">
<p>
On behalf of the ocaml-lsp team, I'm pleased to announce version 1.8.0. This release contains some quality of life
bug fixes, better diagnostics locations, and a few new code actions. Happy hacking.
</p>

<p>
The full change log is rendered below for your convenience:
</p>
</div>

<div id="outline-container-orgf523113" class="outline-4">
<h4 id="orgf523113">Features</h4>
<div class="outline-text-4" id="text-orgf523113">
<ul class="org-ul">
<li><p>
Add a new code action <code>Add missing rec keyword</code>, which is available when
adding a <code>rec</code> keyword can fix <code>Unbound value ...</code> error, e.g.,
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">fact</span> <span style="color: #a0522d;">n</span> = <span style="color: #a020f0;">if</span> n = 0 <span style="color: #a020f0;">then</span> 1 <span style="color: #a020f0;">else</span> n * fact (n - 1)
                                   <span style="color: #b22222;">(* </span><span style="color: #b22222;">^^^^ Unbound value fact </span><span style="color: #b22222;">*)</span>
</pre>
</div>

<p>
Adding <code>rec</code> to the definition of <code>fact</code> will fix the problem. The new code
action offers adding <code>rec</code>.
</p></li>

<li>Use ocamlformat to properly format type snippets. This feature requires the
<code>ocamlformat-rpc</code> opam package to be installed. (#386)</li>

<li><p>
Add completion support for polymorphic variants, when it is possible to pin
down the precise type. Examples (<code>&lt;|&gt;</code> stands for the cursor) when completion
will work (#473)
</p>

<p>
Function application:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">foo</span> (<span style="color: #a0522d;">a</span>:<span style="color: #228b22;"> [`Alpha | `Beta]</span>) = ()

foo <span style="color: #000000; background-color: #ffffff;">`A</span>&lt;<span style="color: #a52a2a;">|&gt;</span>
</pre>
</div>

<p>
Type explicitly shown:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">a</span> :<span style="color: #228b22;"> [</span><span style="color: #000000; background-color: #ffffff;">`Alpha</span><span style="color: #228b22;"> | </span><span style="color: #000000; background-color: #ffffff;">`Beta</span><span style="color: #228b22;">] </span>= <span style="color: #000000; background-color: #ffffff;">`B</span>&lt;<span style="color: #a52a2a;">|&gt;</span>
</pre>
</div>

<p>
Note: this is actually a bug fix, since we were ignoring the backtick when
constructing the prefix for completion.
</p></li>

<li>Parse merlin errors (best effort) into a more structured form. This allows
reporting all locations as "related information" (#475)</li>

<li>Add support for Merlin <code>Construct</code> command as completion suggestions, i.e.,
show complex expressions that could complete the typed hole. (#472)</li>

<li>Add a code action <code>Construct an expression</code> that is shown when the cursor is
at the end of the typed hole, i.e., <code>_|</code>, where <code>|</code> is the cursor. The code
action simply triggers the client (currently only VS Code is supported) to
show completion suggestions. (#472)</li>

<li>Change the formatting-on-save error notification to a warning notification
(#472)</li>

<li><p>
Code action to qualify ("put module name in identifiers") and unqualify
("remove module name from identifiers") module names in identifiers (#399)
</p>

<p>
Starting from:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Unix</span>

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">times</span> = <span style="color: #228b22;">Unix.</span>times ()
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">f</span> <span style="color: #a0522d;">x</span> = x.<span style="color: #228b22;">Unix.</span>tms_stime, x.<span style="color: #228b22;">Unix.</span>tms_utime
</pre>
</div>

<p>
Calling "remove module name from identifiers" with the cursor on the open
statement will produce:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Unix</span>

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">times</span> = times ()
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">f</span> <span style="color: #a0522d;">x</span> = x.tms_stime, x.tms_utime
</pre>
</div>

<p>
Calling "put module name in identifiers" will restore:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Unix</span>

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">times</span> = <span style="color: #228b22;">Unix.</span>times ()
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">f</span> <span style="color: #a0522d;">x</span> = x.<span style="color: #228b22;">Unix.</span>tms_stime, x.<span style="color: #228b22;">Unix.</span>tms_utime
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgdcb3492" class="outline-4">
<h4 id="orgdcb3492">Fixes</h4>
<div class="outline-text-4" id="text-orgdcb3492">
<ul class="org-ul">
<li>Do not show "random" documentation on hover

<ul class="org-ul">
<li>fixed by <a href="https://github.com/ocaml/merlin/pull/1364">merlin#1364</a></li>
<li>fixes duplicate:
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml-lsp/issues/344">ocaml-lsp#344</a></li>
<li><a href="https://github.com/ocamllabs/vscode-ocaml-platform/issues/111">vscode-ocaml-platform#111</a></li>
</ul></li>
</ul></li>

<li>Correctly rename a variable used as a named/optional argument (#478)</li>

<li>When reporting an error at the beginning of the file, use the first line not
the second (#489)</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-org747f1d8" class="outline-3">
<h3 id="org747f1d8">sid asked and Rudi Grinberg replied</h3>
<div class="outline-text-3" id="text-org747f1d8">
<blockquote>
<p>
I have a technical question. I notice that the code base uses dune fibers for concurrency. What benefits do fibers
have over, say, Lwt/Async?
</p>
</blockquote>

<p>
I wanted to write about more that in more detail at some point. I can give a quick preview here I guess. The gist of
it is that fibers are much more lightweight and provide simpler error handling semantics. You do lose out on choice
(<code>Deferred.choose</code> and friends) though.
</p>

<p>
Like deferred/lwt, a fiber is also a monadic value that represents asynchronous computation. In deferred/lwt, binding
on the computation waits for it to finish, and then stores the result in a ref. Subsequent binds will reuse the saved
value. A fiber stores nothing and will always re-run the computation from scratch to produce the value. For example,
this will print <code>foo</code> twice.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">foo</span> = <span style="color: #228b22;">Fiber.</span>of_thunk (<span style="color: #a020f0;">fun</span> () -&gt; <span style="color: #228b22;">Fiber.</span>return (print_endline <span style="color: #8b2252;">"foo"</span>))

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">bar</span> =
  <span style="color: #000000; font-weight: bold;">let*</span> () = foo <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #000000; font-weight: bold;">let*</span> () = bar <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #228b22;">Fiber.</span>return ()
</pre>
</div>

<p>
To save the value computed, one must opt-in and create an Ivar manually. What's the advantage of this approach? Well,
bind becomes a lot simpler (and cheaper). I'll even paste the implementation to prove how simple it is:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> ( <span style="color: #0000ff;">&gt;&gt;=</span> ) <span style="color: #a0522d;">t</span> <span style="color: #a0522d;">f</span> <span style="color: #a0522d;">k</span> = t (<span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">x</span> -&gt; f x k)
</pre>
</div>

<p>
Lwt's and Async's bind are far more complex (and slow).
</p>

<p>
Moving on to error handling. Lwt has the disaster that is <code>Lwt.async</code>. Enough said. There's <code>Lwt.dont_wait</code> now, but
it's still fishy to me that yet another error handling channel is needed in addition to <code>Lwt.catch</code>. With Async,
things are cleaner with monitors, but IMO, a completely separate concept for error handling is overkill.
</p>

<p>
To explain how fiber does error handling, I'll first explain the other (aside from sequencing with bind) composition
primitive for fibers. A fiber may spawn sub fibers that will be executed concurrently. The simplest primitive to do
is that is the fork:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #b22222;">(* </span><span style="color: #b22222;">the main concurrency primitive </span><span style="color: #b22222;">*)</span>
<span style="color: #000000; font-weight: bold;">val</span> <span style="color: #0000ff;">fork_and_join</span> : (unit -&gt; 'a <span style="color: #228b22;">Fiber.</span>t) -&gt; (unit -&gt; 'b <span style="color: #228b22;">Fiber.</span>t) -&gt; ('a * 'b) <span style="color: #228b22;">Fiber.</span>t
</pre>
</div>

<p>
Before a fiber can finish and produce a value, it must wait for all of its sub fibers to terminate. If a fiber raises
an exception instead of producing a value, the exception will be passed to the fiber's error handler. If there' no
error handler set, the exception will be passed to the parent's fiber error handler (if the error handler itself
raises, the error will always be passed to the parent's error handler).
</p>

<p>
The rules above are exhaustive and leave very little room for ambiguity. In practice, I find it very convenient to
write robust error handling code this way. For example with lsp, it's easy to install a handler in one place for a
single request and know that errors will not leak outside of it. It is also easy to make sure that no spawned
computation is left "dangling" after a request is served.
</p>

<p>
There's also some practical benefits that made me choose Fiber:
</p>

<ul class="org-ul">
<li>Depending on async/lwt would impose version constraints for end users on these key libraries. In contrast, fiber is a single module that is trivial to vendor and is invisible to users.</li>
<li>Fiber contains no C and hence very portable. This can be handy if one wants to get ocamllsp working with an experimental compiler for example.</li>
</ul>

<p>
There's downsides as well of course. Fiber is quite minimal and therefore comes without a scheduler. I managed to
throw something together by mostly copying dune's scheduler, but it's not something I'd recommend to anybody. If
fiber ever becomes public, we'd need something like libuv to provide us with a serious and reusable scheduler.
</p>

<p>
That's all for now. It would be much more interesting to write about how dune itself uses fibers, but that is better
written by other people from the team.
</p>
</div>
</div>
</div>




<div id="outline-container-10" class="outline-2">
<h2 id="10">Multicore OCaml: August 2021</h2>
<div class="outline-text-2" id="text-10">
<p>
Archive: <a href="https://discuss.ocaml.org/t/multicore-ocaml-august-2021/8484/1">https://discuss.ocaml.org/t/multicore-ocaml-august-2021/8484/1</a>
</p>
</div>

<div id="outline-container-org8762330" class="outline-3">
<h3 id="org8762330">Anil Madhavapeddy announced</h3>
<div class="outline-text-3" id="text-org8762330">
</div>
<div id="outline-container-orgd38b03a" class="outline-4">
<h4 id="orgd38b03a">Multicore OCaml: August 2021</h4>
<div class="outline-text-4" id="text-orgd38b03a">
<p>
Welcome to the August 2021 <a href="https://github.com/ocaml-multicore/ocaml-multicore">Multicore OCaml</a> monthly report! The
following update and the <a href="https://discuss.ocaml.org/tag/multicore-monthly">previous updates</a> have been compiled by
me, @ctk21, @kayceesrk and @shakthimaan. This month's update is a bit quieter as August is also a period of downtime
in Europe (and our crew in India also took well-deserved time off), but we all participated in the <a href="https://discuss.ocaml.org/t/ocaml-workshop-2021-live-stream/8366">online OCaml
Workshop</a> which was held virtually this year, so
there are plenty of videos to watch!
</p>

<p>
The multicore effort is all on track for integration into OCaml 5.0 early next year, with the core team currently
organising the upstreaming code review strategy over the coming winter months.  Meanwhile, there are some blog posts
and videos from the OCaml Workshop which give more detailed updates on both domains-parallelism and effects.
</p>

<ul class="org-ul">
<li><b>Adapting the OCaml ecosystem for Multicore OCaml</b>
<ul class="org-ul">
<li><i>This talk covers how our community can adapt to the forthcoming OCaml 5.0 with parallelism.</i></li>
<li><a href="http://segfault.systems/blog/2021/adapting-to-multicore/">Blog post 1</a>, <a href="https://tarides.com/blog/2021-08-26-tarides-engineers-to-present-at-icfp-2021">Blog post 2</a></li>
<li><a href="https://watch.ocaml.org/videos/watch/629b89a8-bbd5-490d-98b0-d0c740912b02">Video</a></li>
</ul></li>
<li><b>Parafuzz coverage guided Property Fuzzing for Multicore OCaml programs</b>
<ul class="org-ul">
<li><i>We develop ParaFuzz, an input and concurrency fuzzing tool for Multicore OCaml programs. ParaFuzz builds on top of Crowbar which combines AFL-based grey box fuzzing with QuickCheck and extends it to handle parallelism.</i></li>
<li><a href="https://watch.ocaml.org/videos/watch/c0d591e0-91c9-4eaa-a4d7-c4f514de0a57">Video</a></li>
</ul></li>
<li><b>Experiences with Effects</b>
<ul class="org-ul">
<li><i>The multicore branch of OCaml adds support for effect handlers. In this talk, we report our experiences with effects, both from converting existing code, and from writing new code.</i></li>
<li><a href="https://watch.ocaml.org/videos/watch/74ece0a8-380f-4e2a-bef5-c6bb9092be89">Video</a></li>
</ul></li>
</ul>

<p>
As always, the Multicore OCaml updates are listed first, which are then followed by the updates from the Ecosystem
libraries and Sandmark benchmarking. Finally, the ICFP relevant blog posts and videos from the OCaml workshop
sessions are provided for your reference.
</p>
</div>
</div>

<div id="outline-container-org17866cb" class="outline-4">
<h4 id="org17866cb">Multicore OCaml</h4>
<div class="outline-text-4" id="text-org17866cb">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/632">ocaml-multicore/ocaml-multicore#632</a>
Str module multi domain safety
</p>

<p>
An issue on stdlib safety in the OCaml <code>Str</code> module to work
concurrently with Multicore OCaml.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/633">ocaml-multicore/ocaml-multicore#633</a>
Error building 4.12.0+domains with no-flat-float-arrays
</p>

<p>
A linker error observed by <code>Adrián Montesinos González</code> (<code>debugnik</code>)
when installing 4.12.0+domains <code>no-flat-float-arrays</code>.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/634">ocaml-multicore/ocaml-multicore#634</a>
Strange type errors from merlin (This expression has type string/1)
</p>

<p>
Type errors reported from merlin (4.3.1-412) when using the effects
version of the Multicore OCaml compiler.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/624">ocaml-multicore/ocaml-multicore#624</a>
core v0.14: test triggers a segfault in the GC
</p>

<p>
The root cause of the segfault when running <code>core.v0.14</code> test suite
with Multicore OCaml 4.12.0+domains has been identified.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/573">ocaml-multicore/ocaml-multicore#573</a>
Backport trunk safepoints PR to multicore
</p>

<p>
This is an on-going effort to backport the Safepoints implementation to Multicore OCaml.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org6a1e395" class="outline-4">
<h4 id="org6a1e395">Ecosystem</h4>
<div class="outline-text-4" id="text-org6a1e395">
</div>
<div id="outline-container-org0dadbb5" class="outline-5">
<h5 id="org0dadbb5">Ongoing</h5>
<div class="outline-text-5" id="text-org0dadbb5">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/parallel-programming-in-multicore-ocaml/pull/10">ocaml-multicore/parallel-programming-in-multicore-ocaml#10</a>
Edited for flow/syntax/consistency
</p>

<p>
The Parallel Programming in Multicore OCaml chapter has been updated
for consistency, syntax flow and grammar.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/retro-httpaf-bench/pull/15">ocaml-multicore/retro-httpaf-bench#15</a>
Optimise Go code
</p>

<p>
The <code>nethttp-go/httpserv.go</code> benchmark has been optimised with use
of <code>Write</code> instead of <code>fmt.Fprintf</code>, and the removal of yield().
</p>


<div id="org4b92e7b" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/4/480cac4d79f8d84b8fb597885cad8d69c8d0929e.png" alt="480cac4d79f8d84b8fb597885cad8d69c8d0929e.png" />
</p>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-uring/issues/37">ocaml-multicore/ocaml-uring#37</a>
<code>poll_add</code> test hangs on s390x
</p>

<p>
The use of <code>poll_add</code> causes a hang on <code>s390x</code> architecture. A
backtrace with GDB is provided for reference:
</p>

<pre class="example" id="orgb12194e">
  (gdb) bt
   #0  0x000003ffb63ec01e in __GI___libc_write (nbytes=&lt;optimized out&gt;, buf=&lt;optimized out&gt;, fd=&lt;optimized out&gt;)
       at ../sysdeps/unix/sysv/linux/write.c:26
   #1  __GI___libc_write (fd=&lt;optimized out&gt;, buf=0x3ffffdee8e0, nbytes=1) at ../sysdeps/unix/sysv/linux/write.c:24
   #2  0x000002aa0dbb0ca2 in unix_write (fd=&lt;optimized out&gt;, buf=&lt;optimized out&gt;, vofs=&lt;optimized out&gt;,
vlen=&lt;optimized out&gt;) at write.c:44
   #3  0x000002aa0dbd4d3a in caml_c_call ()
</pre></li>

<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/issues/37">ocaml-multicore/domainslib#37</a>
parallel_map
</p>

<p>
@UnixJunkie has provided a simplified version for the interface for
scientific parallel programming as recommended by the parany library.
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">val</span> <span style="color: #0000ff;">run</span>:
<span style="color: #008b8b;">?csize</span>:int -&gt;
<span style="color: #008b8b;">~nprocs</span>: int -&gt;
<span style="color: #008b8b;">demux</span>:(unit -&gt; 'a) -&gt;
<span style="color: #008b8b;">work</span>:('a -&gt; 'b) -&gt;
<span style="color: #008b8b;">mux</span>:('b -&gt; unit) -&gt; unit
</pre>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/pull/39">ocaml-multicore/domainslib#39</a>
Add a fast path in parallel scan
</p>

<p>
A patch that performs a sequential scan when the number of elements
is less than or equal to the pool size or if the number of domains
is one.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/pull/40">ocaml-multicore/domainslib#40</a>
Parallel map
</p>

<p>
A PR that implements <code>parallel_map</code> in lib/task.ml that includes an
optional chunk size parameter.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org6cf9883" class="outline-5">
<h5 id="org6cf9883">Completed</h5>
<div class="outline-text-5" id="text-org6cf9883">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/retro-httpaf-bench/pull/13">ocaml-multicore/retro-httpaf-bench#13</a>
Update EIO for performance improvements, multiple domains
</p>

<p>
<code>httpf-eio</code> has been enhanced with performance improvements when
running with multiple domains. The results on an 8-core VM with 100
connections and 5 second runs is shown below:
</p>


<div id="org260e305" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/4/44187373b7e054af11e2a6fe9b177545fc0d79f2.png" alt="44187373b7e054af11e2a6fe9b177545fc0d79f2.png" />
</p>
</div>

<p>
The following illustration is from a VM for 1000 connections and 60
second runs:
</p>


<div id="orgf85cef9" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/2/2866c07ef5956bc5451abb214d0947103e2fb268.png" alt="2866c07ef5956bc5451abb214d0947103e2fb268.png" />
</p>
</div>

<p>
The results with <code>GOMAXPROCS=3</code> for three OCaml domains is as follows:
</p>


<div id="orgb4f1f9c" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/9/963e6df72ed1e12ff16f0f3a1a34c294ca11ddd4.png" alt="963e6df72ed1e12ff16f0f3a1a34c294ca11ddd4.png" />
</p>
</div></li>

<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-uring/pull/36">ocaml-multicore/ocaml-uring#36</a>
Update to cstruct 6.0.1
</p>

<p>
<code>ocaml-uring</code> now uses <code>Cstruct.shiftv</code> and has been updated to use cstruct.6.0.1.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/pull/41">ocaml-multicore/domainslib#41</a>
Use the master branch in the link to usage examples
</p>

<p>
The README.md file has been updated to point to the sample programs in the master branch that use the new <code>num_additional_domains</code> argument label.
</p></li>

<li>The Multicore OCaml concurrency bug detection tool named  <a href="https://github.com/ocaml-multicore/parafuzz">ParaFuzz</a> is now available in GitHub as Free/Libre and Open Source Software.</li>

<li>Tezos is a proof-of-stake distributed consensus platform designed to evolve, and is written in OCaml. The version of the <a href="https://github.com/ocaml-multicore/tezos">Tezos</a> daemon that now runs on Multicore OCaml is also available in GitHub as a work-in-progress fork.</li>
</ul>
</div>

<div id="outline-container-org36e8797" class="outline-6">
<h6 id="org36e8797">Eio</h6>
<div class="outline-text-6" id="text-org36e8797">
<p>
The <code>eio</code> library provides an effects-based parallel IO stack for
Multicore OCaml.
</p>
</div>

<ul class="org-ul">
<li><a id="orgcf358b6"></a>Completed<br />
<div class="outline-text-7" id="text-orgcf358b6">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/68">ocaml-multicore/eio#68</a>
Add eio_luv backend
</p>

<p>
We now use <code>luv</code>, which has OCaml/Reason bindings to libuv, to
provide a cross-platform default backend for eio.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/72">ocaml-multicore/eio#72</a>
Add non-deterministic to abstract domain socket test
</p>

<p>
The inclusion of <code>non-deterministic=command</code> to disable a regular
<code>dune runtest</code> for the failing abstract domain socket test.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/73">ocaml-multicore/eio#73</a>
Work-around for <code>io_uring</code> bug reading from terminals
</p>

<p>
A work-around to fix <code>IORING_OP_READ</code> that causes <code>io_uring_enter</code>
to block the entire process when reading from a terminal.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/74">ocaml-multicore/eio#74</a>
Don't crash when receiving a signal
</p>

<p>
A patch to receive a signal and not crash in
<code>lib_eio_linux/eio_linux.ml</code>.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/75">ocaml-multicore/eio#75</a>
Add Eio.Stream
</p>

<p>
The <code>Stream</code> module has been added to Eio that implements bounded
queues with cancellation.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/76">ocaml-multicore/eio#76</a>
Link to some eio examples
</p>

<p>
The README.md has been updated to point to existing eio example
project sources.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/77">ocaml-multicore/eio#77</a>
Disable opam file generation due to dune bug
</p>

<p>
The opam file generation with dune.2.9.0 is broken as dune does not
have the <code>subst --root</code> option. Hence, the same is now disabled in
the eio build steps.
</p></li>

<li><p>
<a href="https://github.com/ocaml-multicore/eio/pull/79">ocaml-multicore/eio#79</a>
Initial edits for consistency, formatting and clarity
</p>

<p>
Changes in the README.md file for consistency, syntax formatting and
for clarity.
</p></li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org3952295" class="outline-4">
<h4 id="org3952295">Benchmarking</h4>
<div class="outline-text-4" id="text-org3952295">
</div>
<div id="outline-container-org518c218" class="outline-5">
<h5 id="org518c218">Sandmark</h5>
<div class="outline-text-5" id="text-org518c218">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/251">ocaml-bench/sandmark#251</a>
Update dependencies to work with 4.14.0+trunk
</p>

<p>
A series of patches that update the dependencies in Sandmark to
build 4.14.0+trunk with dune.2.9.0.
</p></li>

<li>We are continuing to integrate and test building of 4.12.0 OCaml
variants with Sandmark-2.0 with <code>current-bench</code> for both sequential
and parallel benchmarks.</li>
</ul>

<p>
Our thanks to all the OCaml users, developers and contributors in the
community for their valuable time and support to the project. Stay
safe!
</p>
</div>
</div>
</div>

<div id="outline-container-org0f77f42" class="outline-4">
<h4 id="org0f77f42">Acronyms</h4>
<div class="outline-text-4" id="text-org0f77f42">
<ul class="org-ul">
<li>GC: Garbage Collector</li>
<li>GDB: GNU Project Debugger</li>
<li>HTTP: Hypertext Transfer Protocol</li>
<li>ICFP: International Conference on Functional Programming</li>
<li>IO: Input/Output</li>
<li>PR: Pull Request</li>
<li>OPAM: OCaml Package Manager</li>
<li>VM: Virtual Machine</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-11" class="outline-2">
<h2 id="11">Higher-kinded bounded polymorphism</h2>
<div class="outline-text-2" id="text-11">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2021-09/msg00005.html">https://sympa.inria.fr/sympa/arc/caml-list/2021-09/msg00005.html</a>
</p>
</div>

<div id="outline-container-org70e727a" class="outline-3">
<h3 id="org70e727a">Oleg announced</h3>
<div class="outline-text-3" id="text-org70e727a">
<p>
Abstraction over polymorphic types is something that one comes across
from time to time, especially when implementing operations generic
over collections, or embedding typed DSLs (particularly in
tagless-final style). One immediately learns that OCaml does not have
higher-kinded type variables (type variables that range over type
constructors like list and array); does not permit type constructors
appearing by themselves, without being applied to the right number of
arguments; and restricts polymorphic types in other ways (e.g., not
allowing them in type constraints of package types). One soon learns
that the module system (using functors) is a way to realize
higher-kinded polymorphism in OCaml. It takes longer to learn it is
not the only way, however.
</p>

<p>
The following web page is written to speed up this learning. It
collects what I have learned and rediscovered on this topic, arranged
into a single story and with new explanations and attributions (and
occasionally, new variations).
</p>

<p>
<a href="http://okmij.org/ftp/ML/higher-kind-poly.html">http://okmij.org/ftp/ML/higher-kind-poly.html</a>
</p>

<p>
One interesting discovery is that some problems that ostensibly
require higher-kinded polymorphism really do not.
</p>

<p>
The article comes with the complete accompanying code.
</p>
</div>
</div>
</div>




<div id="outline-container-12" class="outline-2">
<h2 id="12">OCaml Workshop 2021: Live Stream</h2>
<div class="outline-text-2" id="text-12">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-workshop-2021-live-stream/8366/9">https://discuss.ocaml.org/t/ocaml-workshop-2021-live-stream/8366/9</a>
</p>
</div>

<div id="outline-container-org0a12199" class="outline-3">
<h3 id="org0a12199">Shakthi Kannan announced</h3>
<div class="outline-text-3" id="text-org0a12199">
<p>
The direct links (for search results) to the videos of the talks from the OCaml Workshop at ICFP 2021 are listed
below:
</p>
<ul class="org-ul">
<li>GopCaml A structural Editor for OCaml (<a href="https://www.youtube.com/watch?v=KipRuiLXYEo">https://www.youtube.com/watch?v=KipRuiLXYEo</a>)</li>

<li>OCaml and Python getting the best of both worlds (<a href="https://www.youtube.com/watch?v=ZseAgG9kmMw">https://www.youtube.com/watch?v=ZseAgG9kmMw</a>)</li>

<li>Adapting the OCaml ecosystem for Multicore OCaml (<a href="https://www.youtube.com/watch?v=MfjMpznU4nM">https://www.youtube.com/watch?v=MfjMpznU4nM</a>)</li>

<li>Parafuzz coverage guided Property Fuzzing for Multicore OCaml programs (<a href="https://www.youtube.com/watch?v=GZsUoSaIpIs">https://www.youtube.com/watch?v=GZsUoSaIpIs</a>)</li>

<li>Wibbily Wobbly Timey Camly (<a href="https://www.youtube.com/watch?v=3Jpla-vWLR4">https://www.youtube.com/watch?v=3Jpla-vWLR4</a>)</li>

<li>Leveraging Formal Specifications to Generate Fuzzing Suites (<a href="https://www.youtube.com/watch?v=-6fpLF_n7cA">https://www.youtube.com/watch?v=-6fpLF_n7cA</a>)</li>

<li>Probabilistic resource limits using StatMemprof (<a href="https://www.youtube.com/watch?v=9OES0qe_OvE">https://www.youtube.com/watch?v=9OES0qe_OvE</a>)</li>

<li>Continuous Benchmarking for OCaml Projects (<a href="https://www.youtube.com/watch?v=folKaWN7jy4">https://www.youtube.com/watch?v=folKaWN7jy4</a>)</li>

<li>A Multiverse of Glorious Documentation (<a href="https://www.youtube.com/watch?v=qUMbbKwagaU">https://www.youtube.com/watch?v=qUMbbKwagaU</a>)</li>

<li>Digodoc and Docs (<a href="https://www.youtube.com/watch?v=gODavKhyd2I">https://www.youtube.com/watch?v=gODavKhyd2I</a>)</li>

<li>Keynote - Xavier Leroy: 25 years of OCaml (<a href="https://www.youtube.com/watch?v=PGJdHUqgX7o">https://www.youtube.com/watch?v=PGJdHUqgX7o</a>)</li>

<li>Experiences with Effects (<a href="https://www.youtube.com/watch?v=k3oQwpyXmpo">https://www.youtube.com/watch?v=k3oQwpyXmpo</a>)</li>

<li>opam-bin Binary Packages with Opam (<a href="https://www.youtube.com/watch?v=vadoOkgEs6w">https://www.youtube.com/watch?v=vadoOkgEs6w</a>)</li>

<li>Love a readable language interpreted by blockchain (<a href="https://www.youtube.com/watch?v=um55QNwz8o4">https://www.youtube.com/watch?v=um55QNwz8o4</a>)</li>

<li>From 2n+1 to n (<a href="https://www.youtube.com/watch?v=3xRGeJSslPE">https://www.youtube.com/watch?v=3xRGeJSslPE</a>)</li>

<li>Property based testing for OCaml through Coq (<a href="https://www.youtube.com/watch?v=w-dTTlVwVgY">https://www.youtube.com/watch?v=w-dTTlVwVgY</a>)</li>

<li>Safe protocol updates via propositional logic (<a href="https://www.youtube.com/watch?v=ckN1YREM3Gk">https://www.youtube.com/watch?v=ckN1YREM3Gk</a>)</li>

<li>Binary Analysis Program (BAP) (<a href="https://www.youtube.com/watch?v=S9XPI1fHWqM">https://www.youtube.com/watch?v=S9XPI1fHWqM</a>)</li>

<li>Semgrep a fast lightweight polyglot static analysis tool to find bugs (<a href="https://www.youtube.com/watch?v=q7kuvyAOk78">https://www.youtube.com/watch?v=q7kuvyAOk78</a>)</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-13" class="outline-2">
<h2 id="13">Windows-friendly OCaml 4.12 distribution 2nd preview release (0.2.0)</h2>
<div class="outline-text-2" id="text-13">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-windows-friendly-ocaml-4-12-distribution-2nd-preview-release-0-2-0/8488/1">https://discuss.ocaml.org/t/ann-windows-friendly-ocaml-4-12-distribution-2nd-preview-release-0-2-0/8488/1</a>
</p>
</div>

<div id="outline-container-orgcf7c494" class="outline-3">
<h3 id="orgcf7c494">jbeckford announced</h3>
<div class="outline-text-3" id="text-orgcf7c494">
<p>
I am pleased to announce the second preview release of the <b>Diskuv OCaml</b> (“DKML”) distribution. <b>Diskuv OCaml</b> is an
OCaml distribution focused on a) secure, cross-platform software development and b) ease of use for language learners
and professional developers.
</p>

<p>
Thanks to everybody who tried out the first preview! The first preview was geared towards Windows users and
distributed Microsoft compiled packages. The Microsoft compiler is critical for first-class Windows support: many
popular C libraries like <a href="https://github.com/libuv/libuv/blob/v1.x/SUPPORTED_PLATFORMS.md#supported-platforms">'libuv' support the Microsoft compiler as <b>Tier
1</b></a> but relegate the GCC
compiler to an unsupported third-class citizen.
</p>

<p>
This second preview has the same Windows users in mind, with several new features and improvements. There are too
many changes to list here, but some notable ones are:
</p>
<ul class="org-ul">
<li>(Critical security fix) The MSYS2 installer is now downloaded over HTTPS and its SHA256 checksum is validated.</li>
<li>Removed auto-installation of Cygwin and removed the 16GB auto-download of two Docker images. This cuts down the install time in half (except for some people; see sharp edges below), and should reduce the frequency of installation failures caused by limited or flaky networks.</li>
<li>Autodetection and use of existing Visual Studio instances on your machine if the installations are compatible with DKML.</li>
<li>Clarified that students are covered under free personal licenses in a prominent location in the main READMEs.</li>
<li>The ctypes, mirage-crypto and feather packages are available for testing in a <b>highly unstable</b> form. That means support may be deprecated in a future release, but today they all build + pass tests with the Microsoft compiler.</li>
</ul>

<p>
There are also some sharp edges in this preview. The major ones are:
</p>
<ul class="org-ul">
<li>On some machines (especially Docker containers or VMs) one of the installation commands can peg your CPU for up to 2 hours while making incredibly slow progress.</li>
<li>There are backwards incompatible changes. See the release notes linked below.</li>
</ul>

<p>
<a href="https://gitlab.com/diskuv/diskuv-ocaml/-/releases/v0.2.0#020-2021-09-13">The Version 0.2.0 release notes</a> has
instructions for upgrading and also a detailed list of changes. Instructions for installing from scratch and updated
documentation are still at the <a href="https://diskuv.gitlab.io/diskuv-ocaml/">Diskuv OCaml documentation site</a>.
</p>

<p>
<b>What's Next?</b>
</p>

<p>
Barring some critical security updates, the next preview will focus on Linux and macOS parity, and the removal of the
sharp edges. Will post another "[ANN]" and cross-link on Twitter when that preview is
ready.
</p>

<p>
In the meantime, I would appreciate feedback!
</p>
</div>
</div>
</div>




<div id="outline-container-org58361b5" class="outline-2">
<h2 id="org58361b5">Old CWN</h2>
<div class="outline-text-2" id="text-org58361b5">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org420f6bb">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
