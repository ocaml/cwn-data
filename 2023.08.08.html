<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-08-08 Tue 10:50 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2023.08.01.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2023.08.15.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of August 01 to 08, 2023.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">dune 3.9.0</a></li>
<li><a href="#2">Dune 3.10.0</a></li>
<li><a href="#3">decimal 1.0.0</a></li>
<li><a href="#4">earlybird 1.2.0 – revival of a debugger</a></li>
<li><a href="#5">First release candidate for OCaml 5.1.0</a></li>
<li><a href="#6">Revamp the getting started tutorials in ocaml.org</a></li>
<li><a href="#7">First alpha release of Simple_httpd</a></li>
<li><a href="#8">Cairn: A derivation explorer and logger for Menhir Parser</a></li>
<li><a href="#9">OCaml Workshop 2023 &#x2013; presentation deadline on June 1st, online attendance option</a></li>
<li><a href="#10">13th MirageOS retreat in Marrakesh, Morocco (November 20th - 26th 2023)</a></li>
<li><a href="#11">kcas and kcas_data 0.6.1: STM and compositional lock-dree data structures</a></li>
<li><a href="#org684150d">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">dune 3.9.0</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-3-9-0/12530/5">https://discuss.ocaml.org/t/ann-dune-3-9-0/12530/5</a>
</p>
</div>

<div id="outline-container-org0da2e55" class="outline-3">
<h3 id="org0da2e55">Etienne Millon announced</h3>
<div class="outline-text-3" id="text-org0da2e55">
<p>
And to conclude the 3.9.x series:
</p>

<p>
The fix to <code>sendfile</code> in 3.9.2 was not quite enough so here is the last part of the fix. It brings compatibility
with filesystems where <code>sendfile</code> is not available, in particular when <code>ecryptfs</code> is used.
</p>
</div>

<div id="outline-container-orgb31fc95" class="outline-4">
<h4 id="orgb31fc95">Fixes</h4>
<div class="outline-text-4" id="text-orgb31fc95">
<ul class="org-ul">
<li>Fix flushing when using <code>sendfile</code> fallback (#8288, fixes #8284, @alan-j-hu)</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Dune 3.10.0</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dune-3-10-0/12738/1">https://discuss.ocaml.org/t/ann-dune-3-10-0/12738/1</a>
</p>
</div>

<div id="outline-container-org80801c2" class="outline-3">
<h3 id="org80801c2">Etienne Millon announced</h3>
<div class="outline-text-3" id="text-org80801c2">
<p>
We&rsquo;re happy to announce the release of Dune 3.10.0. It comes with some internal
fixes as well as some interesting features:
</p>

<ul class="org-ul">
<li>some changes in <code>dune describe</code> that will allow a better implementation of <a href="https://github.com/ocurrent/opam-dune-lint">opam-dune-lint</a> to check the consistency between library and package dependencies</li>
<li>more commands made available under <code>dune show</code> for a more consistent command line interface</li>
</ul>

<p>
Here is the full changelog:
</p>
</div>

<div id="outline-container-org78dd2fb" class="outline-4">
<h4 id="org78dd2fb">Added</h4>
<div class="outline-text-4" id="text-org78dd2fb">
<ul class="org-ul">
<li>Add <code>dune show rules</code> as alias of the <code>dune rules</code> command. (#8000, @Alizter)</li>
<li>Add <code>dune show installed-libraries</code> as an alias of the <code>dune installed-libraries</code> command. (#8135, @Alizter)</li>
<li>Add <code>dune build --dump-gc-stats FILE</code> argument to dump garbage collection stats to a named file. (#8072, @Alizter)</li>
<li>Add <code>dune describe package-entries</code> to print all package entries (#7480, @moyodiallo)</li>
</ul>
</div>
</div>

<div id="outline-container-orge0ce590" class="outline-4">
<h4 id="orge0ce590">Fixed</h4>
<div class="outline-text-4" id="text-orge0ce590">
<ul class="org-ul">
<li>Fix <code>%{deps}</code> to expand properly in <code>(cat ...)</code> when containing 2 or more items. (#8196, @Alizter)</li>
<li>Fix the <code>severity</code> of error messages sent over RPC which was missing. (#8193, @Alizter)</li>
<li>Fix bug with ppx and Reason syntax due to missing dependency in sandboxed action (#7932, fixes #7930, @Alizter)</li>
</ul>
</div>
</div>

<div id="outline-container-org24c0f4a" class="outline-4">
<h4 id="org24c0f4a">Changed</h4>
<div class="outline-text-4" id="text-org24c0f4a">
<ul class="org-ul">
<li>Improve <code>dune describe external-lib-deps</code> by adding the internal dependencies for more information. (#7478, @moyodiallo)</li>
<li>Re-enable background file digests on Windows. The files are now open in a way that prevents race condition around deletion. (#8262, fixes #8268, @emillon)</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">decimal 1.0.0</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-decimal-1-0-0/12739/1">https://discuss.ocaml.org/t/ann-decimal-1-0-0/12739/1</a>
</p>
</div>

<div id="outline-container-org4ac8939" class="outline-3">
<h3 id="org4ac8939">Yawar Amin announced</h3>
<div class="outline-text-3" id="text-org4ac8939">
<p>
Hi, I am pleased to announce that decimal 1.0.0 has been released on opam-repository:
<a href="https://ocaml.org/p/decimal/1.0.0">https://ocaml.org/p/decimal/1.0.0</a>
</p>

<p>
(decimal is a somewhat-complete port to OCaml of the Python
<a href="https://docs.python.org/3/library/decimal.html"><code>decimal</code></a> module, contributions welcome to port more
functionality!)
</p>

<p>
There is a breaking change in this release. We have removed the <code>?eng:bool</code> parameter from the <code>Decimal.to_string</code>
function, and replaced it with a more general-purpose <code>?format</code> parameter:
<a href="https://yawaramin.github.io/ocaml-decimal/decimal/Decimal/index.html#val-to_string">https://yawaramin.github.io/ocaml-decimal/decimal/Decimal/index.html#val-to_string</a>
</p>

<p>
Now the fun part: @zbaylin has added a new <code>ppx_decimal</code> which enables a convenient literal syntax for decimals:
e.g. <code>1.1m</code> is automatically desugared to <code>Decimal.of_string "1.1"</code>. Thanks Zach!
</p>

<p>
Also thanks @anmonteiro for showing me a dune trick to help everything build successfully in Opam CI.
</p>

<p>
Enjoy!
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">earlybird 1.2.0 – revival of a debugger</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-earlybird-1-2-0-revival-of-a-debugger/12741/1">https://discuss.ocaml.org/t/ann-earlybird-1-2-0-revival-of-a-debugger/12741/1</a>
</p>
</div>

<div id="outline-container-orgae84cd0" class="outline-3">
<h3 id="orgae84cd0">Simmo Saan announced</h3>
<div class="outline-text-3" id="text-orgae84cd0">
<p>
The lacking state of OCaml debuggers has been a rather hot topic recently, so I&rsquo;m particularly excited to announce
the release of <a href="https://github.com/hackwaly/ocamlearlybird">earlybird 1.2.0</a>.
</p>

<p>
Many of you might be familiar with OCaml earlybird: a debugger which supports Debug Adapter Protocol, allowing it
to be used directly from VS Code&rsquo;s builtin debugging GUI (among possibly other IDEs). This phenomenal tool was
developed by @hackwaly.
</p>

<p>
Unfortunately, for a long time it wasn&rsquo;t updated to support newer versions of OCaml and fell into despair. Since
there&rsquo;s still (or even moreso) need for OCaml debugging tools, it would be a real shame if earlybird was dead
forever. Therefore, recently I volunteered to pick up its maintenance and get it up and running again.
</p>

<p>
I&rsquo;m hereby announcing the release of <a href="https://github.com/hackwaly/ocamlearlybird">earlybird 1.2.0</a> which supports
OCaml 4.12, 4.13, 4.14 and 5.0. Moreover, I extended the VS Code OCaml Platform extension (since version 1.13) to
directly be able to launch earlybird:
<a href="https://github.com/ocamllabs/vscode-ocaml-platform/#debugging-ocaml-programs-experimental">https://github.com/ocamllabs/vscode-ocaml-platform/#debugging-ocaml-programs-experimental</a>. This brings the handling
of a DAP for OCaml into the same extension which handles the LSP for OCaml. <b>Instructions are available at the
above link!</b>
</p>

<p>
Note that the OCaml Platform integration is still experimental. I invite everyone to try out the new release of
earlybird via the new VS Code integration. The main purpose of this announcement is to get real-world testing for
both sides and hopefully also get more people interested/involved.
</p>

<p>
Beware that this revival of earlybird comes purely out of my free time, so don&rsquo;t expect any big developments now.
So far I did what I could to get earlybird reasonably working again and I&rsquo;ll do my best to keep it from degrading.
I think it&rsquo;s still valuable to have earlybird in the ecosystem until maybe something better comes along. However,
if working on earlybird sparks anyone&rsquo;s interest, I&rsquo;ll gladly accept bug fixes and improvements, all towards a
better OCaml ecosystem.
</p>

<p>
A final note about earlybird: it uses the (undocumented) protocol of <code>ocamldebug</code> to communicate with a bytecode
executable. Thus, it comes with all the limitations that <code>ocamldebug</code> and its protocol have.
Notably, don&rsquo;t get too excited about OCaml 5.0 support: debugging is supported only until a domain is spawned
(<a href="https://github.com/ocaml/ocaml/pull/11065#pullrequestreview-975383464">https://github.com/ocaml/ocaml/pull/11065#pullrequestreview-975383464</a>).
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">First release candidate for OCaml 5.1.0</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/first-release-candidate-for-ocaml-5-1-0/12742/1">https://discuss.ocaml.org/t/first-release-candidate-for-ocaml-5-1-0/12742/1</a>
</p>
</div>

<div id="outline-container-org370f578" class="outline-3">
<h3 id="org370f578">octachron announced</h3>
<div class="outline-text-3" id="text-org370f578">
<p>
The release of OCaml 5.1.0 is imminent.
As a final step, we are publishing a release candidate to check that everything is in order before the release in
the upcoming week(s).
</p>

<p>
If you find any bugs, please report them on <a href="https://github.com/ocaml/ocaml/issues">OCaml&rsquo;s issue tracker</a>.
</p>

<p>
Compared to the beta release, this release contains one safe runtime fix, and two configuration tweaks.
</p>

<p>
The full change log for OCaml 5.1.0 is available <a href="https://github.com/ocaml/ocaml/blob/5.1/Changes">on GitHub</a>
A short summary of the changes since the beta release is also available below.
</p>
</div>

<div id="outline-container-org1b667cf" class="outline-4">
<h4 id="org1b667cf">Installation Instructions</h4>
<div class="outline-text-4" id="text-org1b667cf">
<p>
The base compiler can be installed as an opam switch with the following commands on opam 2.1 and later:
</p>
<div class="org-src-container">
<pre class="src src-shell">opam update
opam switch create 5.1.0~rc1
</pre>
</div>

<p>
The source code for the release candidate is also directly available on:
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/archive/5.1.0-rc1.tar.gz">GitHub</a></li>
<li><a href="https://caml.inria.fr/pub/distrib/ocaml-5.1/ocaml-5.1.0~rc1.tar.gz">OCaml archives at Inria</a></li>
</ul>
</div>

<ul class="org-ul">
<li><a id="org93d7ff2"></a>Fine-Tuned Compiler Configuration<br />
<div class="outline-text-5" id="text-org93d7ff2">
<p>
If you want to tweak the configuration of the compiler, you can switch to the option variant with:
</p>
<div class="org-src-container">
<pre class="src src-shell">opam update
opam switch create &lt;switch_name&gt; ocaml-variants.5.1.0~rc1+options &lt;option_list&gt;
</pre>
</div>
<p>
where <code>&lt;option_list&gt;</code> is a comma-separated list of <code>ocaml-option-*</code> packages. For instance, for a <code>flambda</code> and
<code>no-flat-float-array</code> switch:
</p>
<div class="org-src-container">
<pre class="src src-shell">opam switch create 5.1.0~rc1+flambda+nffa ocaml-variants.5.1.0~rc1+options ocaml-option-flambda
ocaml-option-no-flat-float-array
</pre>
</div>

<p>
All available options can be listed with <code>opam search ocaml-option</code>.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgc8c7069" class="outline-4">
<h4 id="orgc8c7069">Changes Since the Beta Release</h4>
<div class="outline-text-4" id="text-orgc8c7069">
</div>
<ul class="org-ul">
<li><a id="orge1f77cf"></a>Bug Fix<br />
<div class="outline-text-5" id="text-orge1f77cf">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12445">#12445</a>: missing GC root registrations in runtime/io.c (Gabriel Scherer, review by Xavier Leroy and Jeremy Yallop)</li>
</ul>
</div>
</li>

<li><a id="org2aea208"></a>Configuration Fix (openBSD)<br />
<div class="outline-text-5" id="text-org2aea208">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12372">#12372</a>: Pass option -no-execute-only to the linker for OpenBSD &gt;= 7.3 so that code sections remain readable, as needed for closure marshaling. (Xavier Leroy and Anil Madhavapeddy, review by Anil Madhavapeddy and Sébastien Hinderer)</li>
</ul>
</div>
</li>

<li><a id="orgaf6fda8"></a>Tool Fix (ocamlmktop)<br />
<div class="outline-text-5" id="text-orgaf6fda8">
<ul class="org-ul">
<li><p>
#11745, +<a href="https://github.com/ocaml/ocaml/issues/12358">#12358</a>: Debugger and toplevels: embed printer types rather than
reading their representations from topdirs.cmi at runtime.
This change also removes the ocamlmktop initialization module introduced
in <a href="https://github.com/ocaml/ocaml/issues/11382">#11382</a> which was no longer useful.
This change breaks toplevel scripts relying on the visibility of <code>Topdirs</code>
in the initial toplevel environment without loading <code>topfind</code>.
Since the opam default <code>.ocamlinit</code> file loads <code>topfind</code>, it is expected
that only scripts run with <code>ocaml -noinit</code> are affected.
For those scripts, accessing <code>Topdirs</code> now requires the <code>compiler-libs</code>
directory to be added to the toplevel search path with
</p>
<pre class="example" id="orga1a023a">
      #directory "+compiler-libs";;
</pre>
<p>
as was already the case for the other modules in the toplevel interface
library.
(Sébastien Hinderer, review by Florian Angeletti, Nicolás Ojeda Bär and
Gabriel Scherer)
</p></li>
</ul>
</div>
</li>

<li><a id="org6420a7a"></a>Documentation Changes<br />
<div class="outline-text-5" id="text-org6420a7a">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12201">#12201</a>: in the tutorial on modules, replace priority queue example by
a simpler example based on FIFO queues.
(Xavier Leroy, review by Anil Madhavapeddy and Nicolás Ojeda Bär).</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12352">#12352</a>: Fix a typo in the documentation of Arg.write_arg
(Christophe Raffalli, review by Florian Angeletti)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">Revamp the getting started tutorials in ocaml.org</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/revamp-the-getting-started-tutorials-in-ocaml-org/12749/1">https://discuss.ocaml.org/t/revamp-the-getting-started-tutorials-in-ocaml-org/12749/1</a>
</p>
</div>

<div id="outline-container-org3ba3997" class="outline-3">
<h3 id="org3ba3997">Cuihtlauac Alvarado announced</h3>
<div class="outline-text-3" id="text-org3ba3997">
<p>
With the help of many, but mostly @sabine, @professor.rose and @tmattio, I&rsquo;ve attempted to revamp two of the
 “getting started” tutorials from ocaml.org
</p>

<p>
This PR contains the state of this work: <a href="https://github.com/ocaml/ocaml.org/pull/1431">https://github.com/ocaml/ocaml.org/pull/1431</a>
</p>

<p>
In our opinion, the getting started tutorials should include three mandatory tutorials
</p>
<ol class="org-ol">
<li>Install</li>
<li>A Tour of OCaml</li>
<li>How to Write an OCaml Program</li>
</ol>

<p>
The fourth, dealing with installation options on Windows, being optional for apparent reasons.
</p>

<p>
This PR only covers parts 2 &amp; 3 because they were mostly written from scratch. We&rsquo;re also working on an update of
the Install tutorial, but since it is not a rewrite, it felt more natural to put it in a separate PR. Although it
is not a draft, I must say that this is an early version of the text. I hope you will understand.
</p>

<p>
Here is the main learning idea. That&rsquo;s a breadth-first traversal of the rabbit holes.
</p>

<p>
A Tour of OCaml provides an overview of the basic language features. Here, the goal is not to address more topics
but to reduce to the core of what can be learnt fast, only using utop, will always be useful later and helps
building an overall view of OCaml.
</p>

<p>
How to Write an OCaml Program has the same approach, except instead of using utop, the reader should write files
and command lines. It&rsquo;s a compiler story, while the previous one was an interpreter story.
</p>

<p>
It is early August. In the northern hemisphere, we should enjoy the sea, the mountains, our friends or culture. I
will be hiking soon. Reviewing tutorials is probably not the greatest summer read (Off topic: I&rsquo;m in Martha Wells
Murderbot Diaries and enjoying it). But if you&rsquo;re in the mood for this, we&rsquo;d love your feedback.
</p>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">First alpha release of Simple_httpd</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/first-alpha-release-of-simple-httpd/12753/1">https://discuss.ocaml.org/t/first-alpha-release-of-simple-httpd/12753/1</a>
</p>
</div>

<div id="outline-container-orge0835af" class="outline-3">
<h3 id="orge0835af">Christophe Raffalli announced</h3>
<div class="outline-text-3" id="text-orge0835af">
<p>
I am pleased to announce the first alpha release of Simple_httpd, available on
github and opam. It is a library to produce web server and sites.
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://raffalli.eu/simple_httpd/simple_httpd">https://raffalli.eu/simple_httpd/simple_httpd</a></li>
<li>Github       : <a href="https://github.com/craff/simple_httpd">https://github.com/craff/simple_httpd</a></li>
</ul>

<p>
WARNING: currently we need the latest master of ocaml-ssl.
It requires Linux and OCaml 5.0, if you have this,
you can install with:
</p>
<pre class="example" id="orgac91365">
  opam pin add https://github.com/savonet/ocaml-ssl#master -k git
  opam pin add https://github.com/craff/simple_httpd -k git
</pre>
<p>
And test the template site (very simple, as it is an empty shell to start
from) with
</p>
<pre class="example" id="orgfcd6571">
  cd source_dir/template
  dune exec -- ./server.exe --log-folder ./log
</pre>
<p>
The template is also documented at <a href="https://raffalli.eu/simple_httpd/simple_httpd/template.html">https://raffalli.eu/simple_httpd/simple_httpd/template.html</a>
</p>

<p>
It aims at
</p>

<ul class="org-ul">
<li>Being simple to use and rather complete (support ssl, <b>chaml</b>: an equivalent of php,
but in OCaml and compiled, status and statistics, authentication, cookies, &#x2026;).</li>

<li><p>
Being fast: our latencies and number of requests per seconds are very good,
thanks to using linux epoll, eventfd, OCaml&rsquo;s effects and domains, &#x2026;
The first page of the documentation shows some graphics, but here is a small
comparison of latencies for a small 1kb file:
</p>
<pre class="example" id="orgfcd0397">
                 min        mean      50%       90%       95%      99%      max
  Simple_httpd  79.478µs 242.006µs 237.576µs 294.802µs 305.68µs 329.352µs  3.049ms
  Nginx        170.551µs 328.904µs 309.577µs 384.313µs 400.51µs 482.987µs 42.003ms
  Apaches      196.321µs 466.439µs 452.265µs 545.121µs 590.05µs 913.527µs  6.372ms
</pre>
<p>
And a small <i>chaml</i> (our equivalent of php) against <i>php-fpm</i> from <i>apache</i>
and <i>nginx</i>:
</p>
<pre class="example" id="org3d4ef49">
  Simple_httpd 146.944µs 285.044µs 280.552µs 341.175µs 356.497µs 507.305µs  8.069ms
  Nginx        411.151µs 793.437µs 653.131µs 796.300µs 882.268µs     2.9ms 44.504ms
  Apache       688.765µs   2.342ms 950.647µs   1.201ms   1.321ms   5.844ms   1.171s
</pre>
<p>
These were obtained with vegeta at 1000 requests/s. Simple_httpd offers much
more stable latencies under charge than nginx or apache.
</p>

<p>
If you want your own measurments, you need to setup nginx/php on ports 7080
and 7443, an apache/php on port 80 and 443. Then, you can run [./bench.sh]
from the [tests] folder of the source tree. I would be happy to have
measurments for a big server with more than 20 cores.
</p></li>

<li>Currently only linux is supported.</li>
</ul>

<p>
Help, comments, bug reports, &#x2026; would be greatly appreciated, as this is
alpha release, it is time for you to propose change in the design of the
library.
</p>

<p>
My website <a href="https://raffalli.eu">https://raffalli.eu</a> and therefore simple_httpd documentation are
powered by simple_httpd (do we name this bootstrap ;-) ?
</p>
</div>
</div>


<div id="outline-container-orga6cf35c" class="outline-3">
<h3 id="orga6cf35c">Simon Cruanes asked and Christophe Raffalli replied</h3>
<div class="outline-text-3" id="text-orga6cf35c">
<blockquote>
<p>
It&rsquo;s be interesting to compare simple_httpd with tiny_httpd + moonpool
(see: <a href="https://github.com/c-cube/tiny-httpd-moonpool-bench/">https://github.com/c-cube/tiny-httpd-moonpool-bench/</a>) :-). I
wonder how much the two diverged, I wasn&rsquo;t expecting simple_httpd to use
epoll!
</p>
</blockquote>

<p>
Very well indeed. Here is both latencies at 2500 req/s using vegeta:
</p>

<ul class="org-ul">
<li><p>
Tiny httpd+moonpool
</p>
<pre class="example" id="org03b4ab8">
  Latencies     [min, mean, 50, 90, 95, 99, max]  97.845µs, 197.1µs, 194.848µs, 251.333µs, 265.961µs, 470.347µs, 1.621ms
</pre></li>
<li><p>
Simple_httpd
</p>
<pre class="example" id="org4a221d8">
  Latencies     [min, mean, 50, 90, 95, 99, max]  98.27µs, 176.478µs, 169.674µs, 229.443µs, 243.888µs, 279.937µs, 2.008ms
</pre></li>
</ul>

<p>
For the number of requests per seconds with wrk, we are at 139675 for tiny+moonpool and 167819 for simple_httpd.
</p>

<p>
Tiny is a bit better for the worst case. Simple_httpd is better in average and for all quantile. I think I am
missing a preemptive scheduler that I could get if there where some way to perform an effect periodically in OCaml.
</p>

<p>
Moonpool is a very good idea actually to get a preemptive scheduler with domains !
</p>

<p>
I should also say that simple_httpd routing is now looking at the Host field, address and port, not only the path
and method, It has logging by type and level (not just on/off) and maybe a few other extra feature that do not come
to my mind now but have an impact for an hello request.
</p>

<p>
On the side of memory, VSZ=1032908Ko RSS=27492Ko for simple_https and VSZ=999288Ko RSS=401804Ko  for tiny All this
is very reasonnable but threads use much more resident memory.
</p>
</div>
</div>
</div>




<div id="outline-container-8" class="outline-2">
<h2 id="8">Cairn: A derivation explorer and logger for Menhir Parser</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/cairn-a-derivation-explorer-and-logger-for-menhir-parser/12757/1">https://discuss.ocaml.org/t/cairn-a-derivation-explorer-and-logger-for-menhir-parser/12757/1</a>
</p>
</div>

<div id="outline-container-orga819fe9" class="outline-3">
<h3 id="orga819fe9">Vincent Penelle announced</h3>
<div class="outline-text-3" id="text-orga819fe9">
<p>
I am happy to announce the release of a small tool I&rsquo;ve implemented for explaining how a LR parser works for my
students. The tool is called cairn, and lets you visualize the step by step building of the parsing tree of the
input of a parser, and can be used with any grammar written with menhir (basically, you provide menhir generated
modules and cmly file to a functor from cairn and you&rsquo;re all set). It can either generate a text file or launch a
small terminal user interface to explore the execution of the parser step by step.
It is probably only useful on small inputs, and mainly for teaching purposes, but I thought it might be useful to
share.
</p>

<p>
The homepage of the project is <a href="https://github.com/VincentPenelle/cairn">there</a>, and it can be installed directly
through opam with :
</p>
<pre class="example" id="org338ef16">
opam install cairn
</pre>
</div>
</div>
</div>




<div id="outline-container-9" class="outline-2">
<h2 id="9">OCaml Workshop 2023 &#x2013; presentation deadline on June 1st, online attendance option</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-workshop-2023-presentation-deadline-on-june-1st-online-attendance-option/12226/6">https://discuss.ocaml.org/t/ocaml-workshop-2023-presentation-deadline-on-june-1st-online-attendance-option/12226/6</a>
</p>
</div>

<div id="outline-container-org6bc0e80" class="outline-3">
<h3 id="org6bc0e80">gasche announced</h3>
<div class="outline-text-3" id="text-org6bc0e80">
<p>
A temporary list of accepted presentations is available:
</p>

<p>
<a href="https://icfp23.sigplan.org/home/ocaml-2023#event-overview">https://icfp23.sigplan.org/home/ocaml-2023#event-overview</a>
</p>

<p>
We are in discussion with the ML workshop to move some of these talks to the ML workshops, so the program may
change slightly in the following weeks.
</p>
</div>
</div>
</div>




<div id="outline-container-10" class="outline-2">
<h2 id="10">13th MirageOS retreat in Marrakesh, Morocco (November 20th - 26th 2023)</h2>
<div class="outline-text-2" id="text-10">
<p>
Archive: <a href="https://discuss.ocaml.org/t/13th-mirageos-retreat-in-marrakesh-morocco-november-20th-26th-2023/12781/1">https://discuss.ocaml.org/t/13th-mirageos-retreat-in-marrakesh-morocco-november-20th-26th-2023/12781/1</a>
</p>
</div>

<div id="outline-container-org2694fba" class="outline-3">
<h3 id="org2694fba">Hannes Mehnert announced</h3>
<div class="outline-text-3" id="text-org2694fba">
<p>
in November there&rsquo;ll be the next retreat taking place in Marrakesh, Morocco. Happy to see old and new faces there,
everyone is welcome (an interest in OCaml/MirageOS is nice to bring with you).
</p>

<p>
Further information at <a href="https://retreat.mirage.io">https://retreat.mirage.io</a>
</p>

<p>
In case you have some questions, don&rsquo;t hesitate to reach out to me.
</p>
</div>
</div>
</div>




<div id="outline-container-11" class="outline-2">
<h2 id="11">kcas and kcas_data 0.6.1: STM and compositional lock-dree data structures</h2>
<div class="outline-text-2" id="text-11">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-kcas-and-kcas-data-0-6-1-stm-and-compositional-lock-dree-data-structures/12674/2">https://discuss.ocaml.org/t/ann-kcas-and-kcas-data-0-6-1-stm-and-compositional-lock-dree-data-structures/12674/2</a>
</p>
</div>

<div id="outline-container-org1708755" class="outline-3">
<h3 id="org1708755">Vesa Karvonen announced</h3>
<div class="outline-text-3" id="text-org1708755">
<p>
And speaking of news, first part of blog post <a href="https://tarides.com/blog/2023-08-07-kcas-building-a-lock-free-stm-for-ocaml-1-2/">Kcas: Building a lock-free STM for
OCaml</a> is now online.
</p>
</div>
</div>
</div>




<div id="outline-container-org684150d" class="outline-2">
<h2 id="org684150d">Old CWN</h2>
<div class="outline-text-2" id="text-org684150d">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I&rsquo;ll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="orgbdc0499">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>