<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-06-14 Tue 11:27 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2022.06.07.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2022.06.21.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of June 07 to 14, 2022.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Lwt informal user survey</a></li>
<li><a href="#2">Tutorial: Full-Stack Web Dev in OCaml w/ Dream, Bonsai, and GraphQL</a></li>
<li><a href="#3">dkml-c-probe: Cross-compiler friendly definitions for C compiling</a></li>
<li><a href="#4">Htmx/hc web development approach</a></li>
<li><a href="#5">Engineer and postdoc positions in France (various labs) to work on a proof assistant for crypto protocols</a></li>
<li><a href="#6">Yojson 2.0.0</a></li>
<li><a href="#7">opentelemetry 0.2</a></li>
<li><a href="#8">omake-0.10.5</a></li>
<li><a href="#9">findlib-1.9.5</a></li>
<li><a href="#orgadac857">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Lwt informal user survey</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/lwt-informal-user-survey/9666/3">https://discuss.ocaml.org/t/lwt-informal-user-survey/9666/3</a>
</p>
</div>

<div id="outline-container-org1f8a52c" class="outline-3">
<h3 id="org1f8a52c">Continuing this thread, Raphaël Proust said</h3>
<div class="outline-text-3" id="text-org1f8a52c">
<p>
Thanks to everyone who took the time to answer the polls above. I've now closed them.
</p>

<p>
The first pull-request to come out of this poll is [<a href="https://github.com/ocsigen/lwt/pull/947">https://github.com/ocsigen/lwt/pull/947</a>](removing support for
OCaml&lt;=4.07). This was the cutoff in the poll. It removes a lot of <code>#if</code> preprocessing statements and a few
workarounds to stay compatible with old Stdlib interfaces. Thanks to @hannes for contributing most of the commits on
this pull-request.
If support for OCaml&lt;=4.07 is important to you, please participate in the pull-request's discussion or on this
thread.
</p>

<p>
Stay tuned for more. (But also be patient.)
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Tutorial: Full-Stack Web Dev in OCaml w/ Dream, Bonsai, and GraphQL</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/tutorial-full-stack-web-dev-in-ocaml-w-dream-bonsai-and-graphql/9963/20">https://discuss.ocaml.org/t/tutorial-full-stack-web-dev-in-ocaml-w-dream-bonsai-and-graphql/9963/20</a>
</p>
</div>

<div id="outline-container-org041cc9c" class="outline-3">
<h3 id="org041cc9c">Continuing this thread, jerben asked and Daniel Bünzli replied</h3>
<div class="outline-text-3" id="text-org041cc9c">
<blockquote>
<p>
Very interesting, did you write somewhere about how it compares to htmx?
</p>
</blockquote>

<p>
Not really.
</p>

<p>
As far as I can remember I liked the ideas but found their execution to be a bit lacking, sometimes ad-hoc in their
attribute DSL, focusing more on the show off to convince single page application proponents of the approach than on a
clear conceptual model (which <code>hc</code> tries to detail in the manual
<a href="https://erratique.ch/software/hc/doc/manual.html#request">here</a>).
</p>

<p>
Two other things that come to mind are:
</p>

<ol class="org-ol">
<li>AFAIR their examples relied a lot on unique <code>id</code> attributes for targeting request results. Unless you find a principled and automated way to generate these that's not compositional and brittle. In <code>hc</code> I <a href="https://erratique.ch/software/hc/doc/manual.html#selector">extended the CSS selector syntax</a> to allow to address your ancestors (peace be upon them). That's more compositional but now you become sensitive to structural changes in your markup – pick your poison[^1].</li>
<li>I'm no longer sure about that, i.e. don't take my word for it, but I think their DSL allowed to spread the definition of an interaction among many elements which made it more difficult to understand what is happening. In <code>hc</code> all attributes defining the effects of an interaction are always located on a single element, the element that performs the request.</li>
</ol>

<p>
Finally when things go wrong I prefer to have to understand <a href="https://github.com/dbuenzli/hc/blob/master/src/hc_page.ml">700 lines of
ml</a> rather than <a href="https://github.com/bigskysoftware/htmx/blob/master/src/htmx.js">2800 lines of
JavaScript</a> (note that they likely have better legacy
browser support and more functionality).
</p>

<p>
In any case there's a long list of todos in <code>hc</code> and it likely needs one or two more design rounds before getting to
something decent – if that's even remotely possible on the web.
</p>

<blockquote>
<p>
Dang it @dbuenzli one day you’ll run out of letters and need to come up with an actual name for your libraries.
</p>
</blockquote>

<p>
Mind you I tried to use three letters once, but the whole experience turned out to be <a href="https://github.com/dbuenzli/rel/commit/f95b6bad02a8080eb64f8d0123cd63d40b528e33">extremely
unpleasant</a> :–)
</p>

<p>
[^1]: Using unique ids reifed in an OCaml EDSL could be a better idea.
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">dkml-c-probe: Cross-compiler friendly definitions for C compiling</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dkml-c-probe-cross-compiler-friendly-definitions-for-c-compiling/9950/8">https://discuss.ocaml.org/t/ann-dkml-c-probe-cross-compiler-friendly-definitions-for-c-compiling/9950/8</a>
</p>
</div>

<div id="outline-container-org3eccb1c" class="outline-3">
<h3 id="org3eccb1c">jbeckford announced</h3>
<div class="outline-text-3" id="text-org3eccb1c">
<p>
V3 is available. Its <code>C_abi</code> module has some big enhancements:
</p>
<ul class="org-ul">
<li>cleaner API (thanks @mseri!)</li>
<li>recognizes the BSD family: OpenBSD, FreeBSD, NetBSD and DragonFly on x86_64 hardware</li>
<li>integration testing now includes OpenBSD, FreeBSD and one cross-compiling toolchain (macOS x86_64 host that targets arm64)</li>
</ul>

<p>
V3 also has a new module <code>C_conf</code> which occupies the same problem space as <code>findlib / ocamlfind</code> and <code>pkg-config</code>:
</p>
<ul class="org-ul">
<li>Unlike <code>findlib</code> which is a specification+tool for 3rd party OCaml libraries, <code>C_conf</code> is a specification+tool for foreign C libraries</li>
<li>Unlike <code>pkg-config</code> which is a specification+tool for system (host ABI) C libraries, <code>C_conf</code> is a specification+tool for the multiple ABIs that are present when you cross-compile OCaml or C code</li>
<li>Unlike <code>pkg-config</code> which is designed for Unix, <code>C_conf</code> is designed for Windows and Unix where paths may have spaces, backslashes and colons</li>
<li>For now the specification is based on environment variables. If it proves useful the specification can be extended.</li>
</ul>

<p>
Examples and doc links for V3 are available at
<a href="https://github.com/diskuv/dkml-c-probe#dkml-c-probe">https://github.com/diskuv/dkml-c-probe#dkml-c-probe</a>
</p>
</div>
</div>


<div id="outline-container-orgb83b06c" class="outline-3">
<h3 id="orgb83b06c">Marcello Seri asked and jbeckford replied</h3>
<div class="outline-text-3" id="text-orgb83b06c">
<blockquote>
<p>
Thanks a lot for the update! Can you say a bit more about how <code>C_conf</code> works?
</p>
</blockquote>

<p>
C_conf has a detailed problem statement and spec at
<a href="https://diskuv.github.io/dkml-c-probe/dkml-c-probe/Dkml_c_probe/C_conf/index.html">https://diskuv.github.io/dkml-c-probe/dkml-c-probe/Dkml_c_probe/C_conf/index.html</a> (which is linked to on the
dkml-c-probe README).
</p>

<p>
I probably shouldn't regurgitate the doc here, so I'll take a few key pieces from the doc and then post some things
here that I didn't put on that doc page &#x2026;
</p>

<ol class="org-ol">
<li><p>
Here is my configuration for locating the "gmp" library on my Apple Silicon host machine that cross-compiles to x86_64:
</p>

<pre class="example" id="org5b6d1f0">
CP_GMP_CC_DEFAULT                 = -IZ:/build/darwin_arm64/vcpkg_installed/arm64-osx/include
CP_GMP_CC_DEFAULT_DARWIN_X86_64   = -IZ:/build/darwin_x86_64/vcpkg_installed/x64-osx/include
CP_GMP_LINK_DEFAULT               = -LZ:/build/darwin_arm64/vcpkg_installed/arm64-osx/lib;-lgmp
CP_GMP_LINK_DEFAULT_DARWIN_X86_64 = -LZ:/build/darwin_x86_64/vcpkg_installed/x64-osx/lib;-lgmp
</pre>

<ul class="org-ul">
<li>The other direction may be more interesting, since the free GitHub Actions only supports x86_64. The scenario of taking a macOS x86_64 GitHub host and cross-compiling to Apple Silicon is <a href="https://github.com/diskuv/dkml-c-probe/blob/2c1e90b4eea119348d6dae37d64949041ef9eaeb/.github/workflows/test.yml#L299-L379">implemented and partially tested</a>.</li>
</ul></li>
<li><p>
I am using a C package manager (vcpkg) to give me cross-compiled libraries and the flags for the target ABI (in this case darwin_x86_64 is the target ABI). In general it doesn't matter where you get your target ABI compatible libraries from. Example: When I'm cross-compiling to Android on a Windows x86_64 host, the Android Studio environment gives me some libraries for an Android Emulator (host ABI) and also prebuilt libraries for 4 Android device ABIs:
</p>

<pre class="example" id="org60fdee0">
Directory: C:\Users\xxx\AppData\Local\Android\Sdk\ndk\23.1.7779620\prebuilt

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----        10/20/2021   8:27 PM                android-arm
d-----        10/20/2021   8:27 PM                android-arm64
d-----        10/20/2021   8:27 PM                android-x86
d-----        10/20/2021   8:26 PM                android-x86_64
d-----        10/20/2021   8:27 PM                windows-x86_64
</pre></li>
<li>The <code>CP_clibrary_CC_DEFAULT_abi</code> configuration relies on <code>abi</code> (the ocamlfind toolchain name) being standardized. The <code>gmp</code> library, for example, is used by many OCaml packages; I wanted one configuration for <code>gmp</code>, not one configuration for each <code>(gmp, OCaml package)</code> combination. In fact, getting a consistent <code>abi</code> naming was one of my motivations for releasing <code>dkml-c-probe</code>. I don't think the prior art got this right &#x2026; the very stale <a href="https://github.com/ocaml-cross/opam-cross-android">opam-cross-android</a> project uses <a href="https://github.com/ocaml-cross/opam-cross-android#porting-packages"><code>abi = "android"</code></a> which is insufficient to differentiate the 5+ sets of libraries available in Android Studio.</li>
<li><p>
The "gmp" (etc.) configuration is done once in a familiar syntax (<code>-L, -I, -l</code>). However the <code>C_conf</code> library will parse and print the configuration in the appropriate C compiler syntax. When the MSVC compiler is used you get MSVC style linking:
</p>
<div class="org-src-container">
<pre class="src src-ocaml">[
  <span style="color: #8b2252;">"-LIBPATH:Z:/build/darwin_x86_64/vcpkg_installed/x64-osx/lib"</span>;
  <span style="color: #8b2252;">"gmp.lib"</span>
]
</pre>
</div>
<p>
MSVC and GCC conventions are supported today in <code>C_conf</code>.
</p></li>
<li>A real example of using <code>C_conf</code> is in my customization of <a href="https://github.com/jonahbeckford/Zarith/blob/a1bf6d55cd3c4b91dee0afb2309ef11271e9729b/discover.ml">zarith library</a>. It checks <code>C_conf</code> first to see whether the user has the host/target ABI configuration; if it doesn't it falls back to pkg-config.</li>
</ol>

<p>
The trend of using <code>pkg-config</code> in OCaml packages makes both native Windows and cross-compilation difficult. At the moment <b>we unintentionally shoot ourselves in the foot</b> because <a href="https://dune.readthedocs.io/en/stable/dune-libs.html#configurator-1">Dune documentation encourages <code>pkg-config</code></a> for understandable reasons. I hope <code>dkml-c-probe</code> can break that trend.
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Htmx/hc web development approach</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/htmx-hc-web-development-approach/9993/11">https://discuss.ocaml.org/t/htmx-hc-web-development-approach/9993/11</a>
</p>
</div>

<div id="outline-container-org1c07f7b" class="outline-3">
<h3 id="org1c07f7b">Vladimir Keleshev announced asked</h3>
<div class="outline-text-3" id="text-org1c07f7b">
<p>
@cemerick, @yawaramin, @dbuenzli, and others who've used htmx/hc with OCaml back-end: what is your experience with
templating? It seems that htmx/hc puts high requirements on a flexible HTML templating/DSL. What did you choose and
is it working out for you?
</p>
</div>
</div>


<div id="outline-container-orgc686acf" class="outline-3">
<h3 id="orgc686acf">Daniel Bünzli replied</h3>
<div class="outline-text-3" id="text-orgc686acf">
<p>
I'm using OCaml and an absolutely <a href="https://erratique.ch/software/webs/doc/Webs_html/index.html">trivial HTML generation
library</a>. If you want to see a real world example head
to the <code>*_html.{ml,mli}</code> files in <a href="https://github.com/dbuenzli/hyperbib/tree/master/src/service">this directory</a>
(more on the structure found there
<a href="https://github.com/dbuenzli/hyperbib/blob/master/DEVEL.md#cli-tool-and-backend">here</a>)
</p>

<p>
Works quite well for me but I'd say the problem is not really templating it's rather non-brittle URL management. For
that I use <a href="https://erratique.ch/software/webs/doc/Webs_kit/Kurl/index.html">this module</a> which while I'm not
entirely convinced by it yet, allows me to type them and avoid the stringly unchecked  dependendencies so
characteristic of the web development world.
</p>
</div>
</div>


<div id="outline-container-org0c60b6c" class="outline-3">
<h3 id="org0c60b6c">Chas Emerick also replied</h3>
<div class="outline-text-3" id="text-org0c60b6c">
<p>
Yeah, you're right on that point.
</p>

<p>
I'm using tyxml for 99% of my HTML generation, specifically its jsx ppx. I am judicious about keeping the main logics
of the project in OCaml proper; <code>.re</code> files exist exclusively to hold markup. The end result is a <span class="underline">very</span> pleasant
environment IMO. In the end, I dearly wish there was a way to get actual HTML syntax into <code>.ml</code> files (I am no fan of
reason syntax outside of jsx, and I suspect the sorta-legacy jsx toolchain leftover from reasonml will end up being a
tech risk over time), but as things stand, it's the best option I've found.
</p>
</div>
</div>


<div id="outline-container-orgdfac886" class="outline-3">
<h3 id="orgdfac886">Yawar Amin also replied</h3>
<div class="outline-text-3" id="text-orgdfac886">
<p>
I'm just using Dream's 'built-in' templating, 'Embedded ML (.eml)', it works reasonably well&#x2013;each template or
partial is just a function that you define to take some arguments and return some markup. It even auto-escapes to
prevent injection attacks. E.g.,
</p>

<pre class="example" id="org556e23d">
let card name =
  &lt;div class="card"&gt;&lt;%s name %&gt;&lt;/div&gt;
</pre>

<p>
There are a couple of tricks to be aware of with the EML syntax but in general it works well.
</p>
</div>
</div>


<div id="outline-container-org56c6dee" class="outline-3">
<h3 id="org56c6dee">Simon Cruanes also replied</h3>
<div class="outline-text-3" id="text-org56c6dee">
<p>
For the little webdev I do (internal tools mostly for myself), I've also been using server side html generation, with
my own <code>wheels</code> tools and a bit of htmx.
</p>

<p>
Here's an excerpt from a personal project, with my own httpd and html combinators; it adds a root to handle
<code>/thy/&lt;some string&gt;</code>:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">h_thy</span> (<span style="color: #a0522d;">self</span>:<span style="color: #228b22;">state</span>) :<span style="color: #228b22;"> unit </span>=
  <span style="color: #228b22;">H.</span>add_route_handler self.server
    <span style="color: #228b22;">H.Route.</span>(exact <span style="color: #8b2252;">"thy"</span> <span style="color: #a52a2a;">@/</span> string_urlencoded <span style="color: #a52a2a;">@/</span> return) <span style="color: #a52a2a;">@@</span> <span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">thy_name</span> <span style="color: #a0522d;">req</span> -&gt;
  <span style="color: #000000; font-weight: bold;">let@</span> () = top_wrap_ req <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">thy</span> = <span style="color: #228b22;">Idx.</span>find_thy self.st.idx thy_name <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">res</span> =
    <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Html</span> <span style="color: #000000; font-weight: bold;">in</span>
    [
      div[cls <span style="color: #8b2252;">"container"</span>][
        h3<span style="color: #000000; background-color: #ffffff;">[]</span>[txtf <span style="color: #8b2252;">"Theory %s"</span> thy_name];
        <span style="color: #228b22;">Thy_file.</span>to_html thy;
        div [
          <span style="color: #8b2252;">"hx-trigger"</span>, <span style="color: #8b2252;">"load"</span>;
          <span style="color: #8b2252;">"hx-get"</span>, (spf <span style="color: #8b2252;">"/eval/%s"</span> <span style="color: #a52a2a;">@@</span> <span style="color: #228b22;">H.Util.</span>percent_encode thy_name);
          <span style="color: #8b2252;">"hx-swap"</span>, <span style="color: #8b2252;">"innerHtml"</span>] [
          span[cls <span style="color: #8b2252;">"htmx-indicator"</span>; <span style="color: #228b22;">A.</span>id <span style="color: #8b2252;">"ind"</span>][
            txt <span style="color: #8b2252;">"[evaluating&#8230;]"</span>;
          ]
        ];
      ]
    ]
  <span style="color: #000000; font-weight: bold;">in</span>
  reply_page <span style="color: #008b8b;">~title</span>:(spf <span style="color: #8b2252;">"theory %s"</span> thy_name) req res
</pre>
</div>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">Engineer and postdoc positions in France (various labs) to work on a proof assistant for crypto protocols</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/engineer-and-postdoc-positions-in-france-various-labs-to-work-on-a-proof-assistant-for-crypto-protocols/9999/1">https://discuss.ocaml.org/t/engineer-and-postdoc-positions-in-france-various-labs-to-work-on-a-proof-assistant-for-crypto-protocols/9999/1</a>
</p>
</div>

<div id="outline-container-orgbd17284" class="outline-3">
<h3 id="orgbd17284">David Baelde announced</h3>
<div class="outline-text-3" id="text-orgbd17284">
<p>
We are looking for engineers and postdocs to work on Squirrel, a proof assistant dedicated to proving cryptographic
protocols. We have a broad range of projects in mind, ranging from pure OCaml development to involved protocol
formalizations, with several theoretical questions in between. If you'd like to work on some of these aspects for one
or more years, please get in touch with us!
</p>

<p>
More details can be found here:
</p>

<p>
<a href="https://squirrel-prover.github.io/positions.pdf">https://squirrel-prover.github.io/positions.pdf</a>
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">Yojson 2.0.0</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-yojson-2-0-0/10003/1">https://discuss.ocaml.org/t/ann-yojson-2-0-0/10003/1</a>
</p>
</div>

<div id="outline-container-orgf4265ca" class="outline-3">
<h3 id="orgf4265ca">Marek Kubica announced</h3>
<div class="outline-text-3" id="text-orgf4265ca">
<p>
This Friday, it is my pleasure to announce the release of Yojson 2.0.0. You can get it <a href="https://opam.ocaml.org/packages/yojson/">in your local OPAM
repository</a>.
</p>

<p>
Key highlights include:
</p>

<ul class="org-ul">
<li>Fewer dependencies: Given Yojson is a common dependency we cut down on its dependencies so you have to install less and have less transitive dependencies</li>
<li><code>Seq</code> interface: Since OCaml 4.14 deprecates <code>Stream</code> and 5.0 removes it, this was a good time to change to this interface</li>
<li><code>Buffer</code> interface: coming along with #1, we changed Yojson to use <code>Buffer</code> wherever it was using <code>Biniou</code> types before</li>
</ul>

<p>
Thanks to everybody involved in this release!
</p>

<p>
If Yojson sounds like an interesting project for you to contribute, <a href="https://github.com/ocaml-community/yojson">join
us</a>.
</p>

<p>
Full changelog follows:
</p>
</div>

<div id="outline-container-org96712a7" class="outline-4">
<h4 id="org96712a7">2.0.0</h4>
<div class="outline-text-4" id="text-org96712a7">
<p>
<b>2022-06-02</b>
</p>
</div>

<div id="outline-container-org9196e51" class="outline-5">
<h5 id="org9196e51">Removed</h5>
<div class="outline-text-5" id="text-org9196e51">
<ul class="org-ul">
<li>Removed dependency on easy-format and removed <code>pretty_format</code> from
<code>Yojson</code>, <code>Yojson.Basic</code>, <code>Yojson.Safe</code> and <code>Yojson.Raw</code>. (@c-cube, #90)</li>
<li><p>
Removed dependency on <code>biniou</code>, simplifying the chain of dependencies. This
changes some APIs:
</p>
<ul class="org-ul">
<li><code>Bi_outbuf.t</code> in signatures is replaced with <code>Buffer.t</code></li>
<li><code>to_outbuf</code> becomes <code>to_buffer</code> and <code>stream_to_outbuf</code> becomes
<code>stream_to_buffer</code></li>
</ul>
<p>
(@Leonidas, #74, and @gasche, #132)
</p></li>
<li>Removed <code>yojson-biniou</code> library</li>
<li>Removed deprecated <code>json</code> type aliasing type <code>t</code> which has been available
since 1.6.0 (@Leonidas, #100).</li>
<li>Removed <code>json_max</code> type (@Leonidas, #103)</li>
<li>Removed constraint that the "root" value being rendered (via either
<code>pretty_print</code> or <code>to_string</code>) must be an object or array. (@cemerick, #121)</li>
<li>Removed <code>validate_json</code> as it only made sense if the type was called <code>json</code>.
(@Leonidas, #137)</li>
</ul>
</div>
</div>

<div id="outline-container-orgdbbf732" class="outline-5">
<h5 id="orgdbbf732">Add</h5>
<div class="outline-text-5" id="text-orgdbbf732">
<ul class="org-ul">
<li>Add an opam package <code>yojson-bench</code> to deal with benchmarks dependency
(@tmcgilchrist, #117)</li>
<li>Add a benchmark to judge the respective performance of providing a buffer vs
letting Yojson create an internal (#134, @Leonidas)</li>
<li>Add an optional <code>suf</code> keyword argument was added to functions that write
serialized JSON, thus allowing NDJSON output. Most functions default to not
adding any suffix except for <code>to_file</code> (#124, @panglesd) and functions
writing sequences of values where the default is <code>\n</code> (#135,
@Leonidas)</li>
</ul>
</div>
</div>

<div id="outline-container-orgbdaa902" class="outline-5">
<h5 id="orgbdaa902">Change</h5>
<div class="outline-text-5" id="text-orgbdaa902">
<ul class="org-ul">
<li>The <code>stream_from_*</code> and <code>stream_to_*</code> functions now use a <code>Seq.t</code> instead of a
<code>Stream.t</code>, and they are renamed into <code>seq_from_*</code> and <code>seq_to_*</code> (@gasche, #131).</li>
</ul>
</div>
</div>

<div id="outline-container-orgd592918" class="outline-5">
<h5 id="orgd592918">Fix</h5>
<div class="outline-text-5" id="text-orgd592918">
<ul class="org-ul">
<li>Avoid copying unnecessarily large amounts of strings when parsing (#85, #108,
@Leonidas)</li>
<li>Fix <code>stream_to_file</code> (#133, @tcoopman and @gasche)</li>
</ul>
</div>
</div>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">opentelemetry 0.2</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opentelemetry-0-2/10005/1">https://discuss.ocaml.org/t/ann-opentelemetry-0-2/10005/1</a>
</p>
</div>

<div id="outline-container-org2fbfb3b" class="outline-3">
<h3 id="org2fbfb3b">Simon Cruanes announced</h3>
<div class="outline-text-3" id="text-org2fbfb3b">
<p>
It is my pleasure to announce the release of <a href="https://github.com/imandra-ai/ocaml-opentelemetry">ocaml-opentelemetry</a>
0.2. This library provides a core instrumentation library, as well as exporters, for the
<a href="https://opentelemetry.io/">opentelemetry</a> standard for observability; it encompasses distributed tracing, metrics,
and (more recently) log export. A lot of tools are compatible with opentelemetry these days, including Grafana,
DataDog, jaeger, etc.
</p>

<p>
This is still very early days for ocaml-opentelemetry, feedback and contributions are welcome.
</p>
</div>
</div>
</div>




<div id="outline-container-8" class="outline-2">
<h2 id="8">omake-0.10.5</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2022-06/msg00012.html">https://sympa.inria.fr/sympa/arc/caml-list/2022-06/msg00012.html</a>
</p>
</div>

<div id="outline-container-org3e01fb8" class="outline-3">
<h3 id="org3e01fb8">Gerd Stolpmann announced</h3>
<div class="outline-text-3" id="text-org3e01fb8">
<p>
I just released omake-0.10.5, the build utility, which fixes the broken
installation of version 0.10.4 from last week.
</p>

<p>
For docs and the download link see
<a href="http://projects.camlcity.org/projects/omake.html">http://projects.camlcity.org/projects/omake.html</a>. opam is underway.
</p>
</div>
</div>
</div>




<div id="outline-container-9" class="outline-2">
<h2 id="9">findlib-1.9.5</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2022-06/msg00012.html">https://sympa.inria.fr/sympa/arc/caml-list/2022-06/msg00012.html</a>
</p>
</div>

<div id="outline-container-org1e9bb33" class="outline-3">
<h3 id="org1e9bb33">Gerd Stolpmann announced</h3>
<div class="outline-text-3" id="text-org1e9bb33">
<p>
findlib-1.9.5 is out, fixing some scripting errors in the version 1.9.4
from last week.
</p>

<p>
For manual, download, manuals, etc. see here:
</p>

<p>
<a href="http://projects.camlcity.org/projects/findlib.html">http://projects.camlcity.org/projects/findlib.html</a>
</p>

<p>
An updated OPAM package will follow soon.
</p>
</div>
</div>
</div>




<div id="outline-container-orgadac857" class="outline-2">
<h2 id="orgadac857">Old CWN</h2>
<div class="outline-text-2" id="text-orgadac857">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org3cd8708">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
