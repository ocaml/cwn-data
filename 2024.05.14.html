<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-05-14 Tue 09:03 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2024.05.07.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2024.05.21.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of May 07 to 14, 2024.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Some code for Molecular Mechanics in OCaml</a></li>
<li><a href="#2">OCaml.org Newsletter: April 2024</a></li>
<li><a href="#3">Example of using LSP server in Emacs</a></li>
<li><a href="#4">Dune Developer Experience Feedback Form</a></li>
<li><a href="#5">DkML 2.1.1</a></li>
<li><a href="#6">A May update on wasm_of_ocaml</a></li>
<li><a href="#7">OCaml 5.2.0 released</a></li>
<li><a href="#org10f1ba0">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Some code for Molecular Mechanics in OCaml</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/some-code-for-molecular-mechanics-in-ocaml-ann/14610/1">https://discuss.ocaml.org/t/some-code-for-molecular-mechanics-in-ocaml-ann/14610/1</a>
</p>
</div>

<div id="outline-container-org1810a0e" class="outline-3">
<h3 id="org1810a0e">UnixJunkie announced</h3>
<div class="outline-text-3" id="text-org1810a0e">
<p>
Recently, I released a bunch of code for some Molecular Mechanics
calculations in OCaml.
</p>

<p>
This is pretty much at the beta stage for the moment.
</p>

<p>
<a href="https://github.com/UnixJunkie/MMO">https://github.com/UnixJunkie/MMO</a>
</p>

<p>
Maybe in the future I will create a proper library to encapsulate
the Mol and Mol2 modules in there; they allow to perform
some operations on small molecules.
</p>

<p>
For those interested, there is a partial implementation of the Universal Force Field (UFF)
in there; only the part concerning non-bonded interactions.
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">OCaml.org Newsletter: April 2024</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-org-newsletter-april-2024/14611/1">https://discuss.ocaml.org/t/ocaml-org-newsletter-april-2024/14611/1</a>
</p>
</div>

<div id="outline-container-org91e662f" class="outline-3">
<h3 id="org91e662f">Sabine Schmaltz announced</h3>
<div class="outline-text-3" id="text-org91e662f">
<p>
Welcome to the April 2024 edition of the OCaml.org newsletter! This update has been compiled by the OCaml.org team. You can find <a href="https://discuss.ocaml.org/tag/ocamlorg-newsletter">previous updates</a> on Discuss.
</p>

<p>
Our goal is to make OCaml.org the best resource for anyone who wants to get started and be productive in OCaml. The OCaml.org newsletter provides an update on our progress towards that goal and an overview of the changes we are working on.
</p>

<p>
We couldn't do it without all the amazing people who help us review, revise, and create better OCaml documentation and work on issues. Your participation enables us to so much more than we could just by ourselves. Thank you!
</p>

<p>
This newsletter covers:
</p>
<ul class="org-ul">
<li><b>OCaml Cookbook:</b> We shipped a new, community-driven section in the Learn area. Help us make it really useful by contributing and reviewing recipes for common tasks!</li>
<li><b>Community &amp; Marketing Pages Rework:</b> We have UI designs for the reworked and new pages of the community section and are starting work to implement these.</li>
<li><b>General Improvements:</b> As usual, we also worked on general maintenance and improvements, so we're highlighting some of the work that happened below.</li>
</ul>
</div>

<div id="outline-container-orgbd152d6" class="outline-4">
<h4 id="orgbd152d6">Open Issues for Contributors</h4>
<div class="outline-text-4" id="text-orgbd152d6">
<p>
You can find <a href="https://github.com/ocaml/ocaml.org/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22+no%3Aassignee">open issues for contributors here</a>!
</p>

<p>
Here's some new (and as of time of writing this newsletter still open) issues that were opened this month:
</p>

<ul class="org-ul">
<li>Package Versions page is missing dark mode styles <a href="https://github.com/ocaml/ocaml.org/issues/2341">ocaml/ocaml.org#2341</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>(Data) Extend the Data Model of Academic Institution to Record Information about Course Materials <a href="https://github.com/ocaml/ocaml.org/issues/2328">ocaml/ocaml.org#2328</a>  by <a href="https://github.com/sabine">@sabine</a></li>
</ul>
</div>
</div>

<div id="outline-container-org03e7fff" class="outline-4">
<h4 id="org03e7fff">The OCaml Cookbook</h4>
<div class="outline-text-4" id="text-org03e7fff">
<p>
We shipped a new, community-driven section in the Learn area: the OCaml Cookbook!
</p>

<p>
The OCaml Cookbook is a place where OCaml developers share how to solve common tasks using packages from the ecosystem.
</p>

<p>
A task is something that needs to be done inside a project. A recipe is a code sample and explanations on how to perform a task using a combination of open source libraries.
</p>

<p>
The Cookbook now live at <a href="https://ocaml.org/cookbook">ocaml.org/cookbook</a>, but there are not a lot of recipes published yet.
</p>

<p>
Here's how we need your help:
</p>

<ol class="org-ol">
<li>Help review <a href="https://github.com/ocaml/ocaml.org/pulls?q=is%3Apr+is%3Aopen+label%3ACookbook">open pull requests for cookbook recipes</a>!</li>
<li>Contribute new recipes and tasks for the cookbook!</li>
<li>Suggest improvements to existing recipes and the UI.</li>
</ol>

<p>
<b>Relevant PRs and Activities:</b>
</p>
<ul class="org-ul">
<li>Open PRs in need of reviewers:
<ul class="org-ul">
<li>PR: Cookbook geodesic <a href="https://github.com/ocaml/ocaml.org/pull/2381">ocaml/ocaml.org#2381</a> by <a href="https://github.com/F-Loyer">@F-Loyer</a></li>
<li>PR: Cookbook / subprocess creation <a href="https://github.com/ocaml/ocaml.org/pull/2382">ocaml/ocaml.org#2382</a>  by <a href="https://github.com/F-Loyer">@F-Loyer</a></li>
<li>PR: Cookbook getenv <a href="https://github.com/ocaml/ocaml.org/pull/2383">ocaml/ocaml.org#2383</a>  by <a href="https://github.com/F-Loyer">@F-Loyer</a></li>
<li>PR: Cookbook : linalg <a href="https://github.com/ocaml/ocaml.org/pull/2386">ocaml/ocaml.org#2386</a>  by <a href="https://github.com/F-Loyer">@F-Loyer</a></li>
<li>PR: Use camlzip and with_open_text <a href="https://github.com/ocaml/ocaml.org/pull/2371">ocaml/ocaml.org#2371</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Deserialise and post-process YAML recipes <a href="https://github.com/ocaml/ocaml.org/pull/2372">ocaml/ocaml.org#2372</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Rebased database recipes <a href="https://github.com/ocaml/ocaml.org/pull/2376">ocaml/ocaml.org#2376</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Rebased basic concurrency recipe <a href="https://github.com/ocaml/ocaml.org/pull/2377">ocaml/ocaml.org#2377</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Rebased sorting recipe <a href="https://github.com/ocaml/ocaml.org/pull/2378">ocaml/ocaml.org#2378</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Rebased ascii and utf-8 recipes <a href="https://github.com/ocaml/ocaml.org/pull/2379">ocaml/ocaml.org#2379</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org3bb05d0" class="outline-4">
<h4 id="org3bb05d0">Community &amp; Marketing Pages Rework</h4>
<div class="outline-text-4" id="text-org3bb05d0">
<p>
We have <a href="https://www.figma.com/file/7hmoWkQP9PgLTfZCqiZMWa/OCaml-Community-Pages?type=design&amp;node-id=637%3A4539&amp;mode=design&amp;t=RpQlGvOpeg1a93AZ-1">UI designs for the reworked and new pages of the community section</a> and are starting work to implement these. We are opening small issues for contributors to help. :orange_heart: 
</p>

<p>
<b>Relevant PRs and Activities:</b>
</p>
<ul class="org-ul">
<li>PR: UI: Added  DateTime of Event on the Client Side in the User's Timezone <a href="https://github.com/ocaml/ocaml.org/pull/2339">ocaml/ocaml.org#2339</a> by <a href="https://github.com/maha-sachin">@maha-sachin</a></li>
<li>PR: Create new Events page with routing under Community <a href="https://github.com/ocaml/ocaml.org/pull/2338">ocaml/ocaml.org#2338</a> by <a href="https://github.com/shakthimaan">@shakthimaan</a></li>
<li>PR: Add event_type field to Events, and render tag in Event cards <a href="https://github.com/ocaml/ocaml.org/pull/2366">ocaml/ocaml.org#2366</a> by <a href="https://github.com/csaltachin">@csaltachin</a></li>
</ul>
</div>
</div>

<div id="outline-container-orga6c0ce6" class="outline-4">
<h4 id="orga6c0ce6">General Improvements and Data Additions</h4>
<div class="outline-text-4" id="text-orga6c0ce6">
<p>
<b>Relevant PRs and Activities:</b>
</p>
<ul class="org-ul">
<li>Bugfixes
<ul class="org-ul">
<li>PR: fix: add .modules style for odoc-generated documentation pages <a href="https://github.com/ocaml/ocaml.org/pull/2355">ocaml/ocaml.org#2355</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: Fix: correct text color on community resource card <a href="https://github.com/ocaml/ocaml.org/pull/2329">ocaml/ocaml.org#2329</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: fix: Make Community card about LearnOCaml point to the correct URL <a href="https://github.com/ocaml/ocaml.org/pull/2331">ocaml/ocaml.org#2331</a>  by <a href="https://github.com/yurug">@yurug</a></li>
</ul></li>
<li>Documentation
<ul class="org-ul">
<li>PR: OCaml Tour: -New sections- Introduction and Before We Begin. Added REPL definition and double semicolon use <a href="https://github.com/ocaml/ocaml.org/pull/2336">ocaml/ocaml.org#2336</a> by <a href="https://github.com/Alfredo-Carlon">@Alfredo-Carlon</a></li>
<li>PR: Minor line editing on "Values and Functions" Tutorial <a href="https://github.com/ocaml/ocaml.org/pull/2321">ocaml/ocaml.org#2321</a> by <a href="https://github.com/jeuxdeau">@jeuxdeau</a></li>
</ul></li>
<li>Data
<ul class="org-ul">
<li>PR: [planet]: add melange blog <a href="https://github.com/ocaml/ocaml.org/pull/2362">ocaml/ocaml.org#2362</a> by <a href="https://github.com/anmonteiro">@anmonteiro</a></li>
<li>PR: (data) add april OUPS meetup <a href="https://github.com/ocaml/ocaml.org/pull/2360">ocaml/ocaml.org#2360</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: Add TUM as an academic institution  <a href="https://github.com/ocaml/ocaml.org/pull/2347">ocaml/ocaml.org#2347</a> by <a href="https://github.com/PumPum7">@PumPum7</a></li>
<li>PR: Add Routine job post. <a href="https://github.com/ocaml/ocaml.org/pull/2325">ocaml/ocaml.org#2325</a> by <a href="https://github.com/mefyl">@mefyl</a></li>
<li>PR: (data) Add OCaml Workshop to Upcoming Events <a href="https://github.com/ocaml/ocaml.org/pull/2326">ocaml/ocaml.org#2326</a> by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: (data) add ReasonSTHLM meetup <a href="https://github.com/ocaml/ocaml.org/pull/2308">ocaml/ocaml.org#2308</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: Add missing Mdx changelogs <a href="https://github.com/ocaml/ocaml.org/pull/2368">ocaml/ocaml.org#2368</a> by <a href="https://github.com/tmattio">@tmattio</a></li>
<li>PR: Fix small typo in Dune 3.14 announcement <a href="https://github.com/ocaml/ocaml.org/pull/2315">ocaml/ocaml.org#2315</a> by <a href="https://github.com/Leonidas-from-XIV">@Leonidas-from-XIV</a></li>
<li>PR: Dune 3.15.0 announcement <a href="https://github.com/ocaml/ocaml.org/pull/2316">ocaml/ocaml.org#2316</a> by <a href="https://github.com/Leonidas-from-XIV">@Leonidas-from-XIV</a></li>
<li>PR: OCaml 5.2.0-beta2 changelog entry <a href="https://github.com/ocaml/ocaml.org/pull/2343">ocaml/ocaml.org#2343</a>  by <a href="https://github.com/Octachron">@Octachron</a></li>
<li>PR: (data) add March 2024 OCaml.org newsletter <a href="https://github.com/ocaml/ocaml.org/pull/2317">ocaml/ocaml.org#2317</a> by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: Add the announement for opam 2.2.0~beta2 <a href="https://github.com/ocaml/ocaml.org/pull/2334">ocaml/ocaml.org#2334</a> by <a href="https://github.com/kit-ty-kate">@kit-ty-kate</a></li>
<li>PR: jobs: remove XenServer positions <a href="https://github.com/ocaml/ocaml.org/pull/2387">ocaml/ocaml.org#2387</a> by <a href="https://github.com/edwintorok">@edwintorok</a></li>
</ul></li>
<li>Move of the OCaml Language Manual from v2.ocaml.org to ocaml.org
<ul class="org-ul">
<li>PR: fix: Serve manual under /lts and /latest URLs <a href="https://github.com/ocaml/ocaml.org/pull/2345">ocaml/ocaml.org#2345</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: Remove /manual/lts URL, fix broken route for /manual/latest <a href="https://github.com/ocaml/ocaml.org/pull/2348">ocaml/ocaml.org#2348</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: Add /api/** redirection <a href="https://github.com/ocaml/ocaml.org/pull/2352">ocaml/ocaml.org#2352</a> by <a href="https://github.com/mtelvers">@mtelvers</a></li>
<li>PR: Handle lts, default and missing version in middleware <a href="https://github.com/ocaml/ocaml.org/pull/2358">ocaml/ocaml.org#2358</a> by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Add served pages to sitemap <a href="https://github.com/ocaml/ocaml.org/pull/2363">ocaml/ocaml.org#2363</a> by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Skip unreleased manuals from sitemap <a href="https://github.com/ocaml/ocaml.org/pull/2367">ocaml/ocaml.org#2367</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Turn some v2 redirects into local <a href="https://github.com/ocaml/ocaml.org/pull/2356">ocaml/ocaml.org#2356</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
</ul></li>
<li>Refactor / Code health
<ul class="org-ul">
<li>PR: Remove Commit module from Global <a href="https://github.com/ocaml/ocaml.org/pull/2319">ocaml/ocaml.org#2319</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a> (created/merged: 2024-04-05T14:17:31Z)</li>
<li>PR: chore: remove learn_sidebar.eml, which was not used anymore <a href="https://github.com/ocaml/ocaml.org/pull/2342">ocaml/ocaml.org#2342</a>  by <a href="https://github.com/sabine">@sabine</a></li>
<li>PR: Add link to deploy.ci.ocaml.org in HACKING <a href="https://github.com/ocaml/ocaml.org/pull/2354">ocaml/ocaml.org#2354</a> by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
<li>PR: Use type annotation for data parameters <a href="https://github.com/ocaml/ocaml.org/pull/2384">ocaml/ocaml.org#2384</a>  by <a href="https://github.com/cuihtlauac">@cuihtlauac</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Example of using LSP server in Emacs</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/example-of-using-lsp-server-in-emacs/14601/4">https://discuss.ocaml.org/t/example-of-using-lsp-server-in-emacs/14601/4</a>
</p>
</div>

<div id="outline-container-org73930cf" class="outline-3">
<h3 id="org73930cf">Tim McGilchrist announced</h3>
<div class="outline-text-3" id="text-org73930cf">
<p>
I wrote a blog post about my setup <a href="https://lambdafoo.com/posts/2022-09-07-ocaml-with-emacs-2022.html">https://lambdafoo.com/posts/2022-09-07-ocaml-with-emacs-2022.html</a> The only change I've made is to use <code>envrc-mode</code> rather than <code>direnv-mode</code>.
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Dune Developer Experience Feedback Form</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/dune-developer-experience-feedback-form/14617/1">https://discuss.ocaml.org/t/dune-developer-experience-feedback-form/14617/1</a>
</p>
</div>

<div id="outline-container-orgfa60608" class="outline-3">
<h3 id="orgfa60608">ostera announced</h3>
<div class="outline-text-3" id="text-orgfa60608">
<p>
The Dune team at <a href="https://tarides.com">Tarides</a> is looking to get inputs from all of you to improve the Dune DX (developer experience), so we've opened a <a href="https://forms.gle/izg5xSt1XNp3i4Rc8">small, anonymous, unstructured feedback form</a> to hear your ideas on how Dune could be improved :camel: 
</p>

<p>
We're looking forward to your ideas! :sparkles: 
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">DkML 2.1.1</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-dkml-2-1-1/14620/1">https://discuss.ocaml.org/t/ann-dkml-2-1-1/14620/1</a>
</p>
</div>

<div id="outline-container-orgc257c20" class="outline-3">
<h3 id="orgc257c20">jbeckford announced</h3>
<div class="outline-text-3" id="text-orgc257c20">
<p>
Use <a href="https://ocaml.org/install">https://ocaml.org/install</a> if you are a first-time user (the install steps haven't changed).
</p>

<p>
The upgrade steps and release notes are available at <a href="https://gitlab.com/dkml/distributions/dkml/-/releases/2.1.1">https://gitlab.com/dkml/distributions/dkml/-/releases/2.1.1</a>. For those who are on 2.1.0, the upgrade is the following in PowerShell:
</p>

<pre class="example" id="org5baac08">
1..6 | % {  @("bash","sh","with-dkml","ocamllsp","git","opam","dune","ocamlrun") | % { taskkill /F /IM "$_.exe" }; Start-Sleep 1 }
winget upgrade dkml
</pre>
</div>

<div id="outline-container-orgac423dc" class="outline-4">
<h4 id="orgac423dc">Major Changes</h4>
<div class="outline-text-4" id="text-orgac423dc">
<ul class="org-ul">
<li>The opam repository is fixed to <a href="https://github.com/ocaml/opam-repository/tree/6c3f73f42890cc19f81eb1dec8023c2cd7b8b5cd">commit 6c3f73f42890cc19f81eb1dec8023c2cd7b8b5cd</a> for stability. If you need a new version of a package and can't wait for the next version of DkML, you can pin that package's url (recommended) or float the opam repository with <code>opam repository set-url default git+https://github.com/ocaml/opam-repository.git#main</code>.</li>
<li>Windows SDK 10.0.22621.0 and VC 17.8 (14.38) added to allowed list. This supports Visual Studio 2022, especially for GitLab CI.</li>
<li>New supported package: <code>tiny_httpd</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgde5a3f2" class="outline-4">
<h4 id="orgde5a3f2">Patches</h4>
<div class="outline-text-4" id="text-orgde5a3f2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Package</th>
<th scope="col" class="org-left">What</th>
<th scope="col" class="org-left">Issue</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>base_bigstring.v16.0</code></td>
<td class="org-left">Implement <code>memmem</code> for Windows</td>
<td class="org-left"><a href="https://github.com/janestreet/base_bigstring/issues/6">https://github.com/janestreet/base_bigstring/issues/6</a></td>
</tr>

<tr>
<td class="org-left"><code>core_kernel.v0.16.0</code></td>
<td class="org-left">MSVC fix didn't make it to 0.16.0</td>
<td class="org-left"><a href="https://github.com/janestreet/core_kernel/pull/107">https://github.com/janestreet/core_kernel/pull/107</a></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org4761f72" class="outline-4">
<h4 id="org4761f72">Upgraded Packages</h4>
<div class="outline-text-4" id="text-org4761f72">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Package</th>
<th scope="col" class="org-right">From</th>
<th scope="col" class="org-right">To</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">dune (et al)</td>
<td class="org-right">3.12.1</td>
<td class="org-right">3.15.0</td>
</tr>

<tr>
<td class="org-left">ocaml</td>
<td class="org-right">4.14.0</td>
<td class="org-right">4.14.2</td>
</tr>

<tr>
<td class="org-left">ocamlformat (et al)</td>
<td class="org-right">0.25.1</td>
<td class="org-right">0.26.1</td>
</tr>

<tr>
<td class="org-left">odoc</td>
<td class="org-right">2.2.0</td>
<td class="org-right">2.4.1</td>
</tr>

<tr>
<td class="org-left">odoc-parser</td>
<td class="org-right">2.0.0</td>
<td class="org-right">2.4.1</td>
</tr>

<tr>
<td class="org-left">lsp (et al)</td>
<td class="org-right">1.16.2</td>
<td class="org-right">1.17.0</td>
</tr>

<tr>
<td class="org-left">mdx</td>
<td class="org-right">2.3.0</td>
<td class="org-right">2.4.1</td>
</tr>

<tr>
<td class="org-left">ctypes (et al)</td>
<td class="org-right">0.19.2-windowssupport-r7</td>
<td class="org-right">0.19.2-windowssupport-r8</td>
</tr>

<tr>
<td class="org-left">tiny_httpd</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">0.16</td>
</tr>
</tbody>
</table>

<p>
Thanks to OCaml Software Foundation for sponsoring DkML!
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">A May update on wasm_of_ocaml</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/a-may-update-on-wasm-of-ocaml/14635/1">https://discuss.ocaml.org/t/a-may-update-on-wasm-of-ocaml/14635/1</a>
</p>
</div>

<div id="outline-container-org1a4acfc" class="outline-3">
<h3 id="org1a4acfc">Jan Midtgaard announced</h3>
<div class="outline-text-3" id="text-org1a4acfc">
<p>
Spring is over us and several months have passed since we last shared <a href="https://discuss.ocaml.org/t/a-december-update-from-the-ocaml-wasm-organisation/13565">an update on WebAssembly compilation</a>.
</p>
</div>

<div id="outline-container-org991a00a" class="outline-4">
<h4 id="org991a00a">Introduction</h4>
<div class="outline-text-4" id="text-org991a00a">
<p>
<a href="https://github.com/ocaml-wasm/wasm_of_ocaml"><code>wasm_of_ocaml</code></a> is a compiler from OCaml bytecode to <a href="https://webassembly.org/">WebAssembly</a>, similar to <a href="https://github.com/ocsigen/js_of_ocaml"><code>js_of_ocaml</code></a> from which it was forked. <code>wasm_of_ocaml</code> offers a functional, almost drop-in replacement for <code>js_of_ocaml</code> - with better performance.
</p>

<p>
For now, the compiler targets a JavaScript-hosted WebAssembly engine. The produced code furthermore requires the following <a href="https://webassembly.org/roadmap/">Wasm extensions</a> to run:
</p>
<ul class="org-ul">
<li><a href="https://github.com/WebAssembly/gc">the GC extension</a>, including functional references and 31-bit integers</li>
<li><a href="https://github.com/WebAssembly/tail-call/blob/main/proposals/tail-call/Overview.md">the tail-call extension</a></li>
<li><a href="https://github.com/WebAssembly/exception-handling/blob/master/proposals/exception-handling/Exceptions.md">the exception handling extension</a></li>
</ul>
</div>
</div>

<div id="outline-container-org40309a5" class="outline-4">
<h4 id="org40309a5">Platform support</h4>
<div class="outline-text-4" id="text-org40309a5">
<ul class="org-ul">
<li><a href="https://nodejs.org/en/blog/announcements/v22-release-announce">Node 22 now supports the WasmGC extension</a>, meaning that it can run <code>wasm_of_ocaml</code> output out of the box!</li>
<li>CloudFlare uses <a href="https://developers.cloudflare.com/workers/platform/changelog/#2023-12-04">V8 12.0 since Dec 4, 2023</a>. <a href="https://v8.dev/docs/version-numbers">This corresponds to Chrome 120</a>, and thus includes the WasmGC extension, effectively enabling OCaml development on CloudFlare! For more details see the <a href="https://developers.cloudflare.com/workers/runtime-apis/webassembly/">WebAssembly CloudFlare docs</a></li>
<li><a href="https://github.com/WasmEdge/WasmEdge/releases/tag/0.14.0-rc.4">The upcoming 0.14.0 release</a> of <a href="https://github.com/WasmEdge/WasmEdge">the WasmEdge WebAssembly engine</a> adds WasmGC support too. Along with the <a href="https://github.com/WasmEdge/WasmEdge/pull/3306">just merged exception support</a>, this paves the way for running <code>wasm_of_ocaml</code> output&#x2026;</li>
</ul>
</div>
</div>

<div id="outline-container-orga385faa" class="outline-4">
<h4 id="orga385faa"><code>wasm_of_ocaml</code> news</h4>
<div class="outline-text-4" id="text-orga385faa">
<p>
Since the last update in December
</p>
<ul class="org-ul">
<li>Jérôme gave a talk about <code>wasm_of_ocaml</code> at the INRIA Cambium seminar - <a href="https://cambium.inria.fr/seminaires/transparents/20231213.Jerome.Vouillon.pdf">slides available here</a></li>
<li>Olivier Nicole joined the <code>wasm_of_ocaml</code> effort</li>
<li>Jérôme and Olivier visited Jane Street to help them adopt <code>wasm_of_ocaml</code></li>
</ul>

<p>
Notable features
</p>
<ul class="org-ul">
<li>Sourcemap support was added <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/27">ocaml-wasm/wasm_of_ocaml#27</a>
<ul class="org-ul">
<li>This required adding sourcemap support to the <code>wasm-metadce</code> and <code>wasm-merge</code> binaryen tools <a href="https://github.com/WebAssembly/binaryen/pull/6372">WebAssembly/binaryen#6372</a></li>
</ul></li>
<li>A first implementation of separate compilation was completed <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/36">ocaml-wasm/wasm_of_ocaml#36</a>
<ul class="org-ul">
<li>One can compile cmo and cma files, producing intermediate archive files</li>
<li>Then the files can be linked together: relevant Wasm modules are put in a directory, and JavaScript code is generated to load them and link them together</li>
</ul></li>
<li>Store long-lived toplevel values into globals <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/30">ocaml-wasm/wasm_of_ocaml#30</a>
<ul class="org-ul">
<li>The initialization code produced by <code>wasm_of_ocaml</code> can be large and contain a large number of variables. This is challenging to both binaryen tools and the Wasm engines. The problem can be alleviated by storing long-lived toplevel values into global variables. As an side benefit, many closures can be statically allocated (since their free variables are now stored in globals), which again can provide performance improvements in the remaining parts of the code.</li>
</ul></li>
<li>Tuple syntax changes <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/31">ocaml-wasm/wasm_of_ocaml#31</a>
<ul class="org-ul">
<li>Prepared the switch to the new version of binaryen, which has small syntax changes</li>
</ul></li>
<li>Use the JS String Builtins proposal for string conversions when available <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/33">ocaml-wasm/wasm_of_ocaml#33</a></li>
<li>Improve the WAT (Wasm text format) output to be more readable <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/34">ocaml-wasm/wasm_of_ocaml#34</a>
<ul class="org-ul">
<li>Name local variables (they were just numbered) and use shorter names (the names used to be systematically suffixed to ensure they were unique).</li>
</ul></li>
</ul>

<p>
Other features and fixes
</p>
<ul class="org-ul">
<li>Fixed file descriptor management so that it works with large file descriptors <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/issues/18">ocaml-wasm/wasm_of_ocaml#18</a></li>
<li>PR: Update Firefox version information in README (no longer beta) <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/19">ocaml-wasm/wasm_of_ocaml#19</a></li>
<li>PR: Fix pin branch in installation instructions <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/20">ocaml-wasm/wasm_of_ocaml#20</a></li>
<li>PR: Add <code>Stdlib.String.fold_{left,right}</code> to build on OCaml &lt; 4.13 <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/21">ocaml-wasm/wasm_of_ocaml#21</a></li>
<li>PR translating stubs of <code>integers_js_stubs</code> to Wasm <a href="https://github.com/o1-labs/integers_stubs_js/pull/10">o1-labs/integers_stubs_js#10</a>
<ul class="org-ul">
<li>Tracked a bug in a test on the repo <a href="https://github.com/o1-labs/integers_stubs_js/issues/9">o1-labs/integers_stubs_js#9</a></li>
</ul></li>
<li>PR: Generate valid Wasm code <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/22">ocaml-wasm/wasm_of_ocaml#22</a></li>
<li>PR: Avoid using <code>eval</code> for statically known strings <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/24">ocaml-wasm/wasm_of_ocaml#24</a></li>
<li>PR: Have physical equality inspect Javascript objects <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/25">ocaml-wasm/wasm_of_ocaml#25</a></li>
<li>PR: Tune optimization profiles <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/26">ocaml-wasm/wasm_of_ocaml#26</a></li>
<li>PR: Correction and precision about Binaryen version <a href="https://github.com/ocaml-wasm/wasm_of_ocaml/pull/29">ocaml-wasm/wasm_of_ocaml#29</a></li>
</ul>

<p>
Binaryen fixes
</p>
<ul class="org-ul">
<li>PR: wasm-merge: check that the types of imports and exports match. <a href="https://github.com/WebAssembly/binaryen/pull/6437">WebAssembly/binaryen#6437</a>
<ul class="org-ul">
<li>Improved binaryen's linker to check that the types of imports and exports match. Found a type mismatch in the wasm_of_ocaml runtime this way.</li>
</ul></li>
<li>PR: Fixes regarding explicit names <a href="https://github.com/WebAssembly/binaryen/pull/6466">WebAssembly/binaryen#6466</a>
<ul class="org-ul">
<li>The name of some module components were lost during module linking</li>
</ul></li>
<li>PR: Fix writing of data segment names in name section <a href="https://github.com/WebAssembly/binaryen/pull/6462">WebAssembly/binaryen#6462</a>
<ul class="org-ul">
<li>Binaryen could actually generate a malformed name section</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-7" class="outline-2">
<h2 id="7">OCaml 5.2.0 released</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-5-2-0-released/14638/1">https://discuss.ocaml.org/t/ocaml-5-2-0-released/14638/1</a>
</p>
</div>

<div id="outline-container-org76e52d9" class="outline-3">
<h3 id="org76e52d9">octachron announced</h3>
<div class="outline-text-3" id="text-org76e52d9">
<p>
The OCaml team has the pleasure of celebrating the birthday of Inge Lehmann by announcing the
release of OCaml version 5.2.0.
</p>

<p>
Some of the highlights in OCaml 5.2.0 are:
</p>
<ul class="org-ul">
<li>Re-introduced GC compaction <br />
GC compaction can now be manually triggered by calling <code>Gc.compact ()</code> manually.
This is expected to be particularly useful for programs that wish to release memory
to the operating system after a temporary memory-intensive phase.</li>

<li>Restored native backend for POWER 64 bits <br />
With this restored backend, all 64 bits architecture supported in OCaml 4 are
supported bin OCaml 5</li>

<li>Thread sanitizer support <br />
Thread sanitizer is a dynamic data race detector which instrument memory
accesses to detect and explain data races at execution time. Since the
instrumentation is costly (with a 2x to 7x slowdown), it must be enabled with
the <code>ocaml-option-tsan</code> configuration flag. (The reference manual contains
more information on how to use TSAN.)</li>

<li>New Dynarray module <br />
This new standard library module provides a standard implementation for resizeable array,
which is guaranteed to be memory safe even in presence of data races.</li>

<li>New -H flag for hidden include directories <br />
This new flag makes it possible for build tools to split cleanly dependencies
between direct (the dependencies explicitly added by the project) and indirect
dependencies (the dependencies introduced by the direct dependencies) without
the quirks of previous implementations.</li>

<li>Project-wide occurence metadata support for developer tools <br />
When compiling a module with the <code>-bin-annot</code> and <code>-bin-annot-occurrences</code>
flags, the compiler stores in the <code>.cmt</code> file an index of all occurences of
values, types, modules, &#x2026;</li>

<li>Raw identifiers <br />
To improve OCaml upward-compatibility, there is a new syntax for lowercase
identifiers, <code>let \#if = 0</code>, which works even if the identifier is a keyword
in some OCaml versions. This change has been adopted in OCaml 5.2 in
preparation of the introduction of the <code>effect</code> keyword in OCaml 5.3</li>

<li>Local open in type expressions <br />
Local open are now allowed in type expression: <code>val (+): Int64.(t -&gt; t -&gt; t)</code>.</li>
</ul>

<p>
And a lot of incremental changes:
</p>

<ul class="org-ul">
<li>Around 20 new functions in the standard library besides the new Dynarray module
(in the <code>Array</code>, <code>Float</code>, <code>Format</code>, <code>Fun</code>, <code>In_channel</code>, <code>Out_channel</code>, and <code>Random</code> modules )</li>
<li>Many fixes and improvements in the runtime</li>
<li>Many bug fixes</li>
</ul>

<p>
OCaml 5.2.0 is still a somewhat experimental release compared to the OCaml
4.14 branch. In particular
</p>

<ul class="org-ul">
<li>The Windows MSVC port is still unavailable.</li>
<li>Ephemeron performances need to be investigated.</li>
<li><code>statmemprof</code> is being tested in the developer branch of OCaml.</li>
<li>There are a number of known runtime concurrency or GC performance bugs
(that trigger under rare circumstances).</li>
</ul>

<p>
Since the Windows MSVC port and statmemprof are still missing, the maintenance
support for OCaml 4.14 will be extended until at least the end of the year.
</p>

<p>
Please report any unexpected behaviours on the <a href="https://github.com/ocaml/ocaml/issues">OCaml issue tracker</a> and post any questions or comments you might have here on discuss.
</p>

<p>
The full list of changes can be found in the changelog below.
</p>
</div>

<div id="outline-container-org4d0a332" class="outline-4">
<h4 id="org4d0a332">Installation Instructions</h4>
<div class="outline-text-4" id="text-org4d0a332">
<p>
The base compiler can be installed as an opam switch with the following commands:
</p>

<pre class="example" id="org97d63c6">
opam update
opam switch create 5.2.0
</pre>

<p>
The source code for the release candidate is also directly available on:
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/archive/5.2.0.tar.gz">GitHub</a></li>
<li><a href="https://caml.inria.fr/pub/distrib/ocaml-5.2/ocaml-5.2.0.tar.gz">OCaml archives at Inria</a></li>
</ul>
</div>
</div>

<div id="outline-container-org91ce2a8" class="outline-4">
<h4 id="org91ce2a8">Fine-Tuned Compiler Configuration</h4>
<div class="outline-text-4" id="text-org91ce2a8">
<p>
If you want to tweak the configuration of the compiler, you can switch to the option variant with:
</p>

<pre class="example" id="org27188fc">
opam update
opam switch create &lt;switch_name&gt; ocaml-variants.5.1.0+options &lt;option_list&gt;
</pre>


<p>
where <code>&lt;option_list&gt;</code> is a space separated list of <code>ocaml-option-*</code> packages. For instance, for a <code>flambda</code> and <code>no-flat-float-array</code> switch:
</p>

<pre class="example" id="org574dbd3">
opam switch create 5.2.0+flambda+nffa ocaml-variants.5.2.0+options ocaml-option-flambda ocaml-option-no-flat-float-array
</pre>
</div>
</div>

<div id="outline-container-orge24e5a3" class="outline-4">
<h4 id="orge24e5a3">OCaml 5.2.0 Changelog (13 May 2024)</h4>
<div class="outline-text-4" id="text-orge24e5a3">
<p>
(Changes that can break existing programs are marked with a "*")
</p>
</div>

<ul class="org-ul">
<li><a id="orge3dabf0"></a>Restored backends:<br />
<div class="outline-text-5" id="text-orge3dabf0">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12276">#12276</a>, <a href="https://github.com/ocaml/ocaml/issues/12601">#12601</a>: native-code compilation for POWER (64 bits, little-endian)
(Xavier Leroy, review by KC Sivaramakrishnan, Anil Madhavapeddy,
 and Stephen Dolan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12667">#12667</a>: extend the latter to POWER 64 bits, big-endian, ELFv2 ABI
(A. Wilcox, review by Xavier Leroy)</li>
</ul>
</div>
</li>

<li><a id="org5da3825"></a>Runtime system:<br />
<div class="outline-text-5" id="text-org5da3825">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12193">#12193</a>: Re-introduce GC compaction for shared pools
Adds a parallel compactor for the shared pools (which contain major heap
blocks sized less than 128 words). Explicit only for now, on calls to
<code>Gc.compact</code>.
(Sadiq Jaffer, Nick Barnes, review by Anil Madhavapeddy, Damien Doligez,
 David Allsopp, Miod Vallat, Artem Pianykh, Stephen Dolan, Mark Shinwell
 and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12114">#12114</a>: Add ThreadSanitizer support
(Fabrice Buoro and Olivier Nicole, based on an initial work by Anmol Sahoo,
 review by Damien Doligez, Sébastien Hinderer, Jacques-Henri Jourdan, Luc
 Maranget, Guillaume Munch-Maccagnoni, Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12850">#12850</a>: Update Gc.quick_stat data at the end of major cycles and compaction
This PR adds an additional caml_collect_gc_stats_sample_stw to the major heap
cycling stw. This means that Gc.quick_stat now actually reflects the state of
the heap after a major cycle or compaction.
(Sadiq Jaffer, review by Miod Vallat and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12859">#12859</a>: Ensure Gc.compact does a full major before the compactor runs
(Sadiq Jaffer, review by Leo White, Mark Shinwell, Gabriel Scherer,
 Josh Berdine, David Allsopp and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/10111">#10111</a>: Increase the detail of location information for debugging events to
allow the end line number and character offset to be reported.
(David Allsopp, review by Nick Barnes, Enguerrand Decorne and Stephen Dolan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/10403">#10403</a>, <a href="https://github.com/ocaml/ocaml/issues/12202">#12202</a>: introduce <code>caml_ext_table_add_noexc</code> that does not
raise <code>Out_of_memory</code> exceptions and use it inside the blocking sections
of <code>caml_read_directory</code>.  Also, check for overflows in ext table sizes.
(Xavier Leroy, report by Arseniy Alekseyev, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11332">#11332</a>, <a href="https://github.com/ocaml/ocaml/issues/12702">#12702</a>: make sure <code>Bool_val(v)</code> has type <code>bool</code> in C++
(Xavier Leroy, report by ygrek, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12772">#12772</a>, <a href="https://github.com/ocaml/ocaml/issues/12787">#12787</a>: Avoid using _Bool in public headers for the sake of C++
compatibility
(Guillaume Munch-Maccagnoni, report by KC Sivaramakrishnan, review
by Xavier Leroy and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12223">#12223</a>: Constify constructors and flags tables in C code. Now these
tables will go in the readonly segment, where they belong.
(Antonin Décimo, review by Gabriel Scherer and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12234">#12234</a>: make instrumented time calculation more thread-safe on macOS.
(Anil Madhavapeddy, review by Daniel Bünzli and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12235">#12235</a>, <a href="https://github.com/ocaml/ocaml/issues/12468">#12468</a>: introduce and use the <code>CAMLnoret</code> macro as
a lighter alternative to <code>CAMLnoreturn_start</code> / <code>CAMLnoreturn_end</code>.
Implement it so as to conform with C11, C23, C++11, C++17.
(Xavier Leroy and Dhruv Maroo, with help from Antonin Décimo, review by
 Gabriel Scherer and David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12275">#12275</a>: caml/stack.h: more abstract macros to describe OCaml stacks and
how to traverse them, supporting more stack layouts.
(Xavier Leroy, review by KC Sivaramakrishnan and Fabrice Buoro)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12268">#12268</a>: deliver <code>Out_of_memory</code> exception if domain creation fails
due to memory resource exhaustion.  It was previous always a <code>Failure</code>.
(Anil Madhavapeddy, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12300">#12300</a>, <a href="https://github.com/ocaml/ocaml/issues/12314">#12314</a>: Discard out_channel buffered data on permanent I/O error
(Xavier Leroy, report by Török Edwin, review by Anil Madhavapeddy
and Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11386">#11386</a>: Simplifications and fixes to multicore systhreads implementation.
(Guillaume Munch-Maccagnoni, review by Anil Madhavapeddy and KC
 Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12875">#12875</a>, <a href="https://github.com/ocaml/ocaml/issues/12879">#12879</a>, <a href="https://github.com/ocaml/ocaml/issues/12882">#12882</a>: Execute preemptive systhread switching as a
delayed pending action. This ensures that one can reason within the
FFI that no mutation happens on the same domain when allocating on
the OCaml heap from C, consistently with OCaml 4. This also fixes
further bugs with the multicore systhreads implementation.
(Guillaume Munch-Maccagnoni, bug reports and suggestion by Mark
 Shinwell, review by Nick Barnes and Stephen Dolan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12408">#12408</a>: <code>Domain.spawn</code> no longer leaks its functional argument for
the whole duration of the children domain lifetime.
(Guillaume Munch-Maccagnoni, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12409">#12409</a>: Fix unsafety and deadlocks should an asynchronous exception
arise at specific locations during domain creation and shutdown.
(Guillaume Munch-Maccagnoni, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11911">#11911</a>, <a href="https://github.com/ocaml/ocaml/issues/12381">#12381</a>: Restore statmemprof functionality in part, with
some API changes in Gc.Memprof.
(Nick Barnes, review by Jacques-Henri Jourdan
 and Guillaume Munch-Maccagnoni).</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12430">#12430</a>: Simplify dynamic bytecode loading in Meta.reify_bytecode
(Stephen Dolan, review by Sébastien Hinderer, Vincent Laviron and Xavier
 Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12489">#12489</a>: Fix an error-handling bug in caml_alloc_sprintf
(Stephen Dolan, report by Chris Casinghino, review by Jeremy Yallop
 and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11307">#11307</a>: Finish adapting the implementation of asynchronous actions for
multicore: soundness, liveness, and performance issues.
Do not crash if a signal handler is called from an unregistered C
thread, and other possible soundness issues. Prevent issues where join
on other domains could make the toplevel unresponsible to Ctrl-C. Avoid
needless repeated polling in C code when callbacks cannot run
immediately.
(Guillaume Munch-Maccagnoni, review by Enguerrand Decorne, Xavier
Leroy, and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12634">#12634</a>: Simplify TSan backtrace bookkeeping upon raise
(Olivier Nicole and Fabrice Buoro, review by Gabriel Scherer)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12686">#12686</a>: Some primitives had the wrong types to be callable from the bytecode
interpreter.  Either fix their types, mark them as <code>CAMLexport</code> instead of
<code>CAMLprim</code>, or remove them entirely if no longer used.
(Xavier Leroy, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12700">#12700</a>, continuing <a href="https://github.com/ocaml/ocaml/issues/11763">#11763</a> and trying to address <a href="https://github.com/ocaml/ocaml/issues/12660">#12660</a>:
Use the correct types for primitives when generating the table of primitives
used by ocamlrun.
(Xavier Leroy, motivation, review and improvements by Antonin Décimo)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12345">#12345</a>, <a href="https://github.com/ocaml/ocaml/issues/12710">#12710</a>: Fix issues with finaliser orphaning at domain termination
(KC Sivaramakrishnan, report by Gabriel Scherer, review by Gabriel Scherer,
Sadiq Jaffer and Fabrice Buoro)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12599">#12599</a>: Refactor Dynlink startup to avoid parsing bytecode sections twice
(Stephen Dolan, review by David Allsopp, Hugo Heuzard, Damien Doligez and
 Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12678">#12678</a>, <a href="https://github.com/ocaml/ocaml/issues/12898">#12898</a>: free channel buffers on close rather than on finalization
(Damien Doligez, review by Jan Midtgaard and Gabriel Scherer, report
 by Jan Midtgaard)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12681">#12681</a>: Fix TSan false positives due to volatile write handling
(Olivier Nicole, Fabrice Buoro and Anmol Sahoo, review by Luc Maranget,
 Gabriel Scherer, Hernan Ponce de Leon and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12743">#12743</a>: Use pthread_sigmask instead of sigprocmask
Updates usage of sigprocmask to pthread_sigmask in otherlibs/unix.
(Max Slater, review by Miod Vallat and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12769">#12769</a>: Unify MSVC and MinGW-w64 code paths, by always using WinAPI
directly.
(David Allsopp, Antonin Décimo, and Samuel Hym, review by Nicolas
 Ojeda Bar)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11911">#11911</a>, <a href="https://github.com/ocaml/ocaml/issues/12382">#12382</a>, <a href="https://github.com/ocaml/ocaml/issues/12383">#12383</a>: Restore statmemprof functionality in part
(backtrace buffers, per-thread and per-domain data structures,
GC/allocation interface). (Nick Barnes, review by Gabriel Scherer,
Fabrice Buoro, Sadiq Jaffer, Guillaume Munch-Maccagnoni, and
Jacques-Henri Jourdan).</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12735">#12735</a>: Store both ends of the stack chain in continuations
(Leo White, review by Miod Vallat and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12746">#12746</a>: Simplify and clean up TSan annotations
(Olivier Nicole, review by Miod Vallat and Fabrice Buoro)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12809">#12809</a>: Add ThreadSanitizer support to FreeBSD/amd64
(Miod Vallat, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12810">#12810</a>: Port ThreadSanitizer support to Linux and macOS on arm64
(Miod Vallat, review by Tim McGilchrist)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12811">#12811</a>: Define and use the CAMLthread_local macro for TLS variables.
(Antonin Décimo and Samuel Hym, review by Miod Vallat and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12814">#12814</a>: More detailed failure messages from <code>input_value</code> and <code>Marshal.from_*</code>
(Xavier Leroy, review by Stephen Dolan and Anil Madhavapeddy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12815">#12815</a>: Correctly format multi-line locations in exception backtraces, in the
style that the compiler driver uses.
(David Allsopp, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12773">#12773</a>, <a href="https://github.com/ocaml/ocaml/issues/12830">#12830</a>, <a href="https://github.com/ocaml/ocaml/issues/12834">#12834</a>: Rewrite <code>caml_c_thread_(un)register</code> to fix
various bugs.
(Guillaume Munch-Maccagnoni, reported by Miod Vallat, suggested by
 Hari Hara Naveen S, reviewed by Fabrice Buoro, Gabriel Scherer and
 Miod Vallat)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12876">#12876</a>: Port ThreadSanitizer support to Linux on POWER
(Miod Vallat, review by Tim McGilchrist)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12886">#12886</a>: Reinitialize IO mutexes after fork
(Max Slater, review by Guillaume Munch-Maccagnoni and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12907">#12907</a>: Port ThreadSanitizer support to Linux on RiscV
(Miod Vallat, review by Nicolás Ojeda Bär and Fabrice Buoro)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12915">#12915</a>: Port ThreadSanitizer support to Linux on s390x
(Miod Vallat, review by Tim McGilchrist)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12934">#12934</a>: Fix data races between marking and sweeping functions
(Olivier Nicole, suggested by Stephen Dolan, review by Gabriel Scherer,
 Miod Vallat and Damien Doligez)</li>
</ul>
</div>
</li>

<li><a id="org845269f"></a>Language features:<br />
<div class="outline-text-5" id="text-org845269f">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12295">#12295</a>, <a href="https://github.com/ocaml/ocaml/issues/12568">#12568</a>: Give ~while true' a polymorphic type, similarly to
~assert false'
(Jeremy Yallop, review by Nicolás Ojeda Bär and Gabriel Scherer,
suggestion by Rodolphe Lepigre and John Whitington)</li>

<li><p>
<a href="https://github.com/ocaml/ocaml/issues/12044">#12044</a>: Add local module open syntax for types.
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">module</span> <span style="color: #444fcf;">A</span> = <span style="color: #000000; font-weight: bold;">struct</span>
  <span style="color: #000000; font-weight: bold;">type</span> <span style="color: #444fcf;">t</span> = int
  <span style="color: #000000; font-weight: bold;">type</span> <span style="color: #444fcf;">r</span> = unit
  <span style="color: #000000; font-weight: bold;">type</span> <span style="color: #444fcf;">s</span> = string
<span style="color: #000000; font-weight: bold;">end</span>

<span style="color: #000000; font-weight: bold;">type</span> <span style="color: #444fcf;">example</span> = <span style="color: #444fcf;">A.</span>(t * r * s)
</pre>
</div>
<p>
(Alistair O'Brien, review by Gabriel Scherer, Nicolás Ojeda Bär
 and Florian Angeletti)
</p></li>

<li><a href="https://github.com/ocaml/ocaml/issues/11252">#11252</a>, RFC 27: Support raw identifier syntax \#foo
(Stephen Dolan, review by David Allsopp, Gabriel Scherer and Olivier Nicole)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12315">#12315</a>: Use type annotations from arguments in let rec
(Stephen Dolan, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12375">#12375</a>: allow use of [@untagged] for all immediate types like char, bool,
and variant with only constant constructors.
(Christophe Raffalli, review by Gabriel Scherer)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12502">#12502</a>: the compiler now normalizes the newline sequence \r\n to
a single \n character during lexing, to guarantee that the semantics
of newlines in string literals is not modified by Windows tools
transforming \n into \r\n in source files.
Warning 29 [eol-in-string] is not emitted anymore, as the normalization
gives a more robust semantics to newlines in string literals.
(Gabriel Scherer and Damien Doligez, review by Daniel Bünzli, David
 Allsopp, Andreas Rossberg, Xavier Leroy, report by Andreas Rossberg)</li>
</ul>
</div>
</li>

<li><a id="org7730014"></a>Standard library:<br />
<div class="outline-text-5" id="text-org7730014">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/11563">#11563</a>: Add the Dynarray module to the stdlib. Dynamic arrays are
arrays whose length can be changed by adding or removing elements at
the end, similar to 'vectors' in C++ or Rust.
(Gabriel Scherer, Simon Cruanes and Florian Angeletti, review by
 Daniel Bünzli, Guillaume Munch-Maccagnoni, Clément Allain,
 Damien Doligez, Wiktor Kuchta and Pieter Goetschalckx)</li>
</ul>


<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12716">#12716</a>: Add <code>Format.pp_print_nothing</code> function.
(Léo Andrès, review by Gabriel Scherer and Nicolás Ojeda Bär)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/6732">#6732</a>, <a href="https://github.com/ocaml/ocaml/issues/12423">#12423</a>: Make Buffer.add_substitute surjective and fix its
documentation.
(Damien Doligez, review by Antonin Décimo)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/10775">#10775</a>, <a href="https://github.com/ocaml/ocaml/issues/12499">#12499</a>: Half-precision floating-point elements in Bigarray.
(Anton Yabchinskiy, review by Xavier Leroy and Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11517">#11517</a>, <a href="https://github.com/ocaml/ocaml/issues/12477">#12477</a>: Expose pp_infinity in interface of the format module, and
check that margin is less than pp_infinity when setting or checking geometry.
(Janith Petangoda, reported by Simmo Saan, reviewed by Florian Angeletti,
Simmo Saan, Josh Berdine and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12217">#12217</a>: Add <code>Array.shuffle</code>.
(Daniel Bünzli, review by Nicolás Ojeda Bär, David Allsopp and Alain Frisch)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12212">#12212</a>: Add cache-aligned constructor for atomics. The patch ensures that
all allocations (of the right size) in the shared heap are aligned.
(Bartosz Modelski with Gabriel Scherer, Guillaume Munch-Maccagnoni,
 Xavier Leroy, review by Alain Frisch, Anil Madhavapeddy, Gabriel Scherer,
 Guillaume Munch-Maccagnoni, KC Sivaramakrishnan, Stefan Muenzel,
 Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12307">#12307</a>: Add BLAKE2b hashing and an MD5 submodule to the Digest module.
(Xavier Leroy, review by Olivier Nicole, Gabriel Scherer, Wiktor Kuchta,
 Daniel Bünzli, David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12365">#12365</a>: Add In_channel.input_bigarray, In_channel.really_input_bigarray,
Out_channel.output_bigarray, Unix.read_bigarray, Unix.write_bigarray,
Unix.single_write_bigarray.
(Nicolás Ojeda Bär, review by Jeremy Yallop, Xavier Leroy, Gabriel Scherer,
 David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12455">#12455</a>: Add <code>Array.init_matrix</code>, <code>Float.Array.make_matrix</code>,
<code>Float.Array.init_matrix</code>.
(Glen Mével, review by Xavier Leroy, Gabriel Scherer, Jeremy Yallop,
Nicolas Ojeda Bar)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12455">#12455</a>: <code>Array.make_matrix dimx dimy f</code> now raises <code>Invalid_argument</code>
when <code>dimx = 0 &amp;&amp; dimy &lt; 0</code> This was already specified but not enforced.
(Glen Mével, report by Jeremy Yallop, review by Nicolas Ojeda Bar)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12459">#12459</a>: Add <code>Random.int_in_range</code>, <code>Random.int32_in_range</code>,
<code>Random.int64_in_range</code>, <code>Random.nativeint_in_range</code>,
and their counterpart in <code>Random.State</code>.
(Glen Mével and Xavier Leroy, review by Gabriel Scherer, Xavier Leroy,
 Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12459">#12459</a>: <code>Random</code>: restore compatibility between 32-bit integers (JavaScript)
and 63-bit integers (64-bit OCaml).
For <code>Random.full_int</code> this was guaranteed in 4.14 but wrongly removed in 5.0.
(Xavier Leroy, review by Glen Mével)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12511">#12511</a>: Minor performance improvements and cleanups in the implementation
of modules Int32, Int64, and Nativeint
(Xavier Leroy, review by Gabriel Scherer and Daniel Bünzli)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12558">#12558</a>: Adapt GC alarms for multicore and fix their documentation.
(Guillaume Munch-Maccagnoni, review by KC Sivaramakrishnan
 and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12625">#12625</a>: Remove the Closure module from Obj
(Vincent Laviron, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12758">#12758</a>, <a href="https://github.com/ocaml/ocaml/issues/12998">#12998</a>: Remove the <code>Marshal.Compression</code> flag to the
<code>Marshal.to_*</code> functions.  The compilers are still able to use
ZSTD compression for compilation artefacts.
This is a forward port and clean-up of the emergency fix that was introduced
in OCaml 5.1.1 by <a href="https://github.com/ocaml/ocaml/issues/12734">#12734</a>.
(Xavier Leroy, review by Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12784">#12784</a>: Fix computation of minor-heap allocation in Gc.counters()
and Gc.allocated_bytes(). (Nick Barnes, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12770">#12770</a>: Add <code>Fun.compose</code>.
(Justin Frank, review by Nicolás Ojeda Bär, Daniel Bünzli and Jeremy Yallop)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12845">#12845</a>: Add <code>{In,Out}_channel.is_binary_mode</code> as the dual of
<code>set_binary_mode</code>. This function was previously only available in the internal
C API.
(David Allsopp, review by Nicolás Ojeda Bär and Xavier Leroy)</li>
</ul>
</div>
</li>

<li><a id="orgd8a883f"></a>Type system:<br />
<div class="outline-text-5" id="text-orgd8a883f">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12313">#12313</a>, <a href="https://github.com/ocaml/ocaml/issues/11799">#11799</a>: Do not re-build as-pattern type when a ground type annotation
is given. This allows to work around problems with GADTs in as-patterns.
(Jacques Garrigue, report by Leo White, review by Gabriel Scherer)</li>
</ul>
</div>
</li>

<li><a id="orgefa6461"></a>Code generation and optimizations:<br />
<div class="outline-text-5" id="text-orgefa6461">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/11239">#11239</a>: on x86-64 and RISC-V, reduce alignment of OCaml stacks from 16 to 8.
This reduces stack usage.  It's only C stacks that require 16-alignment.
(Xavier Leroy, review by Gabriel Scherer and Stephen Dolan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12311">#12311</a>: on POWER, 32-bit FP numbers stored in memory (e.g. in bigarrays)
were not correctly rounded sometimes.
(Xavier Leroy, review by Anil Madhavapeddy and Tim McGilchrist)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12551">#12551</a>, <a href="https://github.com/ocaml/ocaml/issues/12608">#12608</a>, <a href="https://github.com/ocaml/ocaml/issues/12782">#12782</a>, <a href="https://github.com/ocaml/ocaml/issues/12596">#12596</a>: Overhaul of recursive value compilation.
Non-function recursive bindings are now forbidden from Lambda onwards,
and compiled using a new Value_rec_compiler module.
(Vincent Laviron and Lunia Ayanides, review by Gabriel Scherer,
 Stefan Muenzel and Nathanaëlle Courant)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/1809">#1809</a>, <a href="https://github.com/ocaml/ocaml/issues/12181">#12181</a>: rewrite <code>compare x y op 0</code> to <code>x op y</code> when values are integers
(Xavier Clerc, Stefan Muenzel, review by Gabriel Scherer and Vincent Laviron)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12825">#12825</a>: disable common subexpression elimination for atomic loads&#x2026; again.
(Gabriel Scherer, review by KC Sivaramakrishnan, Xavier Leroy
 and Vincent Laviron, report by Vesa Karvonen)</li>
</ul>
</div>
</li>

<li><a id="orge54cbd6"></a>Other libraries:<br />
<div class="outline-text-5" id="text-orge54cbd6">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12213">#12213</a>: Dynlink library, improve legibility of error messages
(Samuel Hym, review by Gabriel Scherer and Nicolás Ojeda Bär)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12686">#12686</a>: Runtime_events library, C API: define
<code>caml_runtime_events_{start,pause,resume}</code> as returning <code>void</code>
instead of <code>value</code>.
(Xavier Leroy, review by David Allsopp)</li>
</ul>
</div>
</li>

<li><a id="org0006995"></a>Compiler user-interface and warnings:<br />
<div class="outline-text-5" id="text-org0006995">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/11989">#11989</a>, <a href="https://github.com/ocaml/ocaml/issues/12246">#12246</a>, RFC 31: New flag, -H, to allow for transitive dependencies
without including them in the initial environment.
(Chris Casinghino, François Bobot, and Gabriel Scherer, review by Leo White
 and Stefan Muenzel, RFC by François Bobot)</li>
</ul>


<ul class="org-ul">
<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/10613">#10613</a>, <a href="https://github.com/ocaml/ocaml/issues/12405">#12405</a>: Simplify the values used for the system variable (<code>system:</code> in
<code>ocamlopt -config</code> or the <code>Config.system</code> constant). In particular, s390x and
ppc64 now report "linux" instead of "elf"; all variants of 32-bit ARM on Linux
now report "linux"; OpenBSD now reports "openbsd" instead of "bsd" for 32-bit
ARM; FreeBSD, NetBSD and OpenBSD now report the same value for both x86_64 and
x86_32; x86_32 systems matching <b>bsd but not freebsd</b>, netbsd* or openbsd*
are no longer identified (as on x86_64); x86_32 Linux now reports "linux"
instead of "linux_elf".
(David Allsopp, request by Kate Deplaix, review by Sébastien Hinderer and
Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12247">#12247</a>: configure: &#x2013;disable-ocamldebug can now be used instead
of &#x2013;disable-debugger (which remains available for compatibility)
(Gabriel Scherer, review by Damien Doligez and Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12199">#12199</a>: improve the error message for non-overriding <code>inherit!</code>
(Florian Angeletti, review by Jules Aguillon)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12210">#12210</a>: uniform style for inline code in compiler messages
(Florian Angeletti, review by Gabriel Scherer)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12278">#12278</a>, #:12325: Remove the OCAML_FLEXLINK environment variable from the
compiler drivers. This environment variable was previously used as part of the
FlexDLL bootstrap procedure and existed solely for that purpose. Its removal
greatly simplifies both the build system and testsuite machinery.
(David Allsopp, review by Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12347">#12347</a>: error messages: always report missing polyvariant tags
(Florian Angeletti, report by Tianbo Hao, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12224">#12224</a>, specialized error message when trying to apply non-functor
module (e.g <code>module M = Int(Int)</code>)
(Florian Angeletti, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12451">#12451</a>: Warning 53 (misplaced attributes) now works for all attributes.
(Chris Casinghino, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12622">#12622</a>: Give hints about existential types appearing in error messages
(Leo White, review by Gabriel Scherer and Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12671">#12671</a>: When a class type parameter or class parameter does not match,
identify which parameter in the error message, instead of saying
"A type parameter" or "A parameter".
(Stefan Muenzel, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12679">#12679</a>: Add more detail to the error message and manual in case of
invalid module type substitutions.
(Stefan Muenzel, review by Gabriel Scherer and Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12750">#12750</a>: Display the command executed to extract primitives in
<code>ocamlc -verbose</code>.
(David Allsopp, review by Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12777">#12777</a>: Add details about the actual and expected method types to the method
mismatch error messages.
(Javier Chávarri, review by Gabriel Scherer and Florian Angeletti)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12942">#12942</a>: Fix an line ordering in some module inclusion error messages
(Nick Roberts, review by Florian Angeletti, report by Carl Eastlund)</li>
</ul>
</div>
</li>

<li><a id="org3b0d0ff"></a>Manual and documentation:<br />
<div class="outline-text-5" id="text-org3b0d0ff">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12338">#12338</a>: clarification of the documentation of process related function in
the unix module regarding the first element of args and shell's pid.
(Christophe Raffalli, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12473">#12473</a>: Document in runtime/memory.c our current understanding of
accesses to the OCaml heap from the C runtime code &#x2013; the problem
of hybrid programs mixing two memory models.
(Gabriel Scherer and Guillaume Munch-Maccagnoni, review by Olivier
 Nicole and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12456">#12456</a>: Document the incompatibility between effects on the one
hand, and <code>caml_callback</code> and asynchronous callbacks (signal
handlers, finalisers, memprof callbacks&#x2026;) on the other hand.
(Guillaume Munch-Maccagnoni, review by KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12694">#12694</a>: Document in runtime/tsan.c the TSan instrumentation choices and the
consequences with regard to the memory model.
(Olivier Nicole, review by Miod Vallat, Gabriel Scherer, Guillaume
 Munch-Maccagnoni and Fabrice Buoro)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12802">#12802</a>: Add manual chapter about ThreadSanitizer support
(Olivier Nicole, review by Miod Vallat, Sebastien Hinderer, Fabrice Buoro,
 Gabriel Scherer and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12819">#12819</a>: Clarify which runtime interactions are allowed in custom ops
(Basile Clément, review by Guillaume Munch-Maccagnoni and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12840">#12840</a>: manual: update runtime tracing chapter for custom events (ex <a href="https://github.com/ocaml/ocaml/issues/12335">#12335</a>)
(Lucas Pluvinage, Sadiq Jaffer and Olivier Nicole, review by Gabriel Scherer,
 David Allsopp, Tim McGilchrist and Thomas Leonard)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13066">#13066</a>, update OCAMLRUNPARAM documentation for the stack size parameter l
(Florian Angeletti, review by Nicolás Ojeda Bär, Tim McGilchrist, and
 Miod Vallat)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13078">#13078</a>: update Format tutorial on structural boxes to mention alignment
questions.
(Edwin Török, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13092">#13092</a>: document the existence of the <code>[@@poll error]</code> built-in attribute
(Florian Angeletti, review by Gabriel Scherer)</li>
</ul>
</div>
</li>

<li><a id="orgeb4198e"></a>Tools:<br />
<div class="outline-text-5" id="text-orgeb4198e">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12340">#12340</a>: testsuite: collect known issues with current -short-paths
implementation for existential types
(Florian Angeletti, Samuel Hym, review by Florian Angeletti and Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12147">#12147</a>: ocamllex: Allow carriage returns at the end of line directives.
(SeungCheol Jung, review by Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12260">#12260</a>: Fix invalid_argument on some external or module aliases in ocamlnat
(Fabian Hemmer, review by Vincent Laviron)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12185">#12185</a>: New script language for ocamltest.
(Damien Doligez with Florian Angeletti, Sébastien Hinderer, Gabriel Scherer,
 review by Sébastien Hinderer and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12371">#12371</a>: ocamltest: fix recursive expansion of variables.
(Antonin Décimo, Damien Doligez, review by Sébastien Hinderer,
 Damien Doligez, Gabriel Scherer, and Xavier Leroy)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12497">#12497</a>, <a href="https://github.com/ocaml/ocaml/issues/12613">#12613</a>: Make ocamlc/ocamlopt fail with an error when no
input files are specified to build an executable.
(Antonin Décimo, review by Sébastien Hinderer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12576">#12576</a>: ocamldep: various refactors.
(Antonin Décimo, review by Florian Angeletti, Gabriel Scherer, and Léo Andrès)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12615">#12615</a>: ocamldoc: get rid of the odoc_literate and odoc_todo generators.
(Sébaistien Hinderer, review by Gabriel Scherer and Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12624">#12624</a>: Use $XDG_CONFIG_DIRS in addition to $XDG_CONFIG_HOME when searching
for init.ml and use this to extend init.ml support to the toplevel when
running on Windows.
(David Allsopp, report by Jonah Beckford, review by Nicolás Ojeda Bär and
 Antonin Décimo)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12688">#12688</a>: Setting the env variable <code>NO_COLOR</code> with an empty value no longer
has effects. Previously, setting <code>NO_COLOR</code> with any value, including
the empty value, would disable colors (unless <code>OCAML_COLOR</code> is also set).
After this change, the user must set <code>NO_COLOR</code> with an non-empty value
to disable colors. This reflects a specification clarification/change
from the upstream website at <a href="https://no-color.org">https://no-color.org</a>.
(Favonia, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12744">#12744</a>: ocamltest: run tests in recursive subdirs more eagerly
(Nick Roberts, review by Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12901">#12901</a>, 12908: ocamllex: add overflow checks to prevent generating incorrect
lexers; use unsigned numbers in the table encoding when possible.
(Vincent Laviron, report by Edwin Török, review by Xavier Leroy)</li>
</ul>
</div>
</li>

<li><a id="org0773d28"></a>Internal/compiler-libs changes:<br />
<div class="outline-text-5" id="text-org0773d28">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12508">#12508</a> : Add compiler-side support for project-wide occurrences in Merlin, by
generating index tables of all identifier occurrences. This extra data in .cmt
files is only added when the new flag -bin-annot-occurrences is passed.
(Ulysse Gérard, Nathanaëlle Courant, suggestions by Gabriel Scherer and Thomas
Refis, review by Florian Angeletti, Gabriel Scherer and Thomas Refis)</li>

<li><p>
<a href="https://github.com/ocaml/ocaml/issues/12236">#12236</a>, <a href="https://github.com/ocaml/ocaml/issues/12386">#12386</a>, <a href="https://github.com/ocaml/ocaml/issues/12391">#12391</a>, <a href="https://github.com/ocaml/ocaml/issues/12496">#12496</a>, <a href="https://github.com/ocaml/ocaml/issues/12673">#12673</a>: Use syntax as sole determiner of arity
This changes function arity to be based solely on the source program's
parsetree. Previously, the heuristic for arity had more subtle heuristics
that involved type information about patterns.  Function arity is important
because it determines when a pattern match's effects run and is an input
into the fast path for function application.
</p>

<p>
This change affects tooling: it changes the function constructs in parsetree
and typedtree.
</p>

<p>
See <a href="https://github.com/ocaml/RFCs/pull/32">https://github.com/ocaml/RFCs/pull/32</a> for the original RFC.
</p>

<p>
(Nick Roberts; review by Richard Eisenberg, Leo White, and Gabriel Scherer;
RFC by Stephen Dolan)
</p></li>
</ul>


<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12639">#12639</a>: parsing: Attach a location to the RHS of Ptyp_alias
and improve the 'alias type mismatch' error message.
(Jules Aguillon, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12447">#12447</a>: Remove 32-bit targets from X86_proc.system
(Masanori Ogino, review by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12216">#12216</a>, <a href="https://github.com/ocaml/ocaml/issues/12248">#12248</a>: Prevent reordering of atomic loads during instruction
scheduling.  This is for reference, as instruction scheduling is currently
unused in OCaml 5.
(Xavier Leroy, report by Luc Maranget and KC Sivaramakrishnan,
 review by Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12025">#12025</a>: Split Typecore.unify_pat_types into two
to avoid unnecessary references to the environment in type_pat
(Jacques Garrigue and Takafumi Saikawa, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12031">#12031</a>: Use dedicated types to represent names of compilation units
and predefined exceptions in CMO files.
(Sébastien Hinderer, review by Florian Angeletti, Thomas Refis,
Gabriel Scherer, Vincent Laviron, Pierre Chambart, Luke Maurer,
Hugo Heuzard, Xavier Leroy and Damien Doligez)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12109">#12109</a>: Pack parameters to unification in unification_environment
(Takafumi Saikawa and Jacques Garrigue, review by Richard Eisenberg)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12331">#12331</a>, <a href="https://github.com/ocaml/ocaml/issues/12361">#12361</a>: Pack the unification data for pattern checking in Typecore
(Takafumi Saikawa and Jacques Garrigue,
 review by Gabriel Scherer, Thomas Refis and Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12229">#12229</a>: Remove global mutable state for typechecking patterns
in Typecore in favor of local mutable state.
(Nick Roberts, review by Takafumi Saikawa)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12542">#12542</a>: Minor bugfix to <a href="https://github.com/ocaml/ocaml/issues/12236">#12236</a>: restore dropped call to <code>instance</code>
(Nick Roberts, review by Jacques Garrigue)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12242">#12242</a>: Move the computation of stack frame parameters to a separate
<code>Stackframe</code> module, and save the parameters in the results of the
<code>Linearize</code> pass
(Xavier Leroy, review by KC Sivaramakrishnan and Mark Shinwell)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12442">#12442</a>: document jump summaries in the pattern-matching compiler
(Gabriel Scherer and Thomas Refis, review by Florian Angeletti
 and Vincent Laviron)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12446">#12446</a>, <a href="https://github.com/ocaml/ocaml/issues/12792">#12792</a>: remove the hooks machinery around channel locking
in runtime/io.c
(Gabriel Scherer, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12389">#12389</a>, <a href="https://github.com/ocaml/ocaml/issues/12544">#12544</a>, <a href="https://github.com/ocaml/ocaml/issues/12984">#12984</a>, <a href="https://github.com/ocaml/ocaml/issues/12987">#12987</a>: centralize the handling of metadata for
compilation units and artifacts in preparation for better unicode support for
OCaml source files.
(Florian Angeletti, review by Vincent Laviron and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12532">#12532</a>, <a href="https://github.com/ocaml/ocaml/issues/12553">#12553</a>: improve readability of the pattern-matching debug output
(Gabriel Scherer, review by Thomas Refis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12537">#12537</a>: Use C11/C++11 standard static assertion.
(Antonin Décimo, review by Sebastien Hinderer, Xavier Leroy,
 and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12169">#12169</a>: runtime: document and enforce naming conventions around STW sections.
(Gabriel Scherer, review by Enguerrand Decorne, Miod Vallat, B. Szilvasy
 and Nick Barnes, report by KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12669">#12669</a> : Clean up some global state handling in schedgen
(Stefan Muenzel, review by Miod Vallat and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12640">#12640</a>: Make the module separator used in symbol names configurable
(Miod Vallat, review by Hugo Heuzard and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12691">#12691</a> : Clean up Ctype.expand_abbrev_gen and
rename Env.add_local_type to add_local_constraint
(Takafumi Saikawa and Jacques Garrigue, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12786">#12786</a> : Clean up the algorithm of Ctype.limited_generalize
(Takafumi Saikawa and Jacques Garrigue, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/10691">#10691</a>: Ast_mapper, Ast_iterator: add functions directive_argument,
toplevel_directive and toplevel_phrase.
(Guillaume Petiot, review by Gabriel Scherer and Kate Deplaix)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12764">#12764</a>: Move all installable headers in <code>caml/</code> sub-directories.
(Antonin Décimo, review by Gabriel Scherer and David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12914">#12914</a>: Slightly change the s390x assembly dialect in order to build with
Clang's integrated assembler.
(Miod Vallat, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13001">#13001</a>: do not read_back entire shapes to get aliases' uids when building the
usages index
(Ulysse Gérard, review by Gabriel Scherer and Nathanaëlle Courant)</li>
</ul>
</div>
</li>

<li><a id="orgd460c32"></a>Build system:<br />
<div class="outline-text-5" id="text-orgd460c32">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/12198">#12198</a>, <a href="https://github.com/ocaml/ocaml/issues/12321">#12321</a>, <a href="https://github.com/ocaml/ocaml/issues/12586">#12586</a>, <a href="https://github.com/ocaml/ocaml/issues/12616">#12616</a>, <a href="https://github.com/ocaml/ocaml/issues/12706">#12706</a>, <a href="https://github.com/ocaml/ocaml/issues/13048">#13048</a>: continue the merge of the
sub-makefiles into the root Makefile started with <a href="https://github.com/ocaml/ocaml/issues/11243">#11243</a>, <a href="https://github.com/ocaml/ocaml/issues/11248">#11248</a>,
<a href="https://github.com/ocaml/ocaml/issues/11268">#11268</a>, <a href="https://github.com/ocaml/ocaml/issues/11420">#11420</a> and <a href="https://github.com/ocaml/ocaml/issues/11675">#11675</a>.
(Sébastien Hinderer, review by David Allsopp and Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12569">#12569</a>, <a href="https://github.com/ocaml/ocaml/issues/12570">#12570</a>: remove 'otherlibraries' as a prerequisite for 'runtop';
use 'runtop-with-otherlibs' to use a library from otherlibs/
(Gabriel Scherer, review by Sébastien Hinderer, suggestion by David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12652">#12652</a>: Make magic numbers easier to bump and duplicate.
(Sébastien Hinderer, review by Antonin Décimo, David Allsopp and Florian
Angeletti)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12751">#12751</a>: &#x2013;with-target-bindir configure option implemented. This option
refers to the location of the runtime binaries on the target system for a
cross-compiler and is embedded in executables produced by ocamlc. It does
not affect the bytecode executables installed as part of the build. The old
mechanism <code>make TARGET_BINDIR=..</code> no longer works.
(David Allsopp, review by Damien Doligez, Xavier Leroy and Olivier Nicole)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12768">#12768</a>, <a href="https://github.com/ocaml/ocaml/issues/13030">#13030</a>: Detect mingw-w64 coupling with GCC or LLVM, detect clang-cl,
and fix C compiler feature detection on macOS.
(Antonin Décimo, review by Miod Vallat and Sébastien Hinderer)</li>
</ul>
</div>
</li>

<li><a id="orgf8ec8b5"></a>Bug fixes:<br />
<div class="outline-text-5" id="text-orgf8ec8b5">
<ul class="org-ul">
<li><a href="https://github.com/ocaml/ocaml/issues/10652">#10652</a>, <a href="https://github.com/ocaml/ocaml/issues/12720">#12720</a>: fix evaluation order in presence of optional arguments
(Jacques Garrigue, report by Leo White, review by Vincent Laviron)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12595">#12595</a>, <a href="https://github.com/ocaml/ocaml/issues/12597">#12597</a>: fix a race in <code>caml_clear_gc_stats_sample</code>
(Gabriel Scherer, review by B. Szilvasy, report by B. Szilvasy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12580">#12580</a>: Fix location of alias pattern variables.
(Chris Casinghino, review Gabriel Scherer, report by Milo Davis)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12583">#12583</a>: Add a closing event for when <code>EV_MAJOR_EPHE_MARK</code> is complete
(Sudha Parimala, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12566">#12566</a>: caml_output_value_to_malloc wrongly uses <code>caml_stat_alloc</code>
instead of <code>malloc</code> since 4.06, breaking (in pooled mode) user code
that uses <code>free</code> on the result. Symmetrically,
caml_input_value_from_malloc should use <code>free</code>.
(Gabriel Scherer, review by Xavier Leroy and Enguerrand Decorne,
 report by Ido Yariv)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12490">#12490</a>: Unix: protect the popen_processes hashtable with a mutex
(Gabriel Scherer, report by Olivier Nicole, review by Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11931">#11931</a>: Fix tricky typing bug with type substitutions
(Stephen Dolan, review by Leo White and Jacques Garrigue)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12037">#12037</a>, <a href="https://github.com/ocaml/ocaml/issues/12171">#12171</a>: Fix get_extern_state potential NULL dereference.
(Alexander Skvortsov, report by Török Edwin,
 design by Gabriel Scherer, Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12635">#12635</a>: Fix get_intern_state potential NULL dereference.
(Antonin Décimo, review by KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12032">#12032</a>, <a href="https://github.com/ocaml/ocaml/issues/12059">#12059</a>: Bug fixes related to compilation of recursive definitions
(Vincent Laviron, report by Victoire Noizet, review by Gabriel Scherer)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12145">#12145</a>: Loopy constraints cause ocamlc to loop.
Fixed by completely removing the call to <code>update_type</code> in
<code>Typedecl.transl_type_decl</code>, as the expansion is already checked by
<code>check_regularity</code>. As a result, recursion is more polymorphic,
which may cause some (essentially wrong) type declarations to have
unbound type variables, and some constraints unrelated to the concrete
type to be ignored (see tests/typing-misc/constraints.ml).
(Jacques Garrigue, report by Richard Eisenberg, review by Leo White)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12207">#12207</a>, <a href="https://github.com/ocaml/ocaml/issues/12222">#12222</a>: Make closure computation linear in the number of recursive
functions instead of quadratic
(Vincent Laviron, report by François Pottier, review by Nathanaëlle Courant
and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11040">#11040</a>, <a href="https://github.com/ocaml/ocaml/issues/12591">#12591</a>: fix a data race in major_gc.c
(Gabriel Scherer, review by Guillaume Munch-Maccagnoni
 and KC Sivaramakrishnan, report by Sadiq Jaffer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12238">#12238</a>, <a href="https://github.com/ocaml/ocaml/issues/12403">#12403</a>, <a href="https://github.com/ocaml/ocaml/issues/12698">#12698</a>: read input files in one go to avoid source reprinting
issues.
(Gabriel Scherer, report by Mike Spivey and Vincent Laviron, review by
 Nicolás Ojeda Bär, Xavier Leroy and Jeremy Yallop)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12334">#12334</a>, <a href="https://github.com/ocaml/ocaml/issues/12368">#12368</a>: Bad error message with mutually recursive abbreviations
(Jacques Garrigue, report by Richard Eisenberg, review by Gabriel Scherer
 and Richard Eisenberg)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12401">#12401</a>: <code>seek_in</code> and <code>seek_out</code> sometimes returned normally when given
negative offsets, instead of failing. Now both functions should consistently
raise <code>Sys_error</code> in this case.
(Nicolás Ojeda Bär, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12267">#12267</a>: Fix stack alignment computation
(Miod Vallat, report by Jan Midtgaard, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12395">#12395</a>, <a href="https://github.com/ocaml/ocaml/issues/12404">#12404</a>: Fix thread-unsafety in the fallback implementation of
<code>Unix.create_process</code> (the one used when <code>posix_spawnp</code> is unavailable)
(Xavier Leroy, report by Chris Vine, review by Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12949">#12949</a>: open shadowing mistriggers
(Gabriel Scherer, review by Florian Angeletti, report by Andreas Rossberg)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12526">#12526</a>: Honor <code>ocaml.inline always</code> attribute on functions with
optional arguments and default values in the Closure backend
(Alain Frisch, review by Vincent Laviron)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12677">#12677</a>, <a href="https://github.com/ocaml/ocaml/issues/12889">#12889</a>: make Domain.DLS thread-safe
(Gabriel Scherer, review by Olivier Nicole and Damien Doligez,
 report by Vesa Karvonen)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12561">#12561</a>: Fix crash when combining TSan and frame-pointers
(Fabrice Buoro and Olivier Nicole, report by Jan Midtgaard, review by Miod
Vallat and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12482">#12482</a>: Rework bounds checking code in the POWER backend
(Miod Vallat and Xavier Leroy, report by Jan Midtgaard, review by
 KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12528">#12528</a>, <a href="https://github.com/ocaml/ocaml/issues/12703">#12703</a>: Avoid pointer arithmetic overflow in Tag_val macro
(very likely harmless, but can trigger alarms)
(Xavier Leroy, report by Sam Goldman, review by Guillaume Munch-Maccagnoni)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12593">#12593</a>: TSan should handle Effect.Unhandled correctly
(Fabrice Buoro and Olivier Nicole, report by Jan Midtgaard and Miod Vallat,
 review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12684">#12684</a>: fix locations filename in AST produced by the <code>-pp</code> option
(Gabriel Scherer, review by Florian Angeletti)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12714">#12714</a>: check whether macros are defined before using them to ensure
that the headers can always be used in code which turns on -Wundef
(or equivalent).
(Antonin Décimo, review by Miod Vallat, Gabriel Scherer,
 Xavier Leroy, and David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12726">#12726</a>: fix segmentation fault under Windows when executing a bytecode file if
the runtime (<code>ocamlrun.exe</code>) cannot be found.
(Vadim Zborovskii, Nicolás Ojeda Bär, report by Vadim Zborovskii, review by
David Allsopp)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12727">#12727</a>, <a href="https://github.com/ocaml/ocaml/issues/12730">#12730</a>: fix bug with value let-rec and labelled applications
(Vincent Laviron, review by Gabriel Scherer)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12751">#12751</a>: Always keep within the 128 character limit for shebang lines. Previous
fix in <a href="https://github.com/ocaml/ocaml/issues/8622">#8622</a> handled building the compiler with a long prefix; this patch
extends this to the bytecode executables emitted by that compiler.
(David Allsopp, review by Damien Doligez, Xavier Leroy and Olivier Nicole)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12755">#12755</a>: Fix data race on global pools arrays of pool_freelist
(Fabrice Buoro and Olivier Nicole, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12796">#12796</a>, <a href="https://github.com/ocaml/ocaml/issues/12801">#12801</a>: Fix memory corruption in caml_unix_alloc_sockaddr
(Thomas Leonard, review by Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12737">#12737</a>: Fix data races in minor_gc.c and caml_natdynlink_open
(Olivier Nicole, review by Stefan Muenzel, Miod Vallat, Guillaume
 Munch-Maccagnoni, Gabriel Scherer and Xavier Leroy)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12831">#12831</a>: Fix call to caml_call_realloc_stack for s390x in PIC mode
(Vincent Laviron, report by Jerry James, review by Miod Vallat)</li>

<li>* (<b>breaking change</b>) <a href="https://github.com/ocaml/ocaml/issues/12837">#12837</a>: Show non-generalizable type parameters in type definitions
Changes type of type parameters in outcometree.mli.
(Jacques Garrigue, review by Richard Eisenberg)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12897">#12897</a>: fix locking bugs in Runtime_events
(Gabriel Scherer and Thomas Leonard,
 review by Olivier Nicole, Vincent Laviron and Damien Doligez,
 report by Thomas Leonard)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12851">#12851</a>: Fix race between runtime events teardown and event emission
(Olivier Nicole, review by Miod Vallat and Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12860">#12860</a>: Fix an assertion that wasn't taking into account the possibility of an
ephemeron pointing at static data.
(Mark Shinwell, review by Gabriel Scherer and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12861">#12861</a>: Fix a possible crash in the <code>threads</code> library.
(Mark Shinwell, review by Gabriel Scherer and KC Sivaramakrishnan)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/11040">#11040</a>, <a href="https://github.com/ocaml/ocaml/issues/12894">#12894</a>: Silence false data race observed between caml_shared_try_alloc
and oldify. Introduces macros to call tsan annotations which help annotate
a "happens before" relationship.
(Hari Hara Naveen S and Olivier Nicole,
 review by Gabriel Scherer and Miod Vallat)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12958">#12958</a>: Fix tail-modulo-cons compilation of <code>try-with</code>, <code>&amp;&amp;</code> and <code>||</code>
expressions.
(Gabriel Scherer and Nicolás Ojeda Bär, report by Sylvain Boilard, review by
Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12919">#12919</a>: Fix register corruption in caml_callback2_asm on s390x.
(Miod Vallat, review by Gabriel Scherer)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12924">#12924</a>, <a href="https://github.com/ocaml/ocaml/issues/12930">#12930</a>: Rework package constraint checking to improve interaction with
immediacy
(Chris Casinghino and Florian Angeletti, review by Florian Angeletti and
 Richard Eisenberg)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12969">#12969</a>: Fix a data race in caml_darken_cont
(Fabrice Buoro and Olivier Nicole, review by Gabriel Scherer and Miod Vallat)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/12971">#12971</a>, <a href="https://github.com/ocaml/ocaml/issues/12974">#12974</a>: fix an uncaught Ctype.Escape exception on some
invalid programs forming recursive types.
(Gabriel Scherer, review by Florian Angeletti, report by Neven Villani)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13019">#13019</a>: Remove linking instructions for the Unix library from threads.cma
(this was done for threads.cmxa in OCaml 3.11). Eliminates warnings from
new lld when using threads.cma of duplicated libraries.
(David Allsopp, review by Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13058">#13058</a>: Add TSan instrumentation to caml_call_gc(), since it may raise
exceptions.
(Fabrice Buoro, Olivier Nicole, Gabriel Scherer and Miod Vallat)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13079">#13079</a>: Save and restore frame pointer across Iextcall on ARM64
(Tim McGilchrist, review by KC Sivaramakrishnan and Miod Vallat)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13094">#13094</a>: Fix undefined behavior of left-shifting a negative number.
(Antonin Décimo, review by Miod Vallat and Nicolás Ojeda Bär)</li>

<li><a href="https://github.com/ocaml/ocaml/issues/13130">#13130</a>: minor fixes to pprintast for raw identifiers and local module open
syntax for types.
(Chet Murthy, review by Gabriel Scherer)</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org10f1ba0" class="outline-2">
<h2 id="org10f1ba0">Old CWN</h2>
<div class="outline-text-2" id="text-org10f1ba0">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe to the <a href="https://sympa.inria.fr/sympa/info/caml-list">caml-list</a>.
</p>

<div class="authorname" id="org6e00e99">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>