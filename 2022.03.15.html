<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-03-15 Tue 10:57 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2022.03.08.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2022.03.22.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of March 08 to 15, 2022.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">Robur Reproducible Builds</a></li>
<li><a href="#2">OCaml TeXmacs plugin</a></li>
<li><a href="#3">Release of ocaml-sf/learn-ocaml:0.14.0</a></li>
<li><a href="#4">Tutorial: Roguelike with effect handlers</a></li>
<li><a href="#5">Awesome Multicore OCaml and Multicore Monorepo</a></li>
<li><a href="#6">ppx_viewpattern initial release</a></li>
<li><a href="#org845d4fc">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Robur Reproducible Builds</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-robur-reproducible-builds/8827/6">https://discuss.ocaml.org/t/ann-robur-reproducible-builds/8827/6</a>
</p>
</div>

<div id="outline-container-org3254934" class="outline-3">
<h3 id="org3254934">Continuing this thread, Hannes Mehnert announced</h3>
<div class="outline-text-3" id="text-org3254934">
<p>
The background article by @rand is now online
<a href="https://r7p5.earth/blog/2022-3-7/Builder-web%20visualizations%20at%20Robur">https://r7p5.earth/blog/2022-3-7/Builder-web%20visualizations%20at%20Robur</a>
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">OCaml TeXmacs plugin</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2022-03/msg00009.html">https://sympa.inria.fr/sympa/arc/caml-list/2022-03/msg00009.html</a>
</p>
</div>

<div id="outline-container-orgcc9eb5b" class="outline-3">
<h3 id="orgcc9eb5b">Nicolas Ratier announced</h3>
<div class="outline-text-3" id="text-orgcc9eb5b">
<p>
I made a basic OCaml plugin for TeXmacs (<a href="http://www.texmacs.org">http://www.texmacs.org</a>)
I would like to keep it simple, but comments and improvements are welcome.
<a href="http://forum.texmacs.cn/t/ocaml-a-basic-ocaml-plugin-for-texmacs/813">http://forum.texmacs.cn/t/ocaml-a-basic-ocaml-plugin-for-texmacs/813</a>
</p>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Release of ocaml-sf/learn-ocaml:0.14.0</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-release-of-ocaml-sf-learn-ocaml-0-14-0/9491/1">https://discuss.ocaml.org/t/ann-release-of-ocaml-sf-learn-ocaml-0-14-0/9491/1</a>
</p>
</div>

<div id="outline-container-org69f674d" class="outline-3">
<h3 id="org69f674d">Yurug announced</h3>
<div class="outline-text-3" id="text-org69f674d">
<p>
We are very pleased to announce the latest stable release of <a href="https://github.com/ocaml-sf/learn-ocaml">Learn-OCaml</a>, version <code>0.14.0</code>.
</p>

<p>
Many thanks to all users and developers who reported bugs, contributed features, or patches! Special thanks to
@erikmd who made many of the changes included in this release.
</p>

<p>
A (mostly) comprehensive list of the features, fixes, and enhancements offered by this release is available in <a href="https://github.com/ocaml-sf/learn-ocaml/releases/tag/v0.14.0">the Release Notes </a>.
</p>

<p>
A brief and incomplete summary of the changes:
</p>

<ul class="org-ul">
<li>A long-standing bug has been fixed. This bug was triggered when the user opened several sessions: the auto-sync mechanism could lead to overwriting the student's code with an older version.</li>

<li>The release assets now include a zip file containing the contents of the `www` directory. This eases the usage of the distributed binaries.</li>
</ul>

<p>
If need be, feel free to open issues in the <a href="https://github.com/ocaml-sf/learn-ocaml/issues">Learn-OCaml bug tracker</a> or the <a href="https://github.com/pfitaxel/learn-ocaml.el/issues">learn-ocaml.el bug tracker</a>, or post in this thread to share thoughts or
experience-feedback.
</p>

<p>
Happy OCaml learning and teaching!
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">Tutorial: Roguelike with effect handlers</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/tutorial-roguelike-with-effect-handlers/9422/18">https://discuss.ocaml.org/t/tutorial-roguelike-with-effect-handlers/9422/18</a>
</p>
</div>

<div id="outline-container-org6f649d9" class="outline-3">
<h3 id="org6f649d9">Continuing this thread, stw said</h3>
<div class="outline-text-3" id="text-org6f649d9">
<p>
Sorry about the late reply, I was busy actually verifying that my concept works out. Thankfully it does :smile:
</p>

<p>
The UI framework is inspired by
<a href="https://ajnsit.github.io/concur-documentation/ch02-01-anatomy-of-a-widget.html">Concur</a> which means that every
widget listens for some set of events and suspends computation until one of these events occurs. Once it does, it
continues execution until it encounter the next await at which point it will suspend once more. Once a widget has
fulfilled its purpose it terminates with some return value (e.g. text input is confirmed with enter -&gt; return with a
string).
Complex UIs are then built by composing simpler widgets. A more detailed explanation can be found in the link above.
</p>

<p>
I've implemented this concept using an await function that takes a list of triggers and a handler for each possible
event:
</p>
<div class="org-src-container">
<pre class="src src-ocaml">effect <span style="color: #000000; background-color: #ffffff;">Await</span> : <span style="color: #228b22;">Event.</span>t list -&gt; <span style="color: #228b22;">Event.</span>t
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">await</span> <span style="color: #a0522d;">triggers</span> <span style="color: #a0522d;">handler</span> =
  handler (<span style="color: #228b22;">EffectHandlers.</span>perform (<span style="color: #000000; background-color: #ffffff;">Await</span> triggers))

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">check_box</span> <span style="color: #a0522d;">checked</span>  =
  <span style="color: #b22222;">(* </span><span style="color: #b22222;">display check box </span><span style="color: #b22222;">*)</span>
  ...;
  await [<span style="color: #000000; background-color: #ffffff;">Mouse_press</span>; <span style="color: #000000; background-color: #ffffff;">Key_press</span>] (<span style="color: #a020f0;">function</span>
  | <span style="color: #000000; background-color: #ffffff;">Mouse_press</span> -&gt;
    print_endline <span style="color: #8b2252;">"I've been (un-)checked!"</span>;
    check_box (<span style="color: #a52a2a;">not</span> checked)
  | <span style="color: #000000; background-color: #ffffff;">Key_press</span> -&gt; <span style="color: #b22222;">(* </span><span style="color: #b22222;">Terminate if any key is pressed </span><span style="color: #b22222;">*)</span> checked)
</pre>
</div>

<p>
Every widget can then be implemented as a function which displays the widget and performs an <code>Await triggers</code> which
is resumed by passing an event from <code>triggers</code>, for example the check box above.
</p>

<p>
The most complex widget I've implemented so far is a single line text input. It can be clicked or selected with tab.
Moving the mouse while holding the button down changes the selection. As an automaton:
</p>


<div id="orgc8face1" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/5/574e164b6189608283de32d9f375534ca80caffa.png" alt="574e164b6189608283de32d9f375534ca80caffa.png" />
</p>
</div>

<p>
Obviously, this is not a directed acyclic graph and therefore not a perfect fit for the implicit state stored in the
continuation. Specifically, <code>Pressed</code> has an edge to one of its multiple parents. We can extract the <code>Pressed</code> state
into its own function and therefore avoid this issue by 'duplicating' this state. Now <code>Pressed</code> no longer has
multiple parents:
</p>


<div id="orge038b5c" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/7/70a34d2f4bb81800a5e3b12b8e49147a0d80ece4.png" alt="70a34d2f4bb81800a5e3b12b8e49147a0d80ece4.png" />
</p>
</div>

<p>
Some cycles remain and we can't remove them because they are essential to the functionality. Instead we throw an
<code>exception Repeat</code> that returns us to a parent node (explicitly shown for Focused -&gt; Pressed -&gt; Released -&gt; Focused).
To do that we modify <code>await</code>:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">await</span> <span style="color: #a0522d;">triggers</span> <span style="color: #a0522d;">handler</span> =
  <span style="color: #a020f0;">try</span> handler (<span style="color: #228b22;">EffectHandlers.</span>perform (<span style="color: #000000; background-color: #ffffff;">Await</span> triggers)) <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">Repeat</span> -&gt; await triggers handler
</pre>
</div>
<p>
In the end this results in this main method for the text input, with only minor simplifications:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">method</span> <span style="color: #0000ff;">execute</span> =
  <span style="color: #b22222;">(* </span><span style="color: #b22222;">Represent the Pressed state.</span>
<span style="color: #b22222;">     We await the Mouse_release and handle Mouse_motion while we wait. </span><span style="color: #b22222;">*)</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">pressed</span> (<span style="color: #a0522d;">x</span>,<span style="color: #a0522d;">_</span>) =
    selection &lt;- <span style="color: #000000; background-color: #ffffff;">Point</span> x;
    await [<span style="color: #000000; background-color: #ffffff;">`Mouse_release</span>; <span style="color: #000000; background-color: #ffffff;">`Mouse_motion</span>] <span style="color: #a52a2a;">@@</span> <span style="color: #a020f0;">function</span>
    | <span style="color: #000000; background-color: #ffffff;">`Mouse_release</span> (_, <span style="color: #000000; background-color: #ffffff;">LMB</span>) -&gt;
      ()
    | <span style="color: #000000; background-color: #ffffff;">`Mouse_motion</span> (x,_) -&gt;
      self#select x;
      <span style="color: #483d8b;">raise</span> <span style="color: #000000; background-color: #ffffff;">Repeat</span> <span style="color: #b22222;">(* </span><span style="color: #b22222;">This restarts the await function </span><span style="color: #b22222;">*)</span>
    | _ -&gt;
      <span style="color: #483d8b;">raise</span> <span style="color: #000000; background-color: #ffffff;">Repeat</span>
  <span style="color: #000000; font-weight: bold;">in</span>

  <span style="color: #b22222;">(* </span><span style="color: #b22222;">We start in the Unfocused state </span><span style="color: #b22222;">*)</span>
  <span style="color: #000000; font-weight: bold;">begin</span>
    await [<span style="color: #000000; background-color: #ffffff;">`Mouse_press</span>; <span style="color: #000000; background-color: #ffffff;">`Key_press</span>] <span style="color: #a52a2a;">@@</span> <span style="color: #a020f0;">function</span>
    | <span style="color: #000000; background-color: #ffffff;">`Mouse_press</span> (pos, <span style="color: #000000; background-color: #ffffff;">LMB</span>) -&gt;
       <span style="color: #b22222;">(* </span><span style="color: #b22222;">We have registered the press, but only when it is released</span>
<span style="color: #b22222;">          will we be focused. </span><span style="color: #b22222;">*)</span>
       pressed pos
    | <span style="color: #000000; background-color: #ffffff;">`Key_press</span> <span style="color: #000000; background-color: #ffffff;">Tab</span> -&gt;
      selection &lt;- <span style="color: #000000; background-color: #ffffff;">Area</span> (0, <span style="color: #228b22;">List.</span>length keys)
    | _ -&gt; <span style="color: #483d8b;">raise</span> <span style="color: #000000; background-color: #ffffff;">Repeat</span>
  <span style="color: #000000; font-weight: bold;">end</span>;

  <span style="color: #b22222;">(* </span><span style="color: #b22222;">We move into the Focused state </span><span style="color: #b22222;">*)</span>
  <span style="color: #000000; font-weight: bold;">begin</span>
    await [<span style="color: #000000; background-color: #ffffff;">`Codepoint</span>; <span style="color: #000000; background-color: #ffffff;">`Key_press</span>; <span style="color: #000000; background-color: #ffffff;">`Mouse_press</span>] <span style="color: #a52a2a;">@@</span> <span style="color: #a020f0;">function</span>
    | <span style="color: #000000; background-color: #ffffff;">`Key_press</span> <span style="color: #000000; background-color: #ffffff;">Tab</span> | <span style="color: #000000; background-color: #ffffff;">`Key_press</span> <span style="color: #000000; background-color: #ffffff;">Return</span> -&gt;
      () <span style="color: #b22222;">(* </span><span style="color: #b22222;">The only path without raising Repeat.</span>
<span style="color: #b22222;">            Therefore we only leave this await when a tab or return occurs </span><span style="color: #b22222;">*)</span>
    | <span style="color: #000000; background-color: #ffffff;">`Mouse_press</span> (pos, <span style="color: #000000; background-color: #ffffff;">LMB</span>) -&gt;
      pressed pos;
      <span style="color: #483d8b;">raise</span> <span style="color: #000000; background-color: #ffffff;">Repeat</span>
    | <span style="color: #000000; background-color: #ffffff;">`Key_press</span> c -&gt;
      self#insert c;
      <span style="color: #483d8b;">raise</span> <span style="color: #000000; background-color: #ffffff;">Repeat</span>
    | _ -&gt; <span style="color: #483d8b;">raise</span> <span style="color: #000000; background-color: #ffffff;">Repeat</span>
  <span style="color: #000000; font-weight: bold;">end</span>;
  <span style="color: #b22222;">(* </span><span style="color: #b22222;">We have reached the finished state. We can now return the entered text. </span><span style="color: #b22222;">*)</span>
  self#text
</pre>
</div>
<p>
I think that this method captures the automaton above quite nicely and can be relatively easily understood (hopefully
even when one is unfamiliar with the framework and accepts that some magic is happening in the background (: ).
Implementing automatons in terms of effect handlers seems to work quite well, at least for games and UIs. What these
automatons have in common is that they can be thought of as flows, starting at some state and ending at one of
multiple final states and only have few edges that don't fit this scheme, turning them into 'directed almost acyclic
graphs'.
</p>

<p>
There is obviously a lot more necessary for a UI framework (e.g. resizing the window/widgets, delegating the events
to the correct widget, composing widgets, drawing on the screen etc.) and I plan to write about it at some point in
the future. But for that I will first need to actually solve these problems as right now their implementation is
quite barebones. The code can be found here for those interested (still very early in development!):
<a href="https://github.com/Willenbrink/bogue/">https://github.com/Willenbrink/bogue/</a>
</p>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">Awesome Multicore OCaml and Multicore Monorepo</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/awesome-multicore-ocaml-and-multicore-monorepo/9515/1">https://discuss.ocaml.org/t/awesome-multicore-ocaml-and-multicore-monorepo/9515/1</a>
</p>
</div>

<div id="outline-container-orgc16e91d" class="outline-3">
<h3 id="orgc16e91d">Patrick Ferris announced</h3>
<div class="outline-text-3" id="text-orgc16e91d">
<p>
A short announcement of two repositories which some people may or may not have seen. Firstly, <a href="https://github.com/patricoferris/awesome-multicore-ocaml">Awesome Multicore
OCaml</a>, a place for gathering all of the rapidly changing
experiments, ideas, libraries and resources for Multicore OCaml (including some of the discuss threads). If you are
working on something or feel anything is missing please open a PR!
</p>

<p>
Secondly, a <a href="https://github.com/patricoferris/ocaml-multicore-monorepo">Multicore Monorepo</a> which aims to provide a
very quick and easy way to try out effects and parallelism with quite a few libraries (such as Eio, Dream etc.). The
breaking changes introduced by OCaml 5 can make it frustrating to get such a setup in place, although this is less
and less true thanks to the <a href="https://github.com/kit-ty-kate/opam-alpha-repository">alpha repository</a>. The idea is
that you should just be able to clone this repository, create a new <code>5.0.0+trunk</code> switch, install <code>dune</code> and start
hacking. If that's not the case please do open an issue.
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">ppx_viewpattern initial release</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ppx-viewpattern-initial-release/9516/1">https://discuss.ocaml.org/t/ann-ppx-viewpattern-initial-release/9516/1</a>
</p>
</div>

<div id="outline-container-org7e4b584" class="outline-3">
<h3 id="org7e4b584">Simmo Saan announced</h3>
<div class="outline-text-3" id="text-org7e4b584">
<p>
I'm glad to announce the initial release of <a href="https://github.com/sim642/ppx_viewpattern">ppx_viewpattern</a> &#x2013;
transformation for view patterns in OCaml.
</p>

<p>
It <span class="underline">attempts to</span> imitate <a href="https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/view_patterns.html">Haskell view
patterns</a>. I wrote this ppx rewriter
mostly out of curiosity, rather than need, but it turned out neat enough that others might find it interesting or
even useful.
</p>
</div>

<div id="outline-container-org4e8b1db" class="outline-4">
<h4 id="org4e8b1db">Syntax</h4>
<div class="outline-text-4" id="text-org4e8b1db">
<p>
Use <code>[%view? pat when exp]</code> as a pattern to apply <code>exp</code> to whatever the pattern is matching and match the result of
the <code>exp</code> application against <code>pat</code>.
This is analogous to the Haskell view pattern <code>exp -&gt; pat</code>.
</p>

<p>
The above extension node payload syntax is the best I could come up with to combine an expression and a pattern.
Honestly, I was even surprised that <code>when exp</code> is attached to a pattern in the AST (not a case), because normally it
isn't part of the pattern itself.
</p>
</div>
</div>

<div id="outline-container-org83f206c" class="outline-4">
<h4 id="org83f206c">Example</h4>
<div class="outline-text-4" id="text-org83f206c">
<p>
This allows one to write
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #b22222;">(* </span><span style="color: #b22222;">These cases are exactly like reduction rules! </span><span style="color: #b22222;">*)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">reduce</span> = <span style="color: #a020f0;">function</span>
  | <span style="color: #000000; background-color: #ffffff;">Add</span> (<span style="color: #000000; background-color: #ffffff;">Int</span> n1, <span style="color: #000000; background-color: #ffffff;">Int</span> n2) -&gt; <span style="color: #000000; background-color: #ffffff;">Some</span> (<span style="color: #000000; background-color: #ffffff;">Int</span> (n1 + n2))
  | <span style="color: #000000; background-color: #ffffff;">Add</span> (<span style="color: #483d8b; background-color: #ebebeb;">[%view</span>? <span style="color: #000000; background-color: #ffffff;">Some</span> p1' <span style="color: #a020f0;">when</span> reduce<span style="color: #483d8b; background-color: #ebebeb;">]</span>, p2) -&gt; <span style="color: #000000; background-color: #ffffff;">Some</span> (<span style="color: #000000; background-color: #ffffff;">Add</span> (p1', p2))
  | <span style="color: #000000; background-color: #ffffff;">Add</span> (p1, <span style="color: #483d8b; background-color: #ebebeb;">[%view</span>? <span style="color: #000000; background-color: #ffffff;">Some</span> p2' <span style="color: #a020f0;">when</span> reduce<span style="color: #483d8b; background-color: #ebebeb;">]</span>) -&gt; <span style="color: #000000; background-color: #ffffff;">Some</span> (<span style="color: #000000; background-color: #ffffff;">Add</span> (p1, p2'))
  <span style="color: #b22222;">(* </span><span style="color: #b22222;">... </span><span style="color: #b22222;">*)</span>
  | _ -&gt; None
</pre>
</div>
<p>
instead of
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #b22222;">(* </span><span style="color: #b22222;">These nested cases are so annoying! </span><span style="color: #b22222;">*)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">rec</span> <span style="color: #0000ff;">reduce</span> = <span style="color: #a020f0;">function</span>
  | <span style="color: #000000; background-color: #ffffff;">Add</span> (<span style="color: #000000; background-color: #ffffff;">Int</span> n1, <span style="color: #000000; background-color: #ffffff;">Int</span> n2) -&gt; <span style="color: #000000; background-color: #ffffff;">Some</span> (<span style="color: #000000; background-color: #ffffff;">Int</span> (n1 + n2))
  | <span style="color: #000000; background-color: #ffffff;">Add</span> (p1, p2) -&gt;
    <span style="color: #000000; font-weight: bold;">begin</span> <span style="color: #a020f0;">match</span> reduce p1 <span style="color: #a020f0;">with</span>
      | <span style="color: #000000; background-color: #ffffff;">Some</span> p1' -&gt; <span style="color: #000000; background-color: #ffffff;">Some</span> (<span style="color: #000000; background-color: #ffffff;">Add</span> (p1', p2))
      | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt;
        <span style="color: #000000; font-weight: bold;">begin</span> <span style="color: #a020f0;">match</span> reduce p2 <span style="color: #a020f0;">with</span>
          | <span style="color: #000000; background-color: #ffffff;">Some</span> p2' -&gt; <span style="color: #000000; background-color: #ffffff;">Some</span> (<span style="color: #000000; background-color: #ffffff;">Add</span> (p1, p2'))
          | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; <span style="color: #000000; background-color: #ffffff;">None</span>
        <span style="color: #000000; font-weight: bold;">end</span>
    <span style="color: #000000; font-weight: bold;">end</span>
  <span style="color: #b22222;">(* </span><span style="color: #b22222;">... </span><span style="color: #b22222;">*)</span>
  | _ -&gt; None
</pre>
</div>

<p>
See <a href="https://github.com/sim642/ppx_viewpattern/tree/master/example"><code>examples/</code> on GitHub</a> for more.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-org845d4fc" class="outline-2">
<h2 id="org845d4fc">Old CWN</h2>
<div class="outline-text-2" id="text-org845d4fc">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org1270c59">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
