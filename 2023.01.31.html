<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-01-31 Tue 07:42 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2023.01.24.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2023.02.07.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of January 24 to 31, 2023.
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#1">Stramon 0.2.2 - Process behavior monitoring utility based on strace</a></li>
<li><a href="#2">Diskuv OCaml 1.2.0 (Windows, MSVC)</a></li>
<li><a href="#3">Simple installation of packages without network</a></li>
<li><a href="#org82f7ead">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">Stramon 0.2.2 - Process behavior monitoring utility based on strace</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-stramon-0-2-2-process-behavior-monitoring-utility-based-on-strace/11242/1">https://discuss.ocaml.org/t/ann-stramon-0-2-2-process-behavior-monitoring-utility-based-on-strace/11242/1</a>
</p>
</div>

<div id="outline-container-orgd81110f" class="outline-3">
<h3 id="orgd81110f">Darren announced</h3>
<div class="outline-text-3" id="text-orgd81110f">
<p>
I&rsquo;m happy to announce <a href="https://github.com/darrenldl/stramon">Stramon</a> (right now mainly
distributed as statically built binary
<a href="https://github.com/darrenldl/stramon/releases/tag/stramon-0.2.2">here</a>).
</p>

<p>
Stramon is primarily created to make usage of strace and the analysis of strace output easier.
</p>

<p>
Stramon invokes strace underneath, analyzes the piped output and summarizes the findings into a
JSON file when the command finishes.
</p>

<p>
An example JSON created by running Firefox via Stramon can be seen
<a href="https://github.com/darrenldl/stramon/blob/main/examples/firefox.json">here</a>. (Network access
section is trimmed.)
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Diskuv OCaml 1.2.0 (Windows, MSVC)</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-diskuv-ocaml-1-2-0-windows-msvc/11245/1">https://discuss.ocaml.org/t/ann-diskuv-ocaml-1-2-0-windows-msvc/11245/1</a>
</p>
</div>

<div id="outline-container-org44200f4" class="outline-3">
<h3 id="org44200f4">jbeckford announced</h3>
<div class="outline-text-3" id="text-org44200f4">
<p>
There is a new release of the Diskuv OCaml installer available for Windows users at
<a href="https://github.com/diskuv/dkml-installer-ocaml/releases/tag/v1.2.0">https://github.com/diskuv/dkml-installer-ocaml/releases/tag/v1.2.0</a>. It contains critical changes
that were blocking some Windows users from completing the install, and some performance
improvements thanks in large part to @edwin. The release notes have been reproduced immediately
below. It will be available using <code>winget install Diskuv.OCaml</code> in a week or so.
</p>

<p>
<i>Upgrading?</i> First uninstall the old Diskuv OCaml version using &ldquo;Add or remove programs&rdquo; in the
Control Panel.
</p>

<p>
Callout to <b>VirtualBox</b> users: You&rsquo;ll need a workaround for <a href="https://github.com/ocaml/ocaml/issues/11487">a not-yet backported FMA
fix</a> by doing the following in a PowerShell terminal
inside VirtualBox <span class="underline">before</span> running the installer:
</p>
<pre class="example" id="org6dc5b13">
mkdir "$env:ProgramData\DiskuvOCaml\conf\"
Set-Content -Path "$env:ProgramData\DiskuvOCaml\conf\ocamlcompiler.sexp" -Value "((feature_flag_imprecise_c99_float_ops))"
</pre>

<p>
Critical changes:
</p>
<ul class="org-ul">
<li>Switch from the official MSYS2 <code>msys2-base</code> install, plus a set of MSYS2 Internet updates, to a standalone <a href="https://gitlab.com/diskuv-ocaml/distributions/msys2-dkml-base#msys2-dkml-base">msys2-dkml-base</a>
that has all the MSYS2 packages needed during installation. That removes the
Internet, GPG keys, proxies, etc. as a source of failures during the MSYS2
sub-installation.</li>
<li>Special handling for Scoop package manager on Windows which comingles a
conflicting bash.exe and git.exe in the same directory. A prior
<code>scoop install git</code> should no longer present a problem during installation.</li>
<li>Fixed: No longer need to do <code>opam pin remove ...</code> to install <code>merlin</code> and
<code>ocaml-lsp</code>.</li>
</ul>

<p>
Performance improvements:
</p>
<ul class="org-ul">
<li>Plumb the number of cpus to the compiler jobs. [@edwin]</li>
<li>Skip over cross-compiling support when no target ABIs specified.</li>
<li>Overall shaved ~15 minutes from installation on a 3-CPU machine (80m instead
of 95m), with additional savings if you have more CPUs.
Timings in <a href="https://github.com/diskuv/dkml-runtime-common/pull/1">https://github.com/diskuv/dkml-runtime-common/pull/1</a></li>
</ul>

<p>
Open source help wanted:
</p>
<ul class="org-ul">
<li>Byte-code only installation. That will be fast and simple and light, and is likely the best option for students. The existing installer already ships with a functioning <code>ocamlrun</code> and standard library, and is &ldquo;component&rdquo;-based so pieces can be added or removed. No Visual Studio, no MSYS2, no spending time compiling code during installation. However a shim would need to be developed so that <code>ocaml</code>, <code>ocamlc</code>, <code>utop</code>, etc. work without setting required OCaml environment variables. Almost all of this new byte-code only installation can be developed on macOS or Linux. If you would like to contribute post your github username on <a href="https://github.com/diskuv/dkml-installer-ocaml/issues/35">https://github.com/diskuv/dkml-installer-ocaml/issues/35</a></li>
</ul>

<p>
Component upgrades:
</p>
<ul class="org-ul">
<li>Bump utop from <code>2.9.0</code> to <code>2.10.0</code>.</li>
<li>ocurrent ocaml/opam CI Docker image (a source of pins)
updated from 2022-02-28 to 2022-11-22; numerous pins updated.</li>
</ul>

<p>
Bug fixes:
</p>
<ul class="org-ul">
<li><code>dkml-runtime-common-native</code> works with spaces in the Windows home directory</li>
<li>Removed incorrect <code>ptime.0.8.6</code> pin during <code>dkml init</code>; now <code>ptime.1.1.0</code></li>
</ul>

<p>
Doc fixes:
</p>
<ul class="org-ul">
<li>Create <code>dune-project</code> in Beyond Basics documentation alongside existing
<code>dune init exe</code> to adhere to Dune 3.x behavior. (Dune 3.6 was added
in DKML 1.1.0)</li>
</ul>

<p>
Deprecations:
</p>
<ul class="org-ul">
<li>The <code>dkml --build-type</code> build type option will be removed next release. It was
originally created for Linux builds (perf and AFL variants), and can be
resurrected and simplified if and when Linux support is added.</li>
</ul>

<p>
Internal changes:
</p>
<ul class="org-ul">
<li>Added Jane Street&rsquo;s <code>base</code> package to global <code>utop</code>. In particular, <code>base</code> is
now part of the <code>dkml</code> switch created during installation. <b><code>core</code> is too
expensive (52 packages) to install automatically, but you can install utop
and core in your own switch.</b>
For now this is not that useful. The <code>lib/stublibs</code> directory of the <code>dkml</code>
switch needs to be in the PATH for <code>#require "base";;</code> to work in global
<code>utop</code>. That would help readers of the Real World OCaml book. A future
release will automate the PATH change.</li>
<li>Removed <code>digestif.1.1.2+msvc</code> pin since MSVC changes upstreamed to 1.1.3.</li>
<li>The bytecode <code>*.bc</code> embedded in the installer is compiled with 4.14.0
and its embedded runtime is also 4.14.0.</li>
<li>When using <code>opam option setenv+=</code> stop removing the <code>environment</code> file to
force a rebuild of the environment.</li>
<li>Pin <code>omd.1.3.1</code></li>
<li>Print timestamp for many logging operations to aid performance comparisons</li>
</ul>

<p>
Patches:
</p>
<ul class="org-ul">
<li><code>base_bigstring.v0.15.0</code> for MSVC and MinGW (same in fdopen and esy).
upstream: <a href="https://github.com/janestreet/base_bigstring/pull/3">https://github.com/janestreet/base_bigstring/pull/3</a></li>
<li><code>time_now.v0.15.0</code> for MSVC.
upstream: <a href="https://github.com/janestreet/time_now/issues/3">https://github.com/janestreet/time_now/issues/3</a></li>
<li><code>core.v0.15.1</code> for MSVC.
upstream: <a href="https://github.com/janestreet/core/pull/161">https://github.com/janestreet/core/pull/161</a></li>
<li><code>core_kernel.v0.15.0</code> for MSVC.
upstream: <a href="https://github.com/janestreet/core_kernel/pull/107">https://github.com/janestreet/core_kernel/pull/107</a></li>
<li><code>alcotest.1.6.0</code> for MSVC.
upstream: <a href="https://github.com/mirage/alcotest/pull/369">https://github.com/mirage/alcotest/pull/369</a></li>
<li><code>curly.0.2.0</code> for Windows and MSVC (pending release; already unblocked).
upstream: <a href="https://github.com/rgrinberg/curly/issues/10">https://github.com/rgrinberg/curly/issues/10</a></li>
<li><code>base.v0.15.1</code> for MSVC 32-bit. Already merged; in v0.16~preview.127.22+307.
upstream: <a href="https://github.com/janestreet/base/pull/128">https://github.com/janestreet/base/pull/128</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">Simple installation of packages without network</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/simple-installation-of-packages-without-network/11263/1">https://discuss.ocaml.org/t/simple-installation-of-packages-without-network/11263/1</a>
</p>
</div>

<div id="outline-container-org6aa8275" class="outline-3">
<h3 id="org6aa8275">Anthony Scemama announced</h3>
<div class="outline-text-3" id="text-org6aa8275">
<p>
I have access to machines that don&rsquo;t allow me to download anything from the web, so I had
difficulties installing software with Opam.
With the help of Raja from OCamlPro, I came to a practical solution that solved my problem, and I
turned it into a script:
<a href="https://github.com/scemama/OpamPack">https://github.com/scemama/OpamPack</a>
It is a simple script that makes a tar.gz on your local machine with all the dependencies you
need, and then you can copy the <code>tar.gz</code>  o the remote isolated machine and install everything
using Opam without needing the network.
</p>
</div>
</div>
</div>




<div id="outline-container-org82f7ead" class="outline-2">
<h2 id="org82f7ead">Old CWN</h2>
<div class="outline-text-2" id="text-org82f7ead">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I&rsquo;ll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org2274065">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>