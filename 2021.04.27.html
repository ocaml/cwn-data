<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-04-27 Tue 16:24 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="https://alan.petitepomme.net/cwn/2021.04.20.html">Previous Week</a> <a href="https://alan.petitepomme.net/cwn/index.html">Up</a> <a href="https://alan.petitepomme.net/cwn/2021.05.04.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of April 20 to 27, 2021.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">docs.ocaml.pro : an OCaml Documentation Hub</a></li>
<li><a href="#2">Decompress 1.4.0</a></li>
<li><a href="#3">elliptic curves - maintainable and verified (full stack, from primitives to TLS)</a></li>
<li><a href="#4">First release of Docteur, an opiniated read-only file-system for MirageOS</a></li>
<li><a href="#5">Ocaml-solidity, a new OCaml library for Solidity</a></li>
<li><a href="#6">Migrating to floatarray (blog post)</a></li>
<li><a href="#org1bc271e">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-1" class="outline-2">
<h2 id="1">docs.ocaml.pro : an OCaml Documentation Hub</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-docs-ocaml-pro-an-ocaml-documentation-hub/7718/1">https://discuss.ocaml.org/t/ann-docs-ocaml-pro-an-ocaml-documentation-hub/7718/1</a>
</p>
</div>

<div id="outline-container-org2f2e903" class="outline-3">
<h3 id="org2f2e903">Fabrice Le Fessant announced</h3>
<div class="outline-text-3" id="text-org2f2e903">
<p>
We are pleased to announce that we just published the first version
of the OCaml Documentation Hub on:
</p>

<p>
<a href="https://docs.ocaml.pro">https://docs.ocaml.pro</a>
</p>

<p>
The OCaml Documentation Hub can be used to browse the sources and
the documentations of more than 2000 opam packages, following links
between them when useful. This is a work-in-progress, and we are
working on improving it with many more features, such as source
annotations with types, full-text and type-driven searches,
improvements in the general readability of documentation, etc.
</p>

<p>
The site is generated using an open-source tool called digodoc,
available on:
</p>

<p>
<a href="https://github.com/OCamlPro/digodoc">https://github.com/OCamlPro/digodoc</a>
</p>

<p>
Digodoc is able to build a map of an opam switch, with links between
files, opam packages, ocaml libraries, meta packages and ocaml
modules. It is also able to generate documentation using odoc with
cross-indexes between all these kinds of packages.
</p>

<p>
We welcome feedback and contributions!
Enjoy !
</p>
</div>
</div>


<div id="outline-container-orgd66d901" class="outline-3">
<h3 id="orgd66d901">Simon Cruanes said and Anil Madhavapeddy added</h3>
<div class="outline-text-3" id="text-orgd66d901">
<p>
Great work on this site, and I love the domain name as well ;-)
</p>

<blockquote>
<p>
The cross linking between packages is fantastic.
</p>
</blockquote>

<p>
As a bit of background on why documentation cross-linking has taken so long, there is a lonnnggg history intertwined
with many people's contributions to opam, build systems (ocamlbuild and dune), conventions (findlib and odig) and of
course <a href="https://github.com/ocaml/odoc">odoc</a> itself.  The major milestones along the way have been:
</p>

<ul class="org-ul">
<li><a href="https://github.com/ocaml/odoc">odoc 1.0</a>, first began in 2014 as a quick project to pull together typing information from cmt[i] files, but which ran into the problem that it needs a consistent set of compiled cmt files to actually work, and so needs help from external tools to pull that set of compiled libraries together.</li>
<li><a href="https://github.com/dbuenzli/odig">odig</a>, which pulls together multiple opam packages (and a filesystem layout for metadata) and runs odoc on then. This allowed for the creation of <a href="https://docs.mirage.io">https://docs.mirage.io</a> a few years ago which cross-references a smaller number of packages</li>
<li>opam-repo itself has had better and better bulk builds over the years to ensure that we can actually automatically compile all the artefacts needed for docs builds, thanks to efforts like <a href="https://github.com/ocurrent/opam-health-check">health check</a> and <a href="https://github.com/ocurrent/overview">ocurrent</a>.</li>
<li>odoc 2.0, which featured a multi-year <a href="https://github.com/ocaml/odoc/pull/439">rewrite</a> of the OCaml module resolver and introduced a new <a href="https://github.com/ocaml/odoc/pull/423">output IR</a>.  This forthcoming release was presented in this <a href="https://www.youtube.com/watch?v=wVyZ-KveN-w&amp;t=3s">OCaml 2020 talk</a> by @jonludlam.</li>
</ul>

<p>
And now with all these pieces in place, the OCaml documentation spring has arrived! The OCamlPro one posted here as
the first of the "new batch" of mass documentation indexers, and I'm aware of concurrent efforts by the
odoc/ocaml.org maintainer teams to push a central one out to ocaml.org, as well as by the MirageOS team who are
refreshing docs.mirage.io with the latest and greatest.  I'm sure when the dust has settled on all these indexers we
can look for common pieces, but for now it's lovely to see so much innovation happening at pace.
</p>

<p>
For the community: now is the time to fix your docstrings in your libraries, as there will many cool tools parsing
and processing them, and rendering them into all kinds of output formats!
</p>

<p>
To the <a href="https://github.com/ocaml/odoc/graphs/contributors">odoc contributors</a>, thank you! The journey to get to this
documentation site started here seven years ago:
</p>

<pre class="example" id="orgc4f34d2">
commit ef91571cab31d9ece7af965ed52eaaff57a12efc
Author: Leo White &lt;lpw25@cl.cam.ac.uk&gt;
Date:   Thu Oct 16 19:20:18 2014 +0100

    Initial commit
</pre>

<p>
@lefessan one thing I'm not sure about in your site is the "copyright library authors" claim. That's murky legal
ground &#x2013; it's worth establishing if the odoc HTML has gone through a compilation process and so is no longer
copyright the authors (just as a binary output is not copyright the original source code). If the output <span class="underline">is</span>
copyright the authors, then they have reasonable grounds to claim that you should also reproduce the copyright notice
and other license restrictions. Personally, I prefer to claim that there is no copyright to the original authors in
odoc output, and sidestep this issue.
</p>
</div>
</div>


<div id="outline-container-org705ea31" class="outline-3">
<h3 id="org705ea31">Fabrice Le Fessant replied</h3>
<div class="outline-text-3" id="text-org705ea31">
<p>
Thanks @avsm , all these projects were indeed important milestones towards the creation of this site. However, I
wouldn't want this history perspective to give the wrong feeling that building this site
was easy, it is the result of a very good, long and hard work by the team at OCamlPro to make it work despite a road
paved with many obstacles. It also benefited from OCamlPro's long history of
innovative projects for the OCaml community, that lead for example in the past to Opam,
<a href="https://try.ocamlpro.com/">Try-OCaml</a>,
Memprof/<a href="https://www.ocamlpro.com/2020/12/01/memthol-exploring-program-profiling/">Memthol,</a>
<a href="https://hal.inria.fr/hal-01352008">Opam-builder</a>, <a href="https://github.com/ocaml-sf/learn-ocaml">Learn-OCaml</a>, the
Typerex tools (ocp-indent, ocp-index, ocp-build, etc.) and more recently
<a href="https://github.com/OCamlPro/opam-bin">opam-bin</a> and <a href="https://github.com/OCamlPro/drom/">drom</a>.
</p>

<p>
As I said, this is a work-in-progress, and there are many features that we will be adding in the next months to make
this website much easier to navigate, for users to rapidely reach the information that
matters for them. We hope it will be inspirational for all the other developers who are working on similar projects,
and we are looking forward to using their projects soon too!
</p>
</div>
</div>


<div id="outline-container-org0dbe2c0" class="outline-3">
<h3 id="org0dbe2c0">Daniel Bünzli said</h3>
<div class="outline-text-3" id="text-org0dbe2c0">
<p>
I'd just like to stress that <code>odig</code> documents OCaml package installs regardless of the package manager used as long
the install structure follows <a href="https://erratique.ch/software/odig/doc/packaging.html">these conventions</a> (which are
automatically followed by <a href="https://dune.readthedocs.io/en/stable/opam.html#odig-conventions">dune installs</a>) .
</p>

<p>
Also for people using my packages, I'd just like to mention they may miss important documentation bits on
<a href="https://docs.ocaml.pro/">https://docs.ocaml.pro</a> until <a href="https://github.com/OCamlPro/digodoc/issues/33">that issue</a>
is resolved.
</p>
</div>
</div>


<div id="outline-container-orgee8ec2b" class="outline-3">
<h3 id="orgee8ec2b">Much later in the thread, Kiran Gopinathan said</h3>
<div class="outline-text-3" id="text-orgee8ec2b">
<p>
It's not quite the same as hoogle, but merlin has a functionality to search for functions by type signature - the
feature doesn't seem to get much attention apparently - probably the interface is a little lacking, but with some
extra elisp tuning, it can work quite smoothly:
</p>


<div id="orgeca47aa" class="figure">
<p><img src="https://aws1.discourse-cdn.com/standard11/uploads/ocaml/original/2X/3/3c2d1c63fac7cbd7dd1bb5b9a406589e031cb795.gif" alt="3c2d1c63fac7cbd7dd1bb5b9a406589e031cb795.gif" />
</p>
</div>
</div>
</div>


<div id="outline-container-orgab5d68f" class="outline-3">
<h3 id="orgab5d68f">Yawar Amin then added</h3>
<div class="outline-text-3" id="text-orgab5d68f">
<p>
The command line for this:
</p>

<pre class="example" id="org628976a">
ocamlmerlin single search-by-polarity -position 0 -query '-int +string'
</pre>

<p>
(To search for values of type <code>int -&gt; string</code>.)
</p>
</div>
</div>
</div>




<div id="outline-container-2" class="outline-2">
<h2 id="2">Decompress 1.4.0</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-decompress-1-4-0/7724/1">https://discuss.ocaml.org/t/ann-decompress-1-4-0/7724/1</a>
</p>
</div>

<div id="outline-container-org8c344f3" class="outline-3">
<h3 id="org8c344f3">Charles Edouard Lecat announced</h3>
<div class="outline-text-3" id="text-org8c344f3">
</div>
<div id="outline-container-org004d8a2" class="outline-4">
<h4 id="org004d8a2">Greetings everyone,</h4>
<div class="outline-text-4" id="text-org004d8a2">
<p>
I am happy to announce the new release of <a href="https://github.com/mirage/decompress/releases/tag/v1.4.0">decompress
1.4.0</a>, available for installation via OPAM. Decompress is
a library containing a pure OCaml implementation of several compression algorithms:
</p>
<ul class="org-ul">
<li>RFC1951</li>
<li>Zlib</li>
<li>Gzip</li>
<li>LZO</li>
</ul>

<p>
It's goal is to provide several algorithms for both the inflation and the deflation of objects, in the form of a
stream API allowing to call the chosen algorithm one bit at a time. Such behavior allows for an easy use of
decompress in situations where we would not be able to have the input in one go, or where we would like to output the
result in a non blocking way. This new release comes with several improvements to the documentation and bug fixes,
but even more, with a whole new implementation for the rfc 1951 and zlib algorithms.
</p>
</div>
</div>

<div id="outline-container-org111f530" class="outline-4">
<h4 id="org111f530">Non-stream implementation for rfc 1951 and zlib</h4>
<div class="outline-text-4" id="text-org111f530">
<p>
Up to this day, decompress was used in several projects like ocaml-git. However, as time passed by, it appeared that
in some cases, the current implementation of decompress was not the optimal solution:
As useful as a stream implementation is, it requires to save a lot of information about the state of the compression,
in order to resume it once we have enough input.
</p>

<p>
This is why, in some cases where we would be sure that we have our whole input in one go, we might want to avoid all
of these side-costs, and directly go to the point.
</p>
</div>

<div id="outline-container-org80bca32" class="outline-5">
<h5 id="org80bca32">State of the art: libdeflate</h5>
<div class="outline-text-5" id="text-org80bca32">
<p>
This new problematic in mind, we have started thinking about the existing implementations of these algorithms which
were also bypassing the stream behavior. One implementation that proved to be a suitable example for our problem, was
the library <code>libdeflate</code>, an implementation in C. It's main advantages being: a better compression ratio than zlib
and with faster runtime.
</p>

<p>
It was used as the solid base for the OCaml implementation provided by this new release.
</p>
</div>
</div>

<div id="outline-container-orgb5ff3ce" class="outline-5">
<h5 id="orgb5ff3ce">OCaml version of libdeflate, performances and use cases</h5>
<div class="outline-text-5" id="text-orgb5ff3ce">
<p>
Inheriting the logic of libdeflate, the new implementation now has a better compression ratio, while being slightly
faster at it. On the other side, the decompression is way faster, with <code>33% of speed increase in most tested cases:
On the ~book2</code> (from the Calgary corpus) file:
</p>
<ul class="org-ul">
<li><code>decompress</code> (stream): 15 Mb/s (deflation), 76 Mb/s (inflation), ratio: 42.46 %</li>
<li><code>decompress</code> (non-stream): 17 Mb/s (deflation), 105 Mb/s (inflation), ratio: 34.66 %</li>
</ul>

<p>
Now that this is in place, the users of decompress will be able to choose between the two versions, according to
their needs. In the case of ocaml-git, the vast majority of the git objects are small and will be compressed in one
go. This is why we updated with the new implementation when possible.
</p>
</div>
</div>

<div id="outline-container-org526fc94" class="outline-5">
<h5 id="org526fc94">Writing optimized code and profiling it</h5>
<div class="outline-text-5" id="text-org526fc94">
<p>
One of the biggest concerns of this release was to be able to produce optimized code. The base code being coded in C,
a lot of sub-optimal behavior where ported in the OCaml version: <code>for</code> and <code>while</code> loops, references everywhere,
mixes of <code>struct</code> and <code>union.</code>, it needed a lot of clean up.
</p>

<p>
This is why once the main iteration was done, we have spent several weeks profiling the code base, using the OCaml
library <code>landmarks</code>, <code>flamegraph</code> or simply the linux binary <code>perf</code>. This work, sometimes tedious, proved to be
helpful and healthy for both the harmonization of the code and it's performances.
</p>
</div>
</div>

<div id="outline-container-orgbe6009f" class="outline-5">
<h5 id="orgbe6009f">Decompress &amp; MirageOS</h5>
<div class="outline-text-5" id="text-orgbe6009f">
<p>
Compression algorithms are a really important piece in many projects, and operating systems do not avoid this.
<code>decompress</code> was coded from the start with the idea of being used in the much larger project MirageOS.
</p>

<p>
This release is another opportunity to broaden MirageOS’s reach, by providing one more algorithm to it’s stack,
allowing us to specialise even more the unikernels that would have a need for inflation/deflation algorithms. This
more restrictive implementation, as we need to have the whole input in one go, will allow us to take advantage of the
situation and give more flexibility for the user.
</p>

<p>
The positive aspects of this release will most likely show up soon enough, as we make use of decompress to its full
potential
</p>
</div>
</div>
</div>
</div>
</div>




<div id="outline-container-3" class="outline-2">
<h2 id="3">elliptic curves - maintainable and verified (full stack, from primitives to TLS)</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-elliptic-curves-maintainable-and-verified-full-stack-from-primitives-to-tls/7729/1">https://discuss.ocaml.org/t/ann-elliptic-curves-maintainable-and-verified-full-stack-from-primitives-to-tls/7729/1</a>
</p>
</div>

<div id="outline-container-org5b02efa" class="outline-3">
<h3 id="org5b02efa">Hannes Mehnert announced</h3>
<div class="outline-text-3" id="text-org5b02efa">
<p>
over the last month I worked on upgrading the cryptography stack for OCaml and MirageOS. I just published a <a href="https://hannes.robur.coop/Posts/EC">blog
post</a>. Enhancments of <a href="https://github.com/mirleft/ocaml-tls">OCaml-TLS</a> (<a href="https://usenix15.nqsb.io">usenix
security paper from 2015</a>) and <a href="https://github.com/mirleft/ocaml-x509">X.509</a> are in place.
</p>

<p>
The main achievement after TLS 1.3 support (since May 2020, 0.12.0) is that elliptic curve certificates are now
supported. Elliptic curve cryptography uses <a href="https://github.com/mit-plv/fiat-crypto">fiat</a>. The X509 implementation
now supports PKCS 12 (used by browsers and other software (e.g. OpenVPN) to bundle certificates and private keys).
</p>

<p>
Get mirage-crypto-ec, x509 0.13.0 and tls 0.13.1 (all available in the opam-repository). Discussion and feedback
appreciated.
</p>
</div>
</div>
</div>




<div id="outline-container-4" class="outline-2">
<h2 id="4">First release of Docteur, an opiniated read-only file-system for MirageOS</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-first-release-of-docteur-an-opiniated-read-only-file-system-for-mirageos/7743/1">https://discuss.ocaml.org/t/ann-first-release-of-docteur-an-opiniated-read-only-file-system-for-mirageos/7743/1</a>
</p>
</div>

<div id="outline-container-orgf112687" class="outline-3">
<h3 id="orgf112687">Calascibetta Romain announced</h3>
<div class="outline-text-3" id="text-orgf112687">
<p>
I'm glad to announce the first release of <a href="https://github.com/dinosaure/docteur"><code>docteur</code></a>, a simple tool to make and use (in read-only) a
"file-system" for <a href="https://mirage.io/">MirageOS</a>. As you know, with MirageOS, we don't have <span class="underline">sockets</span>, <span class="underline">kernel space</span> or even
<span class="underline">file-descriptor</span>. It's not possible to manipulate files <span class="underline">standalonely</span> and many <span class="underline">primitives</span> commonly available with
the <code>unix</code> module don't exists in our space.
</p>

<p>
Therefore, it is difficult to imagine making a website that displays local files or a database system. But in our
spirit of separation of services, it becomes possible for your unikernel to communicate over the network to a "file
system" or a database.
</p>

<p>
For quite some time we have been experimenting with a file system external to our unikernel called Git. This is the
case of <a href="https://github.com/dinosaure/pasteur"><code>pasteur</code></a> which saves the pastes in a Git repository. It is also the case of <a href="https://github.com/roburio/unipi"><code>unipi</code></a> or
<a href="https://github.com/Engil/Canopy">Canopy</a> which display the content of a Git repository and can resynchronize with it using a hook. Or the
case of <a href="https://github.com/roburio/dns-primary-git">our primary DNS server</a> whose zone file comes from a Git repository - we can then trace all
the changes on this file.
</p>

<p>
However, we have several limitations:
</p>
<ol class="org-ol">
<li>it requires the Git repository to load into memory in your unikernel</li>
<li>it requires a communication (external with GitHub or internal in a private network)</li>
</ol>

<p>
The persistent aspect is very important. We should always be able to launch a unikernel and not lose the data if our
system shuts down.
</p>

<p>
The mutable aspect (modify a file) is useful in some cases but not in others. As for <code>unipi</code> for example (a simple
static web site), the difference between resynchronizing with a hook or restarting the unikernel with a new version
of your filesystem is minor.
</p>
</div>

<div id="outline-container-org1ff8b55" class="outline-4">
<h4 id="org1ff8b55">Docteur as a second solution</h4>
<div class="outline-text-4" id="text-org1ff8b55">
<p>
This is where Doctor comes in. It solves both of our problems by offering the generation of a file system from
scratch:
</p>
<ul class="org-ul">
<li>a Git repository (local or available on a service)</li>
<li>a specific folder</li>
</ul>

<p>
Doctor is able to create a complete representation of a folder and to compress it at such a ratio that a generation
of the documentation of several OPAM packages with all their versions making 14 Gb is reduced to an image of only 280
Mb!
</p>

<p>
Such a high compression ratio is in particular due to a double level of compression by <a href="https://github.com/mirage/decompress"><code>decompress</code></a> and
<a href="https://github.com/mirage/duff"><code>duff</code></a>. For more details, Docteur just generates a slightly modified PACK file with <a href="https://github.com/mirage/ocaml-git/tree/master/src/carton">carton</a>.
</p>

<p>
Then, Docteur proposes a simple library which makes available 2 ways to manipulate this image for your unikernel:
</p>
<ol class="org-ol">
<li>a way that is fast but with a consequent boot time</li>
<li>a slower way but with no cost to the boot time</li>
</ol>

<p>
The first way will simply "analyze" the image to re-extract the layout of your file system. Then it uses the <a href="https://github.com/dinosaure/art">ART
data-structure</a> to save this layout. So, whenever you want a specific file and according to <a href="https://dinosaure.github.io/art/bench/find.html">ART benchmarks</a>, you have access to the content very quickly.
</p>

<p>
The problem remains the analysis which takes place at boot time and which can take a very long time (it depends
essentially on the number of files you have). There can also be an impact on memory usage as the ART data structure
is in memory - the more files there are, the bigger the structure is.
</p>

<p>
The second method is more "silly". Each time you request a file, we will have to rebuild the entire path and
therefore deserialize several objects (like folders). The advantage is that we don't analyze the image and we don't
try to maintain a layout of your file system.
</p>
</div>
</div>

<div id="outline-container-orge9f7efc" class="outline-4">
<h4 id="orge9f7efc">Example</h4>
<div class="outline-text-4" id="text-orge9f7efc">
<p>
Docteur is meant to be simple. The generation of the image is done very simply by the command <code>make</code>:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ docteur.make -b refs/heads/main https://github.com/dinosaure/docteur disk.img
$ docteur.make -b refs/heads/main git@github.com:dinosaure/docteur disk.img
$ docteur.make -b refs/heads/main git://github.com/dinosaure/docteur disk.img
$ docteur.make -b refs/heads/main file://$(<span style="color: #483d8b;">pwd</span>)/dev/docteur disk.img
</pre>
</div>

<p>
Then, Docteur proposes 2 supports: Unix &amp; <a href="https://github.com/Solo5/solo5">Solo5</a>. For Unix, you just have to name explicitly the image file
to use. For the case of Solo5 (and thus of virtualization). You just have to find a name for a "block device" and to
reuse this name with the Solo5 "tender" specifying where the image is.
</p>
<div class="org-src-container">
<pre class="src src-shell">$ cd unikernel
$ mirage configure -t unix --disk disk.img
$ make depends
$ mirage build
$ ./simple --filename README.md
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">$ cd unikernel
$ mirage configure -t hvt --disk docteur
$ make depends
$ mirage build
$ solo5-hvt --block:<span style="color: #a0522d;">docteur</span>=disk.img -- simple.hvt --filename README.md
</pre>
</div>

<p>
Finally, Docteur proposes another tool that checks (and analyzes) an image to give you the version of the commit used
(if the image comes from a Git repository) or the hash of your file system produced by the calculation of a <a href="https://en.wikipedia.org/wiki/Merkle_tree">Merkle tree</a>.
</p>
<div class="org-src-container">
<pre class="src src-shell">$ docteur.verify disk.img
commit  : ad8c418635ca6683177c7ff3b583e1ea5afea78f
author  : <span style="color: #8b2252;">"Calascibetta Romain"</span> <a href="mailto:romain.calascibetta%40gmail.com">&lt;romain.calascibetta@gmail.com&gt;</a>
root    : bea10b6874f51e3f6feb1f9bcf3939933b2c4540

Merge pull request <span style="color: #b22222;">#</span><span style="color: #b22222;">11 from dinosaure/fix-tree-expanding</span>

Fix how we expand our file-system
</pre>
</div>
</div>
</div>

<div id="outline-container-org8bc3624" class="outline-4">
<h4 id="org8bc3624">Conclusion</h4>
<div class="outline-text-4" id="text-org8bc3624">
<p>
Many times people ask me for a purpose in MirageOS such as a website or a particular service. I think that Docteur
shows one essential thing about MirageOS, it is a tool and an ecosystem. But it's not an endpoint that is concretized
in a specific application.
</p>

<p>
Docteur is not THE solution to our problems and answers a specific use case. What is important to note is not what
Docteur does but the possibility for our ecosystem and our tools to allow the development of Docteur. As it allows
the development of a trillion applications!
</p>

<p>
As such, I say to those people to "play" with MirageOS if they want to learn more. Our goal is not to show you
applications that you could then deploy easily (even if we are working on this aspect too) but to give you the
possibility to imagine your OS (independently from our vision)!
</p>

<p>
And if you try, we'll be happy to help you!
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-5" class="outline-2">
<h2 id="5">Ocaml-solidity, a new OCaml library for Solidity</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-solidity-a-new-ocaml-library-for-solidity/7746/1">https://discuss.ocaml.org/t/ocaml-solidity-a-new-ocaml-library-for-solidity/7746/1</a>
</p>
</div>

<div id="outline-container-org976e385" class="outline-3">
<h3 id="org976e385">OCamlPro announced</h3>
<div class="outline-text-3" id="text-org976e385">
<p>
We are pleased to announce our new OCaml library, ocaml-solidity !
<a href="https://github.com/OCamlPro/ocaml-solidity">Ocaml-solidity</a> is a program manipulation library that provides a
Solidity parser and typechecker.
</p>

<p>
Our library is made for developers on Solidity code analysis, it builds a typechecked AST that can be analyzed with a
provided visitor. Please note that our parser and typecheck conforms mostly to Solidity 0.7, inline assembly is not
supported. Take a look at <a href="https://ocamlpro.github.io/ocaml-solidity/">our documentation</a>.
</p>

<p>
You can test it and report bugs just <a href="https://github.com/OCamlPro/ocaml-solidity/issues">here</a>!
</p>
</div>
</div>
</div>




<div id="outline-container-6" class="outline-2">
<h2 id="6">Migrating to floatarray (blog post)</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/migrating-to-floatarray-blog-post/7749/1">https://discuss.ocaml.org/t/migrating-to-floatarray-blog-post/7749/1</a>
</p>
</div>

<div id="outline-container-org3626b3b" class="outline-3">
<h3 id="org3626b3b">Nicolás Ojeda Bär announced</h3>
<div class="outline-text-3" id="text-org3626b3b">
<p>
At LexiFi we recently migrated our codebase to use <code>floatarray</code> in place of <code>float array</code> in order to disable the
"flat float array" mode in the compiler. If you are interested in finding out more about how we did it, we wrote a
blog post about it <a href="https://www.lexifi.com/blog/ocaml/floatarray-migration/">https://www.lexifi.com/blog/ocaml/floatarray-migration/</a>. Enjoy!
</p>
</div>
</div>
</div>




<div id="outline-container-org1bc271e" class="outline-2">
<h2 id="org1bc271e">Old CWN</h2>
<div class="outline-text-2" id="text-org1bc271e">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="https://alan.petitepomme.net/cwn/">the archive</a> or the <a href="https://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname" id="org1b9b857">
<p>
<a href="https://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
