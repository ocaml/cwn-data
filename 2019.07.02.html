<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-07-02 Tue 10:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2019.06.25.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2019.07.09.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of June 25 to July 02, 2019.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">Learn Ocsigen: Graffiti tutorial updated</a></li>
<li><a href="#2">Release of OCamlFormat 0.10</a></li>
<li><a href="#3">Ocaml 4.09.0+beta1</a></li>
<li><a href="#4">Parallel and distributed execution of command lines, pardi!</a></li>
<li><a href="#5">Other OCaml News</a></li>
<li><a href="#org58373fd">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orge98e01a" class="outline-2">
<h2 id="1">Learn Ocsigen: Graffiti tutorial updated</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/learn-ocsigen-graffiti-tutorial-updated/3983/1">https://discuss.ocaml.org/t/learn-ocsigen-graffiti-tutorial-updated/3983/1</a>
</p>
</div>

<div id="outline-container-org65030e9" class="outline-3">
<h3 id="org65030e9">Vincent Balat announced</h3>
<div class="outline-text-3" id="text-org65030e9">
<p>
<a href="http://ocsigen.org/tuto/latest/manual/application">Graffiti tutorial</a> explains step by step how to write a <a href="http://ocsigen.org/graffiti">multi-user client-server drawing application</a> in OCaml.
</p>

<p>
It is the best starting point for beginners with Ocsigen.
</p>

<p>
An updated version of this tutorial is now online, thanks to <a href="https://github.com/corentinjuvigny">corentinjuvigny</a> and <a href="https://github.com/chrismamo1">chrismamo1</a>.
</p>

<p>
Please report any problem (mistakes etc.) <a href="https://github.com/ocsigen/tuto/issues">here</a>.
</p>
</div>
</div>
</div>




<div id="outline-container-orgc62b2fd" class="outline-2">
<h2 id="2">Release of OCamlFormat 0.10</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-release-of-ocamlformat-0-10/3988/1">https://discuss.ocaml.org/t/ann-release-of-ocamlformat-0-10/3988/1</a>
</p>
</div>

<div id="outline-container-org5a6b6d9" class="outline-3">
<h3 id="org5a6b6d9">Guillaume Petiot announced</h3>
<div class="outline-text-3" id="text-org5a6b6d9">
<p>
<b>Release of OCamlFormat 0.10</b>
</p>

<p>
We are pleased to announce the release of OCamlFormat 0.10 (available on opam).
</p>

<p>
There have been numerous changes since the last release, so here is a comprehensive list of the new features and breaking changes to help the transition from OCamlFormat 0.9.
</p>

<p>
<code>ocamlformat-0.10</code> now works on the 4.08 AST, although the formatting should not differ greatly from the one of <code>ocamlformat-0.9</code> in this regard.
Please note that it is necessary to build <code>ocamlformat</code> with 4.08 to be able to parse new features like <code>let*</code>.
</p>

<p>
Upgrading from <code>ocamlformat-0.9</code> requires to install the following dependencies:
</p>
<ul class="org-ul">
<li>ocaml-migrate-parsetree &gt;= 1.3.1 (upgrade)</li>
<li>uuseg &gt;= 10.0.0 (new)</li>
<li>uutf &gt;= 1.0.1 (upgrade)</li>
</ul>

<p>
This release focuses on preserving the style of the original source and on handling more <code>ocp-indent</code> options.
</p>
</div>

<div id="outline-container-org7b398e9" class="outline-4">
<h4 id="org7b398e9">Style preservation</h4>
<div class="outline-text-4" id="text-org7b398e9">
</div>
<ul class="org-ul">
<li><a id="org87112d2"></a>Expression grouping<br />
<div class="outline-text-5" id="text-org87112d2">
<p>
The new option <code>exp-grouping</code> has been added to preserve the keywords <code>begin~/~end</code> that are used to delimit expressions instead of parentheses. <code>exp-grouping=parens</code> always uses parentheses to delimit expressions. <code>exp-grouping=preserve</code> preserves the original grouping syntax (parentheses or <code>begin~/~end</code>).
</p>
</div>
</li>

<li><a id="orgf762a4d"></a>Horizontal alignment<br />
<div class="outline-text-5" id="text-orgf762a4d">
<p>
Horizontal alignment is something that users often use to make pattern-matching or type declarations easier to read, and it is a feature that has been requested many times. Three new options have been added to horizontally align the lines.
</p>

<p>
<code>align-cases</code> horizontally aligns the match/try cases:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">fooooooooooo</span> =
  <span style="color: #a020f0;">match</span> foooooooooooooooooooooooo <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">Bfooooooooooooooooo</span> -&gt; foooooooooooo
  | <span style="color: #000000; background-color: #ffffff;">C</span> (a, b, c, d)      -&gt; fooooooooooooooooooo
  | _                   -&gt; fooooooooooooooooooo
</pre>
</div>

<p>
<code>align-constructors-decl</code> horizontally aligns type declarations:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">t</span> =
  | ( <span style="color: #000000; background-color: #ffffff;">::</span> ) <span style="color: #a020f0;">of</span> a * b
  | <span style="color: #000000; background-color: #ffffff;">[]</span>     <span style="color: #a020f0;">of</span> looooooooooooooooooooooooooooooooooooooong_break
</pre>
</div>

<p>
<code>align-variants-decl</code> horizontally aligns variants type declarations:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">x</span> =
  [ ~<span style="color: #000000; background-color: #ffffff;">Foooooooo</span>      <span style="color: #a020f0;">of</span> int
  | ~<span style="color: #000000; background-color: #ffffff;">Fooooooooooooo</span> <span style="color: #a020f0;">of</span> int ]
</pre>
</div>
</div>
</li>

<li><a id="orge4fdaa2"></a>Preserve blank lines in sequences<br />
<div class="outline-text-5" id="text-orge4fdaa2">
<p>
The new option <code>sequence-blank-line</code> decides whether a blank line is preserved between expressions of a sequence. <code>sequence-blank-line=compact</code> will not keep any blank line between expressions of a sequence, this is still the default behavior. <code>sequence-blank-line=preserve</code> will keep a blank line between two expressions of a sequence if the input contains at least one.
</p>

<p>
This option can help preserving the readability of the code in this situation:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">foo</span> <span style="color: #a0522d;">x</span> <span style="color: #a0522d;">y</span> =
  do_some_setup y ;

  important_function x
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org643a4f4" class="outline-4">
<h4 id="org643a4f4">Supporting more <code>ocp-indent</code> options</h4>
<div class="outline-text-4" id="text-org643a4f4">
<p>
The long term goal of <code>ocamlformat</code> is to handle every <code>ocp-indent</code> option, this release got closer to this goal as the following <code>ocp-indent</code> options are now supported by <code>ocamlformat</code>:
</p>
<ul class="org-ul">
<li>max_indent</li>
<li>with</li>
<li>strict_with</li>
<li>ppx_stritem_ext</li>
<li>base</li>
<li>in</li>
<li>type</li>
</ul>
</div>


<ul class="org-ul">
<li><a id="org6cd0da8"></a>Offset added to a new line<br />
<div class="outline-text-5" id="text-org6cd0da8">
<p>
The new option <code>max-indent</code> sets the maximum offset (number of columns) added to a new line in addition to the offset of the previous line. If this offset is set to 2 columns, then each new line can only be indented by 2 columns more in addition to the previous line, for example:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> () =
  fooooo
  <span style="color: #a52a2a;">|&gt;</span> <span style="color: #228b22;">List.</span>iter (<span style="color: #a020f0;">fun</span> <span style="color: #a0522d;">x</span> -&gt;
    <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">x</span> = x <span style="color: #a52a2a;">$</span> y <span style="color: #000000; font-weight: bold;">in</span>
    fooooooooooo x)
</pre>
</div>

<p>
This option is equivalent to the <code>max_indent</code> option of <code>ocp-indent</code>, and it will be set if <code>max_indent</code> is set in an <code>.ocp-indent</code> configuration file.
</p>
</div>
</li>

<li><a id="org7e94ca1"></a>Indentation of pattern matching cases<br />
<div class="outline-text-5" id="text-org7e94ca1">
<p>
The new options <code>funtion-indent</code> and <code>match-indent</code> respectively decide the indentation of function cases and the indentation of match/try cases.
These options are equivalent to the <code>with</code> option of <code>ocp-indent</code>, and they will be set if <code>with</code> is set in an <code>ocp-indent</code> configuration file.
If the indentation is set to 4 columns, cases are formatted like this:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">foooooooo</span> = <span style="color: #a020f0;">function</span>
    | fooooooooooooooooooooooo -&gt; foooooooooooooooooooooooooo

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">foooooooo</span> =
  <span style="color: #a020f0;">match</span> fooooooooooooooooooooooo <span style="color: #a020f0;">with</span>
      | fooooooooooooooooooooooo -&gt; foooooooooooooooooooooooooo
</pre>
</div>

<p>
The new options <code>function-indent-nested</code> and <code>match-indent-nested</code> respectively decide whether the <code>function-indent</code> and the <code>match-indent</code> parameters should be applied even when in a sub-block. If these options are set to <code>never</code>, it only applies <code>function-indent</code> or <code>match-indent</code> if the function or match block starts a line. If these options are set to <code>always</code>, then the indent parameters are always applied. The <code>auto</code> value applies the indentation parameter when seen fit.
</p>

<p>
These options are equivalent to the <code>strict_with</code> option of <code>ocp-indent</code>, and they will be set if <code>strict_with</code> is set in an <code>ocp-indent</code> configuration file.
</p>
</div>
</li>

<li><a id="orgc4ecd58"></a>Indentation inside extension nodes<br />
<div class="outline-text-5" id="text-orgc4ecd58">
<p>
The new option <code>extension-indent</code> sets the indentation of items (that are not at structure level) inside extension nodes.
The new option <code>stritem-extension-indent</code> sets the indentation of structure items inside extension nodes. This option is equivalent to the <code>ppx_stritem_ext</code> option of <code>ocp-indent</code>, and it will be set if <code>ppx_stritem_ext</code> is set in an <code>.ocp-indent</code> configuration file.
</p>

<p>
For example if <code>extension-indent</code> is set to 5 and <code>stritem-extension-indent</code> is set to 3:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">foo</span> =
  <span style="color: #483d8b; background-color: #ebebeb;">[%foooooooooo</span>
       fooooooooooooooooooooooooooo foooooooooooooooooooooooooooooooooo
         foooooooooooooooooooooooooooo<span style="color: #483d8b; background-color: #ebebeb;">]</span>
  <span style="color: #483d8b;">[@@foooooooooo</span>
<span style="color: #483d8b;">       fooooooooooooooooooooooooooo foooooooooooooooooooooooooooooooooo</span>
<span style="color: #483d8b;">         foooooooooooooooooooooooooooo]</span>

<span style="color: #483d8b;">[@@@foooooooooo</span>
<span style="color: #483d8b;">   fooooooooooooooooooooooooooo foooooooooooooooooooooooooooooooooo</span>
<span style="color: #483d8b;">     foooooooooooooooooooooooooooo]</span>
</pre>
</div>
</div>
</li>

<li><a id="org696d519"></a>Let-binding indentation<br />
<div class="outline-text-5" id="text-org696d519">
<p>
The new option <code>let-binding-indent</code> sets the indentation of let binding expressions if they do not fit on a single line. This option is equivalent to the <code>base</code> option of <code>ocp-indent</code>.
The new option <code>indent-after-in</code> sets the indentation after <code>let ... in</code>, unless followed by another <code>let</code>. This option is equivalent to the <code>in</code> option of <code>ocp-indent</code>.
The new option <code>type-decl-indent</code> sets the indentation of type declarations if they do not fit on a single line. This option is equivalent to the <code>type</code> option of <code>ocp-indent</code>.
</p>

<p>
These options will be set if their <code>ocp-indent</code> counterparts are set in an <code>.ocp-indent</code> configuration file.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-org05c85a6" class="outline-4">
<h4 id="org05c85a6">Miscellaneous features</h4>
<div class="outline-text-4" id="text-org05c85a6">
<p>
This release also brings some new options, new values for existing features, or corrects erroneous behaviours.
</p>
</div>

<ul class="org-ul">
<li><a id="orgcb61c7d"></a>Indicate multiline delimiters<br />
<div class="outline-text-5" id="text-orgcb61c7d">
<p>
The former <code>indicate-multiline-delimiters</code> boolean option is now a 3-valued option:
</p>
<ul class="org-ul">
<li><code>indicate-multiline-delimiters=space</code> (was equivalent to <code>true</code>) prints a space inside the delimiter to indicate the matching one is on a different line.</li>
<li><code>indicate-multiline-delimiters=no</code> (was equivalent to <code>false</code>) doesn't do anything special to indicate the closing delimiter.</li>
<li><code>indicate-multiline-delimiters=closing-on-separate-line</code> is the new feature of this option, it makes sure that the closing delimiter is on its own line.</li>
</ul>

<p>
On this example we can see the closing parenthesis delimiting the nested pattern-matchings are on their own line and are aligned with the matching opening parenthesis:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> () =
   <span style="color: #a020f0;">match</span> v <span style="color: #a020f0;">with</span>
   | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; <span style="color: #000000; background-color: #ffffff;">None</span>
   | <span style="color: #000000; background-color: #ffffff;">Some</span> x -&gt;
       ( <span style="color: #a020f0;">match</span> x <span style="color: #a020f0;">with</span>
       | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; <span style="color: #000000; background-color: #ffffff;">None</span>
       | <span style="color: #000000; background-color: #ffffff;">Some</span> x -&gt;
           ( <span style="color: #a020f0;">match</span> x <span style="color: #a020f0;">with</span>
           | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; <span style="color: #000000; background-color: #ffffff;">None</span>
           | <span style="color: #000000; background-color: #ffffff;">Some</span> x -&gt; x
           )
       )
</pre>
</div>
</div>
</li>

<li><a id="orgea25e40"></a>Formatting of literal strings<br />
<div class="outline-text-5" id="text-orgea25e40">
<p>
<code>break-string-literals=newlines</code> now takes into account pretty-printing commands like <code>@,</code>, <code>@;</code> and <code>@\n</code> to produce more readable strings. A new value for this option has been added, <code>break-string-literals=newlines-and-wrap</code>, to break lines at newlines delimiters (including pretty-printing commands) and also wrap the string literals at the margin.
</p>

<p>
Here is how <code>break-string-literals=newlines-and-wrap</code> formats a string:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">fooooooooooo</span> =
  <span style="color: #8b2252;">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod \</span>
<span style="color: #8b2252;">   tempor incididunt ut labore et dolore magna aliqua.@;\</span>
<span style="color: #8b2252;">   Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi \</span>
<span style="color: #8b2252;">   ut aliquip ex ea commodo consequat.@;\</span>
<span style="color: #8b2252;">   Duis aute irure dolor in reprehenderit in voluptate velit esse cillum \</span>
<span style="color: #8b2252;">   dolore eu fugiat nulla pariatur.@;\</span>
<span style="color: #8b2252;">   Excepteur sint occaecat cupidatat non proident, sunt in culpa qui \</span>
<span style="color: #8b2252;">   officia deserunt mollit anim id est laborum."</span>
</pre>
</div>

<p>
<b>Warning:</b> the <code>break-string-literals</code> will likely be removed in the next release and the default behavior would be <code>newlines-and-wrap</code>.
</p>
</div>
</li>

<li><a id="org3439351"></a>Break before the <code>in</code> keyword<br />
<div class="outline-text-5" id="text-org3439351">
<p>
The new option <code>break-before-in</code> has been added to decide whether the line should break before the <code>in</code> keyword of a <code>let</code> binding. <code>break-before-in=fit-or-vertical</code> will always break the line before the <code>in</code> keyword if the whole <code>let</code> binding does not fit on a single line, it is still the default behavior. <code>break-before-in=auto</code> will only break the line if the <code>in</code> keyword does not fit on the previous line.
</p>

<p>
For example:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">_</span> =
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">short</span> = this is short <span style="color: #000000; font-weight: bold;">in</span>
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">fooo</span> =
    (this is very long) but (the <span style="color: #000000; font-weight: bold;">in</span> keyword can fit) on the same line <span style="color: #000000; font-weight: bold;">in</span>
  foooooo
</pre>
</div>
</div>
</li>

<li><a id="org873b03d"></a>Indentation of nested pattern-matching<br />
<div class="outline-text-5" id="text-org873b03d">
<p>
The new option <code>nested-match</code> defines the style of pattern-matchings nested in the last case of another pattern-matching. <code>nested-match=wrap</code> wraps the nested pattern-matching with parentheses and adds indentation, this is still the default behavior. <code>nested-match=align</code> vertically aligns the nested pattern-matching under the encompassing pattern-matching, for example:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> () =
  <span style="color: #a020f0;">match</span> v <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; <span style="color: #000000; background-color: #ffffff;">None</span>
  | <span style="color: #000000; background-color: #ffffff;">Some</span> x -&gt;
  <span style="color: #a020f0;">match</span> x <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">None</span> -&gt; <span style="color: #000000; background-color: #ffffff;">None</span>
  | <span style="color: #000000; background-color: #ffffff;">Some</span> x -&gt; x
</pre>
</div>

<p>
The new option <code>cases-matching-exp-indent</code> decides the indentation of cases right-hand sides which are <code>match</code> or <code>try</code> expressions. <code>cases-matching-exp-indent=compact</code> forces an indentation of 2, unless <code>nested-match</code> is set to <code>align</code> and this is the last case of the pattern matching. <code>compact</code> is the default behavior. <code>cases-matching-exp-indent=normal</code> indents as it would any other expression.
</p>
</div>
</li>

<li><a id="org6920551"></a>Whitelist of files to format<br />
<div class="outline-text-5" id="text-org6920551">
<p>
A new kind of configuration files is now handled by <code>ocamlformat</code>: <code>.ocamlformat-enable</code> files.
If the <code>disable</code> option is set, an <code>.ocamlformat-enable</code> file can list the files that <code>ocamlformat</code> should format even when the <code>disable</code> option is set. Each line in an <code>.ocamlformat-enable</code> file specifies a filename relative to the directory containing the <code>.ocamlformat-enable</code> file.
</p>

<p>
The <code>.ocamlformat-enable</code> files are using the same syntax as the <code>.ocamlformat-ignore</code> files: lines starting with <code>#</code> are ignored and can be used as comments.
</p>

<p>
These new configuration files do not contradict the existing <code>.ocamlformat-ignore</code> files, as <code>.ocamlformat-enable</code> are only considered when <code>disable</code> is set, and <code>.ocamlformat-ignore</code> are only considered when <code>disable</code> is not set.
</p>
</div>
</li>

<li><a id="orgfe6a054"></a>Disable outside detected project<br />
<div class="outline-text-5" id="text-orgfe6a054">
<p>
The <code>disable-outside-detected-project</code> option is now set by default.
</p>

<p>
When the option <code>--enable-outside-detected-project</code> is not set, <code>.ocamlformat</code> files outside of the project (including the one in <code>XDG_CONFIG_HOME</code>) are not read. The project root of an input file is taken to be the nearest ancestor directory that contains a .git or .hg or dune-project file. If no config file is found, formatting is disabled.
</p>
</div>
</li>

<li><a id="org196511f"></a>Space around collection-expressions<br />
<div class="outline-text-5" id="text-org196511f">
<p>
The former option <code>space-around-collection-expressions</code> that was deciding whether a space should be added inside the delimiters of collection expressions (lists, arrays, records, variants) has been replaced by 4 new options: <code>space-around-arrays</code>, <code>space-around-lists</code>, <code>space-around-records</code> and <code>space-around-variants</code>, to allow a finer grain customization.
</p>
</div>
</li>

<li><a id="orgbfe771c"></a>Fit-or-vertical mode for pattern matching<br />
<div class="outline-text-5" id="text-orgbfe771c">
<p>
The <code>break-cases</code> option that decides the shape of pattern matching has a new value <code>fit-or-vertical</code>. <code>break-cases=fit-or-vertical</code> tries to fit all or-patterns on the same line, otherwise breaks each or-pattern (they are wrapped in other modes).
For example if this set of or-patterns does not fit on a single line, we get the following output:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">ffffff</span> =
  <span style="color: #a020f0;">match</span> foooooooooooo <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">Aaaaaaaaaaaaaaaaa</span>
  | <span style="color: #000000; background-color: #ffffff;">Bbbbbbbbbbbbbbbbb</span>
  | <span style="color: #000000; background-color: #ffffff;">Ccccccccccccccccc</span>
  | <span style="color: #000000; background-color: #ffffff;">Ddddddddddddddddd</span>
  | <span style="color: #000000; background-color: #ffffff;">Eeeeeeeeeeeeeeeee</span> -&gt; foooooooooooooooooooo
  | <span style="color: #000000; background-color: #ffffff;">Fffffffffffffffff</span> -&gt; fooooooooooooooooo
</pre>
</div>
</div>
</li>

<li><a id="org312b6fc"></a>K&amp;R style for if-then-else<br />
<div class="outline-text-5" id="text-org312b6fc">
<p>
The <code>if-then-else</code> option now has a new value <code>k-r</code> that uses parentheses (when necessary) to reproduce a formatting close to the K&amp;R style. For example:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #a0522d;">_</span> =
  <span style="color: #a020f0;">if</span> b <span style="color: #a020f0;">then</span> (
    something loooooooooooooooooooooooooooooooong enough to_trigger a break ;
    this is more
  ) <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> b1 <span style="color: #a020f0;">then</span> (
    something loooooooooooooooooooooooooooooooong enough to_trigger a break ;
    this is more
  ) <span style="color: #a020f0;">else</span>
    e
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org2df498f" class="outline-4">
<h4 id="org2df498f">Breaking changes</h4>
<div class="outline-text-4" id="text-org2df498f">
<ul class="org-ul">
<li>the <code>indicate-multiline-delimiters</code> option is no longer a boolean option but now has 3 values: <code>space</code>, <code>no</code> and <code>closing-on-separate-line</code> that are detailed in this patch note.</li>
<li>the <code>disable-outside-detected-project</code> option is now set by default.</li>
<li>the <code>default</code> preset profile has been removed (it was equivalent to the <code>ocamlformat</code> profile with <code>break-cases=fit</code>).</li>
<li>the <code>space-around-collection-expressions</code> option has been replaced by 4 new options: <code>space-around-arrays</code>, <code>space-around-lists</code>, <code>space-around-records</code> and <code>space-around-variants</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc12e39c" class="outline-4">
<h4 id="orgc12e39c">What's next?</h4>
<div class="outline-text-4" id="text-orgc12e39c">
<p>
We strongly encourage our users to try out the <code>conventional</code> preset profile, as we plan to make it the default profile in a future release. This profile's purpose is to reproduce the most commonly encountered styles, and it may be more pleasing to the eye than the current default options.
</p>

<p>
As stated previously, the <code>break-string-literals</code> will likely be removed in the next release and the default behavior would be <code>newlines-and-wrap</code>.
</p>
</div>
</div>

<div id="outline-container-org64bd467" class="outline-4">
<h4 id="org64bd467">Credits</h4>
<div class="outline-text-4" id="text-org64bd467">
<p>
This release also contains many other changes and bug fixes that we cannot detail here.
</p>

<p>
We would like to thank our maintainers and contributors for this release: Jules Aguillon, Josh Berdine, Hugo Heuzard, Guillaume Petiot and Thomas Refis, and especially our industrial users Jane Street, Ahrefs and Nomadic Labs that made this work possible by funding this project and providing helpful contributions and feedback.
</p>

<p>
We would be happy to provide support for more customers, please contact us at contact@tarides.com
</p>

<p>
If you wish to get involved with OCamlFormat development or file an issue, please read the <a href="https://github.com/ocaml-ppx/ocamlformat/blob/master/CONTRIBUTING.md">contributing guide</a>, any contribution is welcomed.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-orgfa6ca02" class="outline-2">
<h2 id="3">Ocaml 4.09.0+beta1</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://sympa.inria.fr/sympa/arc/caml-list/2019-06/msg00054.html">https://sympa.inria.fr/sympa/arc/caml-list/2019-06/msg00054.html</a>
</p>
</div>

<div id="outline-container-orgfe8d587" class="outline-3">
<h3 id="orgfe8d587">Damien Doligez announced</h3>
<div class="outline-text-3" id="text-orgfe8d587">
<p>
The release of OCaml 4.09.0 is approaching. We have created
a beta version to help you prepare for the release.
</p>

<p>
The source code is available at these addresses:
</p>

<p>
<a href="https://github.com/ocaml/ocaml/archive/4.09.0+beta1.tar.gz">https://github.com/ocaml/ocaml/archive/4.09.0+beta1.tar.gz</a> <br />
<a href="https://caml.inria.fr/pub/distrib/ocaml-4.09/ocaml-4.09.0+beta1.tar.gz">https://caml.inria.fr/pub/distrib/ocaml-4.09/ocaml-4.09.0+beta1.tar.gz</a>
</p>

<p>
The compiler can also be installed as an OPAM switch with one of the
following commands.
</p>

<pre class="example">
opam switch create ocaml-variants.4.09.0+beta1 --repositories=default,beta=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>

<p>
or
</p>

<pre class="example">
opam switch create ocaml-variants.4.09.0+beta1+&lt;VARIANT&gt; --repositories=default,beta=git+https://github.com/ocaml/ocaml-beta-repository.git
</pre>

<p>
where you replace &lt;VARIANT&gt; with one of these:
</p>
<ul class="org-ul">
<li>afl</li>
<li>default_unsafe_string</li>
<li>flambda</li>
<li>fp</li>
<li>fp+flambda</li>
</ul>

<p>
We want to know about all bugs. Please report them here:
 <a href="https://github.com/ocaml/ocaml/issues">https://github.com/ocaml/ocaml/issues</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org8233b84" class="outline-2">
<h2 id="4">Parallel and distributed execution of command lines, pardi!</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-parallel-and-distributed-execution-of-command-lines-pardi/4015/1">https://discuss.ocaml.org/t/ann-parallel-and-distributed-execution-of-command-lines-pardi/4015/1</a>
</p>
</div>

<div id="outline-container-org160c5b5" class="outline-3">
<h3 id="org160c5b5">UnixJunkie announced</h3>
<div class="outline-text-3" id="text-org160c5b5">
<p>
I am pleased to announce the first release of pardi (which the community recently helped to debug):
</p>

<p>
<a href="https://github.com/UnixJunkie/pardi">https://github.com/UnixJunkie/pardi</a>
</p>

<p>
Pardi is a command line tool to parallelize programs which are not parallel;
provided that you can cut an input file into independent chunks.
</p>

<p>
For example, to compress a file in parallel using 1MB chunks:
</p>

<pre class="example">
pardi -d b:1048576 -m s -i &lt;YOUR_BIG_FILE&gt; -o &lt;YOUR_BIG_FILE&gt;.gz \
        -w 'xz -c -9 %IN &gt; %OUT'
</pre>

<p>
Using the right option, you can cut an input file by lines (e.g. SMI files),
by number of bytes (for binary files),
by separating lines verifying a regexp (quite generic)
or by a block separating line (e.g. MOL2/SDF/PDB file formats).
</p>

<p>
If processing a single record of your input file is too fine grained,
you can play with the -c option to reach better parallelization
(try 10,20,50,100,200,500,etc).
</p>

<pre class="example">
usage:
pardi ...
  {-i|--input} &lt;file&gt;: where to read from (default=stdin)
  {-o|--output} &lt;file&gt;: where to write to (default=stdout)
  {-n|--nprocs} &lt;int&gt;: max jobs in parallel (default=all cores)
  {-c|--chunks} &lt;int&gt;: how many chunks per job (default=1)
  {-d|--demux} {l|b:&lt;int&gt;|r:&lt;regexp&gt;|s:&lt;string&gt;}: how to cut input
  file into chunks (line/bytes/regexp/sep_line; default=line)
  {-w|--work} &lt;string&gt;: command to execute on each chunk
  {-m|--mux} {c|s|n}: how to mux job results in output file
(cat/sorted_cat/null; default=cat)
</pre>
</div>
</div>
</div>




<div id="outline-container-org794198b" class="outline-2">
<h2 id="5">Other OCaml News</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgf3c72f9" class="outline-3">
<h3 id="orgf3c72f9">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-orgf3c72f9">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="https://functionaljobs.com/jobs/9171-compiler-engineer-at-axoni">Compiler Engineer at Axoni (Full-time)</a></li>
<li><a href="https://ocsigen.github.io/blog/2019/06/25/graffiti/">Learn Eliom - Graffiti tutorial updated</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org58373fd" class="outline-2">
<h2 id="org58373fd">Old CWN</h2>
<div class="outline-text-2" id="text-org58373fd">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
