<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-04-28 Tue 14:42 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OCaml Weekly News</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style type="text/css">#table-of-contents h2 { display: none } .title { display: none } .authorname { text-align: right }</style>
<style type="text/css">.outline-2 {border-top: 1px solid black;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">OCaml Weekly News</h1>
<p>
<a href="http://alan.petitepomme.net/cwn/2020.04.21.html">Previous Week</a> <a href="http://alan.petitepomme.net/cwn/index.html">Up</a> <a href="http://alan.petitepomme.net/cwn/2020.05.05.html">Next Week</a>
</p>

<p>
Hello
</p>

<p>
Here is the latest OCaml Weekly News, for the week of April 21 to 28, 2020.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#1">opam 2.0.7 and 2.1.0 alpha</a></li>
<li><a href="#2">OCaml 4.11, release plan</a></li>
<li><a href="#3">ocamlformat pre-commit hook</a></li>
<li><a href="#4">New release of naboris 0.1.2</a></li>
<li><a href="#5">ANN: Releases of ringo</a></li>
<li><a href="#6">resto 0.2 released</a></li>
<li><a href="#7">Retrofitting Parallelism onto OCaml (research paper)</a></li>
<li><a href="#8">Multicore Update: April 2020, with a preprint paper</a></li>
<li><a href="#9">Why did Core remove polymorphic comparison operators in OCaml 4.10.0?</a></li>
<li><a href="#10">New release of js_of_ocaml 3.6.0</a></li>
<li><a href="#11">Other OCaml News</a></li>
<li><a href="#org478a1de">Old CWN</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgd7d1478" class="outline-2">
<h2 id="1">opam 2.0.7 and 2.1.0 alpha</h2>
<div class="outline-text-2" id="text-1">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-opam-2-0-7-and-2-1-0-alpha/5583/1">https://discuss.ocaml.org/t/ann-opam-2-0-7-and-2-1-0-alpha/5583/1</a>
</p>
</div>

<div id="outline-container-orgf907a25" class="outline-3">
<h3 id="orgf907a25">R. Boujbel announced</h3>
<div class="outline-text-3" id="text-orgf907a25">
<p>
We are pleased to announce the release of <a href="https://github.com/ocaml/opam/releases/tag/2.0.7">opam 2.0.7</a> and an
<a href="https://github.com/ocaml/opam/releases/tag/2.1.0-alpha">2.1.0 alpha</a>.
</p>

<p>
This 2.0.7 version contains backported fixes, you can find more information in this <a href="https://opam.ocaml.org/blog/opam-2-0-7">blog
post</a>.
</p>

<p>
The 2.1.0~alpha contains many new features (cf. <a href="https://opam.ocaml.org/blog/opam-2-1-0-alpha/">blog post</a> or
<a href="https://github.com/ocaml/opam/releases/tag/2.1.0-alpha">release note</a>). If you want to take a look, a few glitches
or regressions are expected, please report them to <a href="https://github.com/ocaml/opam/issues">the bug-tracker</a>.
</p>

<p>
<b>opam is a source-based package manager for OCaml. It supports multiple simultaneous compiler installations, flexible package constraints, and a Git-friendly development workflow.</b>
</p>
</div>
</div>


<div id="outline-container-orgc462585" class="outline-3">
<h3 id="orgc462585">Anil Madhavapeddy then added</h3>
<div class="outline-text-3" id="text-orgc462585">
<p>
Thanks for all the hard work that's gone into this release, @rjbou @AltGr and @dra27!
</p>

<p>
To set expectations, this alpha release is for our users to smoke test the new features and let us know if they work
for your usecases.
</p>

<p>
In particular, the opam external dependency management and support for recursive pins are both commonly requested
features. Please do take this alpha for a spin, and report feedback here on this thread.
</p>

<p>
After this alpha is cut, there will be a sequence of beta releases (the number of which depend on the reported bug
tail), and then the final opam 2.1.0 release. Your testing <span class="underline">now</span> will greatly help us put a quality release out of
the door.
</p>
</div>
</div>
</div>




<div id="outline-container-org0219b88" class="outline-2">
<h2 id="2">OCaml 4.11, release plan</h2>
<div class="outline-text-2" id="text-2">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ocaml-4-11-release-plan/5600/1">https://discuss.ocaml.org/t/ocaml-4-11-release-plan/5600/1</a>
</p>
</div>

<div id="outline-container-org9ba4712" class="outline-3">
<h3 id="org9ba4712">octachron announced</h3>
<div class="outline-text-3" id="text-org9ba4712">
<p>
The new version of OCaml, OCaml 4.11.0, has started its bugfix period: the set of new features is now mostly frozen,
and in the three upcoming months, we will focus mostly on fixing bugs.
</p>

<p>
For this release cycle, we will experiment releasing an alpha version of the compiler.
</p>

<p>
This new alpha version is expected to work as a synchronization point for people working on updating the opam
ecosystem for the new release. Once the opam ecosystem is in shape for some wider audience testings, we will publish
a beta version as usual. This should be happen around June.
</p>

<p>
One of the most notable change in this release is <code>Statmemprof</code>, a new statistical memory profiler directly
integrated into the GC.
</p>

<p>
The provisional Changes list is <a href="https://github.com/ocaml/ocaml/blob/4.11/Changes">here</a>.
</p>

<p>
At this point of time, it is better to take this list with a grain of salt: there are a handful of new features that
are still under integration, problematic features might be removed, and of course the list of bug fixes is
incomplete.
</p>

<p>
But one of the most notable feature in this change log, <code>Statmemprof</code> which a new statistical memory profiler API, is
most probably here to stay.
</p>
</div>
</div>


<div id="outline-container-orgb09411b" class="outline-3">
<h3 id="orgb09411b">Guillaume Munch-Maccagnoni then added</h3>
<div class="outline-text-3" id="text-orgb09411b">
<p>
It should be mentioned that Memprof is documented as “~EXPERIMENTAL~”, and at least one breaking change is being
considered in 4.12. This also mean that suggestion for improvement will be welcome (AFAIU).
</p>
</div>
</div>
</div>




<div id="outline-container-org9d06360" class="outline-2">
<h2 id="3">ocamlformat pre-commit hook</h2>
<div class="outline-text-2" id="text-3">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-ocamlformat-pre-commit-hook/5602/1">https://discuss.ocaml.org/t/ann-ocamlformat-pre-commit-hook/5602/1</a>
</p>
</div>

<div id="outline-container-org7079ced" class="outline-3">
<h3 id="org7079ced">Brendan Long announced</h3>
<div class="outline-text-3" id="text-org7079ced">
<p>
This is kind of trivial but I figured it might be useful for other people. We created a hook config for using
<a href="https://github.com/ocaml-ppx/ocamlformat#ocamlformat">ocamlformat</a> with <a href="https://pre-commit.com/">pre-commit</a>:
</p>

<p>
<a href="https://github.com/arenadotio/pre-commit-ocamlformat">https://github.com/arenadotio/pre-commit-ocamlformat</a>
</p>

<p>
pre-commit is a tool that makes it easier to run checks on changed files before commiting them, and this makes it so
you can auto-run ocamlformat and ensure no unformatted code gets into your repo.
</p>

<ol class="org-ol">
<li><a href="https://pre-commit.com/#install">Install pre-commit</a> like <code>pip install pre-commit</code></li>
<li><p>
In your repo, add a .pre-commit-config.yaml like:
</p>
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #b22222;">---</span>
<span style="color: #a0522d;">repos</span>:
  - <span style="color: #a0522d;">repo</span>: https://github.com/arenadotio/pre-commit-ocamlformat
    <span style="color: #a0522d;">rev</span>: master <span style="color: #b22222;"># </span><span style="color: #b22222;">or pick a commit sha I guess</span>
    <span style="color: #a0522d;">hooks</span>:
     - <span style="color: #a0522d;">id</span>: ocamlformat
</pre>
</div></li>
</ol>
<ol class="org-ol">
<li>Run <code>pre-commit install</code></li>
<li><p>
Now every time you run <code>git commit</code> (or <code>pre-commit run</code>), it will run every staged OCaml file through ocamlformat and complain if there are any changes:
</p>
<div class="org-src-container">
<pre class="src src-shell">$ pre-commit run ocamlformat
ocamlformat.....Failed
- hook id: ocamlformat
- files were modified by this hook
$ git add .
$ pre-commit run ocamlformat
ocamlformat.....Passed
</pre>
</div></li>
</ol>
</div>
</div>
</div>




<div id="outline-container-org50178b5" class="outline-2">
<h2 id="4">New release of naboris 0.1.2</h2>
<div class="outline-text-2" id="text-4">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-release-of-naboris-0-1-2/5604/1">https://discuss.ocaml.org/t/ann-new-release-of-naboris-0-1-2/5604/1</a>
</p>
</div>

<div id="outline-container-org879dad7" class="outline-3">
<h3 id="org879dad7">Shawn McGinty announced</h3>
<div class="outline-text-3" id="text-org879dad7">
<p>
Simple http server for OCaml/ReasonML.
</p>

<p>
<a href="https://naboris.dev">naboris</a> has been updated to 0.1.2
</p>

<p>
This release comes with a few improvements to the API but most notably it has much better documentation at
<a href="https://naboris.dev">naboris.dev</a>
</p>
</div>
</div>
</div>




<div id="outline-container-orgbf78a74" class="outline-2">
<h2 id="5">ANN: Releases of ringo</h2>
<div class="outline-text-2" id="text-5">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-releases-of-ringo/5605/1">https://discuss.ocaml.org/t/ann-releases-of-ringo/5605/1</a>
</p>
</div>

<div id="outline-container-org632af22" class="outline-3">
<h3 id="org632af22">Raphaël Proust announced</h3>
<div class="outline-text-3" id="text-org632af22">
<p>
On behalf of Nomadic Labs, I am please to announce the first few releases of Ringo: a library for caches. Ringo
offers two kinds of caches: Maps for caches of key-value pairs and Sets for caches of simple elements. In addition,
each kind of cache can be tweaked to handle their bounds differently.
</p>

<p>
Ringo versions 0.1, 0.2 and 0.3 are available on <code>opam</code>. As the version number and the bundled announce suggests,
this library is still in early phases of release: additional replacement policies will be added, the interface will
probably change somewhat, etc. Suggestions welcome!
</p>

<p>
Even though the interface is still in early phases of release, the implementation is covered by a lot of tests and is
already in use in the Tezos project.
</p>

<p>
The code is available at <a href="https://gitlab.com/nomadic-labs/ringo">https://gitlab.com/nomadic-labs/ringo</a>
</p>
</div>
</div>
</div>




<div id="outline-container-orgffe4523" class="outline-2">
<h2 id="6">resto 0.2 released</h2>
<div class="outline-text-2" id="text-6">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-resto-0-2-released/5028/3">https://discuss.ocaml.org/t/ann-resto-0-2-released/5028/3</a>
</p>
</div>

<div id="outline-container-orgf4bb6c8" class="outline-3">
<h3 id="orgf4bb6c8">Raphaël Proust announced</h3>
<div class="outline-text-3" id="text-orgf4bb6c8">
</div>
<div id="outline-container-orgf83e272" class="outline-4">
<h4 id="orgf83e272">Release of <code>resto 0.5</code></h4>
<div class="outline-text-4" id="text-orgf83e272">
<p>
On behalf of Nomadic Labs, I'm happy to announce the release of version 0.5 of <code>resto</code>.
</p>

<p>
The main change brought in this release are:
</p>
<ul class="org-ul">
<li>relaxing of dependency bounds,</li>
<li>documentation!</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-orgc36276c" class="outline-2">
<h2 id="7">Retrofitting Parallelism onto OCaml (research paper)</h2>
<div class="outline-text-2" id="text-7">
<p>
Archive: <a href="https://discuss.ocaml.org/t/retrofitting-parallelism-onto-ocaml-research-paper/5628/1">https://discuss.ocaml.org/t/retrofitting-parallelism-onto-ocaml-research-paper/5628/1</a>
</p>
</div>

<div id="outline-container-orgc09f28c" class="outline-3">
<h3 id="orgc09f28c">Guillaume Munch-Maccagnoni announced</h3>
<div class="outline-text-3" id="text-orgc09f28c">
<p>
The following paper on the multicore GC design by @kayceesrk and his coauthors has been posted on arXiv today and
might interest the community:
<a href="https://arxiv.org/abs/2004.11663">https://arxiv.org/abs/2004.11663</a>
</p>
</div>
</div>
</div>




<div id="outline-container-org867fde2" class="outline-2">
<h2 id="8">Multicore Update: April 2020, with a preprint paper</h2>
<div class="outline-text-2" id="text-8">
<p>
Archive: <a href="https://discuss.ocaml.org/t/multicore-update-april-2020-with-a-preprint-paper/5630/1">https://discuss.ocaml.org/t/multicore-update-april-2020-with-a-preprint-paper/5630/1</a>
</p>
</div>

<div id="outline-container-orgd2db07f" class="outline-3">
<h3 id="orgd2db07f">Anil Madhavapeddy announced</h3>
<div class="outline-text-3" id="text-orgd2db07f">
<p>
Welcome to the April 2020 update from the Multicore OCaml team, across the UK, India, France and Switzerland!
Although most of us are in lockdown, we continue to march forward.  As with <a href="https://discuss.ocaml.org/tag/multicore-monthly">previous
updates</a>, thanks to @shakthimaan and @kayceesrk for help assembling
it all.
</p>
</div>

<ul class="org-ul">
<li><a id="org2e6ba99"></a>Preprint: Retrofitting Parallelism onto OCaml<br />
<div class="outline-text-5" id="text-org2e6ba99">
<p>
We've put up a preprint of a paper titled <a href="https://arxiv.org/abs/2004.11663">"Retrofitting Parallelism onto OCaml" </a> for which we would be grateful to receive feedback.  The paper lays out the problem space for the multicore extension
of OCaml  and presents the design choices, implementation and evaluation of the  concurrent garbage collector (GC).
</p>

<p>
Note that this is <b>not a final paper</b> as it is currently under peer review, so any feedback given now can still be
incorporated.  Please use the e-mail contact details in the <a href="https://arxiv.org/pdf/2004.11663.pdf">pdf paper</a> for
@kayceesrk and myself so we can aggregate (and acknowledge!) any such comments.
</p>
</div>
</li>

<li><a id="orgea3a09d"></a>Rebasing Progress<br />
<div class="outline-text-5" id="text-orgea3a09d">
<p>
The Multicore OCaml rebase from 4.06.1 has gained momentum.  We have successfully rebased the parallel-minor-GC all
the way onto the <a href="https://github.com/ocaml-multicore/ocaml-multicore/tree/parallel_minor_gc_4_09">4.09 OCaml trees</a>.
We will publish updated opam packages when we get to the recently branched 4.11 in the next couple of weeks.
</p>

<p>
Rebasing complex features like this is a "slow and steady" process due to the number of intermediate conflicts and
bootstrapping, so we will not be publishing opam packages for every intermediate version &#x2013; instead, the 4.11 trees
will form the new "stable base" for any PRs.
</p>
</div>
</li>

<li><a id="org25334db"></a>Higher-level Domainslib API<br />
<div class="outline-text-5" id="text-org25334db">
<p>
A thread from <a href="https://discuss.ocaml.org/t/multicore-ocaml-march-2020-update/5406/8">last month's update</a> on building
a parallel raytracer led to some useful advancements in the
<a href="https://github.com/ocaml-multicore/domainslib">domainslib</a> library to provide async/await-style task support. See
the updates below for more details.
</p>

<p>
There is also an interesting discussion on
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/324">ocaml-multicore/ocaml-multicore#324</a> about how to go
about profiling and optimising your own small programs.  More experiments with parallel algorithms with different
scheduling properties would be most useful at this time.
</p>
</div>
</li>

<li><a id="orga8db401"></a>Upstreamed features in 4.11<br />
<div class="outline-text-5" id="text-orga8db401">
<p>
The <a href="https://discuss.ocaml.org/t/ocaml-4-11-release-plan/5600">4.11 release has recently branched</a> and has the
following multicore-relevant changes in it:
</p>

<ul class="org-ul">
<li>A concurrency-safe marshalling implementation (originally in <a href="https://github.com/ocaml/ocaml/pull/9293">ocaml#9293</a>, then implemented again in <a href="https://github.com/ocaml/ocaml/pull/9353">ocaml#9353</a>). This will have a slight speed hit to marshalling-heavy programs, so feedback on trying this in your projects with 4.11 will be appreciated to the upstream OCaml issue tracker.</li>
<li>A runtime eventlog tracing system using the CTF format is on the verge of being merged in 4.11 over in <a href="https://github.com/ocaml/ocaml/pull/9082">ocaml#9082</a>.  This will also be of interest to those who need sequential program profiling, and is a generalisation of the infrastructure that was essential to our development of the multicore GC.  If anyone is interested in helping with hacking on the OCaml side of CTF support to build clients, please get in touch with me or @kayceesrk.</li>
</ul>

<p>
In addition to the above highlights, we have also been making continuous improvements and additions to the Sandmark
benchmarking test infrastructure. The various ongoing and completed tasks are provided below for your reference.
</p>
</div>
</li>
</ul>

<div id="outline-container-org69818bf" class="outline-4">
<h4 id="org69818bf">Multicore OCaml</h4>
<div class="outline-text-4" id="text-org69818bf">
</div>
<ul class="org-ul">
<li><a id="org0b49f57"></a>Ongoing<br />
<div class="outline-text-5" id="text-org0b49f57">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/tree/parallel_minor_gc_4_09">ocaml-multicore/ocaml-multicore</a> Promote Multicore OCaml to trunk
</p>

<p>
The rebasing of Multicore OCaml from 4.06 to 4.10 is being worked, and we are now at 4.09! In a few weeks, we expect to complete the rebase to the latest trunk release.
</p></li>
<li><p>
<a href="https://github.com/ocaml-multicore/eventlog-tools">ocaml-multicore/eventlog-tools</a>: OCaml Eventlog Tools
</p>

<p>
A project that provides a set of tools for runtime tracing for OCaml 4.11.0 and higher has been created. This includes a simple OCaml decoder for eventlog's trace and a built-in chrome converter tool.
</p></li>
<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/pull/5">ocaml-multicore/domainslib#5</a> Add parallel_scan to domainslib
</p>

<p>
A <a href="https://en.wikipedia.org/wiki/Prefix_sum#Shared_memory:_Two-level_algorithm">parallel_scan</a>  implementation that uses the Task API with prefix_sum and summed_area_table has now been added to the Domain-level Parallel Programming library for Multicore OCaml (domainslib) library.
</p></li>
</ul>
</div>
</li>

<li><a id="org7ee7fce"></a>Completed<br />
<div class="outline-text-5" id="text-org7ee7fce">
<p>
The following PRs have been merged into Multicore OCaml and its ecosystem projects:
</p>

<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/328">ocaml-multicore/ocaml-multicore#328</a>
Multicore compiler with Flambda
</p>

<p>
Support for Flambda has been merged into the Multicore OCaml project repository. The translation is now performed at cmmgen instead of lambda for clambda conversion.
</p></li>
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/324">ocaml-multicore/ocaml-multicore#324</a>
Optimizing a Multicore program
</p>

<p>
The following <a href="https://github.com/ocaml-multicore/ocaml-multicore/issues/324#issuecomment-610183856">documentation</a> provides a detailed example on how to do performance debugging for a Multicore program to improve the runtime performance.
</p></li>
<li><p>
<a href="https://github.com/ocaml-multicore/ocaml-multicore/pull/325">ocaml-multicore/ocaml-multicore#325</a>
Added eventlog_to_latencies.py script
</p>

<p>
A script to generate a latency report from an eventlog has now been  included in the ocaml-multicore repository.
</p></li>
<li><p>
<a href="https://github.com/ocaml-multicore/domainslib/pull/4">ocaml-multicore/domainslib#4</a>
Add support for task_pools
</p>

<p>
The domainslib library now has support for work-stealing task pools with async/await parallelism. You are encouraged to try the <a href="https://github.com/ocaml-multicore/domainslib/tree/task_pool/test">examples</a>.
</p></li>
</ul>
</div>
</li>
</ul>
</div>

<div id="outline-container-org04cf71c" class="outline-4">
<h4 id="org04cf71c">Benchmarking</h4>
<div class="outline-text-4" id="text-org04cf71c">
<p>
A number of new benchmarks are being ported to the <a href="https://github.com/ocaml-bench/sandmark">Sandmark</a> performance
benchmarking test suite.
</p>

<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/104">ocaml-bench/sandmark#104</a>
Added python pip3 dependency
</p>

<p>
A check_dependency function has now been defined in the Makefile along with a list of dependencies and pip packages for Ubuntu. You can now run <code>make depend</code> prior to building the benchmark suite to ensure that you have the required software. The <code>python3-pip</code> package has been added to the list of dependencies.
</p></li>
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/issues/96">ocaml-bench/sandmark#96</a>
Sandmark Analyze notebooks
</p>

<p>
The setup, builds and execution scripts for developer branches on bench2.ocamllabs.io have been migrated to winter.ocamllabs.io.
</p>

<p>
A UI and automated script driven notebooks for analyzing sequential bench results is being worked upon.
</p></li>
<li><p>
<a href="https://github.com/ocaml-bench/sandmark/pull/108">ocaml-bench/sandmark#108</a>
Porting mergesort and matrix multiplication using Task Pool API library
</p>

<p>
This is an on-going PR to implement merge sort and matrix_multiplication using <code>parallel_for</code>.
</p></li>
<li><p>
<a href="https://github.com/Sudha247/cubicle/tree/add-multicore">cubicle</a>
</p>

<p>
<code>Cubicle</code> is a model checker and an automatic SMT theorem prover. At present, it is being ported to Multicore OCaml, and this is a work in progress.
</p></li>
<li><p>
<a href="https://github.com/athas/raytracers/pull/6">raytracers</a>
</p>

<p>
Raytracers is a repository that contains ray tracer implementation for different parallel functional programming languages. The OCaml implementation has now been updated to use the new <code>Domainslib.Task</code> API.
</p>

<p>
Also, a few <a href="https://github.com/kayceesrk/raytracers/blob/flambda/ocaml/myocamlbuild.ml">experiments</a> were performed on flambda parameters for the Multicore raytracer which gives around 25% speedup, but it does not yet remove the boxing of floats. The experiments are to be repeated with a merge against the wip flambda2 trees on 4.11, that removes float boxing.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgac72a60" class="outline-4">
<h4 id="orgac72a60">OCaml</h4>
<div class="outline-text-4" id="text-orgac72a60">
</div>
<ul class="org-ul">
<li><a id="org3dcb7fd"></a>Ongoing<br />
<div class="outline-text-5" id="text-org3dcb7fd">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml/ocaml/pull/9082">ocaml/ocaml#9082</a>
Eventlog tracing system
</p>

<p>
A substantial number of commits have gone into this PR based on reviews and feedback. These include updates to the configure script, handling warnings and exceptions, adding build support for Windows, removing unused code and coding style changes. This patch will be cherry-picked for the 4.11 release.
</p></li>
</ul>
</div>
</li>

<li><a id="org2e6b1bf"></a>Completed<br />
<div class="outline-text-5" id="text-org2e6b1bf">
<ul class="org-ul">
<li><p>
<a href="https://github.com/ocaml/ocaml/pull/9353">ocaml/ocaml#9353</a>
Reimplement <code>output_value</code> using a hash table to detect sharing
</p>

<p>
This PR which implements a hash table and bit vector as required for Multicore OCaml has been merged to 4.11.
</p></li>
</ul>

<p>
Our thanks as always go to all the OCaml developers and users in the community for their continued support, and
contribution to the project!
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgf1cf46f" class="outline-4">
<h4 id="orgf1cf46f">Acronyms</h4>
<div class="outline-text-4" id="text-orgf1cf46f">
<ul class="org-ul">
<li>API: Application Programming Interface</li>
<li>GC: Garbage Collector</li>
<li>PIP: Pip Installs Python</li>
<li>PR: Pull Request</li>
<li>SMT: Satisfiability Modulo Theories</li>
<li>UI: User Interface</li>
</ul>
</div>
</div>
</div>
</div>




<div id="outline-container-org0ab994f" class="outline-2">
<h2 id="9">Why did Core remove polymorphic comparison operators in OCaml 4.10.0?</h2>
<div class="outline-text-2" id="text-9">
<p>
Archive: <a href="https://discuss.ocaml.org/t/why-did-core-remove-polymorphic-comparison-operators-in-ocaml-4-10-0/5633/1">https://discuss.ocaml.org/t/why-did-core-remove-polymorphic-comparison-operators-in-ocaml-4-10-0/5633/1</a>
</p>
</div>

<div id="outline-container-org5298f42" class="outline-3">
<h3 id="org5298f42">Trung Ta asked</h3>
<div class="outline-text-3" id="text-org5298f42">
<p>
I'm using the Core library in a project, and recently when I upgraded my OCaml from 4.08.1 to 4.10.0, plenty of
compilation errors suddenly appears for comparison expressions like:
</p>

<p>
<code>if (xs = []) then ...</code>   or  <code>if (x = true) then ...</code>
</p>

<p>
I saw that this change was discussed in this
<a href="https://discuss.ocaml.org/t/monomorphic-comparison-operator-of-janestreet-base-library/1585">thread</a> about
monomorphic comparison operators in Base, but did not expect that Core would make it a default behavior.
</p>

<p>
So I'd like to ask since which version that Core removed such polymorphic comparison operators?
(I couldn't find it in release notes of Core)
</p>

<p>
Also, if I defined a sum type like <code>type ternary = True | False | Unkn</code>, what will be a correct way to write <code>if (x =
True) then ...</code> (which is allowed in the new Core)?
</p>

<p>
I can temporarily fix by writing <code>if (x == True) then ...</code>, but using <code>==</code> doesn't seem correct, since <code>==</code> is about
comparing physical objects&#x2026;
</p>

<p>
Thanks for spending your time to check my question.
</p>
</div>
</div>


<div id="outline-container-org14934e6" class="outline-3">
<h3 id="org14934e6">Aaron L. Zeng replied</h3>
<div class="outline-text-3" id="text-org14934e6">
<p>
The change was announced in <a href="https://discuss.ocaml.org/t/ann-v0-13-release-of-jane-street-packages/4735">https://discuss.ocaml.org/t/ann-v0-13-release-of-jane-street-packages/4735</a>, although
unfortunately it doesn't look like the CHANGES.md file was updated in the repo.  I would consider the thread to be
the canonical announcement.
</p>

<blockquote>
<p>
Also, if I defined a sum type like <code>type ternary = True | False | Unkn</code> , what will be a correct way to write <code>if (x
= True) then ...</code> (which is allowed in the new Core)?
</p>
</blockquote>

<p>
Here's a few suggestions:
</p>

<ol class="org-ol">
<li><p>
Define equality/compare functions using <a href="https://github.com/janestreet/ppx_compare"><code>ppx_compare</code></a>
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">ternary</span> = <span style="color: #000000; background-color: #ffffff;">True</span> | <span style="color: #000000; background-color: #ffffff;">False</span> | <span style="color: #000000; background-color: #ffffff;">Unkn</span> <span style="color: #483d8b;">[@@deriving equal]</span>

<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">f</span> <span style="color: #a0522d;">x</span> = <span style="color: #a020f0;">if</span> (equal_ternary x <span style="color: #000000; background-color: #ffffff;">True</span>) <span style="color: #a020f0;">then</span> ...
</pre>
</div></li>
<li><p>
Define equality/compare functions manually
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">equal_ternary</span> <span style="color: #a0522d;">t1</span> <span style="color: #a0522d;">t2</span> =
  <span style="color: #a020f0;">match</span> t1, t2 <span style="color: #a020f0;">with</span>
  | <span style="color: #000000; background-color: #ffffff;">True</span>, <span style="color: #000000; background-color: #ffffff;">True</span> | <span style="color: #000000; background-color: #ffffff;">False</span>, <span style="color: #000000; background-color: #ffffff;">False</span> | <span style="color: #000000; background-color: #ffffff;">Unkn</span>, <span style="color: #000000; background-color: #ffffff;">Unkn</span> -&gt; <span style="color: #008b8b;">true</span>
  | _ -&gt; <span style="color: #008b8b;">false</span>
</pre>
</div></li>
<li><p>
Explicitly request polymorphic comparison operators using the <code>Poly</code> module:
</p>
<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">f</span> <span style="color: #a0522d;">x</span> = <span style="color: #a020f0;">if</span> (<span style="color: #228b22;">Poly.</span>(<span style="color: #0000ff;">=</span>) x <span style="color: #000000; background-color: #ffffff;">True</span>) <span style="color: #a020f0;">then</span> ...
</pre>
</div></li>
</ol>
</div>
</div>


<div id="outline-container-orgd743e61" class="outline-3">
<h3 id="orgd743e61">Trung said and Aaron L. Zeng replied</h3>
<div class="outline-text-3" id="text-orgd743e61">
<blockquote>
<p>
btw,
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #000000; font-weight: bold;">type</span> <span style="color: #228b22;">ternary</span> = <span style="color: #000000; background-color: #ffffff;">True</span> | <span style="color: #000000; background-color: #ffffff;">False</span> | <span style="color: #000000; background-color: #ffffff;">Unkn</span> <span style="color: #483d8b;">[@@deriving equal]</span>
</pre>
</div>

<p>
should be: <code>[@@deriving eq]</code>
</p>
</blockquote>

<p>
That depends on which preprocessor you are using.  <code>[@@deriving equal]</code> comes from ppx_compare, whereas <code>[@@deriving
eq]</code> comes from <a href="https://github.com/ocaml-ppx/ppx_deriving">ppx_deriving</a>.  Base/Core and the like have better
support for the former, which is a Jane Street project, although you can feel free to use the latter&#x2014;the naming
conventions are different, so it may not be as convenient.
</p>
</div>
</div>
</div>




<div id="outline-container-org879fe51" class="outline-2">
<h2 id="10">New release of js_of_ocaml 3.6.0</h2>
<div class="outline-text-2" id="text-10">
<p>
Archive: <a href="https://discuss.ocaml.org/t/ann-new-release-of-js-of-ocaml-3-6-0/5634/1">https://discuss.ocaml.org/t/ann-new-release-of-js-of-ocaml-3-6-0/5634/1</a>
</p>
</div>

<div id="outline-container-orgc0cfeaa" class="outline-3">
<h3 id="orgc0cfeaa">Hhugo announced</h3>
<div class="outline-text-3" id="text-orgc0cfeaa">
<p>
I'm pleased to announce the release <a href="https://github.com/ocsigen/js_of_ocaml">Js_of_ocaml</a> 3.6.0.
</p>

<p>
Js_of_ocaml is a compiler from OCaml bytecode to JavaScript. It makes it possible to run pure OCaml programs in
JavaScript environment like browsers and Node.js.
</p>

<p>
Try it <a href="https://ocsigen.org/js_of_ocaml/3.6.0/manual/files/toplevel/index.html">online</a>.
</p>

<p>
Notable changes:
</p>
<ul class="org-ul">
<li>The <code>js_of_ocaml</code> compiler now accepts sub-commands (link, build-runtime, build-fs, ..). The plan for future versions is to remove other binary (e.g. jsoo_link) and consolidate everything inside the <code>js_of_ocaml</code> binary itself.</li>
<li>The standard JavaScript runtime is now embedded in the compiler (findlib is no longer needed to locate it)</li>
<li>Add support for the Str library (Regular expressions and high-level string processing) shipped with the OCaml compiler</li>
<li>Change memory representation of <code>Int64.t</code> (you might need to update your JavaScript stubs)</li>
<li>Many bug fixes (thanks to many more tests)</li>
</ul>
</div>
</div>


<div id="outline-container-org0495b2e" class="outline-3">
<h3 id="org0495b2e">Kirill Alexander Khalitov asked and Hhugo replied</h3>
<div class="outline-text-3" id="text-org0495b2e">
<blockquote>
<p>
1 Does the project have roadmap?
</p>
</blockquote>

<p>
There is no official roadmap, the project evolves based on issues, requests and contributions.
You can take a look at some of the <a href="https://github.com/ocsigen/js_of_ocaml/issues?q=is:open+is:issue+label:enhancement">Github
issues</a>
</p>

<blockquote>
<p>
2 Is the project generally exists only for Ocsigen needs?
</p>
</blockquote>

<p>
js_of_ocaml is used by various projects, not only Ocsigen. See <a href="https://github.com/janestreet/bonsai">Bonsai</a>,
<a href="https://github.com/Sketch-sh/sketch-sh">sketch-sh</a> or <a href="https://github.com/jscoq/jscoq">jscoq</a> for instance.
</p>

<blockquote>
<p>
3 Will it be adopted for modern front-end development (commonjs/esmodules compatibility for working with existing
building tools ex. webpack, etc).
</p>
</blockquote>

<p>
Being more friendly with the JavaScript ecosystem as been discussed here and there in the past but little has been
done, possibly by lack of interest or use cases.
</p>

<blockquote>
<p>
4 Does the project competing with bucklescript?
</p>
</blockquote>

<p>
I don't think so. The two projects have different goals and different audience. One of Js_of_ocaml main goal is to
stay as close as possible to the official OCaml semantic, allowing to leverage existing OCaml libraries without any
modification.
</p>

<blockquote>
<p>
5 Why not to do ocaml to js compiler tools (based on js_of_ocaml and bucklescript experience) that combine possibility of using native ocaml and js libraries across back-end and front-end like implemented in Scala.js/Fable F#?
</p>
</blockquote>

<p>
I don't understand this question. I would expect both js_of_ocaml and bucklescript to be like Scala.js/Fable F# in
their own way.
</p>
</div>
</div>


<div id="outline-container-orgc49868a" class="outline-3">
<h3 id="orgc49868a">Kirill Alexander Khalitov then said</h3>
<div class="outline-text-3" id="text-orgc49868a">
<p>
I mean what Scala.js/Fable F# allows to use the most native libraries (not all) and JS ones (from npm registry or
from custom JS module) in one project (ex. front-end). But in case of js_of_ocaml we limited to native OCaml libs and
"HTML scripts" (not JS compatible modules). For bucklescript case we have whole JS ecosystem but have no access to
useful native libs from opam registry.
</p>
</div>
</div>


<div id="outline-container-org091e045" class="outline-3">
<h3 id="org091e045">Xavier Van de Woestyne replied</h3>
<div class="outline-text-3" id="text-org091e045">
<p>
In Js_of_OCaml, you can deal with JavaScript's module (and npm/yarn), using for example:
</p>

<div class="org-src-container">
<pre class="src src-ocaml"><span style="color: #b22222;">(* </span><span style="color: #b22222;">val require : string -&gt; 'a </span><span style="color: #b22222;">*)</span>
<span style="color: #000000; font-weight: bold;">let</span> <span style="color: #0000ff;">require</span> <span style="color: #a0522d;">module_name</span> =
  <span style="color: #000000; font-weight: bold;">let</span> <span style="color: #000000; font-weight: bold;">open </span><span style="color: #228b22;">Js.Unsafe</span> <span style="color: #000000; font-weight: bold;">in</span>
  fun_call
    (js_expr <span style="color: #8b2252;">"require"</span>)
    [|inject (<span style="color: #228b22;">Js.</span>string module_name)|]
</pre>
</div>
</div>
</div>
</div>




<div id="outline-container-orgf967ff4" class="outline-2">
<h2 id="11">Other OCaml News</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-org6945ba2" class="outline-3">
<h3 id="org6945ba2">From the ocamlcore planet blog</h3>
<div class="outline-text-3" id="text-org6945ba2">
<p>
Here are links from many OCaml blogs aggregated at <a href="http://ocaml.org/community/planet/">OCaml Planet</a>.
</p>

<ul class="org-ul">
<li><a href="http://math.andrej.com/2020/04/28/every-theorem-prover/">Every proof assistant</a></li>
<li><a href="http://www.ocamlpro.com/2020/04/21/opam-2-0-7-release/">opam 2.0.7 release</a></li>
<li><a href="http://www.ocamlpro.com/2020/04/21/opam-2-1-0-alpha-is-here/">opam 2.1.0 alpha is here!</a></li>
</ul>
</div>
</div>
</div>




<div id="outline-container-org478a1de" class="outline-2">
<h2 id="org478a1de">Old CWN</h2>
<div class="outline-text-2" id="text-org478a1de">
<p>
If you happen to miss a CWN, you can <a href="mailto:alan.schmitt@polytechnique.org">send me a message</a> and I'll mail it to you, or go take a look at <a href="http://alan.petitepomme.net/cwn/">the archive</a> or the <a href="http://alan.petitepomme.net/cwn/cwn.rss">RSS feed of the archives</a>.
</p>

<p>
If you also wish to receive it every week by mail, you may subscribe <a href="http://lists.idyll.org/listinfo/caml-news-weekly/">online</a>.
</p>

<div class="authorname">
<p>
<a href="http://alan.petitepomme.net/">Alan Schmitt</a>
</p>

</div>
</div>
</div>
</div>
</body>
</html>
